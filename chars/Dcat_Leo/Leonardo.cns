; Constants and state file.
; There are comments scattered through this file, so you may like to
; take a look if would like to learn more about the cns.

[Data]
life = 1000			;Amount of life to start with
power = 3000		;Amount of maximum power
attack = 100		;attack power (more is stronger)
defence =100		;defensive power (more is stronger)
fall.defence_up =50	;Percentage to increase defense everytime player is knocked down
liedown.time = 60		;Time which player lies down for, before getting up
airjuggle = 15		;Number of points for juggling
sparkno = 2			;Default hit spark number for HitDefs
guard.sparkno = s8000	;Default guard spark number
KO.echo = 0			;1 to enable echo on KO
volume = 255			;Volume offset (negative for softer)
IntPersistIndex = 60	;Variables with this index and above will not have their values
FloatPersistIndex = 40  ;reset to 0 between rounds or matches. There are 60 int variables,
  				;indexed from 0 to 59, and 40 float variables, indexed from 0 to 39.
  				;If omitted, then it defaults to 60 and 40 for integer and float
  				;variables repectively, meaning that none are persistent, i.e. all
  				;are reset. If you want your variables to persist between matches,
  				;you need to override state 5900 from common1.cns.
[Size]
xscale = .77	;Horizontal scaling factor.
yscale = .74;.75		;Vertical scaling factor.
ground.back = 15		;Player width (back, ground)
ground.front = 16		;Player width (front, ground)
air.back = 12		;Player width (back, air)
air.front = 12		;Player width (front, air)
height = 60			;Height of player (for opponent to jump over)
attack.dist = 160		;Default attack distance
proj.attack.dist = 90	;Default attack distance for projectiles
proj.doscale = 1;		;Set to 1 to scale projectiles too   
head.pos =  -5, -70;10,-80	;Approximate position of head
mid.pos = -2, -46		;Approximate position of midsection
shadowoffset = 0		;Number of pixels to vertically offset the shadow
draw.offset = 0,0		;Player drawing offset in pixels (x, y)

[Velocity]
walk.fwd  = 2.4		;Walk forward
walk.back = -2.2		;Walk backward
run.fwd  = 7,0;5.25, 0		;Run forward (x, y)
run.back = -5,-4	;Hop backward (x, y)
jump.neu = 0,-9;9.5		;Neutral jumping velocity (x, y)
jump.back = -3.55		;Jump back Speed (x, y)
jump.fwd = 3.5		;Jump forward Speed (x, y)
runjump.back = -2.55,-8.1;Running jump speeds (opt)
runjump.fwd = 4,-8.1	;.
airjump.neu = 0,-8.1	;.
airjump.back = -2.55	;Air jump speeds (opt)
airjump.fwd = 2.5		;.	;.

[Movement]
airjump.num = 0		;Number of air jumps allowed (opt)
airjump.height = 35	;Minimum distance from ground before you can air jump (opt)
yaccel = .5;.46;.44		;Vertical acceleration
stand.friction  = .85	;Friction coefficient when standing
crouch.friction = .82	;Friction coefficient when crouching

;---------------------------------------------------------------------------
;VARIABLES ( VAR / VARS INDEX)

;var(5) used for Intro Poses
;var(6) used for Guard Push 
;var(11) used for ShoulderSmash/Wall Hit variable recognition
;var(12) used for Floor Hit variable recognition
;var(14) used for Weak Special Command Recognition
;var(15) used for Weak/Medium/Heavy Special Command Recognition
;var(30) used for SUPER KO FINISH
;var(38) used to disallow throws
;var(50) used for Damage Scaling
;var(55) used for Super Cancel Recognition

;---------------------------------------------------------------------------
; Stand
[Statedef 0]
type = S
physics = S
sprpriority = 0

[State 0, RemoveExplod]; Super BG
type = Removeexplod 
trigger1=1
ID  =8507

[State 0, HELPER]
type=Helper
triggerall=!Time
trigger1=prevstateno=700
trigger2=prevstateno=710
helpertype=Normal
name="EVADE DELAY"
postype=P1
pos=0,0
stateno=715
id     =715
ownpal=1
size.height=50
size.ground.back=15
size.ground.front=15
persistent=0
ignorehitpause=1

[State 0, Width]
Type= Width
trigger1=1
edge=8,0

[State 0, RemoveExplod]; Super BG
type = Removeexplod 
trigger1 = time=0
anim = 8506
ID = 8506

[State 0, RemoveExplod]; Super BG
type = Removeexplod 
trigger1 = time=0
anim = 8508
ID = 8508

[State 0, 1]
type = ChangeAnim
trigger1 = Anim != 0 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0 ;Turn anim over
value = 0

[State 0, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 0, 3] ;Stop moving if low velocity or 4 ticks pass
type = VelSet
trigger1 = abs(vel x) < 2
trigger2 = Time = 4
x = 0

[State 0, 4] ;Are you dead?
type = ChangeState
trigger1 = !alive
value = 5050

;------------
; Walk
[Statedef 20]
type    = S
physics = S
sprpriority = 0

[State 20, RemoveExplod]; Super BG
type = Removeexplod 
trigger1=1
ID  =8507
[State 20, Width]
Type= Width
trigger1=1
edge=8,0

[State 20, VelSet]
type = Velset
trigger1 = animelem= 3
x = 2


[State 20, VelSet]
type = Velset
trigger1 = animelem= 6
x = 2

[State 20, 1]
type = VelSet
triggerall=var(10)!=1
trigger1 = command = "holdfwd"
x = const(velocity.walk.fwd.x)

[State 20, 2]
type = VelSet
triggerall=var(10)!=1
trigger1 = command = "holdback"
x = const(velocity.walk.back.x)

[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 20 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 20

[State 20, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 21 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 21

;---------------------------------------------------------------------------
; Jump Start
[Statedef 40]
type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1
facep2=1

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 40, 3]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = prevstateno = 100 ;RUN_FWD
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, Explod]; GROUND HIT DUST
type = explod 
trigger1 =animtime=0
anim=4022
ID =4022
pos = 0,5
postype = P1
facing = 1
vfacing = 1
bindtime = 1
removetime = 10
supermove = 999999999999999999999
pausemove = 999999999999999999999
scale = .55,.55
sprpriority =-1
ontop =0
ownpal = 1
removeongethit = 1
shadow =0

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; Jump Land
[Statedef 52]
type    = S
physics = S
ctrl = 0
anim = 47

[State 52, RemoveExplod]; Super BG
type = Removeexplod 
trigger1=1
ID  =8507
[State 52, 2]
type = VelSet
trigger1 = Time = 0
x = 0

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 3]
type = CtrlSet
trigger1 = Time = 3
value = 1

[State 52, Guard]
type= changestate
trigger1= inguarddist
trigger1= ctrl && command="holdback"
value= 120

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 52, Explod];Dust Puff 2
type = explod 
trigger1= time=1
anim = 8140
ID = 8140
pos = -25,-2 
postype = P1
facing = 1
vfacing = 1
;bindtime = -1
removetime = 17
supermove = 999999999999999999999 
pausemove = 999999999999999999999
scale = 1,1 
sprpriority = 9 
ontop = 1 
ownpal = 1 
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0

[State 52, Explod]; Dust Puff 1
type = explod 
trigger1= time=1
anim = 8130
ID = 8130
random= 0,5
pos = -8,-4 
postype = P1
facing = 1
vfacing = 1
;bindtime = -1
removetime = 17
supermove = 999999999999999999999 
pausemove = 999999999999999999999
scale = 1,1 
sprpriority = 9 
ontop = 1 
ownpal = 1
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0

[State 52, Explod]; GROUND HIT DUST
type = explod 
trigger1 = Time=1
anim = 4022
ID = 4022
pos = 0,0
postype = P1
facing = 1
vfacing = 1
bindtime = 1
removetime = 10
supermove = 999999999999999999999
pausemove = 999999999999999999999
scale = .55,.55
sprpriority =-1
ontop =0
ownpal = 1
removeongethit = 1
shadow =0
;---------------------------------------------------------------------------
;================CODE by ALCHEMIST=========================================
;-----------------------[Super-Jump]----------------------------------------
[Statedef 55]
type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State 55, 1]
type = VarSet
trigger1 = 1
sysvar(1) = 0

[State 55, 2]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 55, 3]
type = VarSet
triggerall=numtarget(420)<=0
trigger1 = command = "holdback"
sysvar(1) = -1

[State 55, 4]
type = VelSet
trigger1 = AnimTime = 0
x = 0
y = -.0040

[State 55, 5]
type=ChangeState
trigger1=!AnimTime
value=56
ctrl =1

[state 55, aftimg]
type = afterimage
trigger1=Time=0
time = 16
length = 13
paladd = 10, 10, 10
palmul = 1,1,1
palcontrast = 80,80,80
framegap = 5
trans = add1

[State 55, Explod]; Dash Dust
type = explod 
trigger1= Vel Y<=0
anim = 8120
ID = 8120
pos = 0,0
postype = P1
facing = 1
vfacing = 1
bindtime =1
removetime = 25
supermove = 999999999999999999999 
pausemove = 999999999999999999999
scale = 1,1 
sprpriority = 9 
ontop = 1
ownpal = 1
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0

[State 55, Explod]; Jump Land Dust
type = explod 
trigger1= Vel Y<=0
anim = 4022
ID = 4022
pos = 0,0
postype = P1
facing = 1
vfacing = 1
bindtime =1
removetime = 10
supermove = 999999999999999999999 
pausemove = 999999999999999999999
scale = .82,.82
sprpriority = 0
ontop = 0
ownpal = 1
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0
;--------------------------------------------------------------------------------
; Super Jump
[Statedef 56]
type = A
physics = A
Anim = 41
velset = 0,-12
ctrl = 1

[State 56, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S41,0
volume = 255
channel = 1

[State 56, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S40,0
volume =5

[State 56, 0]
type = VelAdd
triggerall = prevstateno=420
trigger1 = command = "holdfwd"||command="fwd"
trigger1 =Anim!= 42
x = 1

[State 56, 3]
type = VelSet
trigger1 = Anim = 42
trigger1 = Time = [0,5]
x = 5

[State 56, 4]
type = VelSet
trigger1 = Anim = 43
trigger1 = Time = [0,5]
x = -3.88

[State 56, 5]
type = ChangeAnim
trigger1 = sysvar(1) = 1
trigger1 = Time = [0,4]
value=42

[State 56, 6]
type = ChangeAnim
trigger1 = sysvar(1) = -1
trigger1 = Time = [0,4]
value = 43

[state 56, VelAdd]
type = VelAdd
trigger1 = Time > 30
x = 0
y = -.20

[State 56, 10]
type = turn
trigger1 = p2dist x < -4

[state 9000, End]
type = ChangeState
trigger1 = Pos Y >= 1
value = 52
ctrl
;---------------------------------------------
; RUN_FWD
[Statedef 100]
type    = S
physics = S
anim = 100
sprpriority = 1
ctrl=0

[State 100, 1]
type = VelSet
trigger1 = 1
x = const(velocity.run.fwd.x)

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 100, Jump]
type= changestate
trigger1= command="holdfwd" && command="holdup"
value= 40

[State 100,SuperJump]
type= changestate
trigger1= command = "super jump"
value= 55

[State 100, 4]
type = ChangeState
triggerall=1 
trigger1=command != "holdfwd"
trigger2 = Command = "holddown"
trigger3 = Command = "holdback"
value =101
;---------------
[Statedef 101]
type    = S
physics = S
sprpriority = 1
anim=101

[State 101, NO GUARD] 
type = AssertSpecial
trigger1 = 1
flag =noairguard
flag2=nocrouchguard
flag3=nostandguard

[state -3, aftimg]
type = afterimage
triggerall=prevstateno=100
trigger1 = time = 0
time = 16
length = 13
paladd = 10, 10, 10
palmul = 1,1,1
palcontrast = 80,80,80
framegap = 5
trans = add1

[State 101, 1]
type = VelSet
trigger1 = 1
x = .8*const(velocity.run.fwd.x)

[State -3, PlaySnd]
type = PlaySnd
triggerall=prevstateno=100
trigger1 = time = 0
value = S0,5
volume =155
channel=6

[State 101, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 101, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 101, Explod]; Dust Puff 1
type = explod 
triggerall=prevstateno=100
trigger1= time=0
anim = 8140
ID   = 8140
velocity=-2,0
pos = -2,floor(-3.5)
postype = P1
facing = 1
vfacing = 1
bindtime =1
removetime =17
supermove = 999999999999999999999 
pausemove = 999999999999999999999
scale = .6,.6
sprpriority = 9 
ontop = 1 
ownpal = 1
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0

[State 101, Explod]; Dust Puff 1
type = explod 
triggerall=prevstateno=100
trigger1= time=1
anim = 8140
ID   = 8140
velocity=-2,0
pos = 18,-4 
postype = P1
facing = 1
vfacing = 1
bindtime =1
removetime =17
supermove = 999999999999999999999 
pausemove = 999999999999999999999
scale = .8,.8 
sprpriority = 9 
ontop = 1 
ownpal = 1
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0

[State 101, Explod]; Dust Puff 1
type = explod 
triggerall=prevstateno=100
trigger1= time=2
anim = 8140
ID   = 8140
velocity=-2,0
pos = 26,-4 
postype = P1
facing = 1
vfacing = 1
bindtime =1
removetime = 17
supermove = 999999999999999999999 
pausemove = 999999999999999999999
scale = .85,.85
sprpriority = 9 
ontop = 1 
ownpal = 1
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0

[State -1, Crouching Light Punch]
type = ChangeState
value = 400
triggerall=1
triggerall=command="x"&&command="holddown"||command="down_x"
trigger1=time>=6

[State -1, Crouching Medium Punch]
type = ChangeState
value = 410
triggerall=1
triggerall=command="y"&&command="holddown"||command="down_y"
trigger1=time>=6

[State -1, Crouching Strong Punch]
type = ChangeState
value = 420
triggerall=1
triggerall=command="z"&&command="holddown"||command="down_z"
trigger1=time>=6

[State -1, Crouching Light Kick]
type = ChangeState
value = 430
triggerall=1
triggerall=command="a"&&command="holddown"||command="down_a"
trigger1=time>=6

[State -3, Crouching Medium Kick]
type = ChangeState
value = 440
triggerall=command="b"&&command="holddown"||command="down_b"
trigger1=1

[State -1, Crouching Strong Kick]
type = ChangeState
value = 450
triggerall=1
triggerall= command="c"&&command ="holddown"||command="down_c"
trigger1=time>=3

[State 101, END]
type = ChangeState
triggerall= time>10
trigger1 = time>10
trigger1 = command!= "holdfwd"
trigger2 = time>12
trigger2 = Command = "holddown"
trigger3 = time>12
trigger3 = Command = "holdback"
trigger4 = anim=101&&time>=10
trigger5 = animtime=0
value=890
ctrl =0

[State -1, Null]
type = Null
trigger1=1
trigger1=command ="down"||command ="downfwd"||command ="downback"||command ="holddown"

[State 0, CtrlSet]
type = CtrlSet
trigger1=1
trigger1=command="holddown"&&time<=10
value =0
;---------------
; RUN_BACK
[Statedef 105]
type    = A
physics = A
ctrl = 0
anim = 105
sprpriority = 1

[State 105, NO GUARD] 
type = AssertSpecial
trigger1 = 1
flag =noairguard
flag2=nocrouchguard
flag3=nostandguard

[State 105, 1] 
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 105, 1]
type = VelSet
trigger1 = Time = 0
x = const(velocity.run.back.x)
y = const(velocity.run.back.y)

[State 105, 2]
type = CtrlSet
trigger1 = Time = 2
value = 1

[State 105, 3]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 106
;---------------------------------------------------------------------------
; RUN_BACK2 (land)
[Statedef 106]
type    = S
physics = S
ctrl = 0
anim = 47

[State 106, NO GUARD] 
type = AssertSpecial
trigger1 = 1
flag =noairguard
flag2=nocrouchguard
flag3=nostandguard

[State 106, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 106, 2]
type = PosSet
trigger1 = Time = 0
y = 0
[State 106, Explod]; Dash Dust
type = explod 
trigger1= time=2
anim = 8140
ID = 8140
pos = -15,-2 
postype = P1
facing = 1
vfacing = 1
removetime = 17
supermove = 99999999999999999999
pausemove = 99999999999999999999
scale = 1,1 
sprpriority = 9
ontop = 1
ownpal = 1 
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0

[State 106, Explod]; Dash Dust
type = explod 
trigger1= time=3
anim = 8130
ID = 8130
pos = -35,-10
postype = P1
facing = 1
vfacing = 1
removetime = 17
supermove = 999999999999999999999
pausemove = 999999999999999999999
scale = 1,1 
sprpriority = 9
ontop = 1
ownpal = 1
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0

[State 106, 4]
type = ChangeState
trigger1 = Time = 7
value = 0
ctrl =1
;---------------------------------------------------------------------------
; Lose by Time Over
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0
[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
[State 170,1]
type = AssertSpecial 
triggerall= stateno=170
trigger1 = Time < 205
trigger1 = Roundstate=4
flag  = roundnotover
ignorehitpause=1
[State 170, UGH SHELL SHOCK]
type= Playsnd
trigger1 = AnimElemtime(5)=1
value= s11, 1
volume=255
;==============================
[State 170, Explod];Dizzy Stars
type = explod 
triggerall= anim=170
trigger1= animelemtime(3)=1
anim=5301
ID = 5305
pos = 0,floor(const(size.height)*(-.75))
postype = P1 
facing = 1
vfacing = 1
bindtime = -1
removetime = ifelse(anim=170, -1,0)
supermove = 999999999999999999999 
pausemove = 999999999999999999999
scale = 1,1
sprpriority = 8 
ontop = 1
ownpal = 1 
removeongethit = 0
ignorehitpause=1

;---------------------------------------------------------------------------
; Win state decider
; CNS difficulty: basic
[Statedef 180]
type = S

[State 180, 1]
type = ChangeState
triggerall = MatchOver
trigger1 = Time = 1
trigger1 = var(5) = [101,200]
value = 181

[State 180, 1]
type = VarRandom 
trigger1 = Time = 0
v = 5
range = 0,500


[State 180, 3]
type = ChangeState 
trigger1 = Time = 1
trigger1 = var(5) = [0,100]
value = 182


[State 180, 3]
type = ChangeState 
triggerall = !MatchOver
trigger1 = Time = 1
trigger1 = var(5) = [101,200]
value = 183


[State 180, 3]
type = ChangeState 
trigger1 = Time = 1
trigger1 = var(5) = [201,300]
value = 185


[State 180, 4]
type = ChangeState 
trigger1 = Time = 1
trigger1 = var(5) = [301,400]
value = 181


[State 180, 5]
type = ChangeState 
trigger1 = Time = 1
trigger1 = var(5) = [401,500]
value = 184

;---------------------------------------------------------------------------
; Win pose 1  :  COWABUNGA
[Statedef 181]
type = S
ctrl = 0
anim = 180
velset = 0,0
sprpriority=9

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 181, Turn]
type = Turn
Triggerall= anim!=20
trigger1 =Time=0&&FrontEdgeDist <=90&&Facing=1
value=1

[State 181, Turn]
type = Turn
Triggerall= anim!=20
trigger1 =Time=0&&FrontEdgeDist <=90&&Facing=-1
value=1

[State 181,NO LIFEBAR]
type = AssertSpecial 
triggerall=winko &&(enemy, alive!=1)
triggerall= Roundstate=3||Roundstate=4
trigger1 =1
flag  = nobardisplay
ignorehitpause=1

[State 181,1]
type = AssertSpecial 
triggerall= stateno=181
trigger1 = Time <300
trigger1 = Roundstate=4
flag  = roundnotover
flag2 = timerfreeze
ignorehitpause=1

[State 181, COWABUNGA]
type= Playsnd
triggerall=anim=180
trigger1 = AnimElemtime(12)=1
value= s4,14
volume=255

[State 181, WalkToCenter]
type= ChangeAnim
Triggerall=Time=0
trigger1 = Roundstate=4&& Facing = 1
trigger1 = BackEdgeDist <160
value=20

[State 181, VelSet]
type = VelSet
trigger1 =anim=20&&BackEdgeDist <=160&& Facing = 1
x=const(velocity.walk.fwd.x)


[State 181, VelSet]
type = VelSet
triggerall=anim=20
trigger1 =BackEdgeDist >=161&&Facing=1
x=0

[State 181, WalkToCenter]
type= ChangeAnim
trigger1 = anim=20&&Roundstate=4&& Facing = 1
trigger1 = BackEdgeDist >=161
value=ifelse((random>555),189,180)

;============================
[State 181, WalkToCenter]
type= ChangeAnim
Triggerall=Time=0
trigger1 = Roundstate=4&& Facing = -1
trigger1 = BackEdgeDist <160
value=20

[State 181, VelSet]
type = VelSet
trigger1 =anim=20&&BackEdgeDist <=160&& Facing = -1
x=const(velocity.walk.fwd.x)


[State 181, VelSet]
type = VelSet
triggerall=anim=20
trigger1 =BackEdgeDist >=161&&Facing=-1
x=0

[State 181, WalkToCenter]
type= ChangeAnim
trigger1 = anim=20&&Roundstate=4&& Facing = -1
trigger1 = BackEdgeDist >=161
value=ifelse((random>555),189,180)

;===============================
[State 181, Explod];WIN SCREEN
type = explod 
triggerall=anim=180
trigger1 = animelemtime(12)=1&& Facing = 1
anim=8502
ID = 8502
pos = 0,-115+(const(size.height)*(-1)) ;-125 
postype = P1 
facing = 1
vfacing = 1
bindtime = -1
removetime = 20 
supermove = 999999999999999999999 
pausemove = 999999999999999999999
scale = 1.4,1.2 
sprpriority = 8 
ontop = 0 
ownpal = 1 
removeongethit = 0
ignorehitpause=1

;===============================
[State 181, Explod];WIN SCREEN
type = explod 
triggerall=anim=180
trigger1 = animelemtime(12)=1&& Facing = -1
anim=8503
ID = 8503
pos = 0,-115+(const(size.height)*(-1))
postype = P1 
facing = 1
vfacing = 1
bindtime = -1
removetime = 20 
supermove = 999999999999999999999  
pausemove = 999999999999999999999
scale = 1.4,1.2
sprpriority = 8 
ontop = 0 
ownpal = 1 
removeongethit = 0
ignorehitpause=1

[State 181, JumpNoise]
type= Playsnd
triggerall=anim=189
trigger1 = AnimElemtime(4)=7
value= s40,0
volume=255

[State 181, HIYAAH]
type= Playsnd
triggerall=anim=189
trigger1 = AnimElemtime(3)=2
value= s6,12
volume=255
channel=0

[State 181, PlaySnd]
type = PlaySnd
triggerall=anim=189
trigger1 = animelem=2
value=s600,0
volume=100

[State 181, HIYAAH]
type= Playsnd
triggerall=anim=189
trigger1 = AnimElemtime(5)=0
value= s3025,0
volume=255

[State 181, RUN VEL3]
type = PosAdd
trigger1=anim=189
trigger1 = animelemtime(2)>=0
trigger1 = AnimElemtime(3) < 2
x=5

[State 181, Velocity]
type =VelSet
trigger1 = anim=189&&animelem>=5
x=3
y=-9

[State 181, ScreenBound]
type= ScreenBound
triggerall=anim=189
trigger1=animelemtime(5)>0
value = 0
movecamera= 0,0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 181,Assert]
type = AssertSpecial 
triggerall=anim=189
trigger1 = animelemtime(6)>=1
flag  = noshadow
ignorehitpause=1

[State 181, Explod]; Dash Dust
type = explod 
triggerall=anim=189
trigger1=animelemtime(5)=1
anim = 8120
ID = 8120
pos = 0,19
postype = P1
facing = 1
vfacing = 1
bindtime =1
removetime = 25
supermove = 999999999999999999999 
pausemove = 999999999999999999999
scale = 1,1 
sprpriority = 9 
ontop = 1
ownpal = 1
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0

[State 181, Explod]; Jump Land Dust
type = explod 
triggerall=anim=189
trigger1=animelemtime(5)=1
anim=4022
ID = 4022
pos = 0,19
postype = P1
facing = 1
vfacing = 1
bindtime =1
removetime = 10
supermove = 999999999999999999999 
pausemove = 999999999999999999999
scale = .82,.82
sprpriority = 0
ontop = 0
ownpal = 1
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0
;---------------------------------------------------------------------------
; Win pose 2
; CNS difficulty: basic
[Statedef 182]
type = S
ctrl = 0
anim = ifelse((random>=333&&random<=999),185,186)
velset = 0,0

[State 182, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 182, FOOTSTEP]
type= Playsnd
trigger1 = AnimElem=2
value= s100,0
volume=255

[State 182, VOICE Sound]
type = PlaySnd
triggerall=anim=185
trigger1 = animelem =2
value=s4,3
volume=255
channel=0

[State 182, VOICE Sound]
type = PlaySnd
triggerall=anim=186
trigger1 = animelem =2
value=s4,7
volume=255
channel=0

[State 182,NO LIFEBAR]
type = AssertSpecial 
trigger1 =1
trigger1 = Roundstate=4
flag  = nobardisplay
ignorehitpause=1

[State 182,1]
type = AssertSpecial 
triggerall= stateno=182
trigger1 = time < 270
trigger1 = Roundstate=4
flag  = roundnotover
flag2 = timerfreeze
ignorehitpause=1
;---------------------------------------------------------------------------
; Win pose 3
[Statedef 183]
type = S
ctrl = 0
anim =ifelse((random<500),182,183)
velset = 0,0

[State 183, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1


[State 183, Klink Sound]
type = PlaySnd
trigger1 = animelem =1
value=s600,3
volume=155

[State 183, YEAH Sound]
type = PlaySnd
trigger1 = animelem =1
value=s195,2
volume=255
channel=0


[State 183, Whiffing Sound]
type = PlaySnd
trigger1 = animelem =1
value=s600, 9
volume=255

[State 183,1]
type = AssertSpecial 
triggerall= stateno=183
trigger1 = time < 270
trigger1 = Roundstate=4
flag  = roundnotover
flag2 = timerfreeze
ignorehitpause=1

;---------------------------------------------------------------------------
; Win pose 4
; DASH AWAY
[Statedef 184]
type = S
ctrl = 0
anim = 184
velset = 0,0

[State 184, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 184, 2] 
type = ChangeAnim
trigger1 =Anim=184&&!AnimTime
value = 1902


[State 184, VOICE Sound]
type = PlaySnd
trigger1 = anim=184&&animelem =2
value=s4,4
volume=255
channel=2

[State 184, Turn]
type = Turn
trigger1 =Time=0&&FrontEdgeDist <=90&&Facing=1
value=1

[State 184, Turn]
type = Turn
trigger1 =Time=0&&FrontEdgeDist <=90&&Facing=-1
value=1

[State 184,1]
type = AssertSpecial 
triggerall= stateno=184
trigger1 = Time < 200
trigger1 = Roundstate=4
flag  = roundnotover
flag2 = timerfreeze
ignorehitpause=1

[State 184, Velocity]
type =VelSet
trigger1 = anim=1902
x=const(velocity.run.fwd.x)

[State 184, ScreenBound]
type= ScreenBound
triggerall=anim=1902
trigger1=animelemtime(1)>0
value = 0
movecamera= 0,0

[State 184, FOOTSTEP]
type= Playsnd
triggerall=anim=1902
trigger1= AnimElem=2
trigger2= AnimElem=4
value= s100,0
channel=0
volume=255

[State 184, FOOTSTEP]
type= Stopsnd
triggerall=Time>=100
trigger1=Pos X>=280
trigger2=Pos X<=-280
channel=0
;---------------------------------------------------------------------------
; Win pose 5
[Statedef 185]
type = S
ctrl = 0
anim =ifelse((random<500),187,188)
velset = 0,0

[State 185, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 185, WHOOSH]
type = PlaySnd
triggerall=anim=187
trigger1 = animelem=2
value = s3024,0
volume=255
channel=0
[State 185, PlaySnd]
type = PlaySnd
triggerall=anim=187
trigger1 =animelem=24
value = s5,3
volume=255
;========== KATANA SLASH EXPLODS ========
[State 185, Explod]
type = Explod
triggerall=anim=187
trigger1 =animelem=24&&animelemtime(24)<=4
anim =  423
ID   =  423
sprpriority =9
postype = p1
pos = 0,0
velocity = 0, 0
supermove = 999999999999999999999 
pausemove = 999999999999999999999
ontop=1
ownpal = 1
scale = .8,.8
ignorehitpause = 1
bindtime =5
removetime=5
[State 185, RemoveExplod];
type = Removeexplod 
triggerall=anim=187
trigger1=animelemtime(25)>=0
anim =  423
ID   =  423
[State 185, Explod]
type = Explod
triggerall=anim=187
trigger1 =animelem=25&&animelemtime(25)<=4
anim =  424
ID   =  424
sprpriority = 2
postype = p1
pos = 0,0
velocity = 0, 0
supermove = 999999999999999999999 
pausemove = 999999999999999999999
ontop=1
ownpal = 1
scale = .8,.8
ignorehitpause = 1
bindtime =6
removetime =6
[State 185, RemoveExplod]
type = Removeexplod 
triggerall=anim=187
trigger1=animelemtime(26)>=0
anim =  424
ID   =  424
[State 185, PlaySnd]; Crouching Light Kick
type = PlaySnd
triggerall=anim=188
trigger1=animelem=5
trigger2=animelem=10
value = s6,0
volume=255
channel=0
[State 185, PlaySound]; SWEEP
type = PlaySnd
triggerall=anim=188
trigger1 =animelemtime(15)=1
value= s0,5
volume=255
[State 185, VOICE]
type = PlaySnd
triggerall=anim=188
trigger1 =animelem=15
value= s5,4
volume=255
channel=0

[State 185, VOICE]
type = PlaySnd
triggerall=anim=188
trigger1=animelem=27
trigger2=animelem=32
value = s6,ifelse((animelem=27),7,8)
volume=255

[State 185, WHOOSH]
type = PlaySnd
triggerall=anim=188
trigger1 = animelem=24
trigger2 = animelem=29
value = s0,4

[State 185, Envshake]
type= EnvShake
triggerall=anim=188
trigger1 = Animelem=31
time = 15
freq = 100
ampl = -4
phase = 10

[State 185,1]
type = AssertSpecial 
triggerall= stateno=185
trigger1 = time < 270
trigger1 = Roundstate=4
flag  = roundnotover
flag2 = timerfreeze
ignorehitpause=1
;---------------------------------------------------------------------------
; Introduction
; CNS difficulty: basic
[Statedef 190]
type = S
ctrl = 0
anim = 190
velset = 0,0


[State 190, EVENING NEWS]
type = Changestate
triggerall=!(TeamMode=Simul)&&!(enemy,teammode=simul)
trigger1 = p2Name="DcatKrang"&&p2stateno=196
trigger1=1
persistent=0
value = 196

[State 190, RAPHAEL]
type = Changestate
triggerall=!(TeamMode=Simul)&&!(enemy,teammode=simul)
trigger1 = p2Name="DcatRaphael"&&p2stateno=1909
trigger1=1
persistent=0
value = 1909

[State 190, RAPHAEL]
type = Changestate
triggerall=!(TeamMode=Simul)&&!(enemy,teammode=simul)
trigger1 = p2Name="DcatRaphael"&&p2stateno=1910
trigger1=1
persistent=0
value = 1910

[State 190, DONATELLO]
type = Changestate
triggerall=!(TeamMode=Simul)&&!(enemy,teammode=simul)
trigger1 = p2Name="DcatDonatello"&&p2stateno=1900
trigger1=1
persistent=0
value = ifelse((random<=500),1921,193)

[State 190, DONATELLO]
type = Changestate
triggerall=!(TeamMode=Simul)&&!(enemy,teammode=simul)
trigger1 = p2Name="DcatDonatello"&&p2stateno=192
trigger1=1
persistent=0
value = 1908

[State 190, DONATELLO]
type = Changestate
triggerall=!(TeamMode=Simul)&&!(enemy,teammode=simul)
trigger1 = p2Name="DcatDonatello"&&p2stateno=191
trigger1=1
persistent=0
value = 193

[State 190, MICHELANGELO]
type = Changestate
triggerall=Time=0
triggerall=!(TeamMode=Simul)&&!(enemy,teammode=simul)
triggerall=random>=0&&random<110
trigger1 =p2Name="DcatMichelangelo"
trigger1=1
persistent=0
value = 1921

[State 190, MICHELANGELO]
type = Changestate
triggerall=Time=0
triggerall=!(TeamMode=Simul)&&!(enemy,teammode=simul)
triggerall=random>=110&&random<300
trigger1 =p2Name="DcatMichelangelo"
trigger1=1
persistent=0
value = 192

[State 190, MICHELANGELO]
type = Changestate
triggerall=Time=0
triggerall=!(TeamMode=Simul)&&!(enemy,teammode=simul)
triggerall=random>=300&&random<450
trigger1 =p2Name="DcatMichelangelo"
trigger1=1
persistent=0
value = 193

[State 190, MICHELANGELO]
type = Changestate
triggerall=Time=0
triggerall=!(TeamMode=Simul)&&!(enemy,teammode=simul)
triggerall=random>=450&&random<650
trigger1 =p2Name="DcatMichelangelo"
trigger1=1
persistent=0
value = 191

[State 190, MICHELANGELO]
type = Changestate
triggerall=Time=0
triggerall=!(TeamMode=Simul)&&!(enemy,teammode=simul)
triggerall=random>=650&&random<999
trigger1 =p2Name="DcatMichelangelo"
trigger1=1
persistent=0
value = 1908

[State 190, 1] ;Freeze animation until PreIntro is over
type = ChangeAnim
trigger1 = RoundState = 0
value = 190

[State 190, 1]
type = VarRandom 
trigger1 = Time = 0
v = 5
range = 0,100

[State 190, 3]
type = ChangeState 
trigger1 = Time = 1
trigger1 = var(5) = [0,20]
value = 192

[State 190, 3]
type = ChangeState 
trigger1 = Time = 1
trigger1 = var(5) = [21,40]
value = 191

[State 190, 3]
type = ChangeState 
trigger1 = Time = 1
trigger1 = var(5) = [41,60]
value = 1921


[State 190, 3]
type = ChangeState 
trigger1 = Time = 1
trigger1 = var(5) = [61,80]
value = 193

[State 190, 3]
type = ChangeState 
trigger1 = Time = 1
trigger1 = var(5) = [81,100]
value = 1908


[State 190, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 190, 4] ;Change to stand state
type = ChangeState
trigger1 = AnimTime = 0
value = 0



[State 190, 1] ;Freeze animation until PreIntro is over
type = ChangeAnim
trigger1 = RoundState = 0
value = 190
;================
; Out of the Sewer Intro
[Statedef 191]
type = S
ctrl = 0
anim = 191
velset = 0,0
sprpriority=9
ontop=1


[State 191, 1]
type = AssertSpecial
trigger1 = animelem<=17
flag=noshadow

[State 191, 1]
type = AssertSpecial
trigger1 = anim= 191
trigger2 = animelem<=17
flag=timerfreeze
flag2= nobardisplay
flag3= intro
;flag3=noshadow

[State 191, Manhole Cover Scraping Sound]
type= Playsnd
trigger1 = AnimElem =2
value= 190,0
volume=255

[State 191, Manhole Cover Scraping Sound]
type= Playsnd
trigger1 = AnimElemtime(1) =18
value= 190,0
volume=255

[State 191, Jumping Sound]
type = PlaySnd
trigger1 = animelem=17
value= s60,0
volume=255
[State 191, LET'S SEE WHAT HE'S GOT]
type = PlaySnd
triggerall=(EnemyNear(0),name="DcatRaphael")&&p2stateno=191||random>=0&&random<110
trigger1 = animelem=18
value= s4,16
volume=255
channel=0
[State 191, Explod];manhole cover
type = explod
trigger1 = animelem=1
anim = 1901
ID = 1901
pos = 0,0 
postype = P1
facing = 1
vfacing = 1
bindtime = -1
removetime = 165
supermove = 999999999999999999999 ;
pausemove = 999999999999999999999
scale = const(size.xscale),const(size.yscale)
sprpriority = 9
ontop = 1
ownpal = 1
removeongethit = 0
shadow =0

[State 191, Explod];the manhole
type = explod
trigger1 = animelem=1
anim = 1900
ID = 1900
pos = 0,0 
postype = P1
facing = 1
vfacing = 1
bindtime = -1
removetime = 165
supermove = 999999999999999999999
pausemove = 999999999999999999999
scale = const(size.xscale),const(size.yscale) 
sprpriority = 9 
ownpal = 1
removeongethit = 0
shadow =0
[State 191, 2] ;Change to stand state when done
type = ChangeState
trigger1 = AnimTime = 0
value = 0
;================
; SIGNATURE SLASH INTRO
[Statedef 192]
type = S
ctrl = 0
anim = 192
velset = 0,0
sprpriority=9
ontop=1

[State 192, 1]
type = AssertSpecial
trigger1 = anim= 192
flag=timerfreeze
flag2=intro

[State 192, Whiffing Sound]
type = PlaySnd
triggerall = anim= 192
trigger1 = animelem = 2
value=s600, 0+(random%3)
channel= 1

[State 192, LET'S GO!]
type = PlaySnd
triggerall =anim = 192
trigger1 = animelem =2
value=s4, 9
volume=255

[State 192, 2] ;Change to stand state when done
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;================
; WALKING INTRO / DIVE KICK INTRO
[Statedef 193]
type = S
ctrl = 0
anim =ifelse((random>555),193,190)
velset = 0,0
sprpriority=9
ontop=1

[State 193, 1]
type = AssertSpecial
trigger1 =stateno= 190
flag=timerfreeze
flag2= intro

[State 193, Jumping Sound]
type = PlaySnd
trigger1 = anim=193&&animelem=2
value =s6,11
[State 193, Landing Sound]
type = PlaySnd
trigger1 = anim=193&&animelem=15
value = s52,0

[State 193, Whiffing Sound]
type = PlaySnd
triggerall= anim=193
trigger1=animelem=20
trigger2=animelem=28
value= s600,0+(random%2)
channel=0
volume=255

[State 193, Envshake]
type= EnvShake
triggerall= anim=193
trigger1= animelem=15
time = 10
freq = 40
ampl = -4
phase = 30
[State 193, Explod];Dust Puff 2
type = explod 
trigger1= anim=193&&animelem=15
anim = 8140
ID = 8140
pos = -25,-2 
postype = P1
facing = 1
vfacing = 1
removetime = 17
supermove = 999999999999999999999 
pausemove = 999999999999999999999
scale = 1,1 
sprpriority = 9 
ontop = 1 
ownpal = 1 
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0
[State 193, Explod]; Dust Puff 1
type = explod 
trigger1= anim=193&&animelem=15
anim =8130
ID = 8130
random= 0,5
pos = -8,-4 
postype = P1
facing = 1
vfacing = 1
removetime = 17
supermove = 999999999999999999999 
pausemove = 999999999999999999999
scale = 1,1 
sprpriority = 9 
ontop = 1 
ownpal = 1
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0
[State 193, Explod]; GROUND HIT DUST
type = explod 
trigger1 =anim=193&&animelem=15
anim = 4022
ID = 4022
pos = 0,0
postype = P1
facing = 1
vfacing = 1
bindtime = 1
removetime = 10
supermove = 999999999999999999999
pausemove = 999999999999999999999
scale = .55,.55
sprpriority =-1
ontop =0
ownpal = 1
removeongethit = 1
shadow =0

[State 193, Jumping Sound]
type = PlaySnd
triggerall=random>=330&&random<750
trigger1 = anim=190&&animelem=2
value =s4,1
[State 193, Klink Sound]
type = PlaySnd
triggerall=anim=190
trigger1 = animelem =24
value=s195,0+(random%3)
volume=255
channel=0

[State 193, Explod];ATTACK!
type = explod 
triggerall=anim=190
trigger1=animelem=25&&facing=1
anim =196
ID   =196
pos = 65,-90 
postype = P1
facing = 1
vfacing = 1
removetime =15
supermove = 999999999999999999999 
pausemove = 999999999999999999999
scale = 1.1,1.1 
sprpriority = 9 
ontop = 1 
ownpal = 1 
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0

[State 193, Explod];ATTACK!
type = explod 
triggerall=anim=190
trigger1=animelem=25&&facing=-1
anim =197
ID   =197
pos = 65,-90 
postype = P1
facing  =-1
vfacing = 1
removetime =15
supermove = 999999999999999999999 
pausemove = 999999999999999999999
scale = 1.1,1.1 
sprpriority = 9 
ontop = 1 
ownpal = 1 
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0
[State 193, 2] ;Change to stand state when done
type = ChangeState
trigger1 = AnimTime = 0
value = 0
;================
;---------------------------------------------------------------------------
; ROTO SPIN / SIDE SLIDE / INTRO vs MICHELANGELO
[Statedef 1908]
type = S
ctrl = 0
anim =1908 
velset = 0,0

[State 1908, 1] 
type = ChangeAnim
trigger1=!Time
trigger1 = RoundState = 0
value =ifelse((random<500),1908,1930)

[State 1908, 1]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 1908, Explod]; Dust
type = explod
triggerall=anim=1930
trigger1= Animelem=9
anim=8120
ID=8120
pos = 10,2
postype = P1
facing = -1
vfacing = 1
bindtime =Ifelse(Vel Y =0,50,1)
removetime = 50
supermove = 999999999999999999999 
pausemove = 999999999999999999999
scale = 1,1 
sprpriority = 9 
ontop = 1 
ownpal = 1 
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0

[State 1908, Explod]
type = RemoveExplod
trigger1 = time=50
id =  8120

[State 1908, Explod]; Dust Puff 1
type = explod 
triggerall=anim=1930
trigger1=animelem=11
anim=8140
ID=8140
random= 0,5
vel =-3.3,0
pos = -20,-10 
postype = P1
facing = 1
vfacing = 1
removetime = 17
supermove = 999999999999999999999 
pausemove = 999999999999999999999
scale = 1,1 
sprpriority = 9 
ontop = 1 
ownpal = 1
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0

[State 1908, Explod]; Dust Puff 1
type = explod 
triggerall=anim=1930
trigger1=animelem=10
anim=8130
ID=8130
random= 0,5
vel =-2,0
pos = -20,-10 
postype = P1
facing = 1
vfacing = 1
removetime = 17
supermove = 999999999999999999999 
pausemove = 999999999999999999999
scale = 1.2,1.2 
sprpriority = 9 
ontop = 1 
ownpal = 1
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0

[State 1908, RemoveExplod]
type = RemoveExplod
trigger1=time=17
ID=8130
;========== KATANA SLASH EXPLODS ========
[State 1908, Explod]
type = Explod
triggerall=anim=1930
trigger1=animelemtime(20)=0
anim = 251
ID   = 251
sprpriority = 2
postype = p1
pos = 0,0
velocity = 0, 0
supermove = 999999999999999999999 
pausemove = 999999999999999999999
ontop=1
ownpal = 0
scale = .6,.6
ignorehitpause = 1
;bindtime =7
removetime =7

[State 1908, WHOOSH]
type = PlaySnd
trigger1=anim=1908
trigger1 =animelem=2
value = s3200,0
channel=8
[State 1908, WHOOSH]
type = PlaySnd
triggerall=anim=1908
trigger1 = animelem=2
value = s3024,0
volume=255
channel=0
[State 1908, PlaySnd]
type = PlaySnd
triggerall=anim=1908
trigger1 =animelem=24
value = s600,0
volume=255
;========== KATANA SLASH EXPLODS ========
[State 1908, Explod]
type = Explod
triggerall=anim=1908
trigger1 =animelem=24&&animelemtime(24)<=4
anim =  423
ID   =  423
sprpriority =9
postype = p1
pos = 0,0
velocity = 0, 0
supermove = 999999999999999999999 
pausemove = 999999999999999999999
ontop=1
ownpal = 1
scale = .8,.8
ignorehitpause = 1
bindtime =5
removetime=5
[State 1908, RemoveExplod];
type = Removeexplod 
triggerall=anim=1908
trigger1=animelemtime(25)>=0
anim =  423
ID   =  423
[State 1908, Explod]
type = Explod
triggerall=anim=1908
trigger1 =animelem=25&&animelemtime(25)<=4
anim =  424
ID   =  424
sprpriority = 2
postype = p1
pos = 0,0
velocity = 0, 0
supermove = 999999999999999999999 
pausemove = 999999999999999999999
ontop=1
ownpal = 1
scale = .8,.8
ignorehitpause = 1
bindtime =6
removetime =6
[State 1908, RemoveExplod]
type = Removeexplod 
triggerall=anim=1908
trigger1=animelemtime(26)>=0
anim =  424
ID   =  424

[State 1908,Slide Noise!]
type = PlaySnd
triggerall=anim=1930
trigger1=animelem=2
value=s0,5
volume=255
[State 1908, Whiffing Sound]
type = PlaySnd
triggerall=anim=1930
trigger1 = animelem=14
value= s602,0
channel=0
volume=255
[State 1908, PlaySnd]
type=PlaySnd
triggerall=anim=1930
trigger1 = animelem=18
value = s0,4
volume=255
[State 1908, PlaySnd]
type=PlaySnd
triggerall=anim=1930
trigger1 = animelem=19
value = s6,5
channel=0
[State 1908, PlaySnd]
type=PlaySnd
triggerall=anim=1930
trigger1 = animelem=18
value = s602,0
volume=170

[State 1908, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
;---------------------------------------------------------------------------
; INTRO VS RAPHAEL / RAPH
[Statedef 1909]
type = S
ctrl = 0
anim = 1909
velset = 0,0

[State 1909, 1] ;Freeze animation until PreIntro is over
type = ChangeAnim
trigger1 = RoundState = 0
value = 1909

[State 1909, 1]
type = AssertSpecial
trigger1 = 1
flag = Intro
flag=timerfreeze
flag2= nobardisplay

[State 1909, 3]
type = PlaySnd
trigger1 = AnimElem =16
value = s4,2
channel = 0
volume=255

[State 1909, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
;---------------------------------------------------------------------------
; INTRO VS RAPHAEL / RAPH 2
[Statedef 1910]
type = S
ctrl = 0
anim = 1910
velset = 0,0
sprpriority=2

[State 1910, 1] ;Freeze animation until PreIntro is over
type = ChangeAnim
trigger1 = RoundState = 0
value = 1910

[State 1910, ScreenBound]
type =ScreenBound
trigger1 =1
value=1
movecamera=0,0

[State 1910, 1]
type = AssertSpecial
trigger1 = 1
flag = Intro
flag=timerfreeze
[State 1910, Sliding Sound]
type = PlaySnd
trigger1 =animelem=18
trigger2 =animelem=43
value=s0,5

[State 1910, Jumping Sound]
type = PlaySnd
trigger1 =animelem=2
value=s40,0

[State 1910, Landing Sound]
type = PlaySnd
trigger1 =animelem=4
trigger2 =animelem=52
value = s52,0
channel=0
; Standing Medium Punch
[State 1910, Whiffing Sound]
type = PlaySnd
trigger1 = animelem=20
value= s600,2
channel=8
volume=255
; Crouching Light Punch
[State 1910, PlaySnd]
type = PlaySnd
trigger1 = animelem=26
value = s5,7
volume=255

[State 1910, VOICE]
type = PlaySnd
trigger1 = animelem=28
value = s2,0
volume=255
channel=8
;Standing Medium Kick 2
[State 1910, Whiffing Sound]
type = PlaySnd
trigger1 = animelem=32
value = s0,4
; Standing Strong Kick
;========== KATANA SLASH EXPLODS ========
[State 1910, Explod]
type = Explod
trigger1 =animelem=40
anim = 251
ID   = 251
sprpriority =3
postype = p1
pos = floor(Pos X+ifelse((facing!=1),-30,110)),0
velocity = 0, 0
supermove = 999999999999999999999 
pausemove = 999999999999999999999
ontop=0
ownpal = 0
scale = .6,.6
ignorehitpause = 1
bindtime =1
removetime =10

[State 1910, RemoveExplod]
type = Removeexplod 
trigger1=animelemtime(41)=4
trigger2=stateno!=1910
trigger3=anim!=1910
anim = 251
ID   = 251
;-------------------
[State 1910, PlaySnd]
type=PlaySnd
trigger1= animelem=38
value = s0,4
volume=255
channel=8
[State 1910, PlaySnd]
type=PlaySnd
trigger1= animelem=39
value = s6,5
[State 1910, PlaySnd]
type=PlaySnd
trigger1= animelem=38
value = s602,0
volume=170

[State 1910, CLANNG!]
type=PlaySnd
trigger1= animelem=33
value = s702,1
volume=150
channel=8
[State 1910, CLANNG!]
type=PlaySnd
trigger1= animelem=33
trigger2= animelem=39
value = s189,0
volume=100
channel=7
[State 1910, CLANNG!]
type=PlaySnd
trigger1= animelem=39
value = s2,1
volume=255
[State 1910, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
;================
; BE READY INTRO
[Statedef 1921]
type = S
ctrl = 0
anim = 1921
velset = 0,0
sprpriority=9
ontop=1

[State 1921, 1]
type = AssertSpecial
trigger1 =anim= 1921
trigger1 =Time<=229
flag=timerfreeze
flag2= intro


[State 1921,Alright DONATELLO]
type = PlaySnd
triggerall=(Enemy,name="DcatDonatello")&&p2stateno=1900
trigger1 =anim= 1921
trigger1 = animelem=2
value= s4,12
volume=255
channel=0

[State 1921, BE READY FOR ANYTHING]
type = PlaySnd
triggerall=(Enemy, name!="DcatMichelangelo")
triggerall=!((Enemy,name="DcatDonatello")&&p2stateno=1900)
triggerall =stateno=1921
trigger1 = animelem =4
value=s4,0
volume=255
channel=0

[State 1921, NO MORE FOOLING AROUND]
type = PlaySnd
triggerall=(Enemy, name="DcatMichelangelo")
triggerall =stateno=1921
trigger1 = animelem =4
value=s4,ifelse((random<=333),15,13)
volume=255
channel=0
;---------------------------
; CHANNEL SIX EVENING NEWS INTRO
[Statedef 196]
type   = S
movetype=I
physics =S
ctrl = 0
anim =8530
velset =0,0
; TURTLES LAIR
[State 196, SKYExplod]
type = explod 
trigger1=Time=491
anim=8522
ID = 8522
pos = floor(-8),floor(-8)
postype =Left
facing  = 1
vfacing = 1 
bindtime   =ifelse((stateno=196), -1,0)
removetime =ifelse((stateno=196), -1,0)
supermove = 999999999999999999999
pausemove = 999999999999999999999
scale =1.1,1.1
sprpriority=9
ontop=1
ownpal= 1 
removeongethit=0
ignorehitpause=1
shadow =0
persistent=0
[State -3, RemoveExplod]
type = Removeexplod 
triggerall=1
trigger1=prevstateno=196||stateno!=196
trigger1=1
trigger2=stateno=0
ID=8522
[State 196, AssertSpecial]
type = AssertSpecial
trigger1 =1
flag  = intro

[State 196, END] ;Change to stand state
type = ChangeState
trigger1 =animtime=0
trigger2=prevstateno=196||prevstateno=196&&stateno!=196
trigger2=Time=0
value =191
ctrl=0
;---------------------------------------------------------------------------
; Taunt
[Statedef 195]
type = S
ctrl = 0
anim = 195
velset = 0,0
movetype =A
physics = S
sprpriority = 2
[State 195, Width]
Type= Width
trigger1=1
edge=8,0
[State 195, Klink Sound]
type = PlaySnd
triggerall = stateno = 195
trigger1 = animelem =1
value=s600,3
volume=155

[State 195, Klink Sound]
type = PlaySnd
triggerall = stateno = 195
trigger1 = animelem =1
value=s195,0+(random%3)
volume=255
channel=0

[State 195, Whiffing Sound]
type = PlaySnd
triggerall = stateno = 195
trigger1 = animelem =1
value=s600, 9
volume=255

[State 195, HIT 1]
type = HitDef
triggerall=anim=195
trigger1 = animelem=5
attr = S, NA			
damage = 5, 0	
animtype = Light
guardflag = MA		
hitflag = MAF			
priority =2, Hit
pausetime =12,12;10,12			
sparkno = s4011		
guard.sparkno = s8000
sparkxy = -30, -54						
hitsound = s500, 0			
guardsound = s2, 0
ground.type = Low		
ground.slidetime = 5		
ground.hittime  = 12		
ground.velocity =-2,-6		
airguard.velocity = -1.9,-.8	
air.type = High			
air.velocity = -2,-4		
air.hittime = 12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0	
fall=0
air.fall=0
fall.recover=1
air.recover=1
envshake.time = 5
envshake.freq = 60
envshake.ampl = 1
[State 195, Idle]
type= statetypeset
trigger1= animelemtime(6)>=0
movetype= I
[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 195 4]
type = ChangeState
triggerall = stateno= 195 && movehit
trigger1= command = "holdup" || command = "up"||(command="holdfwd"&&command="up")||(command="holdup"&&command="fwd")||(command="holdfwd"&&command="holdup")
value = 50
ctrl=1

;---------------------------------------------------------------------------
; Standing Light Punch
[Statedef 200]
type    = S				
movetype= A				
physics = S				
juggle  = 1						
ctrl = 0			
anim = 200				
poweradd =20		
sprpriority = 2	

[State 200, VarSet]
type = VarSet
trigger1 = Time = 0
v = 50
value = 1
[State 200, Width]
Type= Width
trigger1=1
edge=40,0
[State 200, Whiffing Sound]
type = PlaySnd
trigger1 = animelem= 1
value= s600,1
channel=0
volume=255

[State 200, HIT 1]
type = HitDef
trigger1 = animelem=4
attr = S, NA			
damage =20,1
animtype = Light
guardflag = MA		
hitflag = MAF			
priority = 3, Hit
pausetime = 10,12			
sparkno = s4011		
guard.sparkno = s8000
sparkxy = -30, -54						
hitsound = s500, 0			
guardsound = s2, 0
ground.type = Low		
ground.slidetime = 5		
ground.hittime  = 12		
ground.velocity = -7,0;-5		
airguard.velocity = -1.9,-.8	
air.type = High			
air.velocity = -5,-3		
air.hittime = 12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0	
facep2 = 1	
envshake.time = 5
envshake.freq = 60
envshake.ampl = 1
[State 200, HIT 2]
type = HitDef
trigger1 = animelem=5
attr = S, NA			
damage =60,1	
animtype = Back
guardflag = MA		
hitflag = MAF			
priority = 3, Hit
pausetime = 12,12			
sparkno = s4010		
guard.sparkno = s8000
sparkxy = -40, -36						
hitsound = s500, 0			
guardsound = s2, 0
ground.type =High		
ground.slidetime = 5		
ground.hittime  = 12		
ground.velocity = -9,0		
airguard.velocity = -1.9,-.8	
air.type = High			
air.velocity = -5,-3		
air.hittime = 12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0	
facep2 = 1
envshake.time = 5
envshake.freq = 60
envshake.ampl = 1
[State 200, SLASH Spark]
type = Explod
trigger1=AnimElemtime(4)>=0&&AnimElemtime(4)<=2
trigger1=movehit=1
id = 4200
anim=4200
postype = P1
facing= 1
vfacing=1
pos= floor(40+p2bodydist X), -54
sprpriority= 9
scale = .75,.8
persistent= 0
ontop = 0
ownpal = 1
ignorehitpause = 1
removetime=-2
bindtime=1
supermove = 999999999999999999999 
pausemove = 999999999999999999999
shadow = 0,0,0
[State 200, SLASH Spark]
type = Explod
trigger1=AnimElemtime(5)>=0&&AnimElemtime(5)<=2
trigger1=movehit=1
id = 4210
anim=4210
postype = P1
facing=1
vfacing=1
pos= floor(55+p2bodydist X), -54
sprpriority= 9
scale =.9,.7
persistent= 0
ontop = 0
ownpal = 1
ignorehitpause = 1
removetime=-2
bindtime=1
supermove = 999999999999999999999 
pausemove = 999999999999999999999
shadow = 0,0,0
[State 200, RemoveExplod]
type = Removeexplod 
trigger1=time=0
trigger2=stateno!=200
trigger3=movehit!=1
trigger4=animelem>=6
ID = 4000||4001||4002||4003||4010||4011||4012||4013
[State 200, RemoveExplod]
type = RemoveExplod
trigger1=time=0
trigger2= stateno=200&&movehit!=1
trigger3=animelem!=4
anim=4200
id=4200
[State 200, RemoveExplod]
type = RemoveExplod
trigger1=time=0
trigger2= stateno=200&&movehit!=1
trigger3=animelem!=5
anim=4210
id=4210
[State 200, Idle]
type= statetypeset
trigger1= animelemtime(6)>=0
movetype= I
[State 200, END]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;===CHAINING===
[State 200, COMBO]
type = ChangeState
triggerall= stateno=200&&movecontact
triggerall=command="holddown"
trigger1 =command="x"
value = 400
ctrl =0
[State 200, KATANA UPPERCUT]
type = ChangeState
triggerall= anim=200&&movehit
triggerall = command!= "EX_KATUPPER1"
triggerall = command!= "EX_KATUPPER2"
trigger1 = command="KATUPPER_1"
value = 1050
ctrl=0
[State 200, KATANA UPPERCUT]
type = ChangeState
triggerall= anim=200&&movehit
triggerall = command!= "EX_KATUPPER1"
triggerall = command!= "EX_KATUPPER2"
trigger1 = command="KATUPPER_2"
value = 1050
ctrl=0
[State 200, KATANA UPPERCUT]
type = ChangeState
triggerall= anim=200&&movehit
triggerall = command!= "EX_KATUPPER1"
triggerall = command!= "EX_KATUPPER2"
trigger1 = command="KATUPPER_3"
value = 1050
ctrl=0
[State 200, SHOULDER CHARGE]
type = ChangeState
triggerall= var(11) = 0
triggerall= anim=200&&movehit
triggerall=command!= "holddown"
trigger1 = command="SHOULDCHARGE1"
value = 1000
ctrl=0
[State 200, SHOULDER CHARGE]
type = ChangeState
triggerall= var(11) = 0
triggerall= anim=200&&movehit
triggerall=command!= "holddown"
trigger1 = command="SHOULDCHARGE2"
value = 1000
ctrl=0
[State 200, SHOULDER CHARGE]
type = ChangeState
triggerall= var(11) = 0
triggerall= anim=200&&movehit
triggerall=command!= "holddown"
trigger1 = command="SHOULDCHARGE3"
value = 1000
ctrl=0
;---------------------------------------------------------------------------
; Standing Medium Punch
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd=65
ctrl = 0
anim = 210
hitcountpersist=1

[State 210, VarSet]
type = VarSet
trigger1 = Time = 0
v = 50
value = 1
[State 210, Whiffing Sound]
type = PlaySnd
trigger1 = animelem= 1
value= s600,2
channel=0
volume=255
[State 210, HIT 1]
type=HitDef
trigger1=animelem=3
trigger2=!MoveContact
trigger2=animelem=4
trigger3=!MoveContact
trigger3=animelem=5
attr = S, NA			
damage =40,1			
animtype = Back	
guardflag = MA			
hitflag = MAF			
priority = 3, Hit			
pausetime = 10,10		
sparkno = -1			
guard.sparkno = s8000
sparkxy = -30, -70		
hitsound = s500, 1		
guardsound = s2, 0
ground.type = High		
ground.slidetime =10		
ground.hittime  = 13	
ground.velocity = -9		
airguard.velocity = -1.9,-.8	
air.type = High			
air.velocity = -7,-3		
air.hittime = 12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0	
envshake.time = 5
envshake.freq = 60
envshake.ampl = 1
[State 210, HIT Spark]
type = Explod
trigger1=AnimElemtime(3)>=0&&AnimElemtime(5)<=2
trigger1=movehit=1
id = 4000
postype = P1, Mid
facing=1
vfacing=-1
pos= 50,-60
anim =4001
sprpriority= 9
scale = 1,1
persistent= 0
ontop = 1
ownpal = 1
ignorehitpause = 1
removetime=12
bindtime=1
supermove = 999999999999999999999 
pausemove = 999999999999999999999
[State 210, SLASH Spark]
type = Explod
trigger1=AnimElemtime(3)>=0&&AnimElemtime(5)<=2
trigger1=movehit=1
id = 4220
anim=4220
postype = P1
facing=-1
vfacing=1
pos= 55,-60
sprpriority= 9
scale = 1,1
persistent= 0
ontop = 0
ownpal = 1
ignorehitpause = 1
removetime=10
bindtime=1
supermove = 999999999999999999999 
pausemove = 999999999999999999999		
[State 210, RemoveExplod]
type = Removeexplod 
trigger1=time=0
trigger2=stateno!=210
trigger3=movehit!=1
trigger4=animelem>=6
ID = 4000||4001||4002||4003||4010||4011||4012||4013
[State 210, RemoveExplod]
type = RemoveExplod
trigger1=time=0
trigger2=stateno=210&&movehit!=1
trigger3=animelem>=6
id = 4200||4210||4220||4230||4240

[State 210, Idle]
type= statetypeset
trigger1= animelemtime(6)>=0
movetype= I
[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;===CHAINING===
[State 210, KATANA UPPERCUT]
type = ChangeState
triggerall= anim=210&&movehit
triggerall = command!= "EX_KATUPPER1"
triggerall = command!= "EX_KATUPPER2"
trigger1 = command="KATUPPER_1"
value = 1050
ctrl=0
[State 210, KATANA UPPERCUT]
type = ChangeState
triggerall= anim=210&&movehit
triggerall = command!= "EX_KATUPPER1"
triggerall = command!= "EX_KATUPPER2"
trigger1 = command="KATUPPER_2"
value = 1050
ctrl=0
[State 210, KATANA UPPERCUT]
type = ChangeState
triggerall= anim=210&&movehit
triggerall = command!= "EX_KATUPPER1"
triggerall = command!= "EX_KATUPPER2"
trigger1 = command="KATUPPER_3"
value = 1050
ctrl=0
[State 210, SHOULDER CHARGE]
type = ChangeState
triggerall= var(11) = 0
triggerall= anim=210&&movehit
triggerall=command!= "holddown"
trigger1 = command="SHOULDCHARGE1"
value = 1000
ctrl=0
[State 210, SHOULDER CHARGE]
type = ChangeState
triggerall= var(11) = 0
triggerall= anim=210&&movehit
triggerall=command!= "holddown"
trigger1 = command="SHOULDCHARGE2"
value = 1000
ctrl=0
[State 210, SHOULDER CHARGE]
type = ChangeState
triggerall= var(11) = 0
triggerall= anim=210&&movehit
triggerall=command!= "holddown"
trigger1 = command="SHOULDCHARGE3"
value = 1000
ctrl=0
;---------------------------------------------------------------------------
; Standing Strong Punch
[Statedef 220]
type    = S				
movetype= A
physics = S
juggle  = 2
ctrl = 0
anim = 220
poweradd=65
sprpriority = 2
hitcountpersist=1
[State 220, VarSet]
type = VarSet
trigger1 = Time = 0
v = 50
value = 1
[State 220, Width]
Type= Width
Trigger1=1
edge=20,0
[State 220, velAdd]
type=VelAdd
triggerall= p2bodydist x <= 25&&(FrontEdgeBodyDist >=70)
trigger1= animelem=1
x=4
[State 220, Whiffing Sound]
type = PlaySnd
trigger1 = animelem= 1
value= s602,0
channel=0
volume=255
[State 220, HIT 1]
type = HitDef
trigger1 = animelem=3
attr = S, NA			
damage =60,1
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 12,12
sparkno = s4010
sparkxy = -15, -40
guard.sparkno = s8000
hitsound = s500, 3
guardsound = s2,0
ground.type = Low
ground.slidetime = 5
ground.hittime  = 14
ground.velocity = -12
airguard.velocity = -1.9,-.8
air.type = High	
air.velocity = -9,-3
air.fall=1
air.hittime = 12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 5
envshake.freq = 60
envshake.ampl = 1
[State 220, SLASH Spark]
type = Explod
trigger1=AnimElemtime(3)>=0&&AnimElemtime(3)<=7
trigger1=movehit=1
id = 4200
anim=4200
postype = P1
facing=1
vfacing=1
pos= floor(30+p2bodydist X),-40
sprpriority= 9
scale = .7,.7
persistent= 0
ontop = 0
ownpal = 1
ignorehitpause = 1
removetime=10
bindtime=1
supermove = 999999999999999999999 
pausemove = 999999999999999999999
[State 220, SLASH Spark]
type = Explod
trigger1=AnimElemtime(3)>=0&&AnimElemtime(3)<=7
trigger1=movehit=1
id = 4200
anim=4200
postype = P1
facing=-1
vfacing=1
pos= floor(30+p2bodydist X),-40;90,-40
sprpriority= 9
scale = .7,.7
persistent= 0
ontop = 0
ownpal = 1
ignorehitpause = 1
removetime=10
bindtime=1
supermove = 999999999999999999999 
pausemove = 999999999999999999999
[State 220, RemoveExplod]
type = Removeexplod 
trigger1=time=0
trigger2=stateno!=220
trigger3=movehit!=1
trigger4=animelem!=3
ID = 4000||4001||4002||4003||4010||4011||4012||4013
[State 220, RemoveExplod]
type = RemoveExplod
trigger1=time=0
trigger2= stateno=220&&movehit!=1
trigger3=animelem!=3
id = 4200||4210||4220||4230||4240
[State 220, Explod]
type = RemoveExplod
trigger1=time=0
trigger2=animelem!=3
trigger3=time=10
trigger4=stateno!=220
anim=4200
id=4200

[State 220, Idle]
type= statetypeset
trigger1= animelemtime(4)>=1
movetype= I
[State 220, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;===CHAINING========
[State 220, KATANA UPPERCUT]
type = ChangeState
triggerall= anim=220&&movehit
triggerall = command!= "EX_KATUPPER1"
triggerall = command!= "EX_KATUPPER2"
trigger1 = command="KATUPPER_1"
value = 1050
ctrl=0
[State 220, KATANA UPPERCUT]
type = ChangeState
triggerall= anim=220&&movehit
triggerall = command!= "EX_KATUPPER1"
triggerall = command!= "EX_KATUPPER2"
trigger1 = command="KATUPPER_2"
value = 1050
ctrl=0
[State 220, KATANA UPPERCUT]
type = ChangeState
triggerall= anim=220&&movehit
triggerall = command!= "EX_KATUPPER1"
triggerall = command!= "EX_KATUPPER2"
trigger1 = command="KATUPPER_3"
value = 1050
ctrl=0
[State 220, SHOULDER CHARGE]
type = ChangeState
triggerall= var(11) = 0
triggerall= anim=220&&movehit
triggerall=command!= "holddown"
trigger1 = command="SHOULDCHARGE1"
value = 1000
ctrl=0
[State 220, SHOULDER CHARGE]
type = ChangeState
triggerall= var(11) = 0
triggerall= anim=220&&movehit
triggerall=command!= "holddown"
trigger1 = command="SHOULDCHARGE2"
value = 1000
ctrl=0
[State 220, SHOULDER CHARGE]
type = ChangeState
triggerall= var(11) = 0
triggerall= anim=220&&movehit
triggerall=command!= "holddown"
trigger1 = command="SHOULDCHARGE3"
value = 1000
ctrl=0
;---------------------------------------------------------------------------
; Standing Light Kick
[Statedef 230]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd=22
ctrl = 0
anim = 230
hitcountpersist=1
[State 230, VarSet]
type = VarSet
trigger1 = Time = 0
v = 50
value = 1
[State 230, Whiffing Sound]
type = PlaySnd
trigger1 = animelem= 1
value= s602,0
channel=0
volume=255
[State 230, velAdd]
type=Veladd
trigger1= animelem=2
x=3

[State 230, HIT 1]
type = HitDef
trigger1 = animelem=2
attr = S, NA
damage =20,1
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 12,12
sparkno = s4000
guard.sparkno = s8000
sparkxy = -20, -26
hitsound = s500, 1
guardsound = s2, 0
ground.type = Low
ground.slidetime= 15
ground.hittime  = 15
ground.velocity = -3,0;-3.45,0
airguard.velocity = -.6,-.8
air.type = High
air.velocity = -1.4,-3
air.hittime = 12
envshake.time=9
envshake.ampl=1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0

[State 230, SLASH Spark]
type = Explod
trigger1=AnimElemtime(2)>=0&&AnimElemtime(2)<=7
trigger1=movehit=1
id = 4220
anim=4220
postype = P1
facing=1
vfacing=1
pos= 60,-30
sprpriority= 9
scale = .7,.8
persistent= 0
ontop = 0
ownpal = 1
ignorehitpause = 1
removetime=10
bindtime=1
supermove = 999999999999999999999 
pausemove = 999999999999999999999
[State 230, RemoveExplod]
type = Removeexplod 
trigger1=time=0
trigger2=stateno!=230
trigger3=movehit!=1
trigger4=animelem!=2
ID = 4000||4001||4002||4003||4010||4011||4012||4013
[State 230, RemoveExplod]
type = RemoveExplod
trigger1=time=0
trigger2=animelem!=2
trigger3= stateno=230&&movehit!=1
trigger4=Time=10
id = 4200||4210||4220||4230||4240

[State 230, 5]
type = ChangeState
trigger1 =animtime=0
value = 0
ctrl =1
;=====CHAINING=======
[State 230, SHOULDER CHARGE]
type = ChangeState
triggerall= var(11) = 0
triggerall=command!="ROTO_CUTTER"
triggerall=command!="EX_SHOULDER1"
triggerall=command!="EX_SHOULDER2"
trigger1= animelemtime(2)>=0&&movehit
trigger1=(command ="SHOULDCHARGE1"||command="SHOULDCHARGE2"||command="SHOULDCHARGE3")
value = 1000
ctrl=0
[State 230, EX SHOULDER CHARGE]
type = ChangeState
triggerall= var(11) = 0
triggerall=command!="ROTO_CUTTER"
trigger1= animelemtime(2)>=0&&movecontact
trigger1 =(command="EX_SHOULDER1"||command="EX_SHOULDER2")&&power>=500
value = 1010
ctrl=0
[State 230, KATANA UPPERCUT]
type = ChangeState
triggerall = command!= "EX_KATUPPER1"
triggerall = command!= "EX_KATUPPER2"
trigger1= animelemtime(3)>=0&&movehit
trigger1 = (command="KATUPPER_1"||command="KATUPPER_2"||command="KATUPPER_3")
value = 1050
ctrl=0
[State 230,EX KATANA UPPERCUT]
type = ChangeState
trigger1= animelemtime(2)>=0&&movehit
trigger1 =power>=500&&(command="EX_KATUPPER1"||command="EX_KATUPPER2")
value = 1060
ctrl=0
[State 230, 6]
type = ChangeState
triggerall= stateno=230&&movecontact
triggerall=command!="holddown"
trigger1 =command="b"
value = 240
ctrl =0
[State 230, 7]
type = ChangeState
triggerall= anim=230&&movecontact
triggerall = command!= "EX_KATUPPER1"
triggerall = command!= "EX_KATUPPER2"
triggerall=command="holddown"
trigger1 =command="z"
value = 420
ctrl =0
;---------------------------------------------------------------------------
; Standing Medium Kick
[Statedef 240]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd=65
ctrl = 0
anim = 240
hitcountpersist=1

[State 240, VarSet]
type = VarSet
trigger1 = Time = 0
v = 50
value = 1

[State 240, velAdd]
type=Veladd
trigger1=time=0
x=4

[State 240, HIT 1]
type = HitDef
trigger1 = animelem=3
attr = S, NA			
damage =40,1;20,1
animtype = Medium	
guardflag = MA	 
hitflag = MAF
priority = 5, Hit
pausetime = 8,12
sparkno = -1
guard.sparkno = s8000
sparkxy = -18, -46	
hitsound = s700, 0		
guardsound = s1, 0		
ground.type = High		
ground.slidetime =7;5
ground.hittime  = 15	
ground.velocity = -7,0;-5,0	
airguard.velocity = -.6,-.8
air.type = Low		
air.velocity = -1.4,-3	
air.hittime = 12
envshake.time=9
envshake.ampl=1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0

[State 240, HIT Spark]
type = Explod
trigger1=AnimElemtime(3)>=0&&AnimElemtime(3)<=4
trigger1=movehit=1
id = 4002
anim =4002
postype = P1, Mid
facing=-1
vfacing=1
pos= 48, -46
sprpriority= 9
scale =1,1
persistent= 0
ontop = 1
ownpal = 1
ignorehitpause = 1
removetime=9
bindtime=1
supermove = 999999999999999999999 
pausemove = 999999999999999999999
[State 240, RemoveExplod]
type = Removeexplod 
trigger1=time=0
trigger2=stateno!=240
trigger3=movehit!=1
trigger4=animelem!=3
ID = 4000||4001||4002||4003||4010||4011||4012||4013
[State 240, RemoveExplod]
type = RemoveExplod
trigger1=time=0
trigger2= stateno=240&&movehit=1
trigger3= Time=10
id = 4200||4210||4220||4230||4240
[State 240, RemoveExplod]
type = RemoveExplod
trigger1=time=0
trigger2=animelem!=3
trigger3=time=10
trigger4=stateno!=240
anim=4002
id=4002
[State 240, Idle]
type= statetypeset
trigger1= animelemtime(4)>=0
movetype= I
[State 240, 5]
type = ChangeState
trigger1 =animtime=0
value = 0
ctrl =1

[State 240, 6]
type = ChangeState
triggerall= anim=240&&movecontact
triggerall= p2bodydist X<=30
trigger1 =command="b"
value = 241
ctrl =0

;----------------
;Standing Medium Kick 2
[Statedef 241]
type    = S
movetype= A
physics = S
juggle  = 2
poweradd= 65
ctrl = 0
velset = 0,0
anim = 241
faceP2=1
[State 241, VarSet]
type = VarSet
trigger1 = Time = 0
v = 50
value = 1
[State 241, VelSet]
type = Velset
trigger1 = animelem=1
x = 2
[State 241, Whiffing Sound]
type = PlaySnd
trigger1 = animelem=1
value = s0,4
channel=0

[State 241, HIT 1]
type = HitDef
trigger1 = animelem=3
attr = S, NA
hitflag= MAF
animtype  = Medium
damage    = 40,1
guardflag = MA
pausetime = 12,12
sparkno = s4000
guard.sparkno = s8000
sparkxy = -10,-53
hitsound   = s700,0
guardsound = s1,0
ground.type = Low
ground.slidetime= 16
ground.hittime  = 16
ground.velocity = -5,0;-5,0
air.velocity = -4,-3.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
[State 241, RemoveExplod]
type = Removeexplod 
trigger1=time=0
trigger2=stateno!=241
trigger3=movehit!=1
trigger4=animelem!=3
ID = 4000||4001||4002||4003||4010||4011||4012||4013
[State 241, RemoveExplod]
type = RemoveExplod
trigger1=time=0
trigger2= stateno=241&&movehit=1
trigger3= Time=10
id = 4200||4210||4220||4230||4240

[State 241, 5]
type = ChangeState
trigger1 =animtime=0
value = 0
ctrl =1

[State 241, Idle]
type= statetypeset
trigger1= animelemtime(4)>=0
movetype= I

;======CHAINING========
[State 241, SHOULDER CHARGE]
type = ChangeState
triggerall= var(11) = 0
triggerall=command!="ROTO_CUTTER"
triggerall=command!="EX_SHOULDER1"
triggerall=command!="EX_SHOULDER2"
trigger1= animelemtime(3)>=0&&movehit
trigger1=(command ="SHOULDCHARGE1"||command="SHOULDCHARGE2"||command="SHOULDCHARGE3")
value = 1000
ctrl=0
[State 241, EX SHOULDER CHARGE]
type = ChangeState
triggerall= var(11) = 0
triggerall=command!="ROTO_CUTTER"
trigger1= animelemtime(3)>=0&&movecontact
trigger1 =(command="EX_SHOULDER1"||command="EX_SHOULDER2")&&power>=500
value = 1010
ctrl=0
[State 241, KATANA UPPERCUT]
type = ChangeState
triggerall = command!= "EX_KATUPPER1"
triggerall = command!= "EX_KATUPPER2"
trigger1= animelemtime(3)>=0&&movehit
trigger1 = (command="KATUPPER_1"||command="KATUPPER_2"||command="KATUPPER_3")
value = 1050
ctrl=0
[State 241,EX KATANA UPPERCUT]
type = ChangeState
trigger1= animelemtime(3)>=0&&movehit
trigger1 =power>=500&&(command="EX_KATUPPER1"||command="EX_KATUPPER2")
value = 1060
ctrl=0

;---------------------------------------------------------------------------
; Standing Strong Kick
[Statedef 250]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd=65
ctrl = 0
anim = 250
hitcountpersist=1
[State 250, VarSet]
type=VarSet
trigger1 = Time = 0
v = 50
value = 1
[State 250,Width]
type =Width
trigger1 =1
edge=ifelse((frontEdgebodydist<=40),35,15),0
[State 250, PlaySnd]
type=PlaySnd
trigger1= animelem=1
value = s0,4
volume=255
[State 250, PlaySnd]
type=PlaySnd
trigger1= animelem=2
value = s6,5
channel=0
[State 250, PlaySnd]
type=PlaySnd
trigger1= animelem=1
value = s602,0
volume=170
[State 250, velAdd]
type=Veladd
trigger1= time=0
x=8

;========== KATANA SLASH EXPLODS ========
[State 250, Explod]
type = Explod
trigger1 =animelem=3
anim = 251
ID   = 251
sprpriority = 2
postype = p1
pos = 0,0
velocity = 0, 0
supermove = 999999999999999999999 
pausemove = 999999999999999999999
ontop=1
ownpal = 0
scale = .6,.6
ignorehitpause = 1
bindtime =-1
removetime =7
[State 250, RemoveExplod]
type = Removeexplod 
trigger1=animelemtime(4)=0
trigger2=stateno!=250
ID=251

[State 250, HIT 1]
type = HitDef
trigger1=(EnemyNear(0),Pos Y=0)
trigger1=animelem=3
attr = S, NA
ID=250
nochainID=250 
damage =60,1;24,1
animtype = Heavy
guardflag = MA
hitflag = M
priority = 3, Hit
pausetime = 16,16
sparkno = -1
guard.sparkno= s8000
sparkxy = -24, -46
hitsound = s500,0+(random%2)
guardsound = s2,0+(random%2)
ground.type = High
ground.slidetime =10
ground.hittime  = 19
ground.velocity =-10,0
airguard.velocity =-10,-2
air.type = Trip
air.velocity = -3,-6
air.slidetime = 17
air.hittime  = 17
air.ctrltime = 17
envshake.time = 10
envshake.ampl = 3
fall = 0
fall.recover = 0
air.fall=1
yaccel = .49
persistent = 0
;fall.hittime=80
palfx.time = 3
palfx.add = 255,255,255
palfx.mul = 128,128,128
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0


[State 250, HIT 1]
type = HitDef
trigger1=(EnemyNear(0),Pos Y<0)
trigger1=animelem=3
attr = S, NA
ID=252
nochainID=252
damage =60,1;24,1
animtype = Heavy
guardflag = MA
hitflag = AFD
priority = 3, Hit
pausetime = 16,16
sparkno = -1
guard.sparkno= s8000
sparkxy = -24, -46
hitsound = s500,0+(random%2)
guardsound = s2,0+(random%2)
ground.type = High
ground.slidetime =13
ground.hittime  = 19
ground.velocity =-12,0
airguard.velocity =-10,-2
air.type = Trip
air.velocity = -3,-6
air.slidetime = 17
air.hittime  = 17
air.ctrltime = 17
envshake.time = 10
envshake.ampl = 3
fall = 0
fall.recover = 0
air.fall=1
yaccel = .49
persistent = 0
;fall.hittime=80
palfx.time = 3
palfx.add = 255,255,255
palfx.mul = 128,128,128
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0

[State 250, HELPER]
type=Helper
triggerall=numhelper(451)<=0
trigger1=numtarget(252)>=1&&movehit
helpertype=Normal
name="TRIP DAMAGE"
postype=P1
pos=0,0
stateno=451
id     =451
ownpal=1
size.height=50
size.ground.back=15
size.ground.front=15
persistent=0
ignorehitpause=1
supermove = 999999999999999999999
pausemove = 999999999999999999999

[State 250, HIT Spark]
type = Explod
trigger1=AnimElemtime(3)>=0&&AnimElemtime(3)<=6
trigger1=movehit=1
id   =4010
anim =4010	
postype =P1, Mid
facing=-1
vfacing=1
pos= 45,-50
sprpriority= 9
scale = 1,1
persistent= 0
ontop = 1
ownpal = 1
ignorehitpause = 1
removetime=12
bindtime=1
supermove = 999999999999999999999 
pausemove = 999999999999999999999

[State 250, SLASH Spark]
type = Explod
trigger1=AnimElemtime(3)>=0&&AnimElemtime(3)<=6
trigger1=movehit=1
id = 4200
anim=4200
postype =P1, Mid
facing= 1
vfacing=-1
pos= 45,-50
sprpriority= 9
scale = 1,1
persistent= 0
ontop = 1
ownpal = 1
ignorehitpause = 1
removetime=10
bindtime=1
supermove = 999999999999999999999 
pausemove = 999999999999999999999
[State 250, Explod]
type = RemoveExplod
trigger1=time=0
trigger1 =animelem!=3
trigger4=stateno!=250
anim=4010
id=4010
[State 250, Explod]
type = RemoveExplod
trigger1 = stateno=250&&animelem!=3
trigger2=time=19
anim=4200
id=4200
[State 250, RemoveExplod]
type = Removeexplod 
trigger1=time=0
trigger2=stateno!=250
trigger3=movehit!=1
trigger4=animelem!=3
ID = 4000||4001||4002||4003||4010||4011||4012||4013
[State 250, RemoveExplod]
type = RemoveExplod
trigger1=time=0
trigger2= stateno=250&&movehit!=1
trigger3=animelem!=3
trigger4=Time=10
id = 4200||4210||4220||4230||4240

[State 250, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;=====CHAINING===========
[State 250, COMBO]
type = ChangeState
triggerall=animelemtime(3)>=0&&movehit
triggerall=command!= "KATUPPER_1"
triggerall=command!= "KATUPPER_2"
triggerall=command!= "KATUPPER_3"
triggerall=command!= "EX_KATUPPER1"
triggerall=command!= "EX_KATUPPER2"
triggerall=command!="EX_SHOULDER1"
triggerall=command!="EX_SHOULDER2"
triggerall=command!="SHOULDCHARGE1"&&command!="SHOULDCHARGE2"&&command!="SHOULDCHARGE3"
triggerall=command!="ROTO_CUTTER"
trigger1 =command="holddown"&&command="z"
value = 420
ctrl =0
[State 250, SHOULDER CHARGE]
type = ChangeState
triggerall= var(11) = 0
triggerall=command!="ROTO_CUTTER"
triggerall=command!="EX_SHOULDER1"
triggerall=command!="EX_SHOULDER2"
trigger1= animelemtime(3)>=0&&movehit
trigger1=(command ="SHOULDCHARGE1"||command="SHOULDCHARGE2"||command="SHOULDCHARGE3")
value = 1000
ctrl=0
[State 250, EX SHOULDER CHARGE]
type = ChangeState
triggerall= var(11) = 0
triggerall=command!="ROTO_CUTTER"
trigger1= animelemtime(3)>=0&&movecontact
trigger1 =(command="EX_SHOULDER1"||command="EX_SHOULDER2")&&power>=500
value = 1010
ctrl=0

[State 400, KATANA UPPERCUT]
type = ChangeState
triggerall = command!= "EX_KATUPPER1"
triggerall = command!= "EX_KATUPPER2"
trigger1= animelemtime(3)>=0&&movehit
trigger1 = (command="KATUPPER_1"||command="KATUPPER_2"||command="KATUPPER_3")
value = 1050
ctrl=0
[State 250,EX KATANA UPPERCUT]
type = ChangeState
trigger1= animelemtime(3)>=0&&movehit
trigger1 =power>=500&&(command="EX_KATUPPER1"||command="EX_KATUPPER2")
value = 1060
ctrl=0


[State 250, ChangeState]
type = ChangeState
triggerall=stateno=250&&Vel Y=0
triggerall=command!="EX_SHOULDER1"
triggerall=command!="EX_SHOULDER2"
trigger1=command="ROTO_CUTTER"&&movehit&&power>=1000
value=3100
ctrl=0
[State 250, ChangeState]
type = ChangeState
triggerall=stateno=250&&Vel Y=0
triggerall=command!= "FINAL_SLASH"
trigger1=command="TORNADO"&&movehit&&power>=1000
value=3200
ctrl=0

;---------------------------------------------------------------------------
; Crouching Light Punch
[Statedef 400]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd=15
ctrl = 0
anim = 400
hitcountpersist=1
[State 400, VarSet]
type = VarSet
trigger1 = Time = 0
v = 50
value = 1
[State 400, PlaySnd]
type = PlaySnd
trigger1 = animelem=1
value = s5,7
volume=255
channel=0
[State 400, VOICE]
type = PlaySnd
trigger1 = animelem=3
value = s2,0
volume=255
channel=8
[State 400, Vel Start]
type = VelSet
trigger1 = animelem=2
x =5
[State 400, Vel Stop]
type = VelSet
trigger1 = animelem=3
x =0

[State 400, HIT 1]
type = HitDef
trigger1 = animelem=3
attr = C, NA	
damage =30,1
animtype = Hard
guardflag = MA
hitflag = MAFD
priority = 3, Hit
pausetime = 10,14
sparkno = s4010
guard.sparkno = s8000
sparkxy = -20, -10
hitsound = s500,3
guardsound = s2, 0
ground.type = Low
ground.slidetime=17
ground.hittime  =17
ground.velocity =-8,0
airguard.velocity = -.6,-.8
air.type = High
air.velocity = -4,-7
air.hittime = 14
air.fall=1
fall.recover=0
fall.recovertime = 200
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0

[State 400, SLASH Spark]
type = Explod
trigger1=AnimElemtime(3)>=0&&AnimElemtime(3)<=9
trigger1=movehit=1
id = 4200
anim=4200
postype =P1
facing =-1
vfacing=1
pos= floor(37+p2bodydist X),-10
sprpriority= 9
scale = .6,.6
persistent= 0
ontop = 1
ownpal = 1
ignorehitpause = 1
removetime=10
bindtime=-1
supermove = 999999999999999999999 
pausemove = 999999999999999999999

[State 400, RemoveExplod]
type = Removeexplod 
trigger1=time=0
trigger2=stateno!=400
trigger3=movehit!=1
trigger4=animelem!=3
ID = 4000||4001||4002||4003||4010||4011||4012||4013

[State 400, RemoveExplod]
type = RemoveExplod
trigger1=time=0
trigger2= stateno=400&&movehit!=1
trigger3= Time=10
id = 4200||4210||4220||4230||4240

[State 400, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;=====CHAINING========
[State 400, SHOULDER CHARGE]
type = ChangeState
triggerall= var(11) = 0
triggerall= animelemtime(3)>=1&&movehit
triggerall = command!="EX_SHOULDER1"
triggerall = command!="EX_SHOULDER2"
triggerall=command!= "holddown"
trigger1=(command ="SHOULDCHARGE1"||command="SHOULDCHARGE2"||command="SHOULDCHARGE3")
value = 1000
ctrl=0
[State 400, EX SHOULDER CHARGE]
type = ChangeState
triggerall= var(11) = 0
triggerall=command!="EX_SHOULDER2"
trigger1= animelemtime(3)>=1&&movecontact
trigger1 =(command="EX_SHOULDER1"||command="EX_SHOULDER2")&&power>=500
value = 1010
ctrl=0

[State 400,EX KATANA UPPERCUT]
type = ChangeState
triggerall= animelemtime(3)>=1&&movehit
trigger1 =power>=500&&(command="EX_KATUPPER1"||command="EX_KATUPPER2")
value = 1060
ctrl=0

[State 400, KATANA UPPERCUT]
type = ChangeState
triggerall= animelemtime(3)>=1&&movehit
triggerall = command!= "EX_KATUPPER1"
triggerall = command!= "EX_KATUPPER2"
trigger1 = (command="KATUPPER_1"||command="KATUPPER_2"||command="KATUPPER_3")
value = 1050
ctrl=0
[State 400, COMBO]
type = ChangeState
triggerall=animelemtime(4)>=0&&movehit
triggerall=command!="EX_SHOULDER2"
triggerall=command!="SHOULDCHARGE3"
trigger1 =command="holddown"&&command="z"
value = 420
ctrl =0

;---------------------------------------------------------------------------
; Crouching Medium Punch
[Statedef 410]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd=15
ctrl = 0
velset = 0,0
anim = 410
hitcountpersist=1
[State 410, VarSet]
type = VarSet
trigger1 = Time = 0
v = 50
value = 1
[State 410, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = s5,7
volume=255
channel=0

[State 410, HIT 1]
type = HitDef
trigger1 = animelem=4
attr = C, NA
damage =40,1
animtype = Hard		
guardflag = MA
hitflag = MAF
priority = 3, Hit
guard.pausetime=12,12
pausetime = 8,12
sparkno = s4000
guard.sparkno = s8000
sparkxy = -20, -50
hitsound = s500, 1	
guardsound = s2, 0		
ground.type =High 
ground.slidetime = 7
ground.hittime  = 15
ground.velocity = -8,0
airguard.velocity = -.6,-.8
envshake.time=9
envshake.ampl=-4
envshake.freq=40
envshake.phase=90
air.type = High
air.velocity = -4,-7	
air.hittime = 12
air.fall=1
fall.recover=0
fall.recovertime = 200
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0

[State 410, SLASH Spark]
type = Explod
trigger1=AnimElemtime(4)>=0&&AnimElemtime(4)<=3
trigger1=movehit=1
id = 4200
anim=4200
postype = P1
facing=1
vfacing=1
pos= 40,-40
sprpriority= 9
scale = 1,1
persistent= 0
ontop = 0
ownpal = 1
ignorehitpause = 1
removetime=10
bindtime=1
supermove = 999999999999999999999 
pausemove = 999999999999999999999

[State 410, RemoveExplod]
type = Removeexplod 
trigger1=time=0
trigger2=stateno!=410
trigger3=movehit!=1
trigger4=animelem=5
ID = 4000||4001||4002||4003||4010||4011||4012||4013

[State 410, RemoveExplod]
type = RemoveExplod
trigger1=time=0
trigger2= stateno=410&&movehit!=1
trigger3= Time=10
id = 4200||4210||4220||4230||4240

[State 410, Explod]
type = RemoveExplod
trigger1=time=0
trigger2=animelem!=4
trigger3=stateno!=410
anim=4200
id=4200

;=========CHAINING=========
[State 410, SHOULDER CHARGE]
type = ChangeState
triggerall= var(11) = 0
triggerall= animelemtime(4)>=1&&movehit
triggerall = command!="EX_SHOULDER1"
triggerall = command!="EX_SHOULDER2"
triggerall=command!= "holddown"
trigger1=(command ="SHOULDCHARGE1"||command="SHOULDCHARGE2"||command="SHOULDCHARGE3")
value = 1000
ctrl=0
[State 410, EX SHOULDER CHARGE]
type = ChangeState
triggerall= var(11) = 0
triggerall=command!="EX_SHOULDER2"
trigger1= animelemtime(4)>=1&&movecontact
trigger1 =(command="EX_SHOULDER1"||command="EX_SHOULDER2")&&power>=500
value = 1010
ctrl=0

[State 410,EX KATANA UPPERCUT]
type = ChangeState
triggerall= animelemtime(4)>=1&&movehit
trigger1 =power>=500&&(command="EX_KATUPPER1"||command="EX_KATUPPER2")
value = 1060
ctrl=0

[State 410, KATANA UPPERCUT]
type = ChangeState
triggerall= animelemtime(4)>=1&&movehit
triggerall = command!= "EX_KATUPPER1"
triggerall = command!= "EX_KATUPPER2"
trigger1 = (command="KATUPPER_1"||command="KATUPPER_2"||command="KATUPPER_3")
value = 1050
ctrl=0
[State 410, Idle]
type= statetypeset
trigger1= animelemtime(5)>=0
movetype= I

[State 410, 5]
type = ChangeState
trigger1 =animtime=0
value = 0
ctrl =1
;---------------------------------------------------------------------------
;Crouching Strong punch
;====================== 
[Statedef 420]
type    = C
movetype= A
physics = C
juggle  = 0
poweradd=50
ctrl = 0
anim = 420
sprpriority = 2
facep2=ifelse((prevstateno=[100,101]),0,1)
[State 420, VarSet]
type = VarSet
trigger1 = Time = 0
v = 50
value = 1
[State 420, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = s5,3
volume=255
[State 420, Vel Start]
type = VelSet
trigger1 = animelem<=2
x =5;3
[State 420, Width]
Type= Width
Trigger1=1
edge=5,10
;========== KATANA SLASH EXPLODS ========
[State 420, Explod]
type = Explod
trigger1 =animelem=3&&animelemtime(3)<=3
anim = 422
ID   = 422
sprpriority = 2
postype = p1
pos = 0,0
velocity = 0, 0
supermove = 999999999999999999999 
pausemove = 999999999999999999999
ontop=1
ownpal = 1
scale = .8,.8
ignorehitpause = 1
bindtime =(Ifelse((stateno = 420),-1,0))
removetime =4

[State 420, RemoveExplod];
type = Removeexplod 
trigger1=animelemtime(4)=0
anim =  422
ID   =  422
[State 420, Explod]
type = Explod
triggerall=stateno=420
trigger1 =animelem=4&&animelemtime(4)<=4
anim =  423
ID   =  423
sprpriority =9
postype = p1
pos = 0,0
velocity = 0, 0
supermove = 999999999999999999999 
pausemove = 999999999999999999999
ontop=1
ownpal = 1
scale = .8,.8
ignorehitpause = 1
bindtime =(Ifelse((stateno = 420),-1,0))
removetime =(Ifelse((stateno = 420),1,5))
[State 420, RemoveExplod];
type = Removeexplod 
trigger1=animelemtime(5)>=0
anim =  423
ID   =  423
[State 420, Explod]
type = Explod
trigger1 =animelem=5&&animelemtime(5)<=4
anim =  424
ID   =  424
sprpriority = 2
postype = p1
pos = 0,0
velocity = 0, 0
supermove = 999999999999999999999 
pausemove = 999999999999999999999
ontop=1
ownpal = 1
scale = .8,.8
ignorehitpause = 1
bindtime =(Ifelse((stateno = 420),1,-1))
removetime =6
[State 420, RemoveExplod]
type = Removeexplod 
trigger1=animelemtime(6)>=0
anim =  424
ID   =  424

[State 420, HIT 1]
type = HitDef
trigger1 = animelem=5
Id = 420
nochainid=420
attr = C, NA
damage    =40,1
priority  = 3, Hit
pausetime = 8,8
givepower= 30
getpower = 45
animtype  = up
hitflag   = MAF
guardflag = HAF
sparkno = -1
sparkxy = -15,-60
guard.sparkno = s8000
hitsound = s500,1
guardsound = s2,1
ground.type = High
ground.slidetime = 0
ground.hittime  = 20
ground.velocity = 0, -12
air.type = Low
airguard.velocity = -5,-5
air.velocity = 0,-8
air.hittime = 20
p2facing = 1
recover=0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0	
envshake.time = 10
envshake.freq = 80
envshake.ampl = 4

[State 420, LaunchSpark]
type = Explod
;triggerall=numexplod(4030)<=0
trigger1=AnimElemtime(5)>=0&&AnimElemtime(5)<=3
trigger1=movehit
id   =4030
anim =4030
postype = P1, Mid
facing=1
vfacing=1
pos= 50,-70
sprpriority=5
scale =1.1,1.1
persistent= 0
ontop = 1
ownpal= 1
ignorehitpause = 1
removetime=18
bindtime=1
supermove = 999999999999999999999 
pausemove = 999999999999999999999

[State 420, Explod]
type = RemoveExplod
trigger1=time=0
trigger2=stateno!=420
trigger3= time =18
id =4030

[State 420, HIT SPARK]
type = Explod
trigger1=AnimElemtime(5)>=0&&AnimElemtime(5)<=3
trigger1=movehit=1
id =  4012
anim =4012
postype = P1
pos=60,-65
sprpriority=4
scale = 1,1
persistent= 0
ontop = 1
ownpal = 1
ignorehitpause = 1
removetime=10
bindtime=1

[State 420, Explod]
type = RemoveExplod
trigger1 = time =10
anim=4012
id = 4012

[State 420, 2]
type= targetstate
ID=420
triggerall=!movereversed
triggerall=anim=420&&animelemtime(5)>=0
trigger1 = numtarget(420)=1&& movehit=1
trigger1 = !(target,ishelper)
trigger1 = hitshakeover
ignorehitpause=1
persistent=0
value=421

[State 420, 4]
type = ChangeState
triggerall = stateno= 420 && movehit
trigger1= command = "holdup" || command = "up"||(command="holdfwd"&&command="up")||(command="holdup"&&command="fwd")||(command="holdfwd"&&command="holdup")
value = 55
ctrl=1
[State 420, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------------------
; Custom State - Hit by Launcher
[Statedef 421]
type = A
movetype = H
physics = N
ctrl = 0
facep2 = 1
velset = 0.2, 0

[State 421, 1]
type = ChangeAnim
trigger1 = Time < 15;9
value = IfElse(SelfAnimExist(5052),5052,(IfElse(SelfAnimExist(5051),5051,5050)))

[State 421, 2]
type = VelSet
trigger1 = time = 12
x = -0
y = -10

[State 421, 3]
type = VelAdd
trigger1 = time > 13
y = .39

[State 421, 4]
type = VelSet
trigger1 = !Alive
x = -8
y = -15

[State 421, 5]
type = SelfState
trigger1 = !Alive
value = 5050

[State 421, 6]
type = SelfState
trigger1 = Vel Y > 0
value = 5040
ctrl = 1
;---------------------------------------------------------------------------
; Crouching Light Kick
[Statedef 430]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd=30
ctrl = 0
anim = 430
hitcountpersist=1

[State 430, VarSet]
type = VarSet
trigger1 = Time = 0
v = 50
value = 1
[State 430, PlaySnd]
type = PlaySnd
trigger1 = animelem=2
value = s6,0
volume=255
channel=0
[State 430, Vel Start]
type = VelSet
trigger1 = animelem=2
x =1
[State 430, Vel Stop]
type = VelSet
trigger1 = animelem=3
x =0
[State 430, HIT 1]
type = HitDef
trigger1 = animelem=2
attr = S, NA			
damage =20,1	
animtype = Hard		
guardflag = LA		
hitflag = MAF
priority = 3, Hit
pausetime = 9,9
sparkno = s4010
guard.sparkno = s8000
sparkxy = -20, -10	
hitsound = s700, 0
guardsound = s1, 0
ground.type =High
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -5,0
airguard.velocity = -.6,-.8;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High	
air.velocity = -4,-7	
air.hittime = 12
air.fall=1
fall.recover=0
fall.recovertime = 200
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
[State 430, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
[State 430, RemoveExplod]
type = Removeexplod 
trigger1=time=0
trigger2=stateno!=430
trigger3=movehit!=1
trigger4=animelem>=5
ID = 4000||4001||4002||4003||4010||4011||4012||4013
[State 430, RemoveExplod]
type = RemoveExplod
trigger1=time=0
trigger2= stateno=430&&movehit=1
trigger3= Time=10
id = 4200||4210||4220||4230||4240
;====== CHAINING =======
[State 430, SHOULDER CHARGE]
type = ChangeState
triggerall= var(11) = 0
triggerall= animelemtime(2)>=1&&movehit
triggerall = command!="EX_SHOULDER1"
triggerall = command!="EX_SHOULDER2"
triggerall=command!= "holddown"
trigger1=(command ="SHOULDCHARGE1"||command="SHOULDCHARGE2"||command="SHOULDCHARGE3")
value = 1000
ctrl=0
[State 430, EX SHOULDER CHARGE]
type = ChangeState
triggerall= var(11) = 0
triggerall=command!="EX_SHOULDER2"
trigger1= animelemtime(2)>=1&&movecontact
trigger1 =(command="EX_SHOULDER1"||command="EX_SHOULDER2")&&power>=500
value = 1010
ctrl=0

[State 430,EX KATANA UPPERCUT]
type = ChangeState
triggerall= animelemtime(2)>=1&&movehit
trigger1 =power>=500&&(command="EX_KATUPPER1"||command="EX_KATUPPER2")
value = 1060
ctrl=0

[State 430, KATANA UPPERCUT]
type = ChangeState
triggerall= animelemtime(2)>=1&&movehit
triggerall = command!= "EX_KATUPPER1"
triggerall = command!= "EX_KATUPPER2"
trigger1 = (command="KATUPPER_1"||command="KATUPPER_2"||command="KATUPPER_3")
value = 1050
ctrl=0

[State 430, COMBO]
type = ChangeState
triggerall=movecontact
triggerall = command!= "EX_KATUPPER1"
triggerall = command!= "EX_KATUPPER2"
trigger1 =command="holddown"&&command="x"
value = 400
ctrl =0

;---------------------------------------------------------------------------
; Crouching Medium Kick
[Statedef 440]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd=30
ctrl = 0
anim = 440
[State 440, 1]
type =PosAdd
trigger1 = anim = 440
trigger1 = animelemtime(2)=0
x =20*const(size.xscale)
[State 440, VOICE]
type = PlaySnd
trigger1 =animelem=2
value= s6,0
volume=255
channel=0
[State 440,HIT1]
type = HitDef
trigger1 =animelem=4
attr = C, NA
damage    =40,1
animtype  =Heavy
hitflag  =M
guardflag=M
pausetime = 10,10
sparkno = s4002
guard.sparkno = s8000
sparkxy = -20,-45
hitsound   =s702,0
guardsound = s1,1
ground.type =Low
ground.slidetime=14
ground.hittime  =14
ground.velocity = -7,0
air.velocity = -2,-3
down.velocity = -5,0
down.hittime = 20

[State 440, Explod]; Dash Dust
type = explod
trigger1=animelem=2
anim = 8140
ID = 8140
pos = -15,-2
postype = P1
facing = 1
vfacing = 1
bindtime =1
removetime = 17
supermove = 999999999999999999999 
pausemove = 999999999999999999999
scale = 1,1 
sprpriority = 9
ontop = 1
ownpal = 1
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0
[State 440, Explod]; Dash Dust
type = explod 
trigger1=animelem=2
anim=8130
ID  =8130
pos = 0,-10
postype = P1
facing = 1
velocity=-2,0
vfacing = 1
bindtime =1
removetime = 17
supermove = 999999999999999999999
pausemove = 999999999999999999999
scale = 1,1 
sprpriority = 9
ontop = 1 
ownpal = 1
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0
[State 440, Explod]; Dash Dust
type = explod 
trigger1=animelem=2
anim=8130
ID  =8130
pos = 20,-3
postype = P1
facing = 1
velocity=2,0
vfacing = 1
bindtime =1
removetime = 17
supermove = 999999999999999999999
pausemove = 999999999999999999999
scale = 1.1,1.1 
sprpriority = 9
ontop = 1 
ownpal = 1
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0
[State 440, RemoveExplod]
type = Removeexplod 
trigger1=time=0
trigger2=stateno!=440
trigger3=movehit!=1
trigger4=animelem>=5
ID = 4000||4001||4002||4003||4010||4011||4012||4013

[State 440, RemoveExplod]
type = RemoveExplod
trigger1=time=0
trigger2= stateno=440&&movehit=1
trigger3= Time=10
id = 4200||4210||4220||4230||4240

[State 440, SHOULDER CHARGE]
type = ChangeState
triggerall= var(11) = 0
triggerall= animelemtime(4)>=1&&movehit
triggerall = command!="EX_SHOULDER1"
triggerall = command!="EX_SHOULDER2"
triggerall=command!= "holddown"
trigger1=(command ="SHOULDCHARGE1"||command="SHOULDCHARGE2"||command="SHOULDCHARGE3")
value = 1000
ctrl=0
[State 440, EX SHOULDER CHARGE]
type = ChangeState
triggerall= var(11) = 0
triggerall=command!="EX_SHOULDER2"
trigger1= animelemtime(4)>=1&&movecontact
trigger1 =(command="EX_SHOULDER1"||command="EX_SHOULDER2")&&power>=500
value = 1010
ctrl=0

[State 440,EX KATANA UPPERCUT]
type = ChangeState
triggerall= anim=440&&movehit
trigger1 =power>=500&&(command="EX_KATUPPER1"||command="EX_KATUPPER2")
value = 1060
ctrl=0

[State 440, KATANA UPPERCUT]
type = ChangeState
triggerall= anim=440&&movehit
triggerall = command!= "EX_KATUPPER1"
triggerall = command!= "EX_KATUPPER2"
trigger1 = (command="KATUPPER_1"||command="KATUPPER_2"||command="KATUPPER_3")
value = 1050
ctrl=0

[State 440, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Crouch Strong Kick
[Statedef 450]
type    = C
movetype= A
physics = C
juggle  = 15
poweradd=70
ctrl = 0
anim = 450
sprpriority=2
velset=0,0
hitcountpersist=1
[State 450, VarSet]
type = VarSet
trigger1 = Time = 0
v = 50
value = 1
[State 450, Width]
Type= Width
Trigger1=1
edge=8,8
[State 450, PlaySound]
type = PlaySnd
trigger1 = stateno= 450 && animelemtime(2)=1
value= s0,5
volume=255
[State 450, VOICE]
type = PlaySnd
trigger1 =animelem=2
value= s5,4
volume=255
channel=0

[State 450, 1]
type =PosAdd
trigger1 = anim = 450
trigger1 = animelemtime(2)=0
x =32*const(size.xscale)

[State 450, 1]
type =PosAdd
trigger1 = anim = 450
trigger1 = animelemtime(4)=0
x =16*const(size.xscale)

[State 450, posadd]
type = posadd
trigger1 = anim = 450
trigger1 = animelemtime(6) = 0
x = -24*const(size.xscale)


[State 450, HELPER]
type=Helper
triggerall=numhelper(451)<=0
trigger1=movehit
helpertype=Normal
name="TRIP DAMAGE"
postype=P1
pos=0,0
stateno=451
id     =451
ownpal=1
size.height=50
size.ground.back=15
size.ground.front=15
persistent=0
ignorehitpause=1
supermove = 999999999999999999999
pausemove = 999999999999999999999

[State 450,HIT1]
type = HitDef
trigger1=animelem=5
attr = C, NA
ID=450
nochainID=450
damage    =60,1
priority  = 5, Hit
hitflag = MA
guardflag =L
pausetime = 10,10
sparkno = s4010
sparkxy =-15,ceil(-10*const(size.yscale))
hitsound   = s701, 0
guard.sparkno = s8000
guardsound = s1, 0
animtype=Heavy
ground.type = Trip
ground.slidetime = 13
ground.hittime =Ifelse(p2statetype=C,19,17)
guard.hittime = 15
guard.slidetime = 13
guard.ctrltime = 15
air.hittime = 17
ground.velocity = -5.0*const(size.xscale),-8
guard.velocity = -10.0*const(size.xscale)
air.velocity = -5.0*const(size.xscale),-7.0*const(size.yscale)
fall = 1
fall.recover = 0
fall.envshake.time = 12
fall.envshake.freq = 80
fall.envshake.ampl = -4
air.fall = 1
down.bounce = 0
P2facing = 1
envshake.time = 5
envshake.freq = 60
envshake.ampl = 1
yaccel = 1.0*const(size.yscale)
[State 450, RemoveExplod]
type = Removeexplod 
trigger1=time=0
trigger2=stateno!=450
trigger3=movehit!=1
trigger4=animelem>=4
ID = 4000||4001||4002||4003||4010||4011||4012||4013
[State 450, RemoveExplod]
type = RemoveExplod
trigger1=time=0
trigger2= stateno=450&&movehit=1
trigger3= Time=10
id = 4200||4210||4220||4230||4240
[State 450, Idle]
type= statetypeset
trigger1= animelemtime(6)>=0
movetype= I
[State 450, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;---------------------------
; TRIP DAMAGE Helper
[Statedef 451]
type    = A
movetype= I 
physics = N
velset = 0,0
anim=1052
id=451

[State 451]
type = BindToParent
trigger1 =1
pos= 0,0

[State 451]
type = PlayerPush
trigger1 = 1
value = 0

[State 451]
type = NotHitBy
Trigger1 = 1
value = SCA
Time = 1

[State 451]
type = DestroySelf
trigger1=(Parent, StateNo = 5000)
trigger2=(Parent, StateNo = 5010)
trigger3=(Parent, StateNo = 5020)
trigger4=(Parent, StateNo = 5070)
trigger5=(Parent, StateNo = 5080)
trigger6=(Parent, StateNo = 5100)
trigger7=(Parent, stateno=800)
trigger8=(Parent, stateno=830)
trigger9=(Parent, stateno=840)
trigger10=(Parent, stateno=100)
trigger11=(Parent, stateno=105)
trigger12=(Parent, stateno=40)
trigger13=(Parent, stateno=41)
trigger14=(Parent, stateno=120)
trigger15=(Parent, stateno=130)
trigger16=(Parent, stateno=131)
trigger17=(Parent, stateno=132)
trigger18=(Parent, numtarget!=1)
trigger18=Time>=5
trigger19=(Parent, stateno=0)
trigger20=(Parent, stateno=3100)
trigger20=(Parent, prevstateno!=450)
trigger20=(Parent, prevstateno!=3200)
trigger21=(Parent, stateno=3105)
trigger21=(Parent, anim!=3106)
trigger22=(Parent, stateno=3201)
trigger23=(Parent, stateno=1021)
trigger24=(Parent, stateno=1062)
trigger25=(Parent, stateno=890)
trigger26=(EnemyNear(0),authorname="GM")
trigger27=(Parent, stateno=3105)
trigger27=(Parent, animelem>=13)
id=451
;---------------------------------------------------------------------------
; Jump Light Punch
[Statedef 600]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd=11
ctrl = 0
anim = 600

[State 600, VarSet]
type = VarSet
trigger1 = Time = 0
v = 50
value = 1
[State 600, Width]
Type= Width
Trigger1=1
edge=8,0
[State 600, PlaySnd]
type=PlaySnd
trigger1= animelem=1
value = s600,0+(random%3)

[State 600, 1]
type = VelAdd
triggerall= Pos Y<=-15&&numtarget
trigger1= (P2bodydist X>=10&&P2bodydist X<=40)&&P2statetype=A
trigger1 = Time = 0
trigger2 = (Target, stateno=421)
trigger2 = (P2bodydist X>=10&&P2bodydist X<=70)&&P2statetype=A
trigger2 = Time = 0
x = const(velocity.run.back.x)*(-.5)

[State 600, HIT 1]
type = HitDef
trigger1=Animelem=3
trigger2=!movecontact
trigger2=Animelem=4
trigger3=!movecontact
trigger3=Animelem=5
trigger4=!movecontact
trigger4=Animelem=6
attr = A, NA
damage    =20,1;16,0
getpower = 10
givepower = 40
guardflag = HA
hitflag = MAF
priority = 3, Hit
animtype=Light
pausetime = 14,14
sparkno =  s4000
sparkxy = -20,-20
hitsound= s500,0
guardsound = s2,1
guard.sparkno = s8000
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -6,0
air.type = Low
air.velocity = -1,-3
yaccel=0.65
air.hittime = 16
fall.hittime=200
envshake.time=9
envshake.ampl=2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0

[State 600, SLASH Spark]
type = Explod
triggerall=anim=600
trigger1=movehit=1
id = 4220
anim=4220
postype =P1
facing=-1
vfacing=1
pos= floor(ifelse((p2bodydist x<=0), p2bodydist x,30+p2bodydist X)),-20
sprpriority= 9
scale = .95,.6
persistent= 0
ontop = 1
ownpal = 1
ignorehitpause = 1
removetime=10
bindtime=1
supermove = 999999999999999999999 
pausemove = 999999999999999999999

[State 600, RemoveExplod]
type = Removeexplod 
trigger1=time=0
trigger2=stateno!=600
trigger3=movehit!=1
trigger4=animelem=41
ID = 4000||4001||4002||4003||4010||4011||4012||4013

[State 600, RemoveExplod]
type = RemoveExplod
trigger1=time=0
trigger2= stateno=600&&movehit!=1
trigger3= Time=10
id = 4200||4210||4220||4230||4240

[State 600, KATANA UPPERCUT]
type = ChangeState
triggerall = command!= "EX_KATUPPER1"
triggerall = command!= "EX_KATUPPER2"
trigger1= animelemtime(3)>=1&&movehit
trigger1 = (command="KATUPPER_1"||command="KATUPPER_2"||command="KATUPPER_3")
value = 1050
ctrl=0
[State 600,EX KATANA UPPERCUT]
type = ChangeState
trigger1= animelemtime(3)>=1&&movehit
trigger1 =power>=500&&(command="EX_KATUPPER1"||command="EX_KATUPPER2")
value = 1060
ctrl=0
;---------------------------------------------------------------------------
; Jump Medium Punch
[Statedef 610]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd=65
ctrl = 0
anim = 610
hitcountpersist=1
sprpriority=9
ontop=1

[State 610, VarSet]
type = VarSet
trigger1 = Time = 0
v = 50
value = 1
[State 610, Width]
type = Width
trigger1 = 1
value = 12,0
[State 610, PlaySnd]
type=PlaySnd
trigger1= animelem=1
value = s602,0
channel=0
volume=255
;========== KATANA SLASH EXPLODS ========
[State 610, Explod]
type = Explod
trigger1 =animelem=4
anim = 251
ID   = 251
facing=1
vfacing=-1
sprpriority=-1
postype = p1
pos = -10,-80
scale = .7,.5
velocity = 0, 0
supermove = 999999999999999999999 
pausemove = 999999999999999999999
ownpal =0
ignorehitpause = 1
bindtime =ifelse((animelem!=4),6,-1)
removetime =ifelse((animelem!=4),6,-1)

[State 610, RemoveExplod]
type = Removeexplod 
trigger1=time=0
trigger2=animelemtime(5)>=0
trigger3=stateno!=610
trigger4=Pos Y>=-10
anim = 251
ID   = 251

[State 610, HIT 1]
type = HitDef
trigger1 = animelem=4
attr = A, NA
animtype= Light
damage =40,1;16,0
hitflag= MAF
guardflag = HA
sprpriority=9
priority = 3, Hit
pausetime = 14,14
sparkno =  -1
sparkxy = -5,-35
hitsound   = s500,1
guard.sparkno = s8000
guardsound = s2, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -4,0
air.velocity = -2,ifelse((Enemy, Pos Y>=Pos Y),-2,0)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0

[State 610, HIT Spark]
type = Explod
trigger1=anim=610&&movehit
id = 4010
anim=4010
postype = P1
facing=1
vfacing=-1
pos= floor(ifelse((p2bodydist x<=0), 35+p2bodydist x,40+p2bodydist X)),-25;50,-40
sprpriority=8
scale = 1,1
persistent= 0
ontop = 1
ownpal = 1
ignorehitpause = 1
removetime=9
bindtime=1
supermove = 999999999999999999999 
pausemove = 999999999999999999999

[State 610, SLASH Spark]
type = Explod
trigger1=anim=610&&movehit
id = 4200
anim=4200
postype = P1
facing=-1
vfacing=1
pos= floor(ifelse((p2bodydist x<=0), 35+p2bodydist x,40+p2bodydist X)),-25;55,-40
sprpriority= 8
scale = 1,1
persistent= 0
ontop = 0
ownpal = 1
ignorehitpause = 1
removetime=10
bindtime=1
supermove = 999999999999999999999 
pausemove = 999999999999999999999

[State 610, RemoveExplod]
type = Removeexplod 
trigger1=time=0
trigger2=stateno!=610
trigger3=movehit!=1
trigger4=animelem>=5
ID = 4000||4001||4002||4003||4010||4011||4012||4013

[State 610, RemoveExplod]
type = RemoveExplod
trigger1=time=0
trigger2= stateno=610&&movehit!=1
trigger2= stateno=610&&animelem!=4
trigger3= Time=10
id = 4200||4210||4220||4230||4240

[State 610, KATANA UPPERCUT]
type = ChangeState
triggerall = command!= "EX_KATUPPER1"
triggerall = command!= "EX_KATUPPER2"
trigger1= animelemtime(4)>=1&&movehit
trigger1 = (command="KATUPPER_1"||command="KATUPPER_2"||command="KATUPPER_3")
value = 1050
ctrl=0
[State 610,EX KATANA UPPERCUT]
type = ChangeState
trigger1= animelemtime(4)>=1&&movehit
trigger1 =power>=500&&(command="EX_KATUPPER1"||command="EX_KATUPPER2")
value = 1060
ctrl=0

[State 610, Idle]
type= statetypeset
trigger1= animelem>=5
movetype= I

[State 610, 2]
type = CtrlSet
trigger1 = Time = 20
value = 1
;---------------------------------------------------------------------------
; Jump Strong Punch
[Statedef 620]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd=70
ctrl = 0
anim = 620
hitcountpersist=1

[State 620, VarSet]
type = VarSet
trigger1 = Time = 0
v = 50
value = 1
[State 620, Width]
Type= Width
trigger1=1
edge=20,0
[State 620, PlaySnd]
type=PlaySnd
trigger1= animelem=1
value = s300, 0+(random%3)
[State 620, PosAdd]
type = PosAdd
triggerall=Pos Y <=-25
trigger1 =Time=0
y=-20

[State 620,HIT1]
type = HitDef
trigger1 =animelem=3
trigger2 =!movecontact
trigger2 =animelem=4
attr = A, NA
animtype= Medium
damage =40,1
hitflag= MAF
guardflag = HA
priority = 3, Hit
pausetime = 10,10
sparkno = -1
sparkxy = -15,-15
hitsound   = s500,0
guard.sparkno = s8000
guardsound = s2, 1
ground.type = High
ground.slidetime=12
ground.hittime  =15
ground.velocity = -7,0
air.type = Low
air.velocity = -6,-2
air.cornerpush.veloff=0
yaccel=0.65
air.hittime = 15
air.fall=1
fall.hittime=200
recover=0
envshake.time=9
envshake.ampl=3
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0

[State 620, HIT Spark]
type = Explod
triggerall= anim = 620
trigger1=movehit
id = 4000+(random%2) 
postype = P1
facing =-1
vfacing=-1
pos= 55,-15
anim =4001
sprpriority= 9
scale = 1,1
persistent= 0
ontop = 1
ownpal = 1
ignorehitpause = 1
removetime=9
bindtime=1
supermove = 999999999999999999999 
pausemove = 999999999999999999999

[State 620, SLASH Spark]
type = Explod
triggerall= anim = 620
trigger1=movehit
id = 4200
anim=4200
postype = P1
facing =-1
vfacing=-1
pos= 55,-15
sprpriority= 9
scale = 1.1,1.1
persistent= 0
ontop = 1
ownpal = 1
ignorehitpause = 1
removetime=10
bindtime=1
supermove = 999999999999999999999 
pausemove = 999999999999999999999
[State 620, RemoveExplod]
type = Removeexplod 
trigger1=time=0
trigger2=stateno!=620
trigger3=movehit!=1
trigger4=animelem>=5
trigger5= Time=10
ID = 4000||4001||4002||4003||4010||4011||4012||4013

[State 620, RemoveExplod]
type = RemoveExplod
trigger1=time=0
trigger2= stateno=620&&movehit!=1
trigger2= stateno=620&&animelem>=5
trigger3= Time=10
id = 4200||4210||4220||4230||4240

[State 620, KATANA UPPERCUT]
type = ChangeState
triggerall = command!= "EX_KATUPPER1"
triggerall = command!= "EX_KATUPPER2"
trigger1= animelemtime(3)>=1&&movehit
trigger1 = (command="KATUPPER_1"||command="KATUPPER_2"||command="KATUPPER_3")
value = 1050
ctrl=0
[State 620,EX KATANA UPPERCUT]
type = ChangeState
trigger1= animelemtime(3)>=1&&movehit
trigger1 =power>=500&&(command="EX_KATUPPER1"||command="EX_KATUPPER2")
value = 1060
ctrl=0

[State 620, Idle]
type= statetypeset
trigger1= animelem>=5
movetype= I
;---------------------------------------------------------------------------
; Jump Light Kick
[Statedef 630]
type    = A
movetype= A
physics = A
juggle  = 3
poweradd=20
ctrl = 0
anim = 630
hitcountpersist=1

[State 630, VarSet]
type = VarSet
trigger1 = Time = 0
v = 50
value = 1
[State 630, Width]
Type= Width
Trigger1=1
edge=8,0
[State 630, 1]
type = VelAdd
triggerall= Pos Y<=-15&&numtarget
trigger1= (P2bodydist X>=10&&P2bodydist X<=40)&&P2statetype=A
trigger1 = Time = 0
trigger2 = (Target, stateno=421)
trigger2 = (P2bodydist X>=10&&P2bodydist X<=80)&&P2statetype=A
trigger2 = Time = 0
x = const(velocity.run.back.x)*(-.5)

[State 630, HIT 1]
type = HitDef
trigger1 = animelem=2
trigger2 =!movecontact
trigger2 =Animelem=3
trigger3 =!movecontact
trigger3 =Animelem=4
trigger4 =!movecontact
trigger4 =Animelem=5
trigger5 =!movecontact
trigger5 =Animelem=6
trigger6 =!movecontact
trigger6 =Animelem=7
trigger7 =!movecontact
trigger7 =Animelem=8
trigger8 =!movecontact
trigger8 =Animelem=9
attr = A, NA
damage    =20,1;16,0
hitflag= MAF
guardflag = HA
animtype= Light
priority = 4
pausetime = 10,10
guard.pausetime= 12,12
sparkno = s4000+(random%2)
sparkxy = -10,-40
hitsound   = s700,0
guard.sparkno = s8000
guardsound = s1, 0
animtype = Medium
ground.type = High
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -5,0
air.type=High
air.hittime=12
air.velocity = (Ifelse((Hitcount > 3),-4,-2)),ifelse((Enemy, Pos Y>=Pos Y),-6,0)
air.fall=Ifelse((Hitcount > 3),1,0)
fall.hittime=200
envshake.time=9
envshake.ampl=2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0

[State 630, RemoveExplod]
type = Removeexplod 
trigger1=time=0
trigger2=stateno!=630
trigger3=movehit!=1
trigger4=animelem>=10
ID = 4000||4001||4002||4003||4010||4011||4012||4013

[State 630, RemoveExplod]
type = RemoveExplod
trigger1=time=0
trigger2= stateno=630&&movehit=1
trigger3= Time=10
id = 4200||4210||4220||4230||4240

[State 630, Idle]
type= statetypeset
trigger1= animelem>=10
movetype= I

[State 630, KATANA UPPERCUT]
type = ChangeState
triggerall = command!= "EX_KATUPPER1"
triggerall = command!= "EX_KATUPPER2"
trigger1= animelemtime(2)>=1&&movehit
trigger1 = (command="KATUPPER_1"||command="KATUPPER_2"||command="KATUPPER_3")
value = 1050
ctrl=0
[State 630,EX KATANA UPPERCUT]
type = ChangeState
trigger1= animelemtime(2)>=1&&movehit
trigger1 =power>=500&&(command="EX_KATUPPER1"||command="EX_KATUPPER2")
value = 1060
ctrl=0

;---------------------------------------------------------------------------
; Jump Medium Kick
[Statedef 640]
type    = A
movetype= A
physics = A
juggle  = 0
poweradd=65
ctrl = 0
anim = 640
hitcountpersist=1

[State 640, 1]
type = VelAdd
triggerall= Pos Y<=-15&&numtarget
trigger1 = (Target, stateno=421)
trigger1 = (P2bodydist X>=10&&P2bodydist X<=70)&&P2statetype=A
trigger1 = Time = 0
x = const(velocity.run.back.x)*(-.5)

[State 640, VarSet]
type = VarSet
trigger1 = Time = 0
v = 50
value = 1
[State 640, Width]
Type= Width
trigger1=1
edge=8,0
[State 640, HIT 1]
type = HitDef
trigger1=Animelem=3
trigger2=!movecontact
trigger2=Animelem=4
attr = A, NA
animtype= Light
damage =20,1
hitflag= MAF
guardflag = HA
priority = 3, Hit
pausetime = 14,14
sparkno =  s4000+(random%2) 
sparkxy = -15,-15
hitsound   = s700,0
guard.sparkno = s8000
guardsound = s1, 0
ground.type = High
ground.slidetime= 12
ground.hittime  = 16
ground.velocity = -4,0
airguard.velocity = -.6,-.8
air.type=Low
air.velocity =0,ifelse((Enemy, Pos Y>=Pos Y),-4,-2)
air.hittime=16
air.fall=Ifelse((Hitcount > 5),1,0)
fall.hittime=200
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0

[State 640, Explod]
type = RemoveExplod
trigger1 =1
ID   =  424
[State 640, RemoveExplod]
type = Removeexplod 
trigger1=time=0
trigger2=stateno!=640
trigger3=movehit!=1
trigger4=animelem<=2
ID = 4000||4001||4002||4003||4010||4011||4012||4013
[State 640, RemoveExplod]
type = RemoveExplod
trigger1=time=0
trigger2= stateno=640&&movehit=1
trigger3= Time=10
id = 4200||4210||4220||4230||4240
[State 640, KATANA UPPERCUT]
type = ChangeState
triggerall = command!= "EX_KATUPPER1"
triggerall = command!= "EX_KATUPPER2"
trigger1= animelemtime(3)>=1&&movehit
trigger1 = (command="KATUPPER_1"||command="KATUPPER_2"||command="KATUPPER_3")
value = 1050
ctrl=0
[State 640,EX KATANA UPPERCUT]
type = ChangeState
trigger1= animelemtime(3)>=1&&movehit
trigger1 =power>=500&&(command="EX_KATUPPER1"||command="EX_KATUPPER2")
value = 1060
ctrl=0
;---------------------------------------------------------------------------
; Jump Strong Kick
[Statedef 650]
type    = A
movetype= A
physics = A
juggle  = 8
poweradd=70
ctrl = 0
anim = 650
hitcountpersist=1
veladd=0,-2
[State 650, VarSet]
type = VarSet
trigger1 = Time = 0
v = 50
value = 1
[State 650, PlaySnd]
type=PlaySnd
trigger1= animelem=2
value = s6,1
channel=0
[State 650, ScreenBound]
type = ScreenBound
triggerall=frontedgedist >70
trigger1 = movehit&& !moveguarded
value = ifelse(backedgebodydist <50,1,0)
movecamera = 0,0

[State 650, HIT 1]
type = HitDef
trigger1 = animelem=2
id=650
nochainid=650||822||823||824||825||827||1027||1028
attr = A, NA			
damage =60,1;24, 0			
animtype = Heavy	
guardflag =HA			
hitflag = MAF		
priority = 3, Hit			
pausetime = 14,14			
sparkno = s4000+(random%2)
guard.sparkno = s8000
sparkxy = -15, -36		
hitsound = s701,0		
guardsound = s1, 0		
ground.type = High		
ground.slidetime = 5		
ground.hittime  = 15		
ground.velocity = -5		
airguard.velocity = -.6,-.8	
air.type = High			
air.velocity = -6,4
air.hittime = 16
fall.velocity = -6,-6	
fall.hittime=200
fall.envshake=IfElse((velset y >= 40),1)
fall.envshake.time=10
fall.envshake.ampl=7		
envshake.time=9
envshake.ampl=3
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
air.fall=1
recover=0
[State 650, RemoveExplod]
type = Removeexplod 
trigger1=time=0
trigger2=stateno!=650
trigger3=movehit!=1
trigger4=animelem>=3
ID = 4000||4001||4002||4003||4010||4011||4012||4013
[State 650, RemoveExplod]
type = RemoveExplod
trigger1=time=0
trigger2=stateno=650&&movehit=1
trigger3= Time=10
id = 4200||4210||4220||4230||4240
[State 650]
type=Helper
trigger1=animelem=2&&movehit
helpertype=Normal
name="GuardPush"
postype=P1
pos=20,0
stateno=1001
ownpal=1
size.height=200
size.ground.back=30
size.ground.front=30

[State 650, END]
type = ChangeState
triggerall=1
trigger1 = Vel Y >= 0
trigger1 = Pos Y >=-9
trigger2 = vel Y > 0
trigger2 = pos y > -vel y
value =890
ctrl = 0
[State 650, 4]
type=Velset
triggerall= numtarget&&movehit
triggerall= FrontEdgebodyDist<=30
triggerall= enemy(0),BackEdgeBodyDist<20
triggerall= enemy(0), pos Y<0
triggerall= target, stateno=824
trigger1=Time>=0
trigger1=Time<=10
x=-6
y=0
[State 650, VelSet]
type = VelAdd
trigger1=animelem=2&&movehit
x=-4
y=-8
[State 650, Idle]
type= statetypeset
trigger1= animelem>=3
movetype= I

[State 650, KATANA UPPERCUT]
type = ChangeState
triggerall = command!= "EX_KATUPPER1"
triggerall = command!= "EX_KATUPPER2"
trigger1= animelemtime(2)>=1&&movehit
trigger1 = (command="KATUPPER_1"||command="KATUPPER_2"||command="KATUPPER_3")
value = 1050
ctrl=0
[State 650,EX KATANA UPPERCUT]
type = ChangeState
trigger1= animelemtime(2)>=1&&movehit
trigger1 =power>=500&&(command="EX_KATUPPER1"||command="EX_KATUPPER2")
value = 1060
ctrl=0
;---------------------------------------------------------------------------
; Jump Hard Kick -- Flip Back
[Statedef 651]
type    = A
movetype= A
physics = A
juggle  = 0
poweradd= 0
ctrl = 0
anim = ifelse((prevstateno=[1050,1060]),1062,651)

[State 651, Playerpush]
type = Playerpush
trigger1 = 1
value=0

[State 651, Varset]
type=VarSet
triggerall=var(11)!=0
trigger1=Time=0
v=11
value=0
[State 651, Varset]
type=VarSet
triggerall=var(14)!=0
trigger1=Time=0
v=14
value=0
[State 651, Varset]
type=VarSet
triggerall=var(15)!=0
trigger1=Time=0
v=15
value=0

[State 651, StateTypeSet]
type= StateTypeSet
trigger1= animelem=1
statetype=A
movetype= A
physics= A

[State 651, 1]
type = velAdd
trigger1 = animelem= 1
x=ifelse((prevstateno=[1050,1060]),0,-1)

[State 651, 2]
type = velSet
triggerall=prevstateno!=3200
trigger1 = animelem=1
x= ifelse((FrontEdgeDist<=40),-3,-3)
y= ifelse((prevstateno=[1050,1060]),-3,-5)

[State 651, Gravity] ;Gravity
type = VelAdd
trigger1=1 
y = ifelse((prevstateno=[1050,1060]),.05,.25)

[State 651, END]
type = ChangeState
trigger1 = Vel Y >= 0
trigger1 = Pos Y >=-2
trigger2 = vel Y > 0
trigger2 = pos y > -vel y
value =890
ctrl = 0
;-------------------------------------
; Throw - Attempt
[Statedef 800]
type    = S
movetype= A
physics = S
juggle  = 15
velset = 0,0
ctrl = 0
anim = 800
facep2=1
sprpriority=9
ontop=1
[State 800, 1]
type = HitDef
trigger1 = animelem=1
trigger1= var(38)=0
attr = S, NT  
ID=800       
hitflag = M-      
priority = 4, Miss    
sparkno = -1         
sprpriority = 1      
p1facing = 1
p1stateno = 810       
p2stateno = 820       
fall = 1              
hitsound= s801,0
facep2=1
[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1
[State 800, WHIFFER Sound]
type = PlaySnd
trigger1 = animelem=2
value= s802, 0
;---------------------------------------------------------------------------
; Throwing the opponent

[Statedef 810]
type    = S
movetype= A
physics = N
anim = 810
poweradd =0
juggle=0

[State 810, Turn]
type = Turn
trigger1 = AnimElemtime(17)=0

;========= SCREENBOUND ======
[State 810, HELPER]
type=Helper
trigger1 =animelem=12
helpertype=normal
name="SCREENBOUND"
postype=Left
pos=0,0
velocity=0,0
stateno=3301
id=3310
ownpal=1
supermovetime = 9999999999999
pausemovetime = 9999999999999
size.height=360
size.ground.back=0
size.ground.front=3
size.air.back =0
size.air.front=3
screenbound=1
movecamera=1

[State 810, HELPER]
type=Helper
trigger1 =animelem=12
helpertype=normal
name="SCREENBOUND"
postype=Right
pos=0,0
velocity=0,0
stateno=3302
id=3311
ownpal=1
supermovetime = 9999999999999
pausemovetime = 9999999999999
size.height=360
size.ground.back=3
size.ground.front=0
size.air.back =3
size.air.front=0
screenbound=1
movecamera=1
;===============

[State 810, Width]
Type= Width
Trigger1=1
edge=70,90

[State 810, NotHitBy]
type=NotHitBy
trigger1=stateno=810
value=SCA, AP, AT, AA

[State 810, PlayerPush]
type = PlayerPush
trigger1 = stateno=810
value = 0

[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem =1
pos = 10, -20

[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem =2
pos = -28, -10

[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem =3
pos = -50, -10

[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem =4
pos = -50, -15

[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem =5
pos = -50, -20

[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem =6
pos = -35, 0

[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem =7
pos = -10, -20

[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem =8
pos = 76, -30

[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem =9
pos = 50, -10

[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem =10
pos = 50, -15

[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem =11
pos = 50, -20

[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem =12
pos = 10, -20

[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem =13
pos = -76, -20

[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElemtime(14)=0
pos = -50,-30

[State 810, Throw 11]
type = TargetState
ID=800
trigger1 = AnimElemtime(14)=0
value = 821
ignorehitpause=1

[State 810, Bind 1]
type = TargetDrop
ID=800
trigger1 = AnimElemtime(14)>=2

[State 810, Explod]; GROUND HIT DUST
type = explod 
trigger1 = animelem=4||animelem=15
anim = 4022
ID   = 4022
pos =  30,10
postype = P2,mid
facing = 1
vfacing = 1
bindtime= 1
removetime = 10
supermove = 999999999999999999999
pausemove = 999999999999999999999
scale =1.2,1.2
sprpriority =2
ontop =0
ownpal = 1
removeongethit = 1
shadow =0

[State 810, Explod]; GROUND HIT DUST
type = explod 
trigger1 = animelem=10
anim = 4022
ID   = 4022
pos = -30,10
postype = P2,mid
facing = 1
vfacing = 1
bindtime= 1
removetime = 10
supermove = 999999999999999999999
pausemove = 999999999999999999999
scale =1.2,1.2
sprpriority =2
ontop =0
ownpal = 1
removeongethit = 1
shadow =0

[State 810, Explod]; GROUND HIT SPARKS
type = explod 
trigger1 = animelem=3||animelem=14
anim=4020
ID = 4020
pos = 30,ifelse((animelem=3),8,16)
postype = P2,mid
facing = 1
vfacing = 1
bindtime = 1
removetime = 11
supermove = 999999999999999999999
pausemove = 999999999999999999999
scale = 1.2,1.2
sprpriority =9
ontop =1
ownpal = 1
removeongethit = 1
shadow =0


[State 810, Explod]; GROUND HIT SPARKS
type = explod 
trigger1 = animelem=9
anim =4020
ID = 4020
pos = -30,12
postype = P2,mid
facing = 1
vfacing = 1
bindtime = 1
removetime = 11
supermove = 999999999999999999999
pausemove = 999999999999999999999
scale = 1.2,1.2
sprpriority =9
ontop =1
ownpal = 1
removeongethit = 1
shadow =0

[State 810, RemoveExplod]
type = RemoveExplod
trigger1= time=12
id = 4022

[State 810, Hurt 11]
type = TargetLifeAdd
trigger1 = AnimElem =3
trigger2 = Animelem =9
trigger3 = Animelemtime(14)=0
value = -45


[State 810, Envshake]
type= EnvShake
trigger1 = AnimElem =3
trigger2 = Animelem =9
trigger3 = Animelem =14
time = 15
freq = 100
ampl = -4
phase = 10


[State 810, HitSound]
type= Playsnd
trigger1 = AnimElem =3
trigger2 = Animelem =9
trigger3 = Animelemtime(14)=2
value= s824,0
;volume=0

[State 810, HitSound]
type= Playsnd
trigger1 = AnimElem =3
trigger2 = Animelem =9
trigger3 = Animelemtime(14)=2
value= s800,0
volume=255

[State 810, HitAdd]
type= HitAdd
trigger1 = Animelem =9
trigger2 = Animelemtime(14)=2
value= 1

[State 810, WhiffSound]
type= Playsnd
trigger1 = AnimElem =1
trigger2 = Animelem =7
trigger3 = Animelem =12
value= s0,4

[State 810, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;============================
;======== CODING by QUETZALCOATL88 ===============
; screen splatter
[Statedef 805]
type    = S			
movetype= A				
physics = S			
juggle  = 15						
ctrl = 0			
anim = 800				
poweradd = 0		
sprpriority = 5	
velset= 0,0		

[State -2, 1]
type = AfterImageTime
trigger1 =1
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
time=0

[State 805, 1]
type = HitDef
trigger1 = animelem=1
trigger1= var(38)=0
attr = S, NT		
damage = 0		
animtype = light							
pausetime = 0, 0
priority= 4,Miss
sparkno = -1         
sprpriority = 1   
p2facing=1
p2stateno = 823
p1stateno = 806			
fall = 1 
hitsound=-1
recover=0
fall.hittime=200
facep2=1

[State 805, 2]
type = changestate
triggerall = !movehit
trigger1 = animtime = 0
value = 0
ctrl = 1

[State 805, WHIFFER Sound]
type = PlaySnd
trigger1 = anim=800&&animelem=2
value= s802, 0
;=================================
[Statedef 806] ;screen splatter 2
type    = S			
movetype= A				
physics = N			
juggle  = 1						
ctrl = 0			
anim = 811				
poweradd = 0		
sprpriority = 5	
velset= 0,0

[State 806, PlaySnd]
type=PlaySnd
trigger1=!Time
value=s801,0
volume=255
channel=0
ignorehitpause=1
persistent=0

[State 806, VOICE Sound]
type= Playsnd
triggerall=random>500
trigger1 = AnimElem =2
value= s4,5
volume=255
[State 806, NotHitBy]
type=NotHitBy
trigger1=stateno=806
value=SCA, AP, AT, AA	

[State 806, Playerpush]
type = Playerpush
trigger1 =1
value=0

[State 806, Width]
Type= Width
triggerall=animelemtime(1)=0&&animelemtime(5)<=40
Trigger1=1
value=70,120

[State 806, ScreenBound]
type = ScreenBound
triggerall=animelemtime(1)=0&&animelemtime(5)<=39
trigger1 =1
value =1
movecamera =0,0


[State 806, Bind 1]
type = sprpriority
trigger1 = AnimElem =4
value = -5			
[State 806, Bind 1]
type = targetbind
trigger1 = AnimElem = 1 
pos = 40, 0
;ID= 823
[State 806, Bind 2]
type = targetbind
trigger1 = AnimElem = 2 
pos = 11, -20
;ID= 823
[State 806, Bind 3]
type = targetbind
trigger1 = AnimElem = 3 
pos = -29, -10
;ID= 823
[State 806, Throw 11]
type = Targetbind
trigger1 = AnimElem =4
pos = -60,-40
[State 806, Throw 11]
type = Targetbind
trigger1 = AnimElem =5
pos = -120,-50

;ID= 30740
[State 806, 7]
type = changestate
trigger1 = animtime= 0
value = 0
ctrl = 1
[State 806, Throw 11]
type = TargetState
trigger1 = AnimElem =4
value = 30740
[State 806,LifeAdd]
type =TargetLifeadd
trigger1 = AnimElemtime(5)=35
value = ifelse((prevstateno=1010),-40,-140)
[State 806, HitSound]
type= Playsnd
trigger1 = AnimElem =4
value= s830,0
[State 806, HitSound]
type= Playsnd
trigger1 = AnimElemtime(5)=35
value= s710,0


[State 806, Assert] 
type = AssertSpecial
trigger1 =animelemtime(5)>=36&&animelemtime(6)<=0
flag = noFG
flag2= globalnoshadow
pausemove=99999
supermove=99999
ignorehitpause=1

[State 806, BGPalFX]
type= BGPalFX
trigger1= Animelemtime(5)=36
trigger2= Animelemtime(5)=45
time=2
add = 128,128,128
mul = 256,256,256
invertall =1

[State 806, 7]
type = Targetstate
trigger1 = animelemtime(6)=1
value = 30741
ctrl = 0
[State 806, Turn]
type = Turn
trigger1 = AnimElemtime(6)=1
;--------------------------------------------------------------------
; splatted
[Statedef 30740]
type    = S			
movetype= H				
physics = N			
juggle  = 1						
ctrl = 0			
;anim = 30740				
poweradd = 0		
sprpriority = 2	


[State 30740, AngleSet]
type = AngleSet
trigger1 =Time=0
value = 0

[State 30740, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 30740

[State 30740, NotHitBy]
type=NotHitBy
trigger1=stateno=30740
value=SCA, AP, AT, AA

[State 30740, 1]
type = changeanim2
trigger1 = time = 0
value = 30740



[State 30740, 3]
type = angledraw
trigger1 = time < 45 && time > 4;12
scale = ifelse(time>=93,1,1+((time-3)*.05))*1.07, ifelse(time>=93,1,1+((time-3)*.05))*1.07	

[State 30740, 4]
type = angledraw
triggerall=30740
trigger1 = time >= 45
scale = 4, 4
value = -45
		
[State 30740, 5]
type = envshake
trigger1 = time = 45
time = 10        
ampl = -5
freq = 176

[State 30740, Pos]
type = Angleadd
trigger1 = anim = 30740 && time < 45 && time > 4;12
value = -44

[State 30740, Pos]
type = Angleadd
trigger1 = time = 45
value = 0

[State 30740, Pos]
type = AngleDraw
trigger1 = time = 45
value = 0

[State 30740, Pos]
type = AngleDraw 
trigger1 = anim = 30740 && time < 45 && time > 4;12

;=========================
[Statedef 30741]
type    = A
movetype= H
physics = N
velset = 3,-3
ID= 30741
ctrl=0
[State 30741, 1] ;Gravity
type = VelAdd
Trigger1 = 1
y = .4

[State 30741, 1]
type = ChangeAnim2
Trigger1 = Time=0;<=1
value = 30741

[State 30741, NotHitBy]
type=NotHitBy
trigger1=stateno=30741
value=SCA, AP, AT, AA

[State 30741, 4] ;Hit ground
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100 ;Hit ground
;---------------------------------------------------------------------------
; Opponent Thrown
[Statedef 820]
type    = A
movetype= H
physics = N
velset = 0,0
ID= 820
sprpriority=8
faceP2=1

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 820

[State 820, PalFX]
type= PalFX
trigger1 = AnimElem =4
trigger2 = Animelem =10
trigger3 = Animelem =15
add = 128,128,128 ;256,256,256
time=3

[State 820, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,1

;---------------------------------------------------------------------------
; Opponent thrown into the air
[Statedef 821]
type    = A
movetype= H
physics = N
velset = 6,0;6,3
poweradd = 40
ctrl=0

[State 821, PlayerPush]
type=PlayerPush
trigger1=1
value=0

[State 821, 1] ;Gravity
type = VelAdd
Trigger1 = 1
y = ifelse((Pos Y>=0),0,.4)

[State 821, 4] ;Hit ground
type = SelfState
trigger1 =Vel Y >=0
trigger1 =Pos Y >=-20
value = 5110;00 ;Hit ground
;---------------------------------------------------------------------------
[Statedef 822]
type    = A
movetype= H
physics = N
velset = 3,-3
ID= 822
ctrl=0

[State 822, 1] ;Gravity
type = VelAdd
Trigger1 = 1
y = .4

[State 822, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 820

[State 822, NotHitBy]
type=NotHitBy
trigger1=stateno=822
value=SCA, AP, AT, AA

[State 822, 4] ;Hit ground
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100 ;Hit ground
;---------------------------------------------------------------------------
; Screen Splatter - Opponent Thrown
; (a custom gethit state)
[Statedef 823]
type    = A
movetype= H
physics = N
velset = 0,0
ID= 823

[State 823, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 822
;========================================
; Hit By Smash
;=========================================
[Statedef 825]
type    = A
movetype= H
physics = N
velset = 0,0
faceP2=1
hitdefpersist=1
ID=825
ctrl=0


[State 825, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag=noautoturn

[State 825, NotHitBy]
type=NotHitBy
trigger1=1
value=SCA

[State 825, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 825

[State  825, 1]
type = ChangeState
trigger1 = Time=0
value = 824

;========================================
; Hit By Smash
;=========================================
[Statedef 827]
type    = A
movetype= H
physics = N
velset = 0,0
faceP2=1
hitdefpersist=1
ID=825
ctrl=0

[State 827, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag=noautoturn

[State 827, NotHitBy]
type=NotHitBy
trigger1=1
value=SCA

[State 827, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 825

[State  827, 1]
type = ChangeState
trigger1 = Time=0
value = 824
;=====================================
;---------------------------------------------------------------------------
; Hit By Smash == Opponent thrown into the air
; (a custom gethit state)
[Statedef 824]
type    = A
movetype= H
physics = N
velset =ifelse((prevstateno=827),-6,-8),ifelse((prevstateno=827),-2,-6)
poweradd =0
sprpriority=6
ID=824
hitdefpersist=1


[State 824, NotHitBy]
type=NotHitBy
trigger1=1
value=SCA

[State 824, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag=noautoturn


[State 824, 1] ;Gravity
type = VelAdd
Trigger1 = 1
y = .4

[State 824, No scroll]
type = ScreenBound
triggerall=time>20;12
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist < 65
trigger2 = FrontEdgeBodyDist < 65
value = 1
movecamera = 0,1


[State 824, Hit wall]
type = ChangeState
triggerall=time>12
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 1027
ID=1027

[State 824, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

[State 824, 2] ; Recover near ground (use ChangeState)
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 824, 3] ; Recover in mid air (use SelfState)
type = SelfState
triggerall = Vel Y > 0
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210 ;HITFALL_AIRRECOVER

[State 824, 4] ;Hit ground
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100 ;Hit ground
;==========================================
;------------------
; Hit By Smash == Hit wall
; (a custom gethit state)
[Statedef 1027]
type    = A
movetype= H
physics = N
ID=1027
hitdefpersist=1


[State 1027, NotHitBy]
type = NotHitBy
trigger1 =1
value = SCA, AA, AP, AT
ignorehitpause=1

[State 1027, Pause]
type = Pause
trigger1 =Time=0
pausetime=6
;movetime=7

[State  1027, 0]
type = LifeAdd
trigger1 = Time=0
value = -20
kill=0

[State 1027, Turn]
type = Turn
trigger1 = (Time = 0) && (FrontEdgeBodyDist <= 30)

[State 1027, Pos]
type = PosAdd
trigger1 = Time = 0
x = 15 - BackEdgeBodyDist

[State 1027, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[State 1027, No scroll]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 1027, Anim]
type = ChangeAnim2
trigger1 = Time = 0
value = 1027

[State 1027, EnvShake]
type = EnvShake
trigger1 = Time = 0
time = 12
freq = 100
ampl = -8;10


[State 1027, State]
type = ChangeState
trigger1= time=8
value = 1028
;===============================================
; Hit By Smash  == Bounce off wall
; (a custom gethit state)
[Statedef 1028]
type    = A
movetype= H
physics = N
ID=1028
hitdefpersist=1


[State 1028, 1]
type = Playerpush
trigger1 = 1
value =1

[State 1028, NotHitBy]
type=NotHitBy
trigger1=time<=5
value=SCA


[State 1028, No scroll]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 1028, Stop moving]
type = Pause
trigger1 = Time=0
pausetime=15


[State 1028, Vel Y]
type = VelSet
trigger1 = Time = 0
y = -7;6

[State 1028, Vel X]
type = VelSet
triggerall=P2BodyDist X<=91
trigger1 = Time = 0
x = 1;1.5

[State 1028, Vel X]
type = VelSet
triggerall=P2BodyDist X>91
trigger1 = Time = 0
x = 2;3

[State 1028, Gravity]
type = VelAdd
trigger1 = 1
y = .35

[State 1028, Anim 5050] ;Self falling animation
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 1028, Anim 5052] ;Self falling animation (diagup type)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 1028, Anim 5060] ;Coming down - normal
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 1028, Anim 5062] ;Coming down - diagup type
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 1028, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100
;=====================================
; SPECIALS ++ SPECIALS ++ SPECIALS ++
;=====================================
;Shoulder Smash 
[Statedef 1000]
type    = A
movetype= A
physics = N
juggle  = 7;0
poweradd= 0
ctrl = 0
anim = 1000
sprpriority=2

[State 1000, Width]
type= Width
Trigger1=1
edge=8,0
[State 1000, 1]
type = Playerpush
trigger1 = 1
value =1

[State 1000,VarSet]
type = VarSet
triggerall = Time <= 1
trigger1 = command ="SHOULDCHARGE1"
v=14
value=1

[State 1000,VarSet]
type = VarSet
triggerall = Time <= 1
trigger1 = command ="SHOULDCHARGE2"
v=14
value=2

[State 1000,VarSet]
type = VarSet
triggerall = Time <= 1
trigger1 = command ="SHOULDCHARGE3"
v=14
value=3

[State 1000, Vel X]
type = VelSet
trigger1 = Time = 0&&animelem<=1
x = 5
y=0
[State 1000, 1]
type = VelSet
triggerall=var(14)=1
trigger1 =animelemtime(1)>=1&&animelem<=5
x=.8*const(velocity.run.fwd.x)
y=0

[State 1000, 2]
type = VelSet
triggerall=var(14)=2
trigger1 =animelemtime(1)>=1&&animelem<=5
x=const(velocity.run.fwd.x)
y=0
[State 1000, 3]
type = VelSet
triggerall=var(14)=3
trigger1 =animelemtime(1)>=1&&animelem<=5
x=1.2*const(velocity.run.fwd.x)
y=0
[State 1000, No scroll]
type = ScreenBound
trigger1 =anim=1000
value = 1
movecamera = 0,1


[State 1000, Running Sound]
type = PlaySnd
trigger1 = stateno = 1000 &&animelemtime(2)=3
trigger2 = stateno = 1000 &&animelemtime(4)=3
value = s100,0
volume=255

[State 1000, Explod]; Dash Dust
type = explod 
trigger1= animelem=2
anim=8140
ID  =8140
pos = -15,-2 
postype = P1
facing = 1
vfacing = 1
bindtime = 1
removetime = 17
supermove = 999999999999999999999
pausemove = 999999999999999999999
scale = 1,1 
sprpriority = 9
ontop = 1 
ownpal = 1 
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0

[State 1000, Explod]; Dash Dust
type = explod 
trigger1= animelem=3
anim=8130
ID  =8130
pos = -15,-2
postype = P1
facing = 1
vfacing = 1
bindtime = 1
removetime = 17
supermove = 999999999999999999999 
pausemove = 999999999999999999999
scale = 1,1 
sprpriority = 9
ontop = 1
ownpal = 1
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0

[State 1000, Explod]; Dash Dust
type = explod
trigger1= animelem=4
anim=8130
ID  =8130
pos = -15,-2
postype = P1
facing = 1
vfacing = 1
bindtime = 1
removetime = 17
supermove = 999999999999999999999
pausemove = 999999999999999999999
scale = 1,1 
sprpriority = 9
ontop = 1
ownpal = 1 
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0

[State 1000, Explod]; Dust
type = explod
trigger1= animelem=6
anim=8120
ID  =8120
pos = 10,2
postype = P1
facing = -1
vfacing = 1
bindtime =Ifelse(movetype!=H, 1,0)
removetime = 25
supermove = 999999999999999999999 
pausemove = 999999999999999999999
scale = 1,1 
sprpriority = 9 
ontop = 1 
ownpal = 1 
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0

[State 1000, VOICE Sound]
type = PlaySnd
trigger1 = animelem=5
value = s6,9
volume=255
channel=0

[State 1000, Statetypeset]
type = Statetypeset
trigger1 = animelem=6
type    =S
movetype=I
physics =S

[State 1000, HIT 1]
type = HitDef 
trigger1 =animelem=5
attr = S, SA
animtype=Medium
ID=1000
nochainID=1000,1011
damage   = 90,4
priority = 5, Hit
hitflag=MAF
guardflag = MA
pausetime = 14,14
sparkno = s4010
sparkxy = -17,-30
hitsound  =s702, 0
guard.sparkno = s8000
guardsound = s1, 0
ground.type = High
ground.slidetime=10
ground.hittime  =24
ground.velocity=-7,0
air.type = High
air.hittime  = 20
air.velocity =-4,-6
air.fall=1
envshake.time=9
envshake.ampl=-5
ground.cornerpush.veloff=0
air.cornerpush.veloff=0
down.cornerpush.veloff=0
guard.cornerpush.veloff=0
airguard.cornerpush.veloff=0
facep1=1

[State 1000, 7]
type=PosSet
trigger1=1
x=Pos X
y=0



[State 1000, KATANA UPPERCUT]
type = ChangeState
triggerall= anim=1000&&movehit
trigger1 = (command="EX_KATUPPER1"||command="EX_KATUPPER2")
value = 1060
ctrl=0

[State 1000, KATANA UPPERCUT]
type = ChangeState
triggerall= anim=1000&&movehit
triggerall = command!= "EX_KATUPPER1"
triggerall = command!= "EX_KATUPPER2"
trigger1 = (command="KATUPPER_1"||command="KATUPPER_2"||command="KATUPPER_3")
value = 1050
ctrl=0
[State 1000, ChangeState]
type = ChangeState
triggerall=stateno=1000
trigger1=command="ROTO_CUTTER"&&movehit&&power>=1000
value=3100
ctrl=0
[State 1000, 10]
type = ChangeState
trigger1 = Animtime=0
value = 0
ctrl = 1
;---------------------------
;Guard Push Helper
[Statedef 1001]
type    = A
movetype= I 
physics = N
velset = 0,0
anim =3120

[State 1001]
type = posset
triggerall=parent,stateno!=650
trigger1 = time = 0
y = 0

[State 1001]
type = PlayerPush
trigger1 = 1
value = 1

[State 1001]
type = NotHitBy
Trigger1 = 1
value = SCA
Time = 1

[State 1001]
type = DestroySelf
trigger1 = Time =50;100
trigger2=(Parent, stateno=3000)
trigger3=(Parent, stateno=3100)
;=====================================
; SPECIALS ++ SPECIALS ++ SPECIALS ++
;=====================================
; EX Shoulder Smash 
[Statedef 1010]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd=-500
ctrl = 0
anim = 1000
sprpriority=2
velset=5,0
getpower=0

[State 1010, Width]
type= Width
Trigger1=1
edge=50,0


[State 1010, VarSet]
type = VarSet
triggerall = Time <= 1
trigger1 = command = "EX_SHOULDER1"
v = 1
value = 6

[State 1010, VarSet]
type = VarSet
triggerall = Time <= 1
trigger1 = command = "EX_SHOULDER2"
v = 1
value = 8

[State 1010, EX Sound]
type = PlaySnd
triggerall=stateno=1010
trigger1  =animelem=1
value=s3010,0
channel=2

[State 1010, Explod]; EX SPARK
type = explod 
trigger1=Time<=1
anim=8504
ID  =8504
pos = 20,-40
postype = P1, Mid
facing = 1
vfacing = 1
removetime = 12
supermove = 999999999999999999999 
pausemove = 999999999999999999999
scale = 1,1
sprpriority = 9
ontop = 1 
ownpal = 1 
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0
bindtime=-1

[State 1010, PalFX]
type=palfx
type = PalFX
triggerall!=stateno!=1010||stateno!=1011
trigger1 = gametime%2 = 0
time = 1
add = 120,80,0
sinadd = 64,32,5,3
ignorehitpause = 1

[State 1010, AfterImage]
type= AfterImage
type = AfterImage
trigger1 =animelemtime(1) = 0
time = 999999999
trans = add
length   = 9
timegap  = 2
framegap = 1
PalBright = 30 , 30 , 0
PalContrast = 255 , 255 , 0
PalAdd = 0 , 0 , 0
PalMul = .6 , .6 , 0
IgnoreHitPause = 1
Persistent = 1

[State -3]
type = AfterImageTime
trigger1 = animelemtime(6)>= 0
trigger2 = stateno!=1010
time = 0

[State 1010, 6]
type=VelAdd
trigger1=1
x=1

[State 1010, No scroll]
type = ScreenBound
trigger1 =anim=1000
value = 1
movecamera = 0,1

[State 1010, NotHitBy]
type=NotHitBy
triggerall!=animelem>=3
triggerall=animelemtime(1)>=0&&animelemtime(2)<=4
trigger1=1
ignorehitpause=1
value=SA, AP

[State 1010, NOTHITBY]
type = NotHitBy
trigger1 = 1
value = , NT,ST,HT
time = 12

[State 1010, Running Sound]
type = PlaySnd
trigger1=stateno = 1010 &&animelemtime(2)=3
trigger2=stateno = 1010 &&animelemtime(4)=3
value = s100,0
volume=255

[State 1010, Explod]; Dash Dust
type = explod 
trigger1= animelem=2
anim=8140
ID  =8140
pos = -15,-2 
postype = P1
facing = 1
vfacing = 1
bindtime = 1
removetime = 17
supermove = 999999999999999999999
pausemove = 999999999999999999999
scale = 1,1 
sprpriority = 9
ontop = 1 
ownpal = 1 
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0

[State 1010, Explod]; Dash Dust
type = explod 
trigger1= animelem=3
anim=8130
ID  =8130
pos = -15,-2
postype = P1
facing = 1
vfacing = 1
bindtime = 1
removetime = 17
supermove = 999999999999999999999 
pausemove = 999999999999999999999
scale = 1,1 
sprpriority = 9
ontop = 1
ownpal = 1
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0

[State 1010, Explod]; Dash Dust
type = explod
trigger1= animelem=4
anim=8130
ID  =8130
pos = -15,-2
postype = P1
facing = 1
vfacing = 1
bindtime = 1
removetime = 17
supermove = 999999999999999999999
pausemove = 999999999999999999999
scale = 1,1 
sprpriority = 9
ontop = 1
ownpal = 1 
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0

[State 1010, Explod]; Dust
type = explod
trigger1= animelem=6
anim=8120
ID  =8120
pos = 10,2
postype = P1
facing = -1
vfacing = 1
bindtime =Ifelse(movetype!=H, 1,0)
removetime = 25
supermove = 999999999999999999999 
pausemove = 999999999999999999999
scale = 1,1 
sprpriority = 9 
ontop = 1 
ownpal = 1 
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0

[State 1010, VOICE Sound]
type = PlaySnd
trigger1 = animelem=5
value = s6,9
volume=255
channel=0

[State 1010, 2]
type = VelSet
triggerall=var(14)=4
trigger1 =Time=0
x =const(velocity.run.fwd.x)

[State 1010, 3]
type = VelSet
triggerall=var(14)=5
trigger1 =Time=0
x =1.1*const(velocity.run.fwd.x)

[State 1010, HIT 1]
type = HitDef
trigger1 =animelem=5
attr = S, SA
ID=1010
nochainID=1000,1011
animtype=Medium
damage    = 20, 4
priority  = 5, Hit
hitflag=MAFD
guardflag = MA
pausetime = 5,5
sparkno = s4000+(random%2)
sparkxy = -17,-30
hitsound   = s701,0
guard.sparkno = s8000
guardsound = s1, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -3
poweradd=0
getpower=0
air.type = High
air.hittime  = 15
air.velocity = -4,-4
air.fall=1
facep1=1
forcestand=1
mindist =ifelse((moveguarded||movereversed||(EnemyNear(0),ishelper)),200,10),ifelse(P2statetype=S,0,-8)
maxdist =ifelse((moveguarded||movereversed||(EnemyNear(0),ishelper)),-200,60),ifelse(P2statetype=S,0,0)

[State 1010, NEXT]
type = ChangeState
trigger1 = movehit&&movecontact=1
value =1011
ctrl = 0

[State 1010, 6]
type=Velset
trigger1=animelemtime(6)>=0
x=2

[State 1010, END]
type = ChangeState
trigger1 = Animtime=0
value = 0
ctrl = 1
;=====================================
; SPECIALS ++ SPECIALS ++ SPECIALS ++
;=====================================
; EX Shoulder Smash -- Part 2
[Statedef 1011]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd=0
getpower=0
ctrl = 0
anim = 1001
sprpriority=2
velset=5,0

[State 1011, Width]
type= Width
Trigger1=1
edge=50,0

[State 1011, PalFX]
type=palfx
type = PalFX
triggerall!= stateno!=1011
trigger1 = gametime%2 = 0
time = 1
add = 120,80,0
sinadd = 64,32,5,3
ignorehitpause = 1

[State 1011, AfterImage]
type= AfterImage
type = AfterImage
trigger1 = animelemtime(1) = 0
time = 999999999
trans = add
length   = 6
timegap  = 2
framegap = 1
PalBright = 30 , 30 , 0
PalContrast = 255 , 255 , 0
PalAdd = 0 , 0 , 0
PalMul = .6 , .6 , 0
IgnoreHitPause = 1
Persistent = 1

[State -3]
type = AfterImageTime
trigger1 = animelemtime(4) = 0
trigger2 = stateno!=1011
time = 0

[State 1011, 6]
type=VelAdd
trigger1=1
x=1

[State 1011, No scroll]
type = ScreenBound
trigger1 =anim=1001
value = 1
movecamera = 0,1

[State 1011, Explod]; Dust
type = explod
trigger1= animelem=1
anim=8120
ID  =8120
pos = 10,2
postype = P1
facing = -1
vfacing = 1
bindtime =Ifelse(movetype!=H, 1,0)
removetime = 25
supermove = 999999999999999999999 
pausemove = 999999999999999999999
scale = 1,1 
sprpriority = 9 
ontop = 1 
ownpal = 1 
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0

[State 1011, 1]
type = VelSet
trigger1 =Time>=0&&animelem<=2
x =.8*const(velocity.run.fwd.x)

[State 1011, HIT 1]
type = HitDef
trigger1 =animelem=1
attr = S, SA
ID=1012
nochainID=1012
animtype= Back
damage    = 30, 4
priority  = 5, Hit
hitflag=MAFD
guardflag = MA
pausetime = 5,5
sparkno = s4019;s4001
sparkxy = -10,-50
hitsound   = s701,0
guard.sparkno = s8000
guardsound = s1, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -3
poweradd=0
getpower=0
air.type = High
air.hittime  = 15
air.velocity = -4,-4
air.fall=1
facep1=1
sprpriority=9

[State 1011, HIT 2]
type = HitDef
trigger1 =animelem=2
attr = S, SA
ID=1011
nochainID=1010,1011
damage    = 50, 4
priority  = 5, Hit
hitflag=MAFD
guardflag = MA
pausetime = 5,5
sparkno = s4019;s4001
sparkxy = -10,-50;-17,-30
hitsound   = sifelse((var(1)=6),-1,702),1
guard.sparkno = s8000
guardsound = s1, 0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity =-3.5
fall=1
fall.hittime=30
poweradd=0
getpower=0
air.type = High
air.hittime  = 15
air.velocity = -6,-4
air.fall=1
facep1=1
sprpriority=9


[State 1011, THROW STATE]
type = ChangeState
triggerall = var(1)=6
Triggerall = numtarget(1011)=1
trigger1   = !moveguarded&& !movereversed&&movehit
trigger1   = !(target,ishelper)
trigger1   = hitshakeover
persistent=0
value =805
ctrl = 0


[State 1011, Thrown To Wall]
type= targetstate
ID=1011
triggerall = var(1)=8
Triggerall = numtarget(1011)=1 
trigger1   = !moveguarded&& !movereversed&&movehit
trigger1   = !(target,ishelper)
trigger1   = hitshakeover
ignorehitpause=1
persistent=0
value= 825

[State -2, VarSet]
Type= VarSet
Triggerall=numtarget(1011)
trigger1=Enemy(0),stateno=824||Enemy(0),stateno=825
trigger2=TeamMode = Simul
trigger2=Enemy(1),stateno=824||Enemy(1),stateno=825
trigger3=(Enemy(Enemy, TeamMode = Simul),stateno=824)||(Enemy(Enemy, TeamMode = Simul),stateno=825)
ignorehitpause=1
v=8 
value= (Target(1011),ID)

[State -2, HELPER]
type=Helper
triggerall=var(8)!=0
trigger1=playerID(var(8)),stateno=824
helpertype=normal
name="ENEMY BIND"
postype=P2
pos=0,0
stateno=899
id     =899
ownpal=1
keyctrl=0
persistent=0

[State 1011, 6]
type=Velset
trigger1=animelemtime(3)>=0
x=2

[State 1011, 7]
type=Helper
trigger1=movehit&&numtarget(1011)=1
helpertype=Normal
name="GuardPush"
postype=p1
pos=10,0
velset=0,0
stateno=1001
ownpal=1
bindtime=-1
size.height=200
size.ground.back=10
size.ground.front=10
persistent=0
ignorehitpause=1


[State -2, 6]
type=Varset
trigger1=animtime=0
v=1
value=0

[State 1011, END]
type = ChangeState
trigger1 = Animtime=0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Dive Kick
[Statedef 1020]
type    = A
movetype= A
physics = A
juggle  = 0
ctrl = 0
anim = 1020
poweradd=0
getpower=0

[State 1020, AfterImageTime]
type =AfterImageTime
trigger1 =1
ignorehitpause=1
supermove=99999
pausemove=99999
value =0 
[State 1020, 1]
type = PlaySnd
trigger1 = animelem=1
value= s6,11
channel=0

[State 1020, Width]
type= Width
trigger1=1
edge=8,8


[State 1020, Playerpush]
type = Playerpush
trigger1 = 1
value=0

[State 1020, Gravity] ;Slower Gravity
type = VelAdd
trigger1 = 1
y = -0.05

[State 1020, velset]
type=Velset
trigger1= animelem=2
y=6
x=5

[State 1020,HIT1]
type = HitDef
triggerall=numtarget(1020)<=0
trigger1 = animelem=2
attr = A, NA
ID=1020
nochainID=1020
damage    = 55,1
hitflag= MAF
guardflag = HA
priority = 3, Hit
pausetime = ifelse((Enemy, Pos Y>=0),6,12),12
sparkno =  s4010
sparkxy = -20,-20
guard.sparkno = s8000
hitsound   = s720, 0
guardsound = s1, 0
animtype = Medium
ground.type = High
ground.slidetime =10
ground.hittime  = 15
ground.velocity = -9,0
envshake.time=12
envshake.ampl=3
air.hittime=20
air.velocity = -2,6
air.falltime=16
air.fall=1
fall.hittime=200
fall.envshake=IfElse((velset y >= 40),1)
fall.envshake.time=12
fall.envshake.ampl=4
air.cornerpush.veloff=0
down.bounce=1
down.hittime = 20
down.velocity = 0, -2
recover=0
air.recover=0
poweradd=0
getpower=0

[State 1020, StateTypeSet]
type= StateTypeSet
trigger1=numtarget(1020)>=1
movetype= I
[State 1020, 4]
type = ChangeState
triggerall=Enemy,Pos Y<0
trigger1 = movecontact=1
value = 1021
ctrl = 0

[State 1020, END]
type = ChangeState
triggerall=Enemy,Pos Y>=0
trigger1 = Vel Y >= 0
trigger1 = Pos Y >=-2
trigger2 = vel Y > 0
trigger2 = pos y > -vel y
value =ifelse((movecontact<1),890,52)
ctrl = 0
;---------------------------------------------------------------------------
; Dive Kick -- connect
[Statedef 1021]
type    = A
movetype= A
physics = A
juggle  = 0
ctrl = 0
anim = 1021
poweradd=0
getpower=0


[State 1021, ScreenBound]
type = ScreenBound
triggerall=prevstateno=3300
trigger1=frontedgedist >70
trigger1 = Pos Y<=-1&&backedgebodydist >10
value = 0
movecamera = 0,0

[State -3, RemoveExplod]; Super BG
type = Removeexplod 
triggerall=prevstateno=3300
trigger1=1
ignorehitpause=1
supermove = 999999999999999999999
pausemove = 999999999999999999999
ID = 8505
[State -3, RemoveExplod]; Super BG
type = Removeexplod 
triggerall=prevstateno=3300
trigger1=1
ignorehitpause=1
supermove = 999999999999999999999
pausemove = 999999999999999999999
ID = 8506

[State 1021, Playerpush]
type = Playerpush
trigger1 = 1
value=0

[State 1021, StateTypeSet]
type= StateTypeSet
trigger1= animelem=1
statetype=A
movetype= A
physics= A

[State 1021, 1]
type =Width
trigger1 =1
edge=0,10

[State 1021, 1]
type = velAdd
trigger1 = animelem= 1
x=-2

[State 1021, 2]
type = velSet
trigger1 =animelemtime(1)=0
x= -4
y= -7


[State 1021, 2]
type = velSet
trigger1 = animelemtime(1)>=1&&animelemtime(6)<=3
x= ifelse((Pos Y<=-1&&backedgebodydist<=20),-1,-4)


[State 1021, Gravity] ;Gravity
type = VelAdd
trigger1 =1 
y = .25

[State 1021, END]
type = ChangeState
triggerall=Enemy,Pos Y>=0
trigger1 = Vel Y >= 0
trigger1 = Pos Y >=-2
trigger2 = vel Y > 0
trigger2 = pos y > -vel y
value =890
ctrl = 0

;---------------------------------------------------------------------------
; EX Dive Kick
;
[Statedef 1024]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd=-500
ctrl = 0
anim = 1025
getpower=0

[State 1024, VarSet]
type = VarSet
trigger1 = Time = 0
v = 50
value = 1 

[State 1024, VarAdd]
type = VarAdd
trigger1 = animelem=1
v = 13
value = 1 

[State 1024, Explod]; EX SPARK
type = explod 
trigger1=animelemtime(1)=2
anim = 8504
ID = 8504
pos = 0,-35
postype = P1, Mid
facing = 1
vfacing = 1
removetime = 12
supermove = 999999999999999999999 
pausemove = 999999999999999999999
scale = 1,1
sprpriority = 9
ontop = 1 
ownpal = 1 
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0
bind=1

[State 1024, PalFX]
type=palfx
type = PalFX
triggerall!= Pos Y >=0
triggerall!= stateno!=1024||stateno!=1025
trigger1 = gametime%2 = 0
time = 1
add = 120,80,0
sinadd = 64,32,5,3
ignorehitpause = 1

[State 1024, AfterImage]
type= AfterImage
type = AfterImage
trigger1 = animelemtime(1) = 0
time = 999999999
trans = add
length   = 4
timegap  = 2
framegap = 1
PalBright = 30 , 30 , 0
PalContrast = 255 , 255 , 0
PalAdd = 0 , 0 , 0
PalMul = .6 , .6 , 0
IgnoreHitPause = 1
Persistent = 1

[State -3]
type = AfterImageTime
trigger1 = Pos Y >=0
trigger2 = stateno!=1024
time = 0

[State 1024, PosFreeze]
type = PosFreeze
trigger1 = animelem<=2

[State 1024, EX Sound]
type = PlaySnd
triggerall = stateno=1024
trigger1 = animelem=1
value=s3010,0

[State 1024, 1]
type = PlaySnd
trigger1 = animelemtime(3)=2
value= s6,11
channel=0

[State 1024, Width]
type= Width
trigger1=1
edge=8,8

[State 1024, velset]
type=Velset
trigger1= animelem>=3
y=0

[State 1024, Gravity] ;Slower Gravity
type = VelAdd
trigger1 =animelem>=3
y = .5

[State 1024, velset]
type=Velset
trigger1= animelem>=3
y=8
x=6

[State 1024, 2]
type = HitDef
trigger1 = animelem=3
attr = A, NA
damage    = 70,2
hitflag= MAFDL
guardflag = HA
priority = 5, Hit
pausetime = ifelse((Enemy, Pos Y>=0),6,8),12
sparkno =  s4001
sparkxy = -20,10
guard.sparkno = s8000
hitsound   = s720,0
guardsound = s1, 0
animtype = Medium
ground.type = High
ground.slidetime = 10
ground.hittime  = 12
ground.velocity = -3,0
envshake.time=8
envshake.ampl=1
air.hittime=20
air.velocity = -3,7
air.falltime=16
air.fall=0
IfElse((target,ishelper),1,0)
fall.hittime=200
fall.envshake=IfElse((velset y >= 40),1)
fall.envshake.time=12
fall.envshake.ampl=4
air.cornerpush.veloff=0
down.bounce=1
down.hittime = 20
down.velocity = 0, -2
recover=0
air.recover=0
poweradd=0
getpower=0
p2facing=1

[State 1024, 4]
type = ChangeState
trigger1 = numenemy && movehit
trigger1 =!movereversed
ignorehitpause=1
persistent=1
value = 1029
id =1029
ctrl = 0

[State 1024, END]
type = ChangeState
trigger1 = Vel Y >= 0
trigger1 = Pos Y >=-2
trigger2 = vel Y > 0
trigger2 = pos y > -vel y
value =890
ctrl = 0
;---------------------------------------------------------------------------
; EX Dive Kick - Part 2
;
[Statedef 1029]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd=0
getpower=0
ctrl = 0
anim = 1026

[State 1029, VarSet]
type = VarSet
trigger1 = Time = 0
v = 50
value = 1 

[State 1029, VarAdd]
type = VarAdd
trigger1 = animelem=1
v = 13
value = 1 

[State 1029, PalFX]
type=palfx
type = PalFX
triggerall!= Pos Y >=0
triggerall!= stateno!=1029
trigger1 = gametime%2 = 0
time = 1
add = 120,80,0
sinadd = 64,32,5,3
ignorehitpause = 1

[State -3]
type = AfterImageTime
trigger1 = Pos Y >=0
trigger2 = stateno!=1029
time = 0

[State 1029, Width]
type= Width
trigger1=1
edge=8,8

[State 1029, Gravity] ;Slower Gravity
type = VelAdd
trigger1 =1
y = .25

[State 1029, velset]
type=Velset
trigger1=1
y=10
x=6

[State 1029, Bind 1]
type =TargetBind
triggerall=numtarget&&movehit
triggerall=target,Pos Y<0
trigger1 = AnimElem=1
trigger2 = Animelem=2
ignorehitpause=1
pos = 25, -10


[State 1029, 2]
type = HitDef
trigger1 = animelem=1
attr = A, NA
damage    = 50,2
hitflag= MAFDL
guardflag = HA
priority = 5, Hit
pausetime = 4,12
sparkno =  s4001
sparkxy = -20,10
guard.sparkno = s8000
hitsound   = s720,0
guardsound = s1, 0
animtype = Medium
ground.type = High
ground.slidetime = 10
ground.hittime  = 12
ground.velocity = -3,0
envshake.time=8
envshake.ampl=1
air.type =Low
air.hittime=20
air.velocity = -3,7
air.falltime=16
air.fall=1
fall=0
fall.hittime=200
fall.envshake=IfElse((velset y >= 40),1)
fall.envshake.time=12
fall.envshake.ampl=4
air.cornerpush.veloff=0
down.bounce=1
down.hittime = 20
down.velocity = 0, -2
recover=0
air.recover=0
poweradd=0
getpower=0
p2facing=1


[State 1029, 2]
type = HitDef
trigger1 =animelem=2
attr = A, NA
damage    = 70,2
hitflag= MAFDL
guardflag = HA
priority = 5, Hit
pausetime = 6,12
sparkno =  s4010
sparkxy = -20,-20
guard.sparkno = s8000
hitsound   = s720,0
guardsound = s1, 0
animtype = Medium
ground.type = High
ground.slidetime = 10
ground.hittime  = 12
ground.velocity = -3,0
envshake.time=8
envshake.ampl=1
air.hittime=20
air.velocity = -6,8
air.falltime=16
air.fall=1
fall=    ifelse((Enemy, Pos Y>=0),0,1)
fall.hittime=200
fall.envshake=IfElse((velset y >= 40),1)
fall.envshake.time=12
fall.envshake.ampl=4
air.cornerpush.veloff=0
down.bounce=1
down.hittime = 20
down.velocity = 0, -2
recover=0
air.recover=0
poweradd=0
getpower=0
p2facing=1

[State 1029, END]
type = ChangeState
trigger1 = Vel Y >= 0
trigger1 = Pos Y >=-2
trigger2 = vel Y > 0
trigger2 = pos y > -vel y
value =890
ctrl = 0
;=====================================
; SPECIALS ++ SPECIALS ++ SPECIALS ++
;=====================================
; KATANA UPPERCUT SPECIAL
[Statedef 1050]
type    = A
movetype= A
physics = N
juggle  = 15
poweradd=0
ctrl = 0
anim = 1050
sprpriority=2
velset=0,0

[State 1050, AssertSpecial] 
type = AssertSpecial
triggerall=var(9)=0
trigger1 =1
flag = nojugglecheck
pausemove=99999
supermove=99999
ignorehitpause=1

[State 1050, VarSet]
type = VarSet
trigger1 = Time = 0
v = 50
value = 1

;===========KATANA UPPERCUT LEVELS=================
;========(STATENO 1050)========
[State -3, Varset]
type=VarSet
triggerall=Time<=1
trigger1= command="KATUPPER_1"
trigger1= command!="KATUPPER_2"
trigger1= command!="KATUPPER_3"
v=15
value=1

[State -3, Varset]
type=VarSet
triggerall=Time<=1
trigger1= command="KATUPPER_2"
trigger1= command!="KATUPPER_1"
trigger1= command!="KATUPPER_3"
v=15
value=2

[State -3, Varset]
type=VarSet
triggerall=Time<=1
trigger1= command="KATUPPER_3"
trigger1= command!="KATUPPER_1"
trigger1= command!="KATUPPER_2"
v=15
value=3 

[State 1050, FLOOR VEL]
type = VelSet
triggerall= time>=0
trigger1=animelem<=3
y =-2

[State 1050, RUN VEL1]
type = PosAdd
trigger1=var(15)<=1
trigger1 = Time>=0
trigger1 = AnimElemtime(3) < 2
x=5

[State 1050, RUN VEL2]
type = PosAdd
trigger1=var(15)=2
trigger1 = Time>=0
trigger1 = AnimElemtime(3) < 2
x=6

[State 1050, RUN VEL3]
type = PosAdd
trigger1=var(15)=3
trigger1 = Time>=0
trigger1 = AnimElemtime(3) < 2
x=7

[State 1050, JUMP VEL1]
type = VelSet
trigger1=var(15)<=1
trigger1= animelem>=4
x = const(velocity.run.back.x)*(-.6)
y = const(velocity.jump.y)*(1);.07)

[State 1050, JUMP VEL2]
type = VelSet
trigger1=var(15)=2
trigger1= animelem>=4
x = const(velocity.run.back.x)*(-.6)
y = const(velocity.jump.y)*(1.15)

[State 1050, JUMP VEL3]
type = VelSet
trigger1=var(15)=3
trigger1= animelem>=4
x = const(velocity.run.back.x)*(-.8)
y = const(velocity.jump.y)*(1.3)

[State 1050, Gravity] ;Gravity
type = VelAdd
trigger1 =animelem>=5
y = .04

[State 1050, Width]
type= Width
Trigger1=1
edge=40,0

[State 1050, CTRL]
type=ctrlset
trigger1=1
value=0

[State 1050, StateTypeSet]
type= StateTypeSet
trigger1= animelem=4
statetype=A
movetype= A
physics= A

[State 1050, PlaySnd]
type = PlaySnd
trigger1 = animelem=1
value=s600,0
volume=100

[State 1050, PlaySnd]
type = PlaySnd
trigger1 = animelem=4
value=s3025,0
volume=100

[State 1050, PlaySnd]
type = PlaySnd
trigger1 = animelem=5
value=s6,11
volume=255
channel=0

[State 1050, Explod]
type = Explod
trigger1 =animelem=4&&animelemtime(15)<=2
anim =  424
ID   =  424
sprpriority =1
postype = p1
pos = -20,30
velocity = 0, 0
supermove = 999999999999999999999 
pausemove = 999999999999999999999
ontop=0
ownpal = 1
scale = .8,.9;.8,1.2
ignorehitpause = 1
bindtime =-1
removetime =ifelse((animelem=16),1,39)

[State 1050, RemoveExplod]
type = Removeexplod 
trigger1=time=0
trigger2=stateno!=1050
trigger3=animelem>=16
anim =  424
ID   =  424

[State 1050, HIT1]
type = HitDef
triggerall=var(9)=0
trigger1 = AnimElem =2
trigger2 = !MoveContact
trigger2 = AnimElem =3
attr = S, NA
ID=1050
nochainID=1050,1060
animtype  = Medium
damage    =35,1
hitflag   = MAF
guardflag = MA
pausetime = 7,12
priority = 3, Miss
sparkno   = s4210
guard.sparkno = s8000
sparkxy = -10,-40
hitsound   = s501, 1
guardsound = s1,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity =ifelse((var(15)<=1),-2,-4),ifelse((var(15)<=1),-7,-12)
air.velocity    =ifelse((var(15)<=1),-2,-4),ifelse((var(15)<=1),-10,-12)
air.hittime=200
air.recover=0
recover=0
fall.recover=0
fall=1
mindist =10,-2
maxdist =45,ifelse(P2statetype=S,40,10)
poweradd=0
getpower=0

[State 1050, HIT2]
type = HitDef
triggerall=var(9)=0
trigger1 =Animelem=6
trigger2 =!Movecontact
trigger2 =Animelem=7
trigger3 =!Movecontact
trigger3 =Animelem=8
attr = A, NA
nochainID=1060
animtype  = Medium
damage    = 40,2
hitflag   = MAF
guardflag = MA
pausetime = 12,12
priority = 3, Miss
sparkno =  s4220
guard.sparkno=s8000
sparkxy = -10,-50
hitsound   = s500, 2
guardsound = s1,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity=-2,-10
air.velocity   =-2,-10 
air.hittime=200
air.recover=0
recover=0
fall.recover=0
mindist =35,-2
maxdist =50,ifelse(P2statetype=S,70,10)
poweradd=0
getpower=0

[State 1050, HIT 3]
type = HitDef
triggerall=var(9)=0
trigger1 =Animelem=9
trigger2 =!Movecontact
trigger2 =Animelem=10
trigger3 =!Movecontact
trigger3 =Animelem=11
attr = A, NA
nochainID=1060
animtype=Up
damage    = 80,2
priority  = 3, Miss
hitflag   = MAF
guardflag = MA
pausetime = 10,10
sparkno = s4200
guard.sparkno=s8000
sparkxy = -27,-70
hitsound   = s501,1
guardsound = s1,0
ground.type = High
ground.slidetime=12
ground.hittime =15
ground.velocity=-4,-5
envshake=1
envshake.time=5
envshake.freq=225
envshake.ampl=10
air.velocity = -3,-5
air.fall=1
fall=1
fall.hittime=30
fall.recovertime=32
fall.envshake=1
fall.envshake.time=10
fall.envshake.freq=225
fall.envshake.ampl=-5
air.recover=1;time=600
recover=1;0
down.hittime=30
;down.recovertime=2200
down.bounce=1
poweradd=0
getpower=0

[State 1050, HIT Spark 1]
type = Explod
triggerall=movehit= 1
trigger1=animelemtime(2)>=0&&animelemtime(3)<=7
postype = P1
facing=1
vfacing=-1
pos  = floor(30+p2bodydist X),-50
id   = 4001
anim = 4001
sprpriority= 9
scale = 1.1,1.1
persistent= 0
ontop = 1
ownpal = 1
ignorehitpause = 1
supermove = 999999999999999999999 
pausemove = 999999999999999999999
bindtime=1
persistent=0

[State 1050, HIT Spark 2]
type = Explod
triggerall=movehit= 1
trigger1=animelemtime(6)>=0&&animelemtime(8)<=2
postype = P1
facing=1
vfacing=-1
pos  = floor(40+p2bodydist X),-50
id   = 4010
anim = 4010
sprpriority= 9
scale = 1.1,1
persistent= 0
ontop = 1
ownpal = 1
ignorehitpause = 1
supermove = 999999999999999999999 
pausemove = 999999999999999999999
bindtime=1
persistent=0

[State 1050, HIT Spark 3]
type = Explod
triggerall=movehit= 1
trigger1=animelemtime(9)>=1&&animelemtime(11)<=2
postype = P1
facing=1
vfacing=-1
pos  = floor(40+p2bodydist X),-50
id   = 4002
anim = 4002
sprpriority= 9
scale = 1.1,1
persistent= 0
ontop = 1
ownpal = 1
ignorehitpause = 1
supermove = 999999999999999999999 
pausemove = 999999999999999999999
bindtime=1
persistent=0

[State 1050, Explod]; Dust
type = explod
triggerall= pos Y >=-25
trigger1=animelem=4
anim = 8120
ID   = 8120
pos = -30,floor(-1.5*Pos Y)
postype = P1
facing = 1
vfacing = 1
bindtime =1
removetime = 25
supermove = 999999999999999999999 
pausemove = 999999999999999999999
scale = 1,1 
sprpriority = 9 
ontop = 1 
ownpal = 1 
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0

[State 1050, RemoveExplod]
type = Removeexplod 
trigger1=time=0
trigger2=stateno!=1050
trigger3=!movehit
trigger4=animelem=16
ID = 4000+(random%8)||4200+(random%40)||4210||4220||4230||4240

[State 1050, Varset]
type=VarSet
trigger1=animelem=16
v=15
value=0

[State 1050, END]
type = ChangeState
triggerall=1
trigger1 =animelemtime(16)>=0
value =651
ctrl=0

[State 1050, END]
type = ChangeState
triggerall=animelemtime(17)>=1&&animelemtime(19)<=1
trigger1 = Vel Y >= 0
trigger1 = Pos Y >=-5
trigger2 = vel Y > 0
trigger2 = pos y > -vel y
value =890
ctrl = 0

;=====================================
; SPECIALS ++ SPECIALS ++ SPECIALS ++
;=====================================
; EX KATANA UPPERCUT SPECIAL
[Statedef 1060]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd=-500
ctrl = 0
anim = 1060
sprpriority=2
velset=0,0
getpower=0
[State 1060, VarSet]
type = VarSet
trigger1 = Time = 0
v = 50
value = 1 

[State 1060, Explod]; EX SPARK
type = explod 
trigger1=Time=0
anim=8504
ID=8504
pos = 10,-50
postype = P1, Mid
facing = 1
vfacing = 1
removetime = 12
supermove = 999999999999999999999 
pausemove = 999999999999999999999
scale = 1.1,1.1
sprpriority = 9
ontop = 1 
ownpal = 1 
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0
bind=-1

[State 1060, AfterImage]
type= AfterImage
type = AfterImage
trigger1 = animelemtime(1) = 2
time = 999999999
trans = add
length   =3
timegap  =3
framegap = 1
PalBright = 30 , 30 , 0
PalContrast = 255 , 255 , 0
PalAdd = 0 , 0 , 0
PalMul = .6 , .6 , 0
IgnoreHitPause = 1
Persistent = 1
[State -3]
type = AfterImageTime
trigger1=animelem>=25
trigger1= Pos Y >=0
trigger2= stateno!=1060
trigger3=animelem=26
time = 0
[State 1060, PalFX]
type=palfx
type = PalFX
triggerall!= stateno!=1060||stateno!=1061
trigger1=Time>=0&&animelemtime(25)<=0
trigger1 = gametime%2 = 0
time = 1
add = 120,80,0
sinadd = 64,32,5,3
ignorehitpause = 1

[State 1060, FLOOR VEL]
type = VelSet
triggerall= time>=0
trigger1=animelem<=3
y =-2

[State 1060, RUN VEL1]
type = PosAdd
trigger1 = Time>=0
trigger1 = AnimElemtime(3) < 2
x=6

[State 1060, JUMP VEL1]
type = VelSet
trigger1= animelem>=4
x = const(velocity.run.back.x)*(-.5)
y = const(velocity.jump.y)*(.5);6)

[State 1060, Gravity] ;Gravity
type = VelAdd
trigger1 =animelem>=5
y = .04

[State 1060, Width]
type= Width
Trigger1=1
edge=40,0

[State 1060, CTRL]
type=ctrlset
trigger1=1
value=0

[State 1060, StateTypeSet]
type= StateTypeSet
trigger1= animelem=20
statetype=A
movetype= A
physics= A

[State 1060, PlaySnd]
type = PlaySnd
trigger1 = animelem=1
value=s3010,0
volume=100

[State 1060, PlaySnd]
type = PlaySnd
trigger1 = animelem=4
value=s600,0
volume=100


[State 1060, PlaySnd]
type = PlaySnd
trigger1 = animelem=5
value=s6,9
volume=255
channel=0

[State 1060, Explod]
type = Explod
trigger1 =animelem=4&&animelemtime(9)<=2
anim =  424
ID   =  424
sprpriority =1
postype = p1
pos = -8,0
velocity = 0, 0
supermove = 999999999999999999999 
pausemove = 999999999999999999999
ontop=0
ownpal =0
scale = .8,.6;.8,1.2
ignorehitpause = 1
bindtime =-1
removetime =ifelse((animelem=10),1,30)
[State 1060, RemoveExplod]
type = Removeexplod 
trigger1=time=0
trigger2=stateno!=1060
trigger3=animelem>=10
anim =  424
ID   =  424
[State 1060, Explod]
type = Explod
trigger1 =animelem=13&&animelemtime(16)<=2
anim =  424
ID   =  425
sprpriority =1
postype = p1
pos = -20,30
velocity = 0, 0
supermove = 999999999999999999999 
pausemove = 999999999999999999999
ontop=0
ownpal =0
scale = .8,.9
ignorehitpause = 1
bindtime =-1
removetime =ifelse((animelem=17),1,30)
[State 1060, RemoveExplod]
type = Removeexplod 
trigger1=time=0
trigger2=stateno!=1060
trigger3=animelem>=17
anim =  424
ID   =  425

[State 1060, Explod]
type = Explod
trigger1 =animelem=20&&animelemtime(25)<=2
anim =  424
ID   =  426
sprpriority =1
postype = p1
pos = -8,0
velocity = 0, 0
supermove = 999999999999999999999 
pausemove = 999999999999999999999
ontop=0
ownpal =0
scale = .8,.6
ignorehitpause = 1
bindtime =-1
removetime =ifelse((animelem=26),1,30)
[State 1060, RemoveExplod]
type = Removeexplod 
trigger1=time=0
trigger2=stateno!=1060
trigger3=animelem>=26
anim =  424
ID   =  426

[State 1060, HIT 1]
type = HitDef
type = HitDef
trigger1 = AnimElem =2
trigger2 = !MoveContact
trigger2 = AnimElem =3
attr = S, SA
ID=1060
nochainID=1050,1060
animtype  = Medium
damage    = 30,4
hitflag   = MAF
guardflag = MA
pausetime = 7,12
priority = 3, Miss
sparkno   = s4011;4210
guard.sparkno = s8000
sparkxy = -10,-40
hitsound   = s501, 1
guardsound = s1,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity =-4,-7
air.velocity    =-4,-7
air.hittime=200
air.recover=0
recover=0
fall.recover=0
fall=1
fall.hittime=30
mindist =10,-2
maxdist =45,ifelse(P2statetype=S,40,10)
poweradd=0
getpower=0

[State 1060, HIT 2]
type = HitDef
trigger1 =Animelem=4
trigger2 =!Movecontact
trigger2 =Animelem=5
trigger3 =!Movecontact
trigger3 =Animelem=6
trigger4 =!Movecontact
trigger4 =Animelem=7
trigger5 =!Movecontact
trigger5 =Animelem=8
trigger6 =!Movecontact
trigger6 =Animelem=9
attr = A, SA
ID=1061
animtype  = Medium
damage    = 40,4
hitflag   = MAF
guardflag = MA
pausetime = 12,12
priority = 3, Miss
sparkno =  s4011;4220
guard.sparkno=s8000
sparkxy = -10,-50
hitsound   = s500, 2
guardsound = s1,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity=-2,-10
air.velocity   =-2,-10 
air.hittime=200
air.recover=0
recover=0
fall.recover=0
fall.hittime=30
mindist =35,-2
maxdist =50,ifelse(P2statetype=S,70,10)
poweradd=0
getpower=0

[State 1060, HIT 3]
type = HitDef
trigger1 =Animelem=11
trigger2 =!Movecontact
trigger2 =Animelem=12
trigger3 =!Movecontact
trigger3 =Animelem=13
trigger4 =!Movecontact
trigger4 =Animelem=14
trigger5 =!Movecontact
trigger5 =Animelem=15
trigger6 =!Movecontact
trigger6 =Animelem=16
attr = A, SA
ID=1062
animtype  = Medium
damage    = 50,4
hitflag   = MAF
guardflag = MA
pausetime = 6,12
priority = 3, Miss
sparkno =  s4011;4220
guard.sparkno=s8000
sparkxy = -10,-50
hitsound   = s500,3
guardsound = s1,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity=-2,-10
air.velocity   =-2,-10 
air.hittime=200
air.recover=0
recover=0
fall.recover=0
fall.hittime=30
mindist =35,-2
maxdist =50,ifelse(P2statetype=S,70,10)
poweradd=0
getpower=0

[State 1060, HIT 4]
type = HitDef
trigger1 =Animelem=20
trigger2 =!Movecontact
trigger2 =Animelem=21
trigger3 =!Movecontact
trigger3 =Animelem=22
attr = A, SA
ID=1063
animtype  = Medium
damage    = 60,4
hitflag   = MAFD
guardflag = MA
pausetime = 12,12
priority = 3, Miss
sparkno =  s4011;4220
guard.sparkno=s8000
sparkxy = -10,-50
hitsound   = s500,3
guardsound = s1,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity=-2,0
air.velocity   =-2,0
air.hittime=200
air.recover=0
recover=0
poweradd=0
getpower=0
fall.recover=0
mindist =35,-2
maxdist =50,ifelse(P2statetype=S,70,10)

[State 1060, HIT 5]
type = HitDef
trigger1 =Animelem=23
trigger2 =!Movecontact
trigger2 =Animelem=24
trigger3 =!Movecontact
trigger3 =Animelem=25
attr = A, SA
ID=1064
animtype=Up
damage    = 70, 4
priority  = 3, Miss
hitflag   = MAF
guardflag = MA
pausetime = 10,10
sparkno = s4011;4200
guard.sparkno=s8000
sparkxy = -27,-70
hitsound   = s501,1
guardsound = s1,0
ground.type = High
ground.slidetime=12
ground.hittime =15
ground.velocity=-4,4
envshake=1
envshake.time=5
envshake.freq=225
envshake.ampl=10
air.velocity = -3,4
air.fall=1
fall=1
fall.hittime=30
fall.recovertime=32
fall.envshake=1
fall.envshake.time=10
fall.envshake.freq=225
fall.envshake.ampl=-5
air.recover=1;time=600
recover=1;0
down.hittime=30
down.bounce=1
poweradd=0
getpower=0

[State 1060, HIT Spark 1]
type = Explod
triggerall=movehit= 1
trigger1=animelemtime(2)>=0&&animelemtime(3)<=7
postype = P1
facing=1
vfacing=-1
pos  = floor(30+p2bodydist X),-50
id   = 4001
anim = 4251
sprpriority= 9
scale = .7,.7
persistent= 0
ontop = 1
ownpal = 1
ignorehitpause = 1
supermove = 999999999999999999999 
pausemove = 999999999999999999999
bindtime=1
persistent=0

[State 1060, HIT Spark2]
type = Explod
triggerall=movehit= 1
trigger1=numtarget(1061)
postype = P1
facing=1
vfacing=-1
pos  = floor(50+p2bodydist X),-50
id   = 4001
anim = 4251
sprpriority= 9
scale = .7,.7
persistent= 0
ontop = 1
ownpal = 1
ignorehitpause = 1
supermove = 999999999999999999999 
pausemove = 999999999999999999999
bindtime=1
persistent=0


[State 1060, HIT Spark3]
type = Explod
triggerall=movehit= 1
trigger1=numtarget(1062)
postype = P1
facing=1
vfacing=-1
pos  = floor(50+p2bodydist X),-50
id   = 4001
anim = ifelse((random<333),4230,4251)
sprpriority= 9
scale = ifelse((anim=4230),1.1,.7),ifelse((anim=4230),1.4,.7)
persistent= 0
ontop = 1
ownpal = 1
ignorehitpause = 1
supermove = 999999999999999999999 
pausemove = 999999999999999999999
bindtime=1
persistent=0


[State 1060, HIT Spark4]
type = Explod
triggerall=movehit= 1
trigger1=numtarget(1063)
postype = P1
facing=1
vfacing=-1
pos  = floor(50+p2bodydist X),-50
id   = 4001
anim = ifelse((random<=555),4251,4250)
sprpriority= 9
scale = ifelse((anim=4250),.5,.7),ifelse((anim=4250),1.4,.7)
persistent= 0
ontop = 1
ownpal = 1
ignorehitpause = 1
supermove = 999999999999999999999 
pausemove = 999999999999999999999
bindtime=1
persistent=0


[State 1060, HIT Spark5
type = Explod
triggerall=movehit= 1
trigger1=numtarget(1064)
postype = P1
facing=1
vfacing=1
pos  = floor(50+p2bodydist X),-50
id   = 4001
anim = 4250
sprpriority= 9
scale = .7,.7
persistent= 0
ontop = 1
ownpal = 1
ignorehitpause = 1
supermove = 999999999999999999999 
pausemove = 999999999999999999999
bindtime=1
persistent=0

[State 1060, Explod]; Dust
type = explod
triggerall= pos Y >=-25
trigger1=animelem=4
anim = 8120
ID   = 8120
pos = -30,floor(-1.5*Pos Y)
postype = P1
facing = 1
vfacing = 1
bindtime =1
removetime = 25
supermove = 999999999999999999999 
pausemove = 999999999999999999999
scale = 1,1 
sprpriority = 9 
ontop = 1 
ownpal = 1 
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0

[State 1060, RemoveExplod]
type = Removeexplod 
trigger1=time=0
trigger2=stateno!=1060
trigger3=!movehit
trigger4=animelem=16
ID = 4000+(random%8)||4200+(random%40)||4210||4220||4230||4240

[State 1060, END]
type = ChangeState
triggerall=!movehit
trigger1 =animelem>=9
value =1062
ctrl=0

[State 1060, END]
type = ChangeState
triggerall=1
trigger1 =animelemtime(26)>=0
value =651
ctrl=0

[State 1060, END]
type = ChangeState
triggerall=animelemtime(28)>=1&&animelemtime(29)<=1
trigger1 = Vel Y >= 0
trigger1 = Pos Y >=-5
trigger2 = vel Y > 0
trigger2 = pos y > -vel y
value =890
ctrl=0
;========================
;========================
[Statedef 1062]
type    = A
movetype= I
physics = A
juggle  = 0
poweradd=0
getpower=0
ctrl = 0
anim = 1062


[State 1062, Varset]
type=VarSet
triggerall=var(11)!=0
trigger1=Time=0
v=11
value=0
[State 1062, Varset]
type=VarSet
triggerall=var(14)!=0
trigger1=Time=0
v=14
value=0
[State 1062, Varset]
type=VarSet
triggerall=var(15)!=0
trigger1=Time=0
v=15
value=0
[State -3, BGPalFX]
type = BGPalFX
triggerall=prevstateno=3300
trigger1=time=0
time = 2
color = 0
add = 256,256,256
sinadd = 110,55,85,10
mul = 256,256,256
ontop=1
ignorehitpause=1
pausemove=99999
supermove=99999

[State -3, RemoveExplod]; Super BG
type = Removeexplod 
triggerall=prevstateno=3300
trigger1=1
ignorehitpause=1
supermove = 999999999999999999999
pausemove = 999999999999999999999
ID = 8505
[State -3, RemoveExplod]; Super BG
type = Removeexplod 
triggerall=prevstateno=3300
trigger1=1
ignorehitpause=1
supermove = 999999999999999999999
pausemove = 999999999999999999999
ID = 8506

[State -3, RemoveExplod]
type = Removeexplod 
trigger1=1
ID   =424
[State -3, RemoveExplod]
type = Removeexplod 
trigger1=1
ID   =425
[State -3, RemoveExplod]
type = Removeexplod 
trigger1=1
ID   =426
[State -3]
type = AfterImageTime
trigger1 =1
trigger2 =stateno=1062
time = 0
[State 1062, Gravity] ;Slower Gravity
type = VelAdd
trigger1 =1
y = -.1

[State 1062, END]
type = ChangeState
trigger1 = Vel Y >= 0
trigger1 = Pos Y >=-2
trigger2 = vel Y > 0
trigger2 = pos y > -vel y
value =890
ctrl = 0
;=====================================
; SUPERS ++ SUPERS ++ SUPERS ++
;=====================================
; FINAL SLASH
[Statedef 3000]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd= -3000
ctrl = 0
anim = 3000
sprpriority=2
velset=0,0
faceP2=1
getpower=0
hitcountpersist=1

[State 3000, HELPER]
type=Helper
triggerall!=(EnemyNear(0),authorname="GM")
;trigger1=numtarget&&movehit
trigger1=Time=0&&Uniqhitcount>=1
helpertype=Normal
name="PREV HIT COUNT"
postype=P1
pos=0,0
stateno=716
id     =716
ownpal=1
size.height=50
size.ground.back=15
size.ground.front=15
persistent=0
ignorehitpause=1
supermove = 999999999999999999999
pausemove = 999999999999999999999


[State muteki]
type = NotHitBy
trigger1=time=0&&animelemtime(17)<=0
trigger2 =anim=3000&&movehit
value = SCA, AT, AP

[State 3000, Velocity]
type = VelSet
trigger1=time=0&&animelemtime(15)<=0
x =0
y=0

[State 3000, Velocity]
type = VelSet
trigger1=animelemtime(15)>=1&&animelemtime(16)<=5
x=ifelse((numhelper(451)<=0),7,9)
y=ifelse((p2bodydist Y<=-40),-4,-3)

[State 3000, Width]
type= Width
Trigger1= 1
edge=10,8
ignorehitpause=1

[State 3000, NOT TODAY]
type = PlaySnd
trigger1 = animelem=1
value = s3020,0
channel=0
volume=255

[State 3000, WHOOSH]
type = PlaySnd
trigger1 = animelem=14
value = s0,4
channel=1
volume=255

[State 3000, WHOOSH]
type = PlaySnd
trigger1 = animelemtime(18)=2
value = s602,1
channel=2
volume=50

[State 3000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 3000, BGPalFX]
type = BGPalFX
trigger1=!Time
trigger2=Time=31
trigger3= Vel Y > 0
trigger3= Pos Y >=-2
time = 2
color = 0
add = 256,256,256
sinadd = 110,55,85,10
mul = 256,256,256
ontop=1
ignorehitpause=1
pausemove=99999
supermove=99999

[State EnvColor] 
type = EnvColor
trigger1=Time>=1&&Time<=30
trigger2=animelemtime(1)>=0&&numexplod(8506)>=1
value=0,0,0
time=ifelse((animelemtime(17)>=1&&Pos Y >=-2),0,1)
under=1
pausemove=99999
supermove=99999
ignorehitpause=1

[State 3000, 1] 
type = AssertSpecial
trigger1=anim=3000&&animelemtime(15)>=1
trigger2=numexplod(9996)=1
flag = noFG
flag2= globalnoshadow
pausemove=99999
supermove=99999
ignorehitpause=1


[State 3000, Explod]; HYPER PORTRAIT BG
type = explod 
trigger1=Time=1
anim=9996
ID = 9996
pos =0,0
postype=Back
facing = 1
vfacing = 1 
bindtime=-1
removetime =30
supermove = 999999999999999999999
pausemove = 999999999999999999999
scale = 2,2
sprpriority = 0
ontop =0
ownpal=1 
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0


[State 3000, Explod]; SUPER BG
type = explod 
trigger1=animelemtime(15)=1
anim=8506
ID = 8506
pos = 0,0
postype = Back
facing = 1
vfacing = 1 
bindtime=-1
removetime = ifelse((animelemtime(21)<=0), -1,0)
supermove = 999999999999999999999 ;
pausemove = 999999999999999999999
scale = 2,1.2 
sprpriority =-9
ontop =0
ownpal = 1 
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0

[State 3000, RemoveExplod]; Super BG
type = Removeexplod 
trigger1 = Vel Y > 0
trigger1 = Pos Y >=-2
trigger2=stateno!=3000
trigger3=animelem>=18
trigger3 = Pos Y >=0
anim = 8506
ID = 8506

[State 3000, RemoveExplod]; Super BG
type = Removeexplod 
trigger1 = Vel Y > 0
trigger1 = Pos Y >=-2
trigger2=stateno!=3000
trigger3=animelem>=18
trigger3 = Pos Y >=0
anim = 8508
ID = 8508

[State 3000, Super A]
type = SuperPause
trigger1 = time=0
pos = -8,-62
anim = s8020
sound = s3000,0
darken=0
bindtime =-1
sparkno=s8010
pos = -16,-52
time= 33
movetime =33
scale= 1,1
pausemove=99999
supermove=99999
volume=200

[State 3000, SuperExplod]
type = Explod
trigger1 =Time=0
anim = 8010
sprpriority = 9
postype = p1
pos = -4,-52
velocity = 0, 0
supermove = 999999999999999999999 
pausemove = 999999999999999999999
ownpal = 1
scale = 1,1
ignorehitpause = 1
bindtime =-1
removetime = 34

[State 3000, PalFX]
type=palfx
trigger1=time=0
trigger2=time=15
trigger3=time=25
trigger4=time=30
add  = 10,50,200
mul  = 256,256,256
sinadd=9,-90,0,10
color =256
time=3

[State 3000, PalFX]
type=palfx
trigger1=time=10
trigger2=time=20
add = 0,-90,200
mul = 120,224,150
sinadd=85,55,110
color = 256
time=2

[State 3000, AfterImage]
type = AfterImage
trigger1 = AnimElem = 14
Time = 70
TimeGap  = 2
FrameGap = 2
length = 5
PalBright = 1,1,1
PalContrast =  100,100,100
PalAdd = 32,16,0;0,0,0
PalMul = .5,.5,.5
trans = add1
ignorehitpause = 1

[State 3000, LEAP] 
type = VelSet
trigger1 =animelem=17
x = const(velocity.run.back.x)*(-2)
y = 1

[State 3000, StateTypeSet]
type= StateTypeSet
trigger1= animelem>=16
statetype=A
movetype= A
physics= A

[State 3000, HIT 1]
type = HitDef
trigger1 = animelem=19
trigger2 =!Movecontact
trigger2 = animelem=20
trigger3 =!Movecontact
trigger3 = animelem=21
attr = A, HA	
ID=3000
damage = 1
animtype = Medium		
guardflag =H
hitflag = MAF		
priority =7,hit
pausetime = 3,2	
sparkno = -1
guard.sparkno = s8000
sparkxy = -25, -36		
hitsound = -1		
guardsound = s2,1	
ground.type = High		
ground.slidetime =0		
ground.hittime  = 15	
ground.velocity = 0,0
airguard.velocity = 0,0
air.type = High			
air.velocity = 0,0	
air.hittime = 12
envshake.time=9
envshake.ampl=1
air.fall=1
poweradd=0
getpower=0
numhits =0
hitonce=1
kill=0

[State 3000, End]
type = ChangeState
Triggerall=numtarget(3000)=1
triggerall=!movereversed
trigger1=stateno=3000 && movehit
value = 3001
ctrl = 0

[State 3000, Targetstate]
type= targetstate
ID=3000
triggerall=!movereversed
Triggerall=numtarget(3000)=1
trigger1 = movehit
trigger1 = !(target,ishelper)
trigger1 = hitshakeover
ignorehitpause=1
facep2=-1
persistent=0
value=3002

[State 3000, END]
type = ChangeState
triggerall=animelemtime(19)>=0&&animelemtime(21)<=3
trigger1 = Vel Y >= 0
trigger1 = Pos Y >=0
trigger2 = vel Y > 0
trigger2 = pos y > -vel y
value =890
ctrl = 0
;=========================
[StateDef 3001]
Type     = A
MoveType = I
Physics  = N
Ctrl     = 0
sprpriority = 6
Anim = 3001
velset = 0,0
poweradd=0
getpower=0

[State muteki]
type = NotHitBy
trigger1 =1
value = SCA, AT, AP

;========= SCREENBOUND ======
[State 3001, HELPER]
type=Helper
trigger1 =Time=0
helpertype=normal
name="SCREENBOUND"
postype=Left
pos=0,0
velocity=0,0
stateno=3301
id=3310
ownpal=1
supermovetime = 9999999999999
pausemovetime = 9999999999999
size.height=360
size.ground.back=0
size.ground.front=3
size.air.back =0
size.air.front=3
screenbound=1
movecamera=1

[State 3001, HELPER]
type=Helper
trigger1 =Time=0
helpertype=normal
name="SCREENBOUND"
postype=Right
pos=0,0
velocity=0,0
stateno=3302
id=3311
ownpal=1
supermovetime = 9999999999999
pausemovetime = 9999999999999
size.height=360
size.ground.back=3
size.ground.front=0
size.air.back =3
size.air.front=0
screenbound=1
movecamera=1
;===============

[State 3001, Black PalFX]
type = PalFX
triggerall=anim=3001
trigger1 = animelemtime(2)>=0&&animelem<=2
time =25
add = 0,0,0
mul = 0,0,0
sinadd = 56,56,0,10
invertall = 1
color = 0
;ignorehitpause = 0
;persistent = 1

[State 3001, RemoveExplod]; Super BG
type = Removeexplod 
trigger1=1
anim = 8506
ID = 8506

[State 3001, RemoveExplod]; Super BG
type = Removeexplod 
trigger1=1
anim = 8508
ID = 8508

[State NO RENDER]
type = AssertSpecial
triggerall=anim=3001
Trigger1 =time>=0&&time<=125
flag = globalnoshadow
flag2 = nobardisplay
flag3 = noFG
ignorehitpause=1
supermove=99999
pausemove=99999

[State NO RENDER]
type = AssertSpecial
triggerall=anim=3001
Trigger1 =time>=0&&time<=125
flag = noBG
ignorehitpause=1
supermove=99999
pausemove=99999

[state 3001, 2]
type = screenbound
trigger1 = 1
value = 1
movecamera=0,0

[State VOICE SOUND]
type = PlaySnd
triggerall=anim=3001
trigger1 =animelemtime(1)=10
value =s3023,0
volume=255

[State SLO-MO SLASH SOUND]
type = PlaySnd
triggerall=anim=3001
trigger1 =animelem=1
value =s3022,0
volume=255

[State SLO-MO SLASH SOUND]
type = PlaySnd
triggerall=anim=3001
trigger1 =animelemtime(1)=50
value =s500,2
volume=255

[State 3001, TASTE COLD STEEL]
type = PlaySnd
trigger1 = animelem=2
value=s4,8
volume=255
channel=0

[State SHEEN SOUND]
type = PlaySnd
triggerall=anim=3001
trigger1=animelem=2
value =s603,0 
volume=255

[State -3, BLACKExplod]
type = Explod
trigger1 =!Time
anim = 9992
sprpriority =8
pos =0,0
postype =back
facing = 1
vfacing = 1
bindtime =-1
removetime = 61
supermove = 999999999999999999999
pausemove = 999999999999999999999
scale = 2,2
sprpriority =8
ontop = 0
ownpal = 1 
removeongethit = 0
;ignorehitpause =1
;persistent =0

[State 3001, Explod]
type = explod
trigger1 = time = 0
anim=8900
ID = 8900
pos = 0,0
postype = back
facing = 1
vfacing = 1
bindtime =-1
removetime = 126
supermove = 999999999999999999999
pausemove = 999999999999999999999
scale = 1.3,1.1
sprpriority = 9 
ontop = 1 
ownpal = 1 
removeongethit = 0
;ignorehitpause =1
;persistent =0

[State 3001, Position]
type = PosSet
trigger1 =time=0
;x=ifelse(facing!=70;(target, Pos Y-50)
y =-40

[State 3001, Position]
type = PosSet
triggerall=anim=3001
triggerall=Backedgebodydist <=60&&facing=1
trigger1 =animelem=2
x=80

[State 3001, Position]
type = PosSet
triggerall=anim=3001
triggerall=Frontedgebodydist <=60&&facing=-1
trigger1 =animelem=2
x=-70

[State 3001, Position]
type = PosSet
triggerall=anim=3001
triggerall=Frontedgebodydist <=60&&facing=1
trigger1 =animelem=2
x=70

[State 3001, Position]
type = PosSet
triggerall=anim=3001
triggerall=Backedgebodydist <=60&&facing=-1
trigger1 =animelem=2
x=-80

[State 3001, Bind 1]
type = TargetBind
triggerall=anim=3001
trigger1 = AnimElem =1
pos = -90, 10

[State 3001, Bind 2]
type = TargetBind
triggerall=anim=3001
trigger1 =animelemtime(2)>=0&&AnimElemtime(2)<=2
pos = -90, 10

[State 3001, VelSet]
type = VelSet
triggerall=anim=3001
trigger1 =animelemtime(2)>=3&&animelemtime(38)<=4
x=1
y=.8

[State 3001, Explod]
type = Explod
triggerall=anim=3001
trigger1 =time>=84&&time<=124
anim=9997
ID=9997
pos = 160,120
postype = back
bindtime = -1
removetime = 30
supermovetime = 9999
pausemovetime = 0
scale = 1.2,1.2
sprpriority = -10
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 3001, RemoveExplod]
type = RemoveExplod
trigger1 = time > 124
ID = 9997

[State 3001, Envshake]
type= EnvShake
triggerall=anim=3001
trigger1= animelem=2
time = 10
freq = 40
ampl = -4
phase = 30

[State 3001, StatetypeSet]
type = StatetypeSet
triggerall=anim=3001
trigger1= Pos Y >=-8
statetype=A
movetype=I
physics=A

[State 3001, 5]
type = ChangeState
triggerall=anim=3001
trigger1= Pos Y >=-5
value =3105
ctrl=0
;-------------
;Opponent Stunned Hit By Counter
[Statedef 3002]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 0

[State muteki]
type = nothitby
trigger1 = 1
value = sca

[State 3002, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3002, Position]
type = PosAdd
trigger1 =animelemtime(3)>=30&&animelemtime(4)<=5
x = ceil((36-ifelse(time%2=0,time%12,(time%12)-1))/4)*ifelse(time%2=1,1,-1)

[State 3002, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 3002
facing=-(p2facing)
[State 3002, Black PalFX]
type = PalFX
trigger1 = animelemtime(3)>=0&&animelem<=3
time =25
add = 0,0,0
mul = 0,0,0
sinadd = 56,56,0,10
invertall = 1
color = 0

[State 3002, Position]
type = PosSet
trigger1 = Time >=0
y = 0
;-------------------
[Statedef 3003]
type = S
movetype =H
physics = N
velset = 0,0
ctrl = 0

[State 3003, ChangeAnim]
type = ChangeAnim
trigger1= time < 24 && SelfAnimExist(5950)
value = 5950

[State 3003, ChangeAnim]
type = ChangeAnim2
trigger1 = Time < 24 && anim != 5950
value = 3003

[State 3003, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 3003 && animtime = 0
value = 5080

[State 3003, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3003, ChangeAnim]
type = ChangeState
trigger1 = anim = 5950 && AnimElemTime(AnimElemNo(0)+1)=0
trigger2 = anim = 5080 && AnimElemTime(AnimElemNo(0)+1)=0
value = 3005
;--------------------------
[Statedef 3005]
type = L
movetype = H
physics = N
velset = 0,0
ctrl = 0

[State 3005, Envshake]
type= EnvShake
trigger1 = Time=0
time = 15
freq = 100
ampl = -4
phase = 10

[State 3005, 1]
type = NotHitBy
trigger1 =1; Time = 0
value = SCA

[State 3005,1]
type = ChangeAnim
triggerall = Anim != 5950
trigger1 = time = 0
value = 5110+(SelfAnimExist(5112)*2)

[State 3005,1]
type = ChangeAnim
triggerall = Anim != 5950
trigger1 = SelfAnimExist(5140 + (anim % 10))
trigger1 = time = 0
value = 5140+(SelfAnimExist(5142)*2)

[State 3005, ChangeAnim]
type = SelfState
trigger1 = Time = 40
value = ifelse(alive, 5120, 5150)

;=====================================
; SUPERS ++ SUPERS ++ SUPERS ++
;=====================================
; ROTO CUTTER SUPER
[Statedef 3100]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd=Ifelse((prevstateno=3200),-2000,-1000)
ctrl = 0
anim = 3100
sprpriority=2
velset=0,0
getpower=0
facep2=0

[State 3100, VarSet]
type = VarSet
trigger1 = Time = 0
v = 50
value = 1

[State 3100, VarSet]
type = VarSet
triggerall=prevstateno=3200
trigger1 = Time = 0
v = 55
value = 1

[State 3100, VarSet]
type = VarSet
triggerall=prevstateno=3200
trigger1 = Time = 0
v = 52
value = 1

[State 3100, PlayerPush]
type = PlayerPush
trigger1 =animelem<=34
value=0

[State 3100, 1] 
type = AssertSpecial
trigger1=anim=3100
flag =noautoturn
flag2=nowalk
pausemove=99999
supermove=99999
ignorehitpause=1

[State 3100, Vaccum helper]
type=helper
trigger1= (anim=3100 && !numhelper(3120))
helpertype=normal
stateno=3120
ID=3120
name="Vaccum"
postype=p2
pos=enemynear,const(size.ground.back)-25,-ceil(enemy,pos y)
persistent=0
size.ground.back=5
size.ground.front=5
size.height=240

[State 3100,PosSet]
type=PosSet
trigger1=1
x=Pos X
y=0

[State 3100, Width]
type= Width
Trigger1=animelem>=16
edge=50,30;30,10


[State 3100, muteki]
type = NotHitBy
trigger1=animelem<=15
value = SCA, AT,AP

[State 3100, Velocity]
type = VelSet
trigger1=time=0&&animelemtime(14)<=2
x=0
y=0

[State 3100, Velocity]
type = VelAdd
trigger1=animelemtime(15)>=0&&animelemtime(15)<=1
x=10
y=0
[State 3100, Velocity]
type = VelSet
trigger1=animelemtime(15)>=2&&animelemtime(42)<=6
x=0
y=0

[State 3100, Idle]
type= statetypeset
trigger1= animelem=39
type=S
movetype= I
physics=S
[State 3100, Super A]
type = SuperPause
trigger1 = time=0
pos = -8,-62
anim = s8020
sound = s3000,0
darken=0
bindtime =-1
sparkno=s8010
pos = -16,-52
time= 33
movetime =33
scale= 1,1
pausemove=99999
supermove=99999
volume=50

[State 3100, LET'S FINISH THIS]
type = PlaySnd
trigger1 = time=0
value = s3021,0
channel=8
volume=255

[State 3100, WHOOSH]
type = PlaySnd
trigger1 = animelem=14
value = s3024,0
volume=255
channel=0

[State EnvColor] 
type = EnvColor
trigger1 =animelemtime(1)>=1&&numexplod(8506)>=1
value=0,0,0
time=ifelse((animelemtime(43)>=0),1,0)
under=1
pausemove=99999
supermove=99999
ignorehitpause=1

[State 3100, 1] 
type = AssertSpecial
trigger1=numexplod(8506)=1
flag = noFG
pausemove=99999
supermove=99999
ignorehitpause=1

[State 3100, RemoveExplod]; Super BG
type = Removeexplod 
trigger1=time=0
trigger2=animelemtime(43)>=0
anim=8506
ID =8506

[State 3100, BGPalFX]
type = BGPalFX
trigger1=time=0
trigger2=animelemtime(12)=1
trigger3=animelemtime(39)=1
time = 4
color = 0
add = 256,256,256
sinadd = 110,55,85,10
mul = 256,256,256
ontop=1
ignorehitpause=1
pausemove=99999
supermove=99999

[State 3100, SuperExplod]
type = Explod
trigger1 =Time=0
anim = 8010
sprpriority = 9
postype = p1
pos = -4,-52
velocity = 0, 0
supermove = 999999999999999999999 
pausemove = 999999999999999999999
ownpal = 1
scale = 1,1
ignorehitpause = 1
bindtime =-1
removetime = 34

[State 3100, PalFX]
type=palfx
trigger1=time=0
trigger2=time=15
trigger3=time=25
trigger4=time=30
add  = 10,50,200
mul  = 256,256,256
sinadd=9,-90,0,10
color =256
time=3

[State 3100, PalFX]
type=palfx
trigger1=time=10
trigger2=time=20
add = 0,-90,200
mul = 120,224,150
sinadd=85,55,110
color = 256
time=2

[State 3100, AfterImage]
type = AfterImage
trigger1 = AnimElem = 14
Time = 70
TimeGap  = 2
FrameGap = 2
length = 5
PalBright = 1,1,1
PalContrast =  100,100,100
PalAdd = 32,16,0
PalMul = .5,.5,.5
trans = add1
ignorehitpause = 1

[State 3100, HIT]
type = HitDef
trigger1 = animelem=17
trigger2 =!Movecontact
trigger2 = animelem=18
trigger3 =!Movehit
trigger3 = animelem=19
trigger4 =!Movecontact
trigger4 = animelem=20
trigger5 =!Movehit
trigger5 = animelem=21
trigger6 =!Movecontact
trigger6 = animelem=22
trigger7 =!Movehit
trigger7 = animelem=23
trigger8 =!Movecontact
trigger8 = animelem=24
trigger9 =!Movehit
trigger9 = animelem=25
trigger10=!Movecontact
trigger10= animelem=26
trigger11=!Movehit
trigger11= animelem=27
trigger12=!Movecontact
trigger12= animelem=28
trigger13=!Movehit
trigger13= animelem=29
trigger14=!Movecontact
trigger14= animelem=30
trigger15=!Movehit
trigger15= animelem=31
trigger16=!Movecontact
trigger16= animelem=32
trigger17=!Movecontact
trigger17= animelem=33
trigger18=!Movecontact
trigger18= animelem=34
trigger19=!Movecontact
trigger19= animelem=35
trigger20=!Movecontact
trigger20= animelem=36
trigger21=!Movecontact
trigger21= animelem=37
trigger22=!Movecontact
trigger22= animelem=38
attr =S, HA	
ID=3100
;nochainID=450
damage = ifelse((numhelper(451)=1),80,40),4
animtype = Medium		
guardflag=HA
hitflag = MAFD		
priority = 3, Hit
pausetime =ifelse((EnemyNear(0),ishelper),6,3),ifelse((EnemyNear(0),ishelper),6,3)
sparkno = s4230
guard.sparkno=s8000
sparkxy = -25, -47		
hitsound = s500,1
guardsound = s2,0+(random%2)	
ground.type = Low		
ground.slidetime=8		
ground.hittime  =8
ground.velocity =4,-2
airguard.velocity =-6,-3
air.type = High			
air.velocity =3,3
air.hittime=16
air.fall=1
fall.recover=0
fall=1
fall.hittime=200
kill=0
fall.kill=0
air.recover=0
down.recover=0
down.hittime= 200
down.bounce=1
down.velocity=0,-2
recover=0
poweradd=0
getpower=0

[State 3100, ChangeState]
type = ChangeState
trigger1=stateno=3100 && movehit
value =3101
ignorehitpause=1
ctrl=0

[State 3100, END]
type = ChangeState
trigger1=animtime=0
value =0
ctrl = 1
;=====================================
; SUPERS ++ SUPERS ++ SUPERS ++
;=====================================
; ROTO CUTTER SUPER-- connect
[Statedef 3101]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd=0
ctrl = 0
anim = 3101
sprpriority=2
velset=0,0
getpower=0

[State 3101, VarSet]
type = VarSet
trigger1 = Time = 0
v = 50
value = 1

[State 3101, PlayerPush]
type = PlayerPush
trigger1=MoveHit
value=0

[State 3101, AngleSet]
type = AngleSet
trigger1=Time=0
value = 0

[State 3101, AssertSpecial] 
type = AssertSpecial
trigger1=anim=3101
flag = noautoturn
pausemove=99999
supermove=99999
ignorehitpause=1

[State 3101, muteki]
type = NotHitBy
trigger1=1
value = ,AP

[State 3101, Vaccum helper]
type=helper
trigger1= (anim=3101 && !numhelper(3120))
helpertype=normal
stateno=3120
ID=3120
name="Vaccum"
postype=p2
pos=enemynear,const(size.ground.back)-25,-ceil(enemy,pos y)
persistent=0
size.ground.back=5
size.ground.front=5
size.height=240


[State 3101, VelSet]
type = VelSet
trigger1=!Time&&animelemtime(25)<=0
x=0
y=0

[State 3101, Width]
type= Width
Trigger1=1
edge=60,80


[State 3101, Velocity]
type = VelAdd
trigger1=animelemtime(21)=3
x= 0
y=-7

[State 3101, VelSet]
type=VelSet
trigger1=animelemtime(25)>=1&&animelemtime(26)<=0&&movehit
x=ifelse((FrontEdgeDist<=90),-1,0)
y=-2.5

[State 3101, Velocity]
type = VelAdd
trigger1=animelem>=25
y=.3;7

[State 3101, Physics]
type= statetypeset
trigger1= animelem=22
type=A
movetype=A
physics=A

[State 3101, Idle]
type= statetypeset
trigger1= animelem=27
type=A
movetype= I
physics=A

[State 3101, JumpSound]
type = PlaySnd
trigger1=animelem=22
value = s40,0
channel=8
volume=255
persistent=0
ignorehitpause=1
[State 3101, VOICE]
type = PlaySnd
trigger1=animelem=24
value = s6,8
channel=0
volume=255
persistent=0
ignorehitpause=1

[State 3101, WHOOSH]
type = PlaySnd
trigger1 =animelem=1
value = s3024,0
volume=255
channel=0

[State EnvColor] 
type = EnvColor
trigger1 =animelemtime(1)>=1&&numexplod(8506)>=1
value=0,0,0
time=ifelse((animelemtime(25)<=3),1,0)
under=1
pausemove=99999
supermove=99999
ignorehitpause=1

[State 3101, 1] 
type = AssertSpecial
trigger1=numexplod(8506)=1
flag = noFG
pausemove=99999
supermove=99999
ignorehitpause=1

[State 3101, Explod]; SUPER BG
type = explod 
triggerall=var(52)=0
trigger1=animelemtime(1)=1
anim=8506
ID = 8506
pos = 0,0
postype = Back
facing = 1
vfacing = 1 
bindtime=-1
removetime = ifelse((animelemtime(25)<=3), -1,0)
supermove = 999999999999999999999 ;
pausemove = 999999999999999999999
scale = 2,1.2 
sprpriority =-10
ontop =0
ownpal = 1 
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0

[State 3101, Explod]; SUPER BG
type = explod 
triggerall=var(52)=1
trigger1=animelemtime(1)=1
anim=8506
ID = 8506
pos = 0,0
postype = Back
facing = 1
vfacing = 1 
bindtime=-1
removetime = ifelse((animelemtime(25)<=3), -1,0)
supermove = 999999999999999999999 ;
pausemove = 999999999999999999999
scale = 2,1.2 
sprpriority =-10
ontop =0
ownpal = 1 
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0
trans= add

[State 3101, RemoveExplod]; Super BG
type = Removeexplod 
trigger1=time=0
trigger2=animelemtime(26)>=0
trigger3=numhelper(9998)>=1
trigger4=stateno!=3101
ignorehitpause=1
anim =8506
ID = 8506

[State 3101, VarSet]; SUPER CANCEL BG
type = VarSet
trigger1 =var(52)=1
trigger1 = Time =1
v = 52
value =0

[State 3101, Explod]; SUPER CANCEL BG
type = explod 
triggerall=var(52)=1
trigger1=animelemtime(1)=1
anim =8505
ID   =8505
pos = 0,0
postype = Back
facing = 1
vfacing = 1
bindtime=-1
removetime= ifelse(anim=3101, -1,0)
supermove = 999999999999999999999
pausemove = 999999999999999999999
scale =10,2 
sprpriority =-10
ontop =0
ownpal = 1 
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0

[State 3101, RemoveExplod]; Super Cancel BG
type = Removeexplod 
trigger1=prevstateno!=3200
trigger1=time=0
trigger2=numexplod(8506)!=1
trigger3=stateno!=3101
trigger4=animelemtime(26)>=0
trigger5=numhelper(9998)>=1
ignorehitpause=1
anim =8505
ID   =8505

[State 3101, BGPalFX]
type = BGPalFX
trigger1=time=0
trigger2=animelemtime(26)=1
time = 4
color = 0
add = 256,256,256
sinadd = 110,55,85,10
mul = 256,256,256
ontop=1
ignorehitpause=1
pausemove=99999
supermove=99999

[State 3101, AfterImage]
type = AfterImage
trigger1 = AnimElem =1
Time=70
TimeGap =2
FrameGap=2
length=5
PalBright=1,1,1
PalContrast=100,100,100
PalAdd=32,16,0
PalMul=.5,.5,.5
trans=add1
ignorehitpause=1

[State 3101, ChangeState]
type = ChangeState
triggerall=stateno=3101&&Vel Y=0&&movehit
trigger1=command="TORNADO"&&power>=1000
value=3200
ctrl=0

[State 3101, HIT]
type = HitDef
trigger1 = animelem=1||animelem=3||animelem=5||animelem=8||animelem=11||animelem=15||animelem=18
trigger1 = P2Dist x >= 0
attr =S, HA	
ID=3101
nochainID=450
damage = ifelse((numhelper(451)=1),100,80),2
animtype = Medium		
guardflag =HA
hitflag = MAFDL		
priority = 3, Hit
pausetime = 5,5
sparkno = s4210
guard.sparkno = s8000
sparkxy = -25, -47		
hitsound = s500, 0
guardsound = s2,0+(random%2)	
ground.type = Low		
ground.slidetime =15		
ground.hittime  = 15	
ground.velocity =(P2Dist x + 70) / 4,0
airguard.velocity = 0,0
air.type = High			
air.velocity = ifelse((p2dist x!=[-30,30]),7,6), ifelse(p2dist y<(enemy,const(size.mid.pos.y))+45,-1,-3)
air.hittime=16
air.fall=1
fall.recover=0
fall.hittime=20
kill=ifelse((EnemyNear,ishelper),1,0)
fall=1
fall.kill=ifelse(numexplod(8505)>=1,0,1)
air.recover=0
down.recover=0
down.hittime= 200
down.bounce=1
down.velocity=0,-2
recover=0
poweradd=0
getpower=0
p2facing=1

[State 3101, HIT]
type = HitDef
trigger1 = animelem=1||animelem=3||animelem=5||animelem=8||animelem=11||animelem=15||animelem=18
trigger1 = P2Dist x < 0
attr =S, HA	
ID=3102
damage = ifelse((numhelper(451)=1),100,80),2
animtype = Medium		
guardflag =HA
hitflag = MAFDL		
priority = 3, Hit
pausetime = 3,3
sparkno = s4200
guard.sparkno = s8000
sparkxy = -25, -47		
hitsound = s500, 0	
guardsound = s2,0+(random%2)	
ground.type = Low		
ground.slidetime=16		
ground.hittime=16	
ground.velocity =(P2Dist x - 70) / 4,0
airguard.velocity = 0,0
air.type = Low	
air.velocity =ifelse((p2dist x!=[-30,30]),-7,-6), ifelse(p2dist y<(enemy,const(size.mid.pos.y))+45,-1,-3)
air.hittime=16
air.fall=1
fall.recover=0
fall.hittime=20
kill=ifelse((EnemyNear,ishelper),1,0);ifelse(p2bodydist x<=10,0,1)
fall.kill=0
air.recover=0
down.recover=0
down.hittime= 200
down.bounce=1
down.velocity=ifelse((p2dist x!=[-30,30]),-20,-15), -4
recover=0
poweradd=0
getpower=0
p2facing=1

[State 3101, TargetBind]
type =TargetBind
ID=3101
triggerall=stateno=3101
trigger1=animelem=1
trigger2=animelem=3
trigger3=animelem=5
trigger4=animelem=8
trigger5=animelem=11
trigger6=animelem=13
trigger7=animelem=15
trigger8=animelem=18
pos =-30,-20

[State 3101, TargetBind]
type =TargetBind
ID=3102
triggerall=stateno=3101
trigger1=animelem=1
trigger2=animelem=3
trigger3=animelem=5
trigger4=animelem=8
trigger5=animelem=11
trigger6=animelem=13
trigger7=animelem=15
trigger8=animelem=18
pos =30,-20
[State 3101, TargetBind]
type =TargetBind
ID=3101
triggerall=stateno=3101
trigger1=animelem=19
trigger2=animelem=20
trigger3=animelem=21
ignorehitpause=1
pos =20,-10
[State 3101, TargetBind]
type =TargetBind
ID=3102
triggerall=stateno=3101
trigger1=animelem=19
trigger2=animelem=20
trigger3=animelem=21
ignorehitpause=1
pos =20,-10
[State 3101, TargetBind]
type =TargetBind
ID=3103
triggerall=stateno=3101
trigger1=animelem=19
trigger2=animelem=20
trigger3=animelem=21
ignorehitpause=1
pos =20,-10


[State 3101, TargetVelSet]
type = TargetVelSet
triggerall=stateno=3101
trigger1 = NumTarget(3101) && P2Dist x <= -30
trigger1 = Target(3101), StateType != A
trigger1 = Target(3101), StateNo != [5100,5150]
x = 0
ID = 3101

[State 3101, TargetVelSet]
type = TargetVelSet
triggerall=stateno=3101
trigger1 = NumTarget(3102) && P2Dist x >= 30
trigger1 = Target(3102), StateType != A
trigger1 = Target(3102), StateNo != [5100,5150]
x = 0
ID = 3102


[State 3101, HIT]
type = HitDef
trigger1 = animelem=20
attr =S, HA
ID=3103
damage = ifelse((numhelper(451)=1),90,70),2
animtype =Medium		
guardflag =HA
hitflag = MHAFD		
priority = 3,Hit
pausetime = 2,5
sparkno = s4210
guard.sparkno = s8000
sparkxy = -25, -47	
hitsound = s500, 0	
guardsound = s2,0+(random%2)	
ground.type =High		
ground.slidetime=12		
ground.hittime=16	
ground.velocity =-3,-4
airguard.velocity = 0,0
air.type = High			
air.velocity = -3,-4	
air.hittime =200
air.fall=1
fall.recover=0
fall.recovertime=200
fall.hittime=200
kill=ifelse((EnemyNear,ishelper),1,0);ifelse(p2bodydist x<=10,0,1)
fall.kill=0
fall=1
air.recover=0
down.recover=0
down.hittime= 200
down.bounce=1
down.velocity=-3,-6
recover=0
poweradd=0
getpower=0
p2facing=1

[State 3101, HIT]
type = HitDef
trigger1=Animelem=25
trigger2=!Movecontact
trigger2=animelem=26
attr =A, HA
ID=3104
damage = ifelse((numhelper(451)=1),130,120),2
animtype =Medium		
guardflag = MA
hitflag = MHAFD			
priority = 3, Hit
pausetime = 14,14
sparkno = s4220
guard.sparkno = s8000
sparkxy= -30,-40
hitsound = s501, 2		
guardsound = s2,0+(random%2)		
guardsound = s2,1	
ground.type =High		
ground.slidetime=30	
ground.hittime  =10
ground.velocity = -13,-6
airguard.velocity=-13,-6
air.animtype=Heavy
air.type =Low			
air.velocity = -13,-6
air.hittime =200
fall.animtype =Low
fall.envshake=ifelse((numhelper(9998)=0),1,0)
fall.envshake.time=12
fall.envshake.ampl=6
fall=1
fall.hittime=600
air.recover=0
recover=0
air.fall=1
poweradd=0
getpower=0
p2facing=1

[State 3101, EnvShake]
type = EnvShake
trigger1=numexplod(9998)!=1
trigger1=Animelemtime(25)>=2&&animelemtime(26)<=2
trigger1=movecontact
ignorehitpause=1
supermove = 999999999999999999999 
pausemove = 999999999999999999999
persistent=0
time=ifelse((numexplod(9998)>=1),0,30)
freq=ifelse((numexplod(9998)>=1),0,100)
ampl=ifelse((numexplod(9998)>=1),0,-8)


[State 3101, HIT Spark 1]
type = Explod
triggerall=movehit= 1
trigger1 =animelemtime(1)>=0&&animelemtime(1)<=2
postype = P1
facing=1
vfacing=-1
pos  = floor(40+p2bodydist X),-50
id   = 4012
anim = 4012
sprpriority= 9
scale = 1,1
persistent= 0
ontop = 1
ownpal = 1
ignorehitpause = 1
supermove = 999999999999999999999 
pausemove = 999999999999999999999
bindtime=1
persistent=0

[State 3101, HIT Spark 2]
type = Explod
triggerall=movehit= 1
trigger1=animelemtime(3)>=0&&animelemtime(3)<=2
postype = P1
facing=1
vfacing=1
pos  = floor(40+p2bodydist X),-50
id   = 4012
anim = 4012
sprpriority= 9
scale = 1,1
persistent= 0
ontop = 1
ownpal = 1
ignorehitpause = 1
supermove = 999999999999999999999 
pausemove = 999999999999999999999
bindtime=1
persistent=0


[State 3101, HIT Spark 3]
type = Explod
triggerall=movehit= 1
trigger1=animelemtime(6)>=0&&animelemtime(6)<=2
postype = P1
facing=1
vfacing=-1
pos  = floor(40+p2bodydist X),-50
id   = 4012
anim = 4012
sprpriority= 9
scale = 1,1
persistent= 0
ontop = 1
ownpal = 1
ignorehitpause = 1
supermove = 999999999999999999999 
pausemove = 999999999999999999999
bindtime=1
persistent=0

[State 3101, HIT Spark 4]
type = Explod
triggerall=movehit= 1
trigger1=animelemtime(8)>=0&&animelemtime(8)<=2
postype = P1
facing=1
vfacing=1
pos  = floor(40+p2bodydist X),-50
id   = 4012
anim = 4012
sprpriority= 9
scale = 1,1
persistent= 0
ontop = 1
ownpal = 1
ignorehitpause = 1
supermove = 999999999999999999999 
pausemove = 999999999999999999999
bindtime=1
persistent=0

[State 3101, HIT Spark 5]
type = Explod
triggerall=movehit= 1
trigger1=animelemtime(11)>=0&&animelemtime(11)<=2
postype = P1
facing=1
vfacing=-1
pos  = floor(40+p2bodydist X),-50
id   = 4012
anim = 4012
sprpriority= 9
scale = 1,1
persistent= 0
ontop = 1
ownpal = 1
ignorehitpause = 1
supermove = 999999999999999999999 
pausemove = 999999999999999999999
bindtime=1
persistent=0

[State 3101, HIT Spark 6]
type = Explod
triggerall=movehit= 1
trigger1=animelemtime(13)>=0&&animelemtime(13)<=2
postype = P1
facing=1
vfacing=1
pos  = floor(40+p2bodydist X),-50
id   = 4012
anim = 4012
sprpriority= 9
scale = 1,1
persistent= 0
ontop = 1
ownpal = 1
ignorehitpause = 1
supermove = 999999999999999999999 
pausemove = 999999999999999999999
bindtime=1
persistent=0

[State 3101, HIT Spark 7]
type = Explod
triggerall=movehit= 1
trigger1=animelemtime(15)>=0&&animelemtime(15)<=2
postype = P1
facing=1
vfacing=-1
pos  = floor(40+p2bodydist X),-50
id   = 4012
anim = 4012
sprpriority= 9
scale = 1,1
persistent= 0
ontop = 1
ownpal = 1
ignorehitpause = 1
supermove = 999999999999999999999 
pausemove = 999999999999999999999
bindtime=1
persistent=0

[State 3101, HIT Spark 8]
type = Explod
triggerall=movehit= 1
trigger1=animelemtime(18)>=0&&animelemtime(18)<=2
postype = P1
facing=1
vfacing=1
pos  = floor(40+p2bodydist X),-50
id   = 4012
anim = 4012
sprpriority= 9
scale = 1,1
persistent= 0
ontop = 1
ownpal = 1
ignorehitpause = 1
supermove = 999999999999999999999 
pausemove = 999999999999999999999
bindtime=1
persistent=0

[State 3101, HIT Spark 9]
type = Explod
triggerall=movehit= 1
trigger1=animelemtime(20)>=0&&animelemtime(20)<=3
postype = P1
facing=1
vfacing=-1
pos  = floor(40+p2bodydist X),-50
id   = 4012
anim = 4012
sprpriority= 9
scale = 1,1
persistent= 0
ontop = 1
ownpal = 1
ignorehitpause = 1
supermove = 999999999999999999999 
pausemove = 999999999999999999999
bindtime=1
persistent=0

[State 3101, SLASH Spark]
type = Explod
trigger1=AnimElemtime(25)>=0&&AnimElemtime(26)<=3
trigger1=movehit=1
id = 4200
anim=4200
postype = P2
facing=-1
vfacing=1
pos= 0,-60
sprpriority=-1
scale = 1,1
persistent= 0
ontop = 0
ownpal = 1
ignorehitpause = 1
removetime=10
bindtime=1
supermove = 999999999999999999999 
pausemove = 999999999999999999999

[State 3101, RemoveExplod]
type = Removeexplod 
trigger1=time=0
trigger2=stateno!=3101
trigger3=!movehit
trigger4=animelem=46
ID = 4000||4001||4002||4003||4010||4011||4012||4013||4200+(random%50)||4210||4220||4230||4240

[State 3101, END]
type = ChangeState
triggerall=animelemtime(26)>=0
trigger1 = Vel Y >= 0
trigger1 = Pos Y >=-2
trigger2 = vel Y > 0
trigger2 = pos y > -vel y
value =3105
ctrl=0

;=====================
; Jump Land
[Statedef 3105]
movetype= A
type    = S
physics = S
juggle  = 0
poweradd=0
getpower=0
ctrl = 0
anim = ifelse((prevstateno=3001),3106,3105)
sprpriority=9
velset=0,0

[State 3105, VarSet]
type = VarSet
trigger1 =1
v = 50
value = 1
[State 3105, RemoveExplod]; Super BG
type = Removeexplod 
trigger1=1
anim = 8506
ID = 8506
[State 3105]
type = PlayerPush
triggerall=anim=3106
trigger1 = 1
value = 0
;========= SCREENBOUND ======
[State 3105, HELPER]
type=Helper
triggerall=numtarget(3104)>=1
trigger1=prevstateno=3101
trigger1 =time=0
helpertype=normal
name="SCREENBOUND"
postype=Left
pos=0,0
velocity=0,0
stateno=3301
id=3310
ownpal=1
supermovetime = 9999999999999
pausemovetime = 9999999999999
size.height=360
size.ground.back=0
size.ground.front=3
size.air.back =0
size.air.front=3
screenbound=1
movecamera=1

[State 3105, HELPER]
type=Helper
triggerall=numtarget(3104)>=1
trigger1=prevstateno=3101
trigger1 =time=0
helpertype=normal
name="SCREENBOUND"
postype=Right
pos=0,0
velocity=0,0
stateno=3302
id=3311
ownpal=1
supermovetime = 9999999999999
pausemovetime = 9999999999999
size.height=360
size.ground.back=3
size.ground.front=0
size.air.back =3
size.air.front=0
screenbound=1
movecamera=1
;===============

[State 3105, NotHitBy]
type = NotHitBy
triggerall=anim=3106
trigger1=1
value = SCA, AT, AP

[State 3105, Envshake]
type=envshake
triggerall=anim=3106
trigger1 =AnimElem =12
time = 18
ampl = -6
[State 3105, AssertSpecial]
type = AssertSpecial
trigger1=numexplod(9991)=1
flag=noBG
flag2=noFG
ignorehitpause=1
supermovetime = 9999
[State 3105, Explod]
type = Explod
triggerall=anim=3106
trigger1 =animelem=12
anim = 9991
ID   = 9991
pos = 160,120
postype = back
bindtime = -1
removetime = 18
supermovetime = 9999
pausemovetime = 0
scale = 1.2,1.2
sprpriority = -11
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 3105, SuperSLASH Spark]
type = Explod
triggerall=anim=3106
trigger1=animelem=12
id = 4250
anim=4250
postype =P2, Mid
facing= 1
vfacing=1
pos= 0,-50
sprpriority=7
scale = .7,1.2
persistent= 0
ontop =1
ownpal = 1
ignorehitpause = 1
removetime=10
bindtime=1
supermove = 999999999999999999999 
pausemove = 999999999999999999999
[State 3105, SuperSLASH Spark2]
type = Explod
triggerall=anim=3106
trigger1=animelem=12
id = 4260
anim=4260
postype =P2, Mid
facing= 1
vfacing=1
pos= 0,-50
sprpriority=8
scale = 1,1
persistent= 0
ontop =1
ownpal = 1
ignorehitpause = 1
removetime=16
bindtime=1
supermove = 999999999999999999999 
pausemove = 999999999999999999999




[State 3105,TargetLifeAdd1]
type=TargetLifeAdd
Triggerall=numhelper(716)=0
triggerall=anim=3106
trigger1 =Animelem=12&&Uniqhitcount=0
value=-500

[State 3105,TargetLifeAdd1]
type=TargetLifeAdd
Triggerall=numhelper(716)=1
triggerall=anim=3106
trigger1 =Animelem=12&&Uniqhitcount=0
value=ifelse((numhelper(451)=1),ceil(LifeMax*-.97),ceil(LifeMax*-.71))

[State 3105,TargetLifeAdd2]
type=TargetLifeAdd
Triggerall=numhelper(716)=1
triggerall=anim=3106
trigger1 =Animelem=12&&Uniqhitcount=1
value=ifelse((numhelper(451)=1),ceil(LifeMax*-1.04),ceil(LifeMax*-.75))



[State 3105, HitAdd]
type= HitAdd
triggerall=anim=3106
trigger1 = Animelem=12
value= 1
[State HIT SOUND]
type = PlaySnd
triggerall=anim=3106
trigger1 =animelem=12
value =s500,1 
volume=255
[State HIT SOUND]
type = PlaySnd
triggerall=anim=3106
trigger1 =animelem=12
value =s501,2
volume=255
[State 3105, 7]
type = Targetstate
triggerall=anim=3106
trigger1 = animelemtime(12)=0
value =3003
ctrl = 0
fall=1
;==================
[State 3105, HELPER]
type=Helper
triggerall=prevstateno=3100
trigger1=animelem=1
helpertype=Normal
name="SUPER DELAY"
postype=P1
pos=0,-70
stateno=3110
id     =3110
ownpal=1
size.height=50
size.ground.back=15
size.ground.front=15
persistent=0
ignorehitpause=1

[State 3105, PlaySnd]
type= PlaySnd
trigger1=time=0
value= s52,0

[State 3105, Guard]
type= changestate
trigger1= inguarddist
trigger1= ctrl && command="holdback"
value= 120

[State 3105, Width]
Type= Width
trigger1=1
edge=8,0

[State 3105, 2]
type = PosSet
trigger1 =1; Time = 0
x=Pos X
y= 0
[State 3105, AfterImageTime]
type = AfterImageTime
trigger1 = time=0
time=0
[State 3105, Explod];Dust Puff 2
type = explod 
trigger1= time=1
anim=8140
ID=8140
pos = -25,-2 
postype = P1
facing = 1
vfacing = 1
;bindtime = -1
removetime = 17
supermove = 999999999999999999999 
pausemove = 999999999999999999999
scale = 1,1 
sprpriority = 9 
ontop = 1 
ownpal = 1 
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0

[State 3105, Explod]; Dust Puff 1
type = explod 
trigger1= time=1
anim=8130
ID=8130
random= 0,5
pos = -8,-4 
postype = P1
facing = 1
vfacing = 1
;bindtime = -1
removetime = 17
supermove = 999999999999999999999 
pausemove = 999999999999999999999
scale = 1,1 
sprpriority = 9 
ontop = 1 
ownpal = 1
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0

[State 3105, Explod]; GROUND HIT DUST
type = explod 
trigger1 = Time=1
anim=4022
ID=4022
pos = 0,0
postype = P1
facing = 1
vfacing = 1
bindtime = 1
removetime = 10
supermove = 999999999999999999999
pausemove = 999999999999999999999
scale = .55,.55
sprpriority =-1
ontop =0
ownpal = 1
removeongethit = 1
shadow =0


[State 3105, End]
type = ChangeState
trigger1 = animtime=0
value = 0
ctrl = 1
;---------------------------
; SUPER ATTACK DELAY Helper
[Statedef 3110]
type    = A
movetype= I 
physics = N
velset = 0,0
anim=1052
id=3110

[State 3110]
type = BindToParent
trigger1 =1
pos= 0,-70

[State 3110]
type = PlayerPush
trigger1 = 1
value = 0

[State 3110]
type = NotHitBy
Trigger1 = 1
value = SCA
Time = 1

[State 3110]
type = DestroySelf
trigger1=(Parent, StateNo = 5000)
trigger2=(Parent, StateNo = 5010)
trigger3=(Parent, StateNo = 5020)
trigger4=(Parent, StateNo = 5070)
trigger5=(Parent, StateNo = 5080)
trigger6=(Parent, StateNo = 5100)
trigger7=(Parent, stateno=105)
trigger8=(Parent, stateno=40)
trigger9=Time =120
;========================<ROTO CUTTER VACUUM>=============================
[Statedef 3120]
physics=N
velset=0,0
anim=3120
[State 3120, nhb]
type=nothitby
trigger1= 1
time=-1
value=SCA
[State 3120, HitOverride]
type=hitoverride
trigger1= 1
time=-1
attr=SCA,AA,AP,AT
stateno=3120
ignorehitpause=1
[State 3120, bound]
type=screenbound
trigger1= 1
value=0
[State 3120, Turn]
type=turn
trigger1= rootdist x<5
[State 3120, push]
type=playerpush
trigger1= p2bodydist x=[-10,10]
value=1
[State 3120, Pos]
type=posset
trigger1= 1
y=0
[State 3120, Vel]
type=velset
trigger1= root,var(1)=1
x=250.0/(rootdist x+50.0)
;ifelse((rootdist x=[0,100]),2,ifelse((rootdist x=[100,200]),1.5,1))
[State 3120, Vel]
type=velset
trigger1= root,var(1)!=1
x=500.0/(rootdist x+50.0)
;ifelse((rootdist x=[0,100]),4,ifelse((rootdist x=[100,200]),3,2))
[State 3120, Pos]
type=posadd
trigger1= p2bodydist x!=[-5,5]
x=ceil(p2dist x)-enemynear,const(size.ground.back)-5
[State 3120, End]
type=destroyself
trigger1= root,stateno!=3100 || (root,anim!=3100) || root,movecontact
trigger2=(root,stateno=3100)&&(root,animelem=34)
trigger3=(root,stateno=3101)

;=====================================
; SUPERS ++ SUPERS ++ SUPERS ++
;=====================================
; TORNADO SPIN KICK SUPER
[Statedef 3200]
type    = A
movetype= A
physics = N
juggle  =15;0
poweradd=Ifelse((prevstateno=3101),-2000,-1000)
ctrl = 0
anim = 3200
sprpriority=2
velset=0,0
getpower=0
hitdefpersist=1

[State 3200, TargetBind]
type =TargetBind
ID=3101
trigger1=!Time && AnimElemTime(17) < 0
pos =60,0

[State 3200, TargetBind]
type =TargetBind
ID=3102
trigger1=!Time && AnimElemTime(17) < 0
pos =90,0

[State -2, TargetVelSet]
type=targetvelset
ID=3100||3101||3102
trigger1=1
ignorehitpause=1
pausemove=99999
supermove=99999
x=0

[State 3200, 1] 
type = AssertSpecial
trigger1=1
flag =noautoturn
flag2=nowalk
flag3=nojugglecheck
pausemove=99999
supermove=99999
ignorehitpause=1

[State 3200, Playerpush]
type = Playerpush
trigger1=!Time&&1
value=1

[State 3200, VarSet]
type = VarSet
trigger1 = Time = 0
v = 50
value = 1

[State 3200, VarSet]
type = VarSet
trigger1 = Time = 0
triggerall=prevstateno=3101
v = 55
value = 1

[State 3200, Width]
type= Width
Trigger1=1
ignorehitpause=1
edge=ifelse((animelem<=20),8,60),0

[State 3200, muteki]
type = NotHitBy
trigger1=animelem<=17
value = SCA, AT, AP

[State 3200, VelSet]
type = VelSet
triggerall=anim=3200
trigger1=AnimElemtime(1)>=1&&animelemtime(15)<=2
trigger2=animelemtime(40)>=0&&animelemtime(44)<=20
x=0
y=0

[State 3200, VelAdd]
type = VelAdd
triggerall=p2bodydist X >=30
trigger1 = AnimElem=16
x =7


[State 3200, VelSet]
type = VelSet
trigger1 = AnimElemtime(16)>=1&&animelemtime(39)<=3
x=6
y=0


[State 3200, Super A]
type = SuperPause
trigger1 = time=0
anim =-1
sound = s3000,0
darken=0
bindtime =-1
pos = -8,-62
time     =33
movetime =33
scale= 1,1
pausemove=99999
supermove=99999
volume=50

[State 3200, SuperExplod]
type = Explod
trigger1 =Time=1
anim =8020
sprpriority = 9
postype = p1
pos = -8,-62
velocity = 0, 0
supermove = 999999999999999999999 
pausemove = 999999999999999999999
ownpal = 1
scale = 1,1
ignorehitpause = 1
bindtime =-1
removetime = 34

[State 3200, SuperExplod]
type = Explod
trigger1 =Time=1
anim =8010
sprpriority = 9
postype = p1
pos = -4,-52
velocity = 0, 0
supermove = 999999999999999999999 
pausemove = 999999999999999999999
ownpal = 1
scale = 1,1
ignorehitpause = 1
bindtime =-1
removetime = 34


[State 3200, NOT TODAY]
type = PlaySnd
trigger1=time=0
value = s3200,0
channel=8
volume=255

[State 3200, VOICE]
type = PlaySnd
trigger1 = animelem=16
trigger2 = animelem=23
trigger3 = animelem=30
value = s6,5
volume=255

[State 3200, VOICE]
type = PlaySnd
trigger1 = animelem=37
value = s6,11
volume=255

[State 3200, WHOOSH]
type = PlaySnd
trigger1 = animelem=17
trigger2 = animelem=24
trigger3 = animelem=31
trigger4 = animelem=38
value = s0,4
channel=0

[State EnvColor] 
type = EnvColor
trigger1 =animelemtime(16)>=3&&numexplod(8506)>=1
value=0,0,0
time=ifelse((animelemtime(39)<=2),1,0)
under=1
pausemove=99999
supermove=99999
ignorehitpause=1

[State 3200, 1] 
type = AssertSpecial
trigger1=numexplod(8506)=1
trigger1=animelemtime(16)>=3&&animelemtime(39)<=2
flag = noFG
pausemove=99999
supermove=99999
ignorehitpause=1

[State 3200, Explod]; SUPER BG
type = explod 
triggerall=var(55)=0
trigger1=animelemtime(16)=3
anim =8506
ID = 8506
pos = 0,0
postype = Back
facing = 1
vfacing = 1 
bindtime=-1
removetime = ifelse((animelemtime(39)<=2), -1,0)
supermove = 999999999999999999999 ;
pausemove = 999999999999999999999
scale = 2,1.2 
sprpriority =-9
ontop =0
ownpal = 1 
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0

[State 3200, Explod]; SUPER BG
type = explod 
triggerall=var(55)=1
trigger1=animelemtime(16)=3
anim =8506
ID = 8506
pos = 0,0
postype = Back
facing = 1
vfacing = 1 
bindtime=-1
removetime = ifelse((animelemtime(39)<=2), -1,0)
supermove = 999999999999999999999 ;
pausemove = 999999999999999999999
scale = 2,1.2 
sprpriority =-10
ontop =0
ownpal = 1 
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0
trans= add

[State 3200, RemoveExplod]; Super BG
type = Removeexplod 
trigger1=time=0
trigger2=animelemtime(39)>=3
anim=8506
ID = 8506

[State 3200, Explod]; SUPER CANCEL BG
type = explod 
triggerall=prevstateno=3101
trigger1=numexplod(8506)=1
anim =8505
ID   =8505
pos = 0,0
postype = Back
facing = 1
vfacing = 1
bindtime=-1
removetime= ifelse(anim=3200, -1,0)
supermove = 999999999999999999999
pausemove = 999999999999999999999
scale =10,2 
sprpriority =-10
ontop =0
ownpal = 1 
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0

[State 3200, RemoveExplod]; Super Cancel BG
type = Removeexplod 
trigger1=prevstateno!=3101
trigger1=time=0
trigger2=numexplod(8506)!=1
trigger3=stateno!=3200
trigger4=animelemtime(39)>=3
trigger5=numhelper(9998)>=1
ignorehitpause=1
anim =8505
ID   =8505


[State 3200, BGPalFX]
type = BGPalFX
trigger1=time=0
trigger2 =animelemtime(15)=2
trigger3 =animelemtime(39)=3
time = 4
color = 0
add = 256,256,256
sinadd = 110,55,85,10
mul = 256,256,256
ontop=1
ignorehitpause=1
pausemove=99999
supermove=99999

[State 3200, PalFX]
type=palfx
trigger1=time=0
trigger2=time=15
trigger3=time=25
trigger4=time=30
add  = 10,50,200
mul  = 256,256,256
sinadd=9,-90,0,10
color =256
time=3

[State 3200, PalFX]
type=palfx
trigger1=time=10
trigger2=time=20
add = 0,-90,200
mul = 120,224,150
sinadd=85,55,110
color = 256
time=2

[State 3200, AfterImage]
type = AfterImage
trigger1 = AnimElem=15
Time = 70
TimeGap  =2
FrameGap =4
length =10
PalBright  =1,1,1
PalContrast=100,100,100
PalAdd     =32,16,0
PalMul = .5,.5,.5
trans = add1
ignorehitpause = 1

[State 3200, HIT]
type = HitDef
trigger1=animelem=18
trigger2=!MoveContact
trigger2=animelem=19
attr = S, HA	
damage = 200
animtype =Heavy		
guardflag = MA
hitflag =MAF	
priority = 3, Hit
pausetime =7,10
sparkno = s4012
guard.sparkno = s8000
sparkxy = -15, -67		
hitsound = s702, 0
guardsound = s1,0
ground.type =High		
ground.slidetime=30		
ground.hittime  =30	
ground.velocity =-12,0
makedust=0
airguard.velocity =-3,0
air.type = Low		
air.velocity = -4,-4	
air.hittime = 20
air.fall=1
fall.animtype=Low
poweradd=0
getpower=0
guard.kill=1
kill=ifelse((EnemyNear,ishelper),1,0)
fall.recover=0
air.recover=0
recover=0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
facep2=1

[State 3200, HIT]
type = HitDef
trigger1=animelem=25
trigger2=!MoveContact
trigger2=animelem=26
attr = S, HA	
damage = 100
animtype = Medium		
guardflag = MA
hitflag = MAF	
priority = 3, Hit
pausetime = 5,10
sparkno = s4012
guard.sparkno = s8000
sparkxy = -20, -37		
hitsound = s702, 0
guardsound = s1,0
ground.type = Low		
ground.slidetime=30		
ground.hittime  =30	
ground.velocity =-10,0
makedust=0
airguard.velocity = 0,0
air.type =Low		
air.velocity = -2,-3
air.hittime = 20
air.fall=1
fall.animtype=Low
poweradd=0
getpower=0
guard.kill=1
kill=ifelse((EnemyNear,ishelper),1,0)
fall.recover=0
air.recover=0
recover=0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
mindist=ifelse((moveguarded||movereversed||(EnemyNear(0),ishelper)),200,40),ifelse((moveguarded||movereversed||(EnemyNear(0),ishelper)),-200,ifelse((EnemyNear(0),Pos Y=0),0,-10))
maxdist=ifelse((moveguarded||movereversed||(EnemyNear(0),ishelper)),-200,40),ifelse((moveguarded||movereversed||(EnemyNear(0),ishelper)),200,ifelse((EnemyNear(0),Pos Y=0),0,-10))


[State 3200, HIT]
type = HitDef
trigger1=animelem=32
trigger2=!MoveContact
trigger2=animelem=33
attr = S, HA	
ID=3205
damage = 120
animtype = Diagup	
guardflag = L;MA
hitflag = MAF	
priority = 3, Hit
pausetime = 5,5
sparkno = s4012
guard.sparkno = s8000
sparkxy = -20,-20		
hitsound = s701, 0
guardsound = s1,0
ground.type =Trip	
ground.slidetime=30		
ground.hittime  =30	
ground.velocity =-6,-4
makedust=0
airguard.velocity = 0,0
air.animtype=Medium
air.type =Low		
air.velocity = -2,-5
air.hittime = 20
air.fall=1
fall=1
fall.type=Trip
fall.animtype=Low
fall.hittime=20
poweradd=0
getpower=0
guard.kill=1
kill=ifelse((EnemyNear,ishelper),1,0)
fall.recover=0
air.recover=0
recover=0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 3200, HELPER]
type=Helper
triggerall=numhelper(451)<=0
trigger1=numtarget(3205)
helpertype=Normal
name="TRIP DAMAGE"
postype=P1
pos=0,0
stateno=451
id     =451
ownpal=1
size.height=50
size.ground.back=15
size.ground.front=15
persistent=0
ignorehitpause=1

[State 3200, HIT]
type = HitDef
trigger1=animelem=40
trigger2=!MoveContact
trigger2=animelem=41
attr = S, HA	
damage =ifelse((numhelper(451)=1),175,150)
animtype = Medium		
guardflag = MA
hitflag = MAF
ID= 3200	
priority = 3,Hit
pausetime = 3,10
sparkno = -1
guard.sparkno = s8000
sparkxy = -15, -50		
hitsound = s702, 1
guardsound = s1,0	
ground.type = High		
ground.slidetime =14		
ground.hittime  = 14	
ground.velocity =-9,-3
air.type = High			
air.velocity    =-9,-6
air.hittime = 12
fall=1
fall.hittime=20
air.fall=1
fall.recover=0
air.recover=0
recover=0
poweradd=0
getpower=0
guard.kill=1
kill=ifelse((EnemyNear,ishelper),1,0)
hitonce=1
p2facing=1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
envshake.time = 20
envshake.freq = 100
envshake.ampl = 3
mindist=ifelse((moveguarded||movereversed||(EnemyNear(0),ishelper)),200,40),ifelse((moveguarded||movereversed||(EnemyNear(0),ishelper)),-200,ifelse((EnemyNear(0),Pos Y=0),0,-10))
maxdist=ifelse((moveguarded||movereversed||(EnemyNear(0),ishelper)),-200,40),ifelse((moveguarded||movereversed||(EnemyNear(0),ishelper)),200,ifelse((EnemyNear(0),Pos Y=0),0,-10))


[State 3200, HIT Spark]
type = Explod
trigger1=AnimElemtime(40)>=1&&AnimElemtime(41)<=4
trigger1=movehit&&movecontact=1
id = 4012
anim=4012
postype = P1, Mid
facing=-1
vfacing=-1
pos= ifelse((Frontedgedist<=70),45,floor(30+p2bodydist X)),-60
sprpriority= 9
scale = 1.1,1.1
persistent= 0
ontop = 1
ownpal = 1
ignorehitpause =1
removetime=9
bindtime=1
supermove = 999999999999999999999 
pausemove = 999999999999999999999

[State 3200, RemoveExplod]
type = Removeexplod 
trigger1=time=0
trigger2=stateno!=3200
trigger3=!movehit
trigger4=animelem=41
ID = 4000||4001||4002||4003||4010||4011||4012||4013

[State 3200, ChangeState]
type = ChangeState
triggerall=stateno=3200&&movehit&&Vel Y=0
trigger1=command="ROTO_CUTTER"&&movehit&&power>=1000
value=3100
ctrl=0


[State 3200, ChangeState]
type = ChangeState
triggerall=stateno=3200&&movehit&&Vel Y=0
trigger1=command="TORNADO"&&movehit&&power>=1000
value=3300
ctrl=0

[State 3200, Idle]
type= statetypeset
trigger1= anim=3200&&animelemtime(42)>=0
movetype= I

[State 3200, TargetState]
type= targetstate
ID=3200
Triggerall = numtarget(3200)=1
trigger1   = !movereversed&&movehit
trigger1   = !(target,ishelper)
trigger1   = hitshakeover
ignorehitpause=1
persistent=0
value=3202

[State 3200, End]
type = ChangeState
Triggerall=numtarget(3200)=1
triggerall= !movereversed&&movehit
trigger1   =!(target,ishelper)
trigger1   = hitshakeover
ignorehitpause=1
persistent=0
value = 3201
ctrl = 0

[State 3200, 5]
type = ChangeState
trigger1=animtime=0
value =0
ctrl=1

;==============================
; TORNADO SPIN KICK-- THROWING THE OPPONENT
[Statedef 3201]
type    = S
movetype =A
physics = S
velset = 0,0
ctrl = 0
anim = 3201
sprpriority =3
poweradd=0


[State 3201, Explod];ONTOP
type = explod 
trigger1=!Time
anim=3203
ID  =3203
pos = 0,0
postype = P1
facing = 1
vfacing = 1
bindtime  =20
removetime=20
scale =const(size.xscale),const(size.yscale)
sprpriority=9
ontop =1
ownpal=0
removeongethit = 1
shadow =0


[State 3201, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 3201, Playerpush]
type = Playerpush
trigger1 =1
value=0
;========= SCREENBOUND ======
[State 3201, HELPER]
type=Helper
trigger1 =animelem=1
helpertype=normal
name="SCREENBOUND"
postype=Left
pos=0,0
velocity=0,0
stateno=3301
id=3310
ownpal=1
supermovetime = 9999999999999
pausemovetime = 9999999999999
size.height=360
size.ground.back=0
size.ground.front=3
size.air.back =0
size.air.front=3
screenbound=1
movecamera=1

[State 3201, HELPER]
type=Helper
trigger1 =animelem=1
helpertype=normal
name="SCREENBOUND"
postype=Right
pos=0,0
velocity=0,0
stateno=3302
id=3311
ownpal=1
supermovetime = 9999999999999
pausemovetime = 9999999999999
size.height=360
size.ground.back=3
size.ground.front=0
size.air.back =3
size.air.front=0
screenbound=1
movecamera=1
;===============
[State 3201, TargetState]
type= targetstate
trigger1   = Time=1
ignorehitpause=1
persistent=0
value=3202

[State 3201, Width]
type= Width
Trigger1=1
ignorehitpause=1
edge=40,40

[State 3201, PosSet]
type = CtrlSet
trigger1 =time>=0&&animelem<=7
value=0

[State 3201, PlaySnd]
type = PlaySnd
trigger1 =animelem=4
value=s3202,1
volume=255

[State 3201, PlaySnd]
type = PlaySnd
trigger1 =animelem=2
value=s0,4
volume=255

[State 3201, PlaySnd]
type = PlaySnd
trigger1 =animelem=5
value=s41,0
volume=255

[State 3201, Turn]
type = Turn
trigger1 = AnimElem =2

[State -3, Bind 0]
type =TargetBind
ID=3200
trigger1 =Time<=1
ignorehitpause=1
supermove=9999999999999
pausemove=9999999999999
pos = 54,-70

[State 3201, Bind 1]
type =TargetBind
ID= 3200
trigger1 = AnimElem =1
pos = 54,-70

[State 3201, Bind 2]
type = TargetBind
trigger1 = AnimElem =2
pos = 0, -20

[State 3201, Bind 3]
type = TargetBind
trigger1 = AnimElem =3
pos = 28, -10

[State 3201, Bind 4]
type = TargetBind
trigger1 = AnimElemtime(4)>=0&&animelemtime(4)<=1
pos = 50, -10

[State 3201, Throw]
type = TargetState
ID= 3200
trigger1 = AnimElemtime(4)=2
fall.envshake=1
value = 3203

[State 3201, END]
type = ChangeState
trigger1 = animtime=0
value = 0
ctrl=1
;---------------------------------------------------------------------------
; SUPERS-- TORNADO SPIN KICK SUPER - Opponent Thrown
[Statedef 3202]
type    = A
movetype= H
physics = N
velset = 0,0
;ID= 820
sprpriority=ifelse((animelem<=2),3,4);4
ontop=1

[State 3202, Position]
type = PosAdd
trigger1 =animelemtime(1)>=1&&animelemtime(1)<=19
y = ceil((20-ifelse(time%2=0,time%12,(time%12)-1))/4)*ifelse(time%2=1,1,-1)


[State 3202, Width]
type= Width
Trigger1=1
ignorehitpause=1
edge=0,20

[State 3202, Playerpush]
type = Playerpush
trigger1 =1
value=0

[State 3202, NothitBy]
type = NotHitBy
trigger1 = 1
value = SCA, AT, AP

[State 3202, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3202

[State 3202, ScreenBound]
type = ScreenBound
trigger1 = 1
value =1
movecamera = 1,1
;--------------
;Hit By TORNADO SPIN KICK SUPER -- FINISH
[Statedef 3203]
type    = A
movetype= H
physics = N
velset = 10,-4
poweradd = 40

[State 3203, Gravity] ;Gravity
type = VelAdd
Trigger1 = 1
y = .4

[State 3203, AfterImage]
type = AfterImage
trigger1 =time=0
Time = 12
TimeGap  = 2
FrameGap =2
length =7
PalBright = 1,1,1
PalContrast =  100,100,100
PalAdd = 32,16,0
PalMul = .5,.5,.5
trans = add1
ignorehitpause = 1

[State 3203, Throw]
type = LifeAdd
trigger1=Pos Y>=-2
value = -50

[State 3203, Envshake]
type=envshake
trigger1 =Pos Y>=-5
time = 16
ampl =-12

[State 3203, Hit ground] ;Hit ground
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100 ;Hit ground
ctrl=0


;========================
; SUPERS-- SPARK PLUG
[Statedef 3300]
type    = A
movetype= A
physics = N
juggle  = 15;0
poweradd=Ifelse((prevstateno=3101||prevstateno=3200),-2000,-1000)
getpower=0
ctrl = 0
velset = 0,0
anim =3300
sprpriority = 2
facep2=1

[State 3300, VarSet]
type = VarSet
trigger1 = Time = 0
v = 50
value = 1

[State 3300, VarSet]
type = VarSet
triggerall=prevstateno=[3101,3200]
trigger1 = Time = 0
v = 55
value = 1

[State 3300]
type = AfterImageTime
trigger1 =!Time
time = 0

[State 3300, Width]
type =Width
triggerall=1
trigger1 =anim=3300
edge=60,0

[State 3300, RemoveExplod]; Super BG
type = Removeexplod 
trigger1=time=0
trigger2=animelemtime(43)=6
trigger3=numhelper(9998)>=1
trigger4=stateno!=3300
ignorehitpause=1
ID = 8506

[State 3300, RemoveExplod]; Super BG
type = Removeexplod 
trigger1=animelemtime(43)=6
trigger2=numhelper(9998)>=1
trigger3=stateno!=3300
ignorehitpause=1
ID = 8505
[State 3300, RemoveExplod]
type = Removeexplod 
trigger1 =time=0
ID = (424||425||426)

[State 3300, NotHitBy]
type = NotHitBy
trigger1 = animelem<=25
value = SCA, AT, AP

[State 3300, ALRIGHT]
type = PlaySnd
trigger1 = animelem=1
value = s3300,0
channel=0
volume=255

[State 3300, WHOOSH]
type = PlaySnd
trigger1 = animelem=17
trigger2 = animelem=19
trigger3 = animelem=22
trigger4 = animelem=25
trigger5 = animelem=28
value = s600,1
channel=2
volume=255

[State 3300, WHOOSH]
type = PlaySnd
trigger1 = animelem=16
value = s41,0
volume=255

[State 3300, Super A]
type = SuperPause
trigger1 = time=0
pos = -8,Pos Y
sound = s3000,0
anim=-1
darken=0
time    =33
movetime=33
bindtime =-1
scale= 1,1
pausemove=99999
supermove=99999

[State 3300, PalFX]
type=palfx
trigger1=time=0
trigger2=time=15
trigger3=time=25
trigger4=time=30
add  = 10,50,200
mul  = 256,256,256
sinadd=9,-90,0,10
color =256
time=3

[State 3300, PalFX]
type=palfx
trigger1=time=10
trigger2=time=20
add = 0,-90,200
mul = 120,224,150
sinadd=85,55,110
color = 256
time=2

[State 3300, AfterImage]
type = AfterImage
trigger1 = AnimElem =18
Time=70
TimeGap=2
FrameGap=2
length=5
PalBright=1,1,1
PalContrast=100,100,100
PalAdd =32,16,0
PalMul =.5,.5,.5
trans = add1
ignorehitpause = 1

[State 3300, BGPalFX]
type = BGPalFX
trigger1=time=0
trigger2=animelem=16
trigger3= Vel Y > 0
trigger3= Pos Y >=-2
trigger4=animelem=44
time = 3
color = 0
add = 256,256,256
sinadd = 110,55,85,10
mul = 256,256,256
ontop=1
ignorehitpause=1
pausemove=99999
supermove=99999

[State 3300, SuperExplod]
type = Explod
trigger1=Time=1
anim =8010
sprpriority=9
postype =p1
pos = -8,-25
velocity =0,0
supermove=999999999999999999999 
pausemove=999999999999999999999
ownpal=1
scale=1,1
ignorehitpause=1
bindtime=-1
removetime=24

[State 3300, SuperExplod]
type = Explod
trigger1=Time=1
anim =8020
sprpriority=9
postype =p1
pos = -8,-20
velocity =0,0
supermove=999999999999999999999 
pausemove=999999999999999999999
ownpal=1
scale=1,1
ignorehitpause=1
bindtime=-1
removetime=26

[State EnvColor] 
type = EnvColor
trigger1 =animelemtime(17)>=1&&numexplod(8506)>=1
value=0,0,0
time=ifelse((animelemtime(44)<=0),1,0)
under=1
pausemove=99999
supermove=99999
ignorehitpause=1

[State 3300, Assert] 
type = AssertSpecial
trigger1=1
flag = nojugglecheck
pausemove=99999
supermove=99999
ignorehitpause=1
[State 3300, Assert] 
type = AssertSpecial
trigger1=numexplod(8506)>=1
flag = noFG
flag2= globalnoshadow
pausemove=99999
supermove=99999
ignorehitpause=1

[State 3300, Explod]; SUPER BG
type = explod 
triggerall=var(55)=0
trigger1=animelemtime(17)=1
anim=8506
ID = 8506
pos = 0,0
postype = Back
facing = 1
vfacing = 1 
bindtime=-1
removetime = ifelse((animelemtime(44)<=0), -1,0)
supermove = 999999999999999999999 ;
pausemove = 999999999999999999999
scale = 2,1.2 
sprpriority =-9
ontop =0
ownpal = 1 
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0

[State 3300, Explod]; SUPER BG
type = explod 
triggerall=var(55)=1
trigger1=animelemtime(17)=1
anim=8506
ID = 8506
pos = 0,0
postype = Back
facing = 1
vfacing = 1 
bindtime=-1
removetime = ifelse((animelemtime(44)<=0), -1,0)
supermove = 999999999999999999999 ;
pausemove = 999999999999999999999
scale = 2,1.2 
sprpriority =-9
ontop =0
ownpal = 1 
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0
trans= add
[State 3100, muteki]
type = NotHitBy
trigger1=animelem<=15
value = SCA, AT,AP


[State 3300, Explod]; SUPER CANCEL BG
type = explod 
triggerall=(prevstateno=3101||prevstateno=3200)
triggerall!=moveguarded
trigger1=numexplod(8506)=1
anim =8505
ID   =8505
pos = 0,0
postype = Back
facing = 1
vfacing = 1
bindtime=-1
removetime= ifelse((numexplod(8506)=0),1,-1)
supermove = 999999999999999999999
pausemove = 999999999999999999999
scale =10,2 
sprpriority =-10
ontop =0
ownpal = 1 
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0

[State 3300, PosAdd]
type = PosAdd
triggerall=Pos Y >=-20
trigger1 =Time=0
x= 20
y=-40

[State 3300, VELSET]
type = velSet
trigger1 =Time=0
trigger2 =animelemtime(33)>=1&&animelemtime(35)<=4
x=0
y=0

[State 3300, VELSET]
type = velSet
trigger1 =animelemtime(17)>=1&&animelemtime(32)<=4
x=2
y=-3

[State 3300, POSSET]
type = PosSet
trigger1=animelemtime(33)>=1&&animelemtime(34)<=1
trigger2=animelemtime(42)>=1&&animelemtime(44)<=1
x= Pos X +ifelse((facing=1),3,-3)
y= Pos Y +2


[State 3300, VELSET]
type = PosFreeze
triggerall=1
trigger1 =animelem>=36&&animelem<=45
ignorehitpause=1

[State 3300, Gravity] ;Gravity
type = VelAdd
trigger1 =animelem>=45
y = .25
[State 3301, SLASH Spark]
type = Explod
triggerall=movehit=1
trigger1=animelemtime(17)>=1&&animelemtime(17)<=3
id = 4220
anim=4210
postype =P1
facing=-1
vfacing=1
pos= 60,-30
sprpriority=3
scale = .8,.8
ontop = 0
ownpal = 1
ignorehitpause = 1
persistent=0
removetime=10
bindtime=1
supermove = 999999999999999999999 
pausemove = 999999999999999999999
[State 3301, SLASH Spark]
type = Explod
trigger1=animelemtime(18)>=1&&animelemtime(18)<=4
trigger1=movehit=1
id = 4220
anim=4220
postype =P1
facing=-1
vfacing=1
pos= 60,-30
sprpriority=3
scale = .8,.8
ontop = 0
ownpal = 1
ignorehitpause = 1
persistent=0
removetime=10
bindtime=1
supermove = 999999999999999999999 
pausemove = 999999999999999999999
[State 3301, SLASH Spark]
type = Explod
trigger1=animelemtime(19)>=1&&animelemtime(19)<=4
trigger1=movehit=1
id = 4220
anim=4200
postype =P1
facing=-1
vfacing=1
pos= 60,-30
sprpriority=3
scale = .8,.8
ontop = 0
ownpal = 1
ignorehitpause = 1
persistent=0
removetime=10
bindtime=1
supermove = 999999999999999999999 
pausemove = 999999999999999999999
[State 3301, SLASH Spark]
type = Explod
triggerall=movehit=1
trigger1=animelemtime(20)>=1&&animelemtime(20)<=3
id = 4220
anim=4210
postype =P1
facing=-1
vfacing=1
pos= 60,-30
sprpriority=3
scale = .8,.8
ontop = 0
ownpal = 1
ignorehitpause = 1
persistent=0
removetime=10
bindtime=1
supermove = 999999999999999999999 
pausemove = 999999999999999999999
[State 3301, SLASH Spark]
type = Explod
trigger1=animelemtime(21)>=1&&animelemtime(21)<=4
trigger1=movehit=1
id = 4220
anim=4220
postype =P1
facing=-1
vfacing=1
pos= 60,-30
sprpriority=3
scale = .8,.8
ontop = 0
ownpal = 1
ignorehitpause = 1
persistent=0
removetime=10
bindtime=1
supermove = 999999999999999999999 
pausemove = 999999999999999999999
[State 3301, SLASH Spark]
type = Explod
trigger1=animelemtime(22)>=1&&animelemtime(22)<=4
trigger1=movehit=1
id = 4220
anim=4200
postype =P1
facing=-1
vfacing=1
pos= 60,-30
sprpriority=3
scale = .8,.8
ontop = 0
ownpal = 1
ignorehitpause = 1
persistent=0
removetime=10
bindtime=1
supermove = 999999999999999999999 
pausemove = 999999999999999999999
[State 3301, SLASH Spark]
type = Explod
triggerall=movehit=1
trigger1=animelemtime(23)>=1&&animelemtime(23)<=3
id = 4220
anim=4210
postype =P1
facing=-1
vfacing=1
pos= 60,-30
sprpriority=3
scale = .8,.8
ontop = 0
ownpal = 1
ignorehitpause = 1
persistent=0
removetime=10
bindtime=1
supermove = 999999999999999999999 
pausemove = 999999999999999999999
[State 3301, SLASH Spark]
type = Explod
trigger1=animelemtime(24)>=1&&animelemtime(24)<=4
trigger1=movehit=1
id = 4220
anim=4220
postype =P1
facing=-1
vfacing=1
pos= 60,-30
sprpriority=3
scale = .8,.8
ontop = 0
ownpal = 1
ignorehitpause = 1
persistent=0
removetime=10
bindtime=1
supermove = 999999999999999999999 
pausemove = 999999999999999999999
[State 3301, SLASH Spark]
type = Explod
trigger1=animelemtime(25)>=1&&animelemtime(25)<=4
trigger1=movehit=1
id = 4220
anim=4200
postype =P1
facing=-1
vfacing=1
pos= 60,-30
sprpriority=3
scale = .8,.8
ontop = 0
ownpal = 1
ignorehitpause = 1
persistent=0
removetime=10
bindtime=1
supermove = 999999999999999999999 
pausemove = 999999999999999999999
[State 3301, SLASH Spark]
type = Explod
triggerall=movehit=1
trigger1=animelemtime(26)>=1&&animelemtime(26)<=3
id = 4220
anim=4210
postype =P1
facing=-1
vfacing=1
pos= 60,-30
sprpriority=3
scale = .8,.8
ontop = 0
ownpal = 1
ignorehitpause = 1
persistent=0
removetime=10
bindtime=1
supermove = 999999999999999999999 
pausemove = 999999999999999999999
[State 3301, SLASH Spark]
type = Explod
trigger1=animelemtime(27)>=1&&animelemtime(27)<=4
trigger1=movehit=1
id = 4220
anim=4220
postype =P1
facing=-1
vfacing=1
pos= 60,-30
sprpriority=3
scale = .8,.8
ontop = 0
ownpal = 1
ignorehitpause = 1
persistent=0
removetime=10
bindtime=1
supermove = 999999999999999999999 
pausemove = 999999999999999999999
[State 3301, SLASH Spark]
type = Explod
trigger1=animelemtime(28)>=1&&animelemtime(28)<=4
trigger1=movehit=1
id = 4220
anim=4200
postype =P1
facing=-1
vfacing=1
pos= 60,-30
sprpriority=3
scale = .8,.8
ontop = 0
ownpal = 1
ignorehitpause = 1
persistent=0
removetime=10
bindtime=1
supermove = 999999999999999999999 
pausemove = 999999999999999999999
[State 3300, HIT 1]
type = HitDef
triggerall=prevstateno=3101||prevstateno=3200
trigger1=animelem=17
trigger2=animelem=18
trigger3=animelem=19
trigger4=animelem=20
trigger5=animelem=21
trigger6=animelem=22
trigger7=animelem=23
trigger8=animelem=24
trigger9=animelem=25
trigger10=animelem=26
trigger11=animelem=27
trigger12=animelem=28
attr = A, HA
ID=3300
damage=ifelse((numhelper(451)=1),30,20)
hitflag= MAF
guardflag = MA
priority = 5, Hit
pausetime = 4,6
sparkno =  s4012
sparkxy =-40,-30
guard.sparkno = s8000
hitsound = s501, 0
guardsound = s2,0+(random%2)
animtype = Hard
ground.type = High
ground.slidetime = 10
ground.hittime  = 16
ground.velocity = -2,0
envshake.time=8
envshake.ampl=1
air.hittime=200
air.animtype = Low
air.velocity = 3,ifelse((Enemy, Pos Y>=Pos Y),-5,-3)
air.fall=1
fall=1
fall.hittime=200
fall.envshake=IfElse((velset y >= 40),1)
fall.envshake.time=12
fall.envshake.ampl=4
air.cornerpush.veloff=0
down.bounce=1
down.hittime =200
down.velocity =4,ifelse((Enemy, Pos Y>=Pos Y),-5,-3)
recover=0
air.recover=0
fall.recover=0
down.recover=0
getpower=0
p2facing=1
mindist =20,-30
maxdist =60,30
kill=0
[State 3300, HIT 1]
type = HitDef
triggerall!=prevstateno=3101||prevstateno=3200
trigger1=animelem=17
trigger2=animelem=18
trigger3=animelem=19
trigger4=animelem=20
trigger5=animelem=21
trigger6=animelem=22
trigger7=animelem=23
trigger8=animelem=24
trigger9=animelem=25
trigger10=animelem=26
trigger11=animelem=27
trigger12=animelem=28
attr = A, HA
ID=3300
damage=ifelse((numhelper(451)=1),30,50)
hitflag= MAF
guardflag = MA
priority = 5, Hit
pausetime = 4,6
sparkno =  s4012
sparkxy =-40,-30
guard.sparkno = s8000
hitsound = s501, 0
guardsound = s2,0+(random%2)
animtype = Hard
ground.type = High
ground.slidetime = 10
ground.hittime  = 16
ground.velocity = -2,0
envshake.time=8
envshake.ampl=1
air.hittime=200
air.animtype = Low
air.velocity = 3,ifelse((Enemy, Pos Y>=Pos Y),-5,-3)
air.fall=1
fall=1
fall.hittime=200
fall.envshake=IfElse((velset y >= 40),1)
fall.envshake.time=12
fall.envshake.ampl=4
air.cornerpush.veloff=0
down.bounce=1
down.hittime =200
down.velocity =4,ifelse((Enemy, Pos Y>=Pos Y),-5,-3)
recover=0
air.recover=0
fall.recover=0
down.recover=0
getpower=0
p2facing=1
mindist =20,-30
maxdist =60,30
kill=0


[State 3300, HIT2]
type = HitDef
trigger1 =animelem=33
trigger2=!Movecontact
trigger2=animelem=34
trigger3=!Movecontact
trigger3=animelem=35
attr = A, HA
damage=ifelse((numhelper(451)=1),50,40)
hitflag= MAF
guardflag = MA
priority = 3, Hit
pausetime = 4,7
sparkno =  s4010
sparkxy = -20,-5
guard.sparkno = s8000
hitsound   = s702, 0
guardsound = s1, 0
animtype =Heavy
ground.type =Low
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = -9,0
envshake.time=12
envshake.ampl=3
air.hittime=200
air.velocity = -2,0
;air.fall=1
fall.animtype=Low
fall.hittime=200
fall.envshake=IfElse((velset y >= 40),1)
fall.envshake.time=12
fall.envshake.ampl=4
air.cornerpush.veloff=0
down.bounce=1
down.hittime = 200
down.velocity = 0, -2
recover=0
air.recover=0
fall.recover=0
down.recover=0
poweradd=0
getpower=0
kill=0
mindist=ifelse((moveguarded||movereversed||(EnemyNear(0),ishelper)),200,10),ifelse((moveguarded||movereversed||(EnemyNear(0),ishelper)),-200,30)
maxdist=ifelse((moveguarded||movereversed||(EnemyNear(0),ishelper)),-200,30),ifelse((moveguarded||movereversed||(EnemyNear(0),ishelper)),200,30)




[State 3300, HIT3]
type = HitDef
trigger1 = animelem=39
trigger2=!Movecontact
trigger2=animelem=40
trigger3=!Movecontact
trigger3=animelem=41
attr = A, HA
damage=ifelse((numhelper(451)=1),50,40)
hitflag= MAF
guardflag = MA
priority = 3, Hit
pausetime = 4,7
sparkno =  s4010
sparkxy = -20,14
guard.sparkno = s8000
hitsound   = s702, 0
guardsound = s1, 0
animtype =Heavy
ground.type =Low
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = -9,0
envshake.time=12
envshake.ampl=3
air.type =Low
air.hittime=200
air.velocity = 1,-4
air.falltime=16
;air.fall=1
fall.animtype=Low
fall.type =Low
fall.hittime=200
fall.envshake=IfElse((velset y >= 40),1)
fall.envshake.time=12
fall.envshake.ampl=4
air.cornerpush.veloff=0
down.bounce=1
down.hittime = 200
down.velocity = 0, -2
recover=0
air.recover=0
fall.recover=0
down.recover=0
poweradd=0
getpower=0
kill=0
mindist=ifelse((moveguarded||movereversed||(EnemyNear(0),ishelper)),200,0),ifelse((moveguarded||movereversed||(EnemyNear(0),ishelper)),-200,40)
maxdist=ifelse((moveguarded||movereversed||(EnemyNear(0),ishelper)),-200,10),ifelse((moveguarded||movereversed||(EnemyNear(0),ishelper)),200,50)

[State 3300, FINALHIT]
type = HitDef
triggerall!=prevstateno=3101||prevstateno=3200
trigger1 = animelem=44
trigger2=!Movecontact
trigger2=animelem=45
attr = A, HA
damage=ifelse((numhelper(451)=1),60,50)
hitflag= MAF
guardflag = MA
priority = 3, Hit
pausetime = ifelse((Enemy, Pos Y>=0),6,12),12
sparkno =  s4010
sparkxy = -20,-20
guard.sparkno = s8000
hitsound   = s702,1
guardsound = s1, 0
animtype =Heavy
ground.type = High
ground.slidetime = 10
ground.hittime  = 13
ground.velocity = -9,0
envshake.time=9
envshake.ampl=6
air.hittime=20
air.velocity = -3,6
air.falltime=200
air.fall=1
fall.hittime=200
fall.envshake=IfElse((velset y >= 40),1)
fall.envshake.time=12
fall.envshake.ampl=4
air.cornerpush.veloff=0
down.bounce=1
down.hittime =200
down.velocity = 0, -2
recover=0
air.recover=0
fall.recover=0
down.recover=0
poweradd=0
getpower=0
mindist=ifelse((moveguarded||movereversed||(EnemyNear(0),ishelper)),200,0),ifelse((moveguarded||movereversed||(EnemyNear(0),ishelper)),-200,10)
maxdist=ifelse((moveguarded||movereversed||(EnemyNear(0),ishelper)),-200,30),ifelse((moveguarded||movereversed||(EnemyNear(0),ishelper)),200,50)

;========= SCREENBOUND ======
[State 3300, HELPER]
type=Helper
trigger1 =animelem=44
helpertype=normal
name="SCREENBOUND"
postype=Left
pos=0,0
velocity=0,0
stateno=3301
id=3310
ownpal=1
supermovetime = 9999999999999
pausemovetime = 9999999999999
size.height=360
size.ground.back=0
size.ground.front=3
size.air.back =0
size.air.front=3
screenbound=1
movecamera=1

[State 3300, HELPER]
type=Helper
trigger1 =animelem=44
helpertype=normal
name="SCREENBOUND"
postype=Right
pos=0,0
velocity=0,0
stateno=3302
id=3311
ownpal=1
supermovetime = 9999999999999
pausemovetime = 9999999999999
size.height=360
size.ground.back=3
size.ground.front=0
size.air.back =3
size.air.front=0
screenbound=1
movecamera=1
;===============

[State 3300, StateTypeSet]
type= StateTypeSet
trigger1=animelem=46
statetype=A
movetype=A
physics=A

[State 3300, IDLE]
type= StateTypeSet
trigger1=animelem=46
movetype=I

[State 3300, END]
type = ChangeState
triggerall=!movehit
trigger1 =animelem>=30
value =1062
ctrl=0

[State 3300, END]
type = ChangeState
trigger1 =anim=3300&&movecontact
trigger1 =moveguarded&&hitshakeover
ignorehitpause=1
persistent=0
value =1021
ctrl=0

[State 3300, 5]
type = ChangeState
triggerall=animelem>=17
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52
ctrl=0

[State 3300, END]
type = ChangeState
trigger1 =animelemtime(20)>=1
trigger1 =animtime=0
value =1021
ctrl=0
;---------------------------
; SCREENBOUND Helper
[Statedef 3301]
type    = A
movetype= I 
physics = N
velset = 0,0
anim =1053
id=3301

[State 3301]
type = PlayerPush
trigger1 = 1
value = 0
[State 3301, Turn]
type = Turn
trigger1 = facing != root, facing

[State 3301]
type = PosSet
trigger1 =1
pos=250+ScreenPos X,0

[State 3301]
type = NotHitBy
Trigger1 = 1
value = SCA
Time = 1

[State 3301, ScreenBound]
type = ScreenBound
trigger1 =1
value =1
movecamera =1,1

[State 3301]
type = DestroySelf
trigger1=(Parent, StateNo = 5000)
trigger2=(Parent, StateNo = 5010)
trigger3=(Parent, StateNo = 5020)
trigger4=(Parent, StateNo = 5070)
trigger5=(Parent, StateNo = 5080)
trigger6=(Parent, StateNo = 5100)
trigger7=(Parent, stateno=800)
trigger8=(Parent, stateno=830)
trigger9=(Parent, stateno=840)
trigger10=(Parent, stateno=3000)
trigger11=(Parent, stateno=3100)
trigger12=(Parent, stateno=3200)
trigger13=(Parent, stateno=195)
trigger14=(Parent, stateno=105)
trigger15=(Parent, stateno=40)
trigger16=(Parent, stateno=41)
trigger17=(Parent, stateno=0)
trigger18=(Parent, alive!=1)
trigger19=(Parent, statetype=L)

;---------------------------
; SCREENBOUND Helper
[Statedef 3302]
type    = A
movetype= I 
physics = N
velset = 0,0
anim =1053
id=3302

[State 3302]
type = PlayerPush
trigger1 = 1
value = 0
[State 3302, Turn]
type = Turn
trigger1 = facing != root, facing

[State 3302]
type =PosSet
trigger1 =1
pos=250-ScreenPos X,0

[State 3302]
type = NotHitBy
Trigger1 = 1
value = SCA
Time = 1

[State 3302, ScreenBound]
type = ScreenBound
trigger1 =1
value =1
movecamera =1,1

[State 3302]
type = DestroySelf
trigger1=(Parent, StateNo = 5000)
trigger2=(Parent, StateNo = 5010)
trigger3=(Parent, StateNo = 5020)
trigger4=(Parent, StateNo = 5070)
trigger5=(Parent, StateNo = 5080)
trigger6=(Parent, StateNo = 5100)
trigger7=(Parent, stateno=800)
trigger8=(Parent, stateno=830)
trigger9=(Parent, stateno=840)
trigger10=(Parent, stateno=3000)
trigger11=(Parent, stateno=3100)
trigger12=(Parent, stateno=3200)
trigger13=(Parent, stateno=195)
trigger14=(Parent, stateno=105)
trigger15=(Parent, stateno=40)
trigger16=(Parent, stateno=41)
trigger17=(Parent, stateno=0)
trigger18=(Parent, alive!=1)
trigger19=(Parent, statetype=L)
;==============================
; Rolling Dodge Forward
[Statedef 700]
type = S
movetype = I
physics = N
anim = 700
velset = 0,0
ctrl = 0
sprpriority = 1

[State 700, 1]
type = VelSet
trigger1 = Time = 0
x = .80*const(velocity.run.fwd.x)

[State 700, AfterImage]
type = AfterImage
trigger1 =time=0
Time = 12
TimeGap  = 2
FrameGap =2
length =7
PalBright = 1,1,1
PalContrast =  100,100,100
PalAdd = 32,16,0
PalMul = .5,.5,.5
trans = add1
ignorehitpause = 1

[State 700, 1]
type = VelSet
trigger1 =Animelem=7
x = 0

[State 700, Playerpush]
type = Playerpush
trigger1 = stateno=700
value=0

[State 700, Jumping Sound]
type = PlaySnd
trigger1 = animelem=1
value= s60,0
volume=255

[State 700, HitBy]
type= hitby
trigger1= animelemtime(6) < 0
value= SCA, AT
time= 1

[State 700, ChangeState]
type = ChangeState
trigger1 = prevstateno=700&&time<7&&command="x+a"&&command="holddown"
value = 0
ctrl = 1

[State 700, ChangeState]
type = ChangeState
trigger1 = (AnimTime = 0)&& command ="holdfwd"
value = 100
ctrl = 1

[State 700, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value =0
ctrl = 1
;------------------------
; Rolling Dodge Back
[Statedef 710]
type = S
movetype = I
physics = N
anim = 710
velset = 0,0
ctrl = 0
sprpriority = 1

[State 710, 1]
type = VelSet
trigger1 = Time = 0
x = .80*const(velocity.run.back.x)

[State 710, AfterImage]
type = AfterImage
trigger1 =time=0
Time = 12
TimeGap  = 2
FrameGap =2
length =7
PalBright = 1,1,1
PalContrast =  100,100,100
PalAdd = 32,16,0
PalMul = .5,.5,.5
trans = add1
ignorehitpause = 1

[State 710, 1]
type = VelSet
trigger1 =Animelem=7
x = 0

[State 710, Playerpush]
type = Playerpush
trigger1 = stateno=710
value=0

[State 710, Jumping Sound]
type = PlaySnd
trigger1 = animelem=1
value= s60,0
volume=255

[State 710, HitBy]
type= hitby
trigger1= animelemtime(6) < 0
value= SCA, AT
time= 1

[State 710, ChangeState]
type = ChangeState
trigger1 = (AnimTime = 0)&& command ="holdback"
value = 105
ctrl = 1

[State 710, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value =0
ctrl = 1
;---------------------------
; EVADE DELAY Helper
[Statedef 715]
type    = A
movetype= I 
physics = N
velset = 0,0
anim=1052
id=715

[State 715]
type = BindToParent
trigger1 =1
pos= 0,0

[State 715]
type = PlayerPush
trigger1 = 1
value = 0

[State 715]
type = NotHitBy
Trigger1 = 1
value = SCA
Time = 1

[State 715]
type = DestroySelf
trigger1=(Parent, StateNo = 5000)
trigger2=(Parent, StateNo = 5010)
trigger3=(Parent, StateNo = 5020)
trigger4=(Parent, StateNo = 5070)
trigger5=(Parent, StateNo = 5080)
trigger6=(Parent, StateNo = 5100)
trigger7=(Parent, stateno=800)
trigger8=(Parent, stateno=830)
trigger9=(Parent, stateno=840)
trigger10=(Parent, stateno=3000)
trigger11=(Parent, stateno=3100)
trigger12=(Parent, stateno=3200)
trigger13=(Parent, stateno=3300)
trigger14=(Parent, stateno=100)
trigger15=(Parent, stateno=105)
trigger16=(Parent, stateno=40)
trigger17=(Parent, stateno=41)
trigger18=(Parent, stateno=120)
trigger19=(Parent, stateno=130)
trigger20=(Parent, stateno=131)
trigger21=(Parent, stateno=132)
trigger22=Time =20
id=715
;---------------------------
; HIT COUNT Helper
[Statedef 716]
type    = A
movetype= I 
physics = N
velset = 0,0
anim=1052
id=716

[State 716]
type = BindToParent
trigger1 =1
pos= 0,10

[State 716]
type = PlayerPush
trigger1 = 1
value = 0

[State 716]
type = NotHitBy
Trigger1 = 1
value = SCA
Time = 1

[State 716]
type = DestroySelf
trigger1=(Parent, StateNo = 5000)
trigger2=(Parent, StateNo = 5010)
trigger3=(Parent, StateNo = 5020)
trigger4=(Parent, StateNo = 5070)
trigger5=(Parent, StateNo = 5080)
trigger6=(Parent, StateNo = 5100)
trigger7=(Parent, stateno=800)
trigger8=(Parent, stateno=830)
trigger9=(Parent, stateno=840)
trigger10=(Parent, stateno=100)
trigger11=(Parent, stateno=105)
trigger12=(Parent, stateno=40)
trigger13=(Parent, stateno=41)
trigger14=(Parent, stateno=120)
trigger15=(Parent, stateno=130)
trigger16=(Parent, stateno=131)
trigger17=(Parent, stateno=132)
trigger18=(Parent, stateno=0)
trigger19=(Parent, numtarget!=1)
trigger20=(EnemyNear(0),authorname="GM")
trigger21=(Parent, stateno=3105)
trigger21=(Parent, animelem>=13)
id=716
;------------------------
; GUARD PUSH
;-------------------
[Statedef 720]
type=S
movetype=I
physics=N
poweradd=30
velset=0,0
ctrl=0
anim=720
sprpriority=0

[State 720]
type=PlaySnd
trigger1=Time=0
value=s725,0

[State 720]
type=Velset
triggerall= enemy(0),BackEdgeBodyDist<20
trigger1=Time>=0
trigger1=Time<=10
x=-6
y=0

[State 720]
type=Velset
triggerall= enemy(0),BackEdgeBodyDist>=20
trigger1=Time>=0
trigger1=Time<=10
x=0
y=0

[State 720]
type=Explod
Anim=770
trigger1=Time=0
facing=1
postype=P1
pos=25,-47
bindtime  =19
removeTime=19
sprpriority=4
ownpal=1
supermove = 999999999999999999999 
pausemove = 999999999999999999999

[State 720]
type=Helper
trigger1=Time=0
helpertype=Normal
name="GuardPush"
postype=P1
pos=0,0
stateno=750
ownpal=1
size.height=200
size.ground.back=30
size.ground.front=30

[State 720]
type=varset
Trigger1=time=0
var(6)=prevstateno

[State 720]
type=ChangeState
trigger1=AnimTime=0
value=var(6)
ctrl=0
;===================================
;Guard Push Crouching
[Statedef 725]
type=C
movetype=I
physics=N
poweradd=30
velset=0,0
ctrl=0
anim=725
sprpriority=0

[State 725]
type=PlaySnd
trigger1=Time=0
value=s725,0

[State 725]
type=Velset
triggerall=enemy(0),BackEdgeBodyDist<20
trigger1=Time>=0
trigger1=Time<=7
x=-10
y=0

[State 725]
type=Velset
triggerall=enemy(0),BackEdgeBodyDist>=20
trigger1=Time>=0
trigger1=Time<=7
x=0
y=0

[State 725]
type=Explod
Anim=770
trigger1=Time=0
facing=1
postype=P1
pos=25,-47
bindtime  =19
removeTime=19
sprpriority=4
ownpal=1
supermove = 999999999999999999999 
pausemove = 999999999999999999999

[State 725]
type=Helper
trigger1=Time=0
helpertype=Normal
name="GuardPush"
postype=P1
pos=0,0
stateno=750
ownpal=1
size.height=200
size.ground.back=30
size.ground.front=30

[State 725]
type=varset
Trigger1=time=0
var(6)=prevstateno

[State 725]
type=ChangeState
trigger1=AnimTime=0
value=var(6)
ctrl=0
;===================================
;Guard Push Air
[Statedef 730]
type=A
movetype=I
physics=N
poweradd=30
velset=0,0
ctrl=0
anim=730
sprpriority=2

[State 730]
type=PlaySnd
trigger1=Time=0
value=s725,0

[State 730]
type=Velset
triggerall=enemy(0),BackEdgeBodyDist<20
trigger1=Time>=0
trigger1=Time<=7
x=-7
y=0

[State 730]
type=Velset
triggerall=enemy(0),BackEdgeBodyDist>=20
trigger1=Time>=0
trigger1=Time<=10
x=0
y=0

[State 730]
type=Explod
Anim=770
trigger1=Time=0
facing=1
postype=P1
pos=25,-47
bindtime  =19
removeTime=19
sprpriority=4
ownpal=1
supermove = 999999999999999999999 
pausemove = 999999999999999999999

[State 730]
type=Helper
trigger1=Time=0
helpertype=Normal
name="GuardPush"
postype=P1
pos=-40,0
stateno=750
ownpal=1
size.height=200
size.ground.back=30
size.ground.front=30

[State 730]
type=ChangeState
trigger1=AnimTime=0
value=50
ctrl=1
;---------------------------
;Guard Push Helper
[Statedef 750]
type    = A
movetype= I 
physics = N
velset = 0,0
anim = 750

[State 750]
type = posset
triggerall=parent,stateno!=725
trigger1 = time = 0
y = 0

[State 750]
type = PlayerPush
trigger1 = 1
value = 1

[State 750]
type = NotHitBy
Trigger1 = 1
value = SCA
Time = 1

[State 750]
type = VelSet
trigger1 = Time >= 0
x = 17

[State 750]
type = DestroySelf
trigger1 = Time = 20
;---------------------------------------------------------------------------
; Jump Land
[Statedef 890]
type    = S
physics = S
ctrl = 0
anim = 890
hitcountpersist=1

[State 890, RemoveExplod]; Super BG
type = Removeexplod 
trigger1=1
anim=8506
ID = 8506

[State 890, Varset]
type=VarSet
triggerall=var(11)!=0
trigger1=Time=0
v=11
value=0
[State 890, Varset]
type=VarSet
triggerall=var(14)!=0
trigger1=Time=0
v=14
value=0
[State 890, Varset]
type=VarSet
triggerall=var(15)!=0
trigger1=Time=0
v=15
value=0
[State 890]
type = ChangeAnim
triggerall=prevstateno=1029||prevstateno=1050||prevstateno=1062
trigger1=!Time
value =892

[State 890]
type = ChangeAnim
triggerall=prevstateno=650
trigger1=!Time
value =892
[State 890]
type = ChangeAnim
triggerall=prevstateno=651||prevstateno=1021||prevstateno=1023||prevstateno=1060||prevstateno=3000
trigger1=!Time
value =891

[State 890, Guard]
type= changestate
trigger1= inguarddist
trigger1= ctrl && command="holdback"
value= 120

[State 890, CTRL]
type = CtrlSet
triggerall=prevstateno=650
triggerall=anim=892
trigger1 =Time = 3
value = 1

[State 890, Explod]; Dust Puff 1
type = explod 
trigger1= animelem=2
anim = 8140
ID   = 8140
random= 0,5
pos = -18,-4 
postype = P1
facing = 1
vfacing = 1
velocity=-2,0
removetime = 17
supermove = 999999999999999999999 
pausemove = 999999999999999999999
scale = .8,.8 
sprpriority = 9 
ontop = 1 
ownpal = 1
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0

[State 890, Explod]; GROUND HIT DUST
type = explod 
trigger1 =animelemtime(1)=1
anim=4022
ID = 4022
pos = 0,0
postype = P1
facing = 1
vfacing = 1
bindtime = 1
removetime=10
supermove = 999999999999999999999
pausemove = 999999999999999999999
scale = .55,.55
sprpriority =-1
ontop =0
ownpal = 1
removeongethit = 1
shadow =0
persistent=0

[State 890, Explod]; Dust Puff 1
type = explod 
trigger1= animelem=1
anim = 8130
ID   = 8130
random= 0,5
pos = 3,0 
postype = P1
facing = 1
vfacing = 1
velocity=2.2,0
removetime = 17
supermove = 999999999999999999999 
pausemove = 999999999999999999999
scale = 1,1 
sprpriority = 9 
ontop = 1 
ownpal = 1
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0

[State 890, Explod]; Dust Puff
type = explod 
trigger1=animelem=2
anim = 8130
ID   = 8130
random= 0,5
pos = 22,-4 
postype = P1
facing = 1
vfacing = 1
velocity = 1.5, 0
removetime = 17
supermove = 999999999999999999999 
pausemove = 999999999999999999999
scale = 1.1,1.1
sprpriority = 9 
ontop = 1 
ownpal = 1
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0

[State 890, Width]
Type= Width
trigger1=1
edge=8,0

[State 890, 2]
type = VelSet
trigger1 = Time = 0
x = 0

[State 890, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 890, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 890, 4]
type = ChangeState
triggerall=anim=890
trigger1 = AnimTime = 0
value =0
ctrl = 1
[State 890, 5]
type = ChangeState
triggerall=anim=891
trigger1 = AnimTime = 0
value = 0
ctrl = 1
[State 890, 5]
type = ChangeState
triggerall=anim=892
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------
; ENEMY BOUND Helper
[Statedef 899]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 899
ctrl=0

[State 899]
type =AssertSpecial
trigger1 =1    
flag=noautoturn

[state 899]
type = varset
trigger1 = time = 0
v = 7
value = parent, var(8)

[State 899, PosSet]
type = PosSet
trigger1=1
x = floor(playerID(Var(7)), pos X)
y = floor(playerID(Var(7)), pos Y)

[State 899, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 899, NotHitBY]
type = NotHitBy
Trigger1 = 1
value = SCA
Time = 1

[State -2, HitWallSound]
type= Playsnd 
trigger1=parent,var(11)=2
ignorehitpause=1
supermove = 999999999999999999999 
pausemove = 999999999999999999999
value= s824,0
persistent=0
channel=3

[State -2, WALLSPARK]
type = Explod
triggerall=facing=1
trigger1=parent,var(11)=2
anim=4021
ID = 4021
pos=floor(playerID(Var(7)), pos X)+100,-50
postype =P1, Mid
facing = 1
vfacing = 1
bindtime =1
vel = 0,0
accel = 0,0
random = 0,0
removetime =14
scale = 1,1
screenbound=1
sprpriority =9
shadow = 0,0,0
removeongethit = 0
persistent= 0
ontop = 1
ownpal = 1
ignorehitpause = 1
supermove = 999999999999999999999 
pausemove = 999999999999999999999

[State -2, WALLSPARK]
type = Explod
triggerall=facing=-1 
trigger1=parent,var(11)=2
anim=4021
ID = 4021
pos= floor(playerID(Var(7)), pos X)-150,-50
postype =P1, Mid
facing = 1
vfacing = 1
bindtime =1
vel = 0,0
accel = 0,0
random = 0,0
removetime =14
scale = 1,1
screenbound=1
sprpriority =9
shadow = 0,0,0
removeongethit = 0
persistent= 0
ontop = 1
ownpal = 1
ignorehitpause = 1
supermove = 999999999999999999999 
pausemove = 999999999999999999999

[state 899,ParentVarSet]
type = Parentvarset
triggerall=1
trigger1 =(playerID(Var(7)),stateno=1028)
trigger2= Vel Y = 0
trigger2= Pos Y = 0
trigger3=numhelper(899)>=3
v = 11
value =0

[State 899]
type = DestroySelf
trigger1=(playerID(Var(7)),stateno=1028)
trigger2= Vel Y = 0
trigger2= Pos Y = 0
trigger3=numhelper(899)>=3
;---------------------------------------------------------------------------
; HIT_LIEDOWN
[Statedef 5110]
type    = L
movetype= H
physics = N
[State 5110, Explod]; Dust Puff
type = explod 
trigger1=Time=4
anim=8140
ID = 8140
pos = 0,-2
postype = P1
facing = 1
vfacing = 1
removetime = 17
supermove = 999999999999999999999 ;
pausemove = 999999999999999999999
scale = 1,1 
sprpriority = 9
ontop = 1 
ownpal = 1 
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0
[State 5110, Explod]; Dust Puff
type = explod 
trigger1=Time=3
anim=8140
ID = 8140
pos = 50,-4
postype = P1
facing = 1
vfacing = 1
removetime = 17
supermove = 999999999999999999999 ;
pausemove = 999999999999999999999
scale = .7,.7
sprpriority = 9
ontop = 1 
ownpal = 1 
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0
[State 5110, Explod]; Dust Puff
type = explod 
trigger1=Time=2
anim=8130
ID = 8130
pos = 35,0
postype = P1
facing = 1
vfacing = 1
removetime = 17
supermove = 999999999999999999999 ;
pausemove = 999999999999999999999
scale = 1,1 
sprpriority = 9
ontop = 1 
ownpal = 1 
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0
[State 5110, Explod]; Dust Puff
type = explod 
trigger1=Time=3
anim=8130
ID = 8130
pos = 15,-5
postype = P1
facing = 1
vfacing = 1
removetime = 17
supermove = 999999999999999999999 ;
pausemove = 999999999999999999999
scale = 1.2,1.2 
sprpriority =-1
ontop = 0 
ownpal = 1 
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0
[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0
[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 5110, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5110, 6]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5110, 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14

[State 5110, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 5110, 11] ;If just died
type = ChangeState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5110, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 5110, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine
;---------------------------------------------------------------------------
; HIT_GETUP
[Statedef 5120]
type    = L
movetype= I
physics = N

[State 5120, 1a] ;Get up anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5111,5119]
trigger2 = !SelfAnimExist(5120 + (anim % 10))
value = 5120

[State 5120, 1b] ;Get up anim (for hit up/diag-up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5111,5119]
trigger1 = SelfAnimExist(5120 + (anim % 10))
value = 5120 + (anim % 10)

[State 5120, 2]
type = VelSet
trigger1 = Time = 0
x = 0

[State 5120, 3]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5120, 4]
type = HitFallSet
trigger1 = AnimTime = 0
value = 1

[State 5120, 5] ;Can't be thrown right after getting up
type = NotHitBy
trigger1 = AnimTime = 0
value = , NT,ST,HT
time = 12

[State 5120, 6] ;Can't be hit right after getting up (short time)
type = NotHitBy
trigger1 = AnimTime = 0
value2 = SCA
time = 3

[State 5120, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 5120, Landing Sound]
type = PlaySnd
trigger1 = animelemtime(6)=1
value = s52,0
channel=0
volume=255

[State 5120, Explod]; Dust Puff
type = explod 
trigger1=animelemtime(6)=1
anim = 8140
ID = 8140
pos = 25,-2
postype = P1
facing = 1
vfacing = 1
;bindtime = -1
removetime = 17
supermove = 999999999999999999999 ;
pausemove = 999999999999999999999
scale = 1,1 
sprpriority = 9
ontop = 1 
ownpal = 1 
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0
;---------------------------------------------------------------------------
; HIT_LIEDEAD
[Statedef 5150]
type    = L
movetype= H
physics = N
sprpriority = -3

[State 5150, RemoveExplod]
type = RemoveExplod
trigger1 = time=0
ID =5306

[State 5150, 1] ;Normal anim
type = ChangeAnim
triggerall = Time = 0
triggerall = SelfAnimExist(5140)
trigger1 = (anim != [5111,5119]) && (anim != [5171,5179])
trigger2 = !SelfAnimExist(5140 + (anim % 10))
value = 5140

[State 5150, 3] ;Hit up type anim
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (anim = [5111,5119]) || (anim = [5171,5179])
trigger1 = SelfAnimExist(5140 + (anim % 10))
value = 5140 + (anim % 10)

[State 5150, 4] ;Match over anim
type = ChangeAnim
persistent = 0
;trigger1 = Time = 0
trigger1 = MatchOver = 1
trigger1 = Anim = [5140,5149]
trigger1 = SelfAnimExist(anim+10)
value = anim+10

[State 5150, 5] ;Switch to 5110 if liedead anim does not exist
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Anim != [5140,5159]
trigger1 = Anim != [5110,5119]
value = 5110

[State 5150, 6] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5150, 7] ;Friction
type = VelSet
trigger1 = Vel x < .05
persistent = 0
x = 0

[State 5150, 8]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5150, UGH SHELL SHOCK]
type= Playsnd
triggerall=stateno=5150
trigger1 = AnimElemtime(1)=5
value= s11, 1
volume=255
persistent=0


;===============================
[State 5150, Explod];Dizzy Stars
type = explod 
trigger1= anim=5110&&Time=1
anim=5301
ID = 5306
pos = -30,floor(const(size.height)*(-.6))
postype = P1 
facing = 1
vfacing = 1
bindtime  =Ifelse(Stateno!=5150, 0,-1);-1
removetime=ifelse(!alive=1, -1, 0)
supermove = 999999999999999999999 
pausemove = 999999999999999999999
scale = 1,1
sprpriority = -2
ontop = 0 
ownpal = 1 
removeongethit = 0
ignorehitpause=1
;---------------------------------------------------------------------------
; HIT_FALLRECOVER (on the ground)
[Statedef 5201]
type    = S
movetype= H
physics = N
anim = 5200
velset=0,0

[State 5201, 1] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -5

[State 5201, Voice]
type = PlaySnd
trigger1 = AnimElem =1
value = s6,6
channel = 0
volume=255


[State 5201, Slide Sound]
type = PlaySnd
trigger1 =Time=0
value = s0,5
volume=255

[State 5201, 2]
type = VelSet
trigger1 = Time = 0&&animelem<=7
x = -20


[State 5201, Velocity]
type = VelMul
trigger1=animelem<=7
x = .95

[State 5201, 2]
type = VelSet
trigger1 = animelem = 8
x=0

[State 5201, 3]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5201, 4]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5201, 5] ;Blink white
type = PalFX
trigger1 = Time = 0
time = 3
add = 128,128,192
persistent=1
ignorehitpause=1

[State 5201, Explod]; Dust
type = explod
trigger1= Time=1
anim = 8120
ID = 8120
pos = 10,2
postype = P1
facing = 1
vfacing = 1
bindtime =Ifelse(movetype!=H, 25,1)
removetime = 25
supermove = 999999999999999999999 
pausemove = 999999999999999999999
scale = 1,1 
sprpriority = 9 
ontop = 1 
ownpal = 1 
removeongethit =1
ignorehitpause=1
shadow =0
persistent=0


[State 5201, Physics]
type = statetypeset
trigger1 = AnimElem =5
physics= A

[State 5201, 5] ;Land on ground
type = ChangeState
triggerall=animelem=9
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
trigger1 = Vel X  = 0
value = 52 ;JUMP_LAND
ctrl = 1
;---------------------------------------------------------------------------
; HIT_AIRFALLRECOVER
[Statedef 5210]
type    = A
movetype= I
physics = N
anim = 5210
ctrl = 0
[State 5210, 1] ;Blink white
type = PalFX
trigger1 = Time = 0
time = 3
add = 128,128,128 ;256,256,256
[State 5210, 1]
type = PosFreeze
trigger1 = Time = 0
value = 4
[State 5210, Voice]
type = PlaySnd
trigger1 = AnimElem =1
value = s6,6
channel = 0
volume=255
[State 5210, 2] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -20
[State 5210, 1] 
type = VelMul
trigger1 = Time = 4
x = .8
y = .8
[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
y = -4.5
[State 5210, 1] 
type = VelMul
trigger1 = Time = 4
trigger1 = Vel Y > 0
y = .5
[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
trigger1 = Vel Y > -3
y = -2
[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
trigger1 = Vel Y > -2
y = -1
[State 5210, 2] ;Go up
type = VelAdd
trigger1 = Time = 4
trigger1 = Command = "holdup"
y = -2
[State 5210, 2] ;Go down
type = VelAdd
trigger1 = Time = 4
trigger1 = Command = "holddown"
y = 1.5
[State 5210, 2] ;Go fwd
type = VelMul
trigger1 = Time = 4
trigger1 = Command = "holdfwd"
x = 1
[State 5210, 2] ;Go back
type = VelAdd
trigger1 = Time = 4
trigger1 = Command = "holdback"
x = -1
[State 5210, 3]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 15
[State 5210, 4]
type = CtrlSet
trigger1 = Time = 20
value = 1
[State 5210, 5]
type = VelAdd;Gravity
trigger1 = Time >= 4
y = .35
[State 5210, 5] ;Land on ground
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;JUMP_LAND
ctrl = 1
;---------------------------------------------------------------------------
; Initialize (at the start of the round)
[Statedef 5900]
type = S

[State 5900, 1] ;Clear all int variables
type = VarRangeSet
trigger1 = roundsexisted = 0
value = 0

[State 5900, 2] ;Clear all float variables
type = VarRangeSet
trigger1 = roundsexisted = 0
fvalue = 0

[State 5900, 3] ;Intro for round 1
type = ChangeState
trigger1 = roundno = 1
value = 190
;---------------------------------------------------------------------------
;========================= SUPER KO FINISH!!! ============================
[Statedef 9998]
ctrl = 0
anim = 52086

[State 9998, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S9999,50
volume = 255
channel = 8

[State 9998, RemoveExplod]
type = RemoveExplod
trigger1 =1
ignorehitpause=1
ID =8505
[State 9998, RemoveExplod]
type = RemoveExplod
trigger1 =1
ignorehitpause=1
ID =8506

[State 9998, Assert]
type = AssertSpecial
trigger1 = 1
flag = NoBarDisplay
flag2 = NoMusic
flag3 = nokoslow
[State 9998, Assert]
type = AssertSpecial
trigger1 =time<=70
flag = NoFG

[State 9998, Explod]
type = Explod
trigger1 = time = 0
anim=9999
ID = 9999
pos = 160,120
postype = back
bindtime = -1
removetime = 30
supermovetime = 9999
pausemovetime = 0
scale = 1.2,1.2
sprpriority =-10
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 9998, Explod]
type = Explod
trigger1 = time = 1
anim = 9998
ID   = 9998
pos = 160,120
postype = back
bindtime = -1
removetime =70
supermovetime = 9999
pausemovetime = 0
scale = 1.2,1.2
sprpriority =-10
shadow = 0,0,0
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 9998, ModifyExplod]
type = ModifyExplod
trigger1 = time<=60
ID = 9998
trans = addalpha
alpha = (0+((time-1)*10)),256

[State 9998, ModifyExplod]
type = ModifyExplod
trigger1 = time>60
ID = 9998
trans = addalpha
alpha = (255-((time-60)*15)),256

[State 9998, RemoveExplod]
type = RemoveExplod
trigger1 = time > 60
ID = 9999

[State 9998, DestroySelf]
type = DestroySelf
trigger1 = time >= 100
;---------------------------------------------------------------------------
; Override common states (use same number to override) :
;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
; States that are always executed (use statedef -2)
;---------------------------------------------------------------------------
[Statedef -2]
[State -2, VarSet]
type = VarSet
triggerall=1
triggerall=numtarget
trigger1=(Enemy(0),stateno=1027)
trigger1=(Enemy(0),time<=1)
trigger2=TeamMode = Simul
trigger2=(Enemy(1),stateno=1027)
trigger2=(Enemy(1),time<=1)
trigger3=Enemy(Enemy, TeamMode = Simul),stateno=1027 
trigger3=Enemy(Enemy, TeamMode = Simul),time<=1
v=11
value=2

[State -2, SUPER FINISH]
type = Helper
triggerall = roundstate >= 2
triggerall = WinKo && !var(30)
trigger1 = numtarget
trigger1 = stateno = [3000, 3999]
ID      = 9998
stateno = 9998
postype = back
pos = 0,0
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
ownpal = 1

[State -2,KO]
type = Varadd
trigger1 = roundstate = 3
ignorehitpause = 1
var(30) = 1

[State -2,KO]
type = Varset
trigger1 = roundstate = 0
ignorehitpause = 1
var(30) = 0

[State -2, P2 Facing]
type= targetfacing
triggerall=stateno=3200&&numtarget(3101||3102||3104)
trigger1= movecontact=1 && numtarget=1
value= 1
ignorehitpause= 1

[State -2, P2 Facing]
type= targetfacing
triggerall=stateno!=3200
trigger1= movecontact=1 && numtarget=1
trigger1= !(target,hitshakeover) && !(target,hitfall) && (target,time<=1)
value= ifelse(p2dist x>=0, -1, 1)
ignorehitpause= 1
;=============== DAMAGE DAMPENER ================
[State -2, Damage Scaler]
type = AttackMulSet
triggerall!=stateno=3300
triggerall!=stateno=[3200,3201]
triggerall!=stateno=[3100,3101]
triggerall!=stateno=[3000,3001]
triggerall!=stateno=3105
trigger1=Var(50)=1
value =ifelse((numhelper(415)=1),.6,.45)

[State -2, Damage Scaler]; FINAL SLASH
type = AttackMulSet
triggerall!=stateno=3300
triggerall!=stateno=[3200,3201]
triggerall!=stateno=[3100,3101]
triggerall=stateno=[3000,3001]
trigger1=Var(50)=1
value =1

[State -2, Damage Scaler]; FINAL SLASH
type = AttackMulSet
triggerall=!(EnemyNear(0),authorname="GM")
triggerall=stateno=3105
trigger1=Var(50)=1
value =1

[State -2, Damage Scaler]; FINAL SLASH
type = AttackMulSet
triggerall=(EnemyNear(0),authorname="GM")
triggerall=stateno=3105
trigger1=Var(50)=1
value =ifelse((numhelper(716)=1),1,1)

[State -2, Damage Scaler];TORNADO SPIN START
type = AttackMulSet
triggerall=var(55)!=1
triggerall=stateno=3200
trigger1=Var(50)=1
value =ifelse((numhelper(451)=1),.6,.4)
[State -2, Damage Scaler]
type = AttackMulSet
triggerall=var(55)=1
triggerall=stateno=3200
trigger1=Var(50)=1
value =ifelse((numhelper(451)=1),.4,.3)

[State -2, Damage Scaler];TORNADO SPIN END
type = AttackMulSet
triggerall=var(55)=1
triggerall=stateno=3201
trigger1=Var(50)=1
value =ifelse((numhelper(451)=1),.4,.3)
[State -2, Damage Scaler]
type = AttackMulSet
triggerall=var(55)!=1
triggerall=stateno=3201
trigger1=Var(50)=1
value =ifelse((numhelper(451)=1),.6,.4)


[State -2, Damage Scaler]; ROTO CUTTER
type = AttackMulSet
triggerall=var(52)!=1
triggerall=stateno=[3100,3101]
trigger1=Var(50)=1
value =ifelse((numhelper(451)=1),.55,.4)

[State -2, Damage Scaler]
type = AttackMulSet
triggerall=var(52)=1
triggerall=stateno=[3100,3101]
trigger1=Var(50)=1
value =ifelse((numhelper(451)=1),.45,.3)


[State -2, Damage Scaler]; SPARK PLUG
type = AttackMulSet
triggerall=var(55)!=1
triggerall=stateno=3300
trigger1=Var(50)=1
value =ifelse((numhelper(451)=1),.5,.4)

[State -2, Damage Scaler]
type = AttackMulSet
triggerall=var(55)=1
triggerall=stateno=3300
trigger1=Var(50)=1
value =ifelse((numhelper(451)=1),1,.25);.95,.25)

[State -2, VarSet]
type = VarSet
trigger1 = MoveType = I
trigger2 = Var(51) > 0
v = 50
value = 0

[State -2, Damage Reset]
type = AttackMulSet
trigger1= Var(50) = 0
trigger2= stateno=3105
value =1
;===============

[State -2,Ctrlset]
type=Ctrlset
trigger1= stateno= 105
trigger2= stateno=106
value=0

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = stateno!=430
id =  704

; Begin trailing anims after run
[state -2, aftimg]
type = afterimage
triggerall=prevstateno=[100,101]
triggerall= time = 0
trigger1=stateno=[200,250]
trigger2=stateno=[400,450]
time = 16
length = 13
paladd = 10, 10, 10
palmul = 1,1,1
palcontrast = 80,80,80
framegap = 5
trans = add1

; Get rid of trailing anims when hit
[State -2, 1]
type = AfterImageTime
trigger1 = Time = 0
trigger1 = MoveType = H
trigger2 = prevstateno = 1010&&stateno!=1011
trigger2 = prevstateno = 1010&&stateno!=1060
trigger3 = prevstateno = 1011&&stateno!=1060
trigger3 = prevstateno = 1011&&stateno!=[3000,3300]
trigger4 = prevstateno = 3000
trigger5 = prevstateno = 3201
trigger6 = prevstateno = 3300
trigger7 = prevstateno = 3301
trigger8 = stateno=890
trigger9 = stateno=800
trigger10= stateno=805&&1
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
time=0

[State -2, 1]
type = RemoveExplod
trigger1 = Time = 0
trigger1 = MoveType = H
trigger2 = prevstateno=610
ID=251
[State -2, 1]
type = RemoveExplod
trigger1 = Time = 0
trigger1 = MoveType = H
trigger2 = prevstateno=1050&&stateno!=1060
trigger3 = prevstateno=1060&&1
trigger4 = stateno=3300&&1
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
ID=424
[State -2, 1]
type = RemoveExplod
trigger1 = Time = 0
trigger1 = MoveType = H
trigger2 = prevstateno=1050&&stateno!=1060
trigger3 = prevstateno=1060&&1
trigger4 = stateno=3300&&1
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
ID=425
[State -2, 1]
type = RemoveExplod
trigger1 = Time = 0
trigger1 = MoveType = H
trigger2 = prevstateno=1050&&stateno!=1060
trigger3 = prevstateno=1060&&1
trigger4 = stateno=3300&&1
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
ID=426

[State -2, Throws Disallowed]; Resets condition every tick to check again
type=varset
trigger1= 1
var(38)= 0
 
[State -2, Throws Disallowed]
type=varset
trigger1= (enemynear,stateno=[150,155])
trigger2= (enemynear,movetype=H && enemynear,statetype!=A)
trigger3= (enemynear,stateno=[5020,5040]) && !(enemynear,hitfall)
trigger4= ((enemynear,stateno=0) || (enemynear,stateno=52)) && (enemynear,prevstateno=[5000,5040]) && ((enemynear,time<=0) || !(enemynear,ctrl))
trigger5= (enemynear,stateno=0) && (enemynear,prevstateno=52) && ((enemynear,time<=0) || !(enemynear,ctrl))
trigger6= (enemynear,stateno=40) && (enemynear,time>=1 || enemynear,prevstateno=0 || enemynear,prevstateno=52)
var(38)= 1
;-------------------------------------------------------------------------------
;------------------- Alternate Cornerpush by Yong Ming & Elix ------------------
;-------------------------------------------------------------------------------
[State -2, HitShakeOver VelSet]
type = VarSet
triggerall = NumTarget; Player gains a target when he attacks and his attack land on opponent (MoveContact), AFAIK.
triggerall = (target,BackEdgeBodyDist <= 0) || (target,FrontEdgeBodyDist <= 0); P2 being in the corner.
triggerall = !target, Vel Y; P2 is not being hit in the air.
triggerall = ProjContact = 0,<32; Projectiles' attacks are not counted. Set the value to a sum of your projectile's pausetime (for P2) and hittime.
triggerall = StateType != A; Prevents cornerpush while being in the air.
trigger1 = target, StateType = S
trigger2 = target, StateType = C
IgnoreHitPause = 0
fvar(21) = ifelse(target, BackEdgeBodyDist <= 0,target, Vel X,-target, Vel X)
 
[State -2, HitShake VelSet]
type = VarSet
triggerall = NumTarget
triggerall = !fvar(21)
triggerall = (target,BackEdgeBodyDist <= 0) || (target,FrontEdgeBodyDist <= 0)
triggerall = !target,GetHitVar(HitShakeTime)
triggerall = !target, GetHitVar(yvel); Cornerpush isn't applied if the attack sends opponent in the air.
triggerall = ProjContact = 0,<32
trigger1 = target, StateNo = 5000
trigger2 = target, StateNo = 5010
trigger3 = target, StateNo = 150
trigger4 = target, StateNo = 152
IgnoreHitPause = 0
fvar(21) = ifelse(facing = -1 && target,BackEdgeBodyDist <= 0,target,GetHitVar(xvel),-target,GetHitVar(xvel))
 
[State -2, Corner Push]
type = PosAdd
triggerall = !NumExplod(52086); Explod that should be created to avoid cornerpush during SuperPause.
triggerall = NumTarget
trigger1 = fvar(21) != 0
x = fvar(21)
 
[State -2, Velocity Reset]
type = VarSet
triggerall = fvar(21) != 0; I added this to reduce the amount of needless work for MUGEN when persistently resetting fvar(0).
trigger1 = !NumTarget
trigger2 = target,HitShakeOver
fvar(21) = 0
 
[State -2, SuperPause Explod]; An example of explod that is made 
type = Explod
triggerall=1
trigger1 = StateNo = 3000 && AnimElem = 1,=1; Just be sure not to set Time at 0 since negative states cannot process that.
trigger2 = StateNo = 3100 && AnimElem = 1,=1
trigger3 = StateNo = 3200 && AnimElem = 1,=1
trigger4 = StateNo = 3201 && AnimElem = 1,=1
trigger5 = Stateno = 3300 && AnimElem = 1,=1
trigger6 = Stateno = 3301 && AnimElem = 1,=1
trigger7 = Stateno = 1000 && AnimElem = 1,=1
trigger8 = Stateno = 1010 && AnimElem = 1,=1
trigger9 = Stateno = 1011 && AnimElem = 1,=1
IgnoreHitPause = 1
Anim=52086; Blank animation
ID = 52086; Use whatever number you like
Pos = 0,0
PosType = P1
SprPriority = -7
Shadow = -1
RemoveTime = 32; The duration of your superpause here.
SuperMove = 1
PauseMove = 1
SuperMoveTime = 32; The duration of your superpause here.
PauseMoveTime = 32

;---------------------------------------------------------------------------
; States that are executed when in self's state file (use statedef -3)
;---------------------------------------------------------------------------

[Statedef -3]

[State -3, Variable Height]
type= playerpush
triggerall= statetype=A && movetype!=H && numenemy
triggerall= p2bodydist x = [-(enemynear,const(size.ground.back) + enemynear,const(size.ground.front)), 0]; checks if both characters are within each other's width
trigger1= p2statetype=S
trigger1= p2dist y >= (enemynear,const(size.height) - 22)
trigger2= p2statetype=C
trigger2= p2dist y >= (enemynear,const(size.height) - 48)
trigger3= p2statetype=L
trigger3= p2dist y >= 11
value= 0
ignorehitpause= 1

;This controller plays a sound everytime the player lands from a jump, or
;from a back-dash.


[State -3, Playerpush]
type = Playerpush
trigger1 = stateno=105&&prevstateno=193
trigger2 = Roundstate=1
value=0

[State -3, Landing Sound]
type = PlaySnd
triggerall=Time = 1
trigger1 = stateno = 52 ;Jump land
trigger2 = stateno = 106;Run-back land
trigger3 = stateno = 440
trigger4 = stateno = 890
value = s52,0

[State -3, Running Sound]
type = PlaySnd
trigger1 = stateno = 100 &&animelemtime(2)=0
trigger2 = stateno = 100 &&animelemtime(4)=0
value = s100,0
volume=255

[State -3, Bouncing Sound]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 5100
trigger2 = stateno = 5170
trigger3 = stateno = 5110
value= 810, 0

[State -3, Jumping Sound]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 40
trigger2 = stateno = 232
trigger3 = stateno = 105
value=s40,0


[State -3, Whiffing Sound]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 220
value= s3, 5
volume=255

[State -3, Whiffing Sound]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 620
trigger2 = stateno = 630
trigger3= stateno = 650
value=s0,2
volume=255

[State -3, Whiffing Sound]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 640
value=s0,3
volume=255

[State -3, Slamming Sound]
type = PlaySnd
triggerall =numtarget(3200)&&1
trigger1 =var(12)=2
value=s824,0
persistent=0
[State -3, Slamming Sound]
type = PlaySnd
triggerall =numtarget(3200)&&1
trigger1 =var(12)=2
value=s800,0
volume=255
persistent=0

[State -3, Slamming Sound]
type = PlaySnd
triggerall =numtarget(3000)&&1
trigger1 =var(12)=2
value=s810,0
persistent=0

[State -3, VarSet]
type = VarSet
trigger1=!numtarget(3200)
trigger2=EnemyNear, stateno=5101
trigger3=EnemyNear, stateno=5100
trigger3=EnemyNear, time>1
trigger4=!numtarget(3000)
trigger5=EnemyNear, stateno=3005
trigger5=EnemyNear, time>1
v=12
value=0

[State -3, VarSet]
type = VarSet
trigger1 =numtarget(3200)
trigger1 =EnemyNear, stateno=3202
trigger2 =numtarget(3000)
trigger2 =EnemyNear, stateno=3003
v=12
value=1

[State -3, VarAdd]
type = VarSet
trigger1 =numtarget(3200)
trigger1=EnemyNear, stateno=5100
trigger1=EnemyNear, time=1
trigger2=EnemyNear, stateno=3005
trigger2=EnemyNear, time=1
persistent=0
v=12
value=2

[State -3, Explod]; GROUND HIT SPARKS
type = explod 
trigger1=var(12)=2
anim =ifelse(numtarget(3200),4020,4022)
ID = 4020
pos = -10,0
postype = P2,mid
facing = 1
vfacing = 1
bindtime = -1
removetime = ifelse(numtarget(3200),11,10)
supermove = 999999999999999999999
pausemove = 999999999999999999999
scale = ifelse(numtarget(3200),1.2,1),ifelse(numtarget(3200),1.2,1)
sprpriority =-1
ontop =ifelse(numtarget(3200),1,0)
ownpal = 1
removeongethit = 1
shadow =0

[State -3, GetHurt Sound]
type = PlaySnd
triggerall = Random < 500
triggerall = Time = 1
triggerall = alive
trigger1 = StateNo = 5000 || StateNo = 5010 || StateNo = 5020 || StateNo = 5070 || StateNo = 5080 || StateNo = 5100
value = 5000, ifelse(StateNo = 5100 || GetHitVar(animtype) = 2, 1, ifelse(GetHitVar(animtype) = 1, 1, 0))
channel = 10
volume=255

[State -3, Voice]
type = Stopsnd
trigger1 = StateNo = 5000 || StateNo = 5010 || StateNo = 5020 || StateNo = 5070 || StateNo = 5080 || StateNo = 5100
;trigger2 = StateNo = [150,159]
channel = 0



[State -3, RemoveExplod];Dizzy Stars
type = Removeexplod 
trigger1=alive
trigger2=stateno=5050
trigger2=time=0
ID =5306

[State -3, RemoveExplod];Dizzy Stars
type = Removeexplod 
trigger1=anim!=170
ID =5305

[State -3, RemoveExplod];
type = Removeexplod 
trigger1=stateno!=420
anim =  423
ID   =  423

;===========KATANA UPPERCUT (STATENO 1050) DELAY)============
[State -3, Varset]
type=VarSet
trigger1=!NumHelper(1051)
trigger2=movetype=I
v=9
value=0

[State -3, Varset]
type=VarSet
trigger1=NumHelper(1051)
v=9
value=1
;============SUPER CANCEL VARIABLE VAR(55)===============

[State -3, VarSet]
type = VarSet
trigger1 = Time = 0
trigger1 = MoveType = H
trigger2=stateno=3100&&prevstateno!=3200
trigger3=stateno=3101&&prevstateno!=[3200,3100]
trigger4=stateno=3200&&prevstateno!=[3100,3101]
trigger5=stateno=3300&&prevstateno!=[3100,3200]
v = 55
value = 0


[State -3, Prevent Crossup]
type = width
trigger1 = 1
edge = 4,0
ignorehitpause = 1

[State -3, RemoveExplod]
type = Removeexplod 
triggerall=1
trigger1=prevstateno=196||stateno!=196
trigger1=1
trigger2=stateno=0
ID=8522

;-------------------------------------------------------------------

[Data]
life = 1000
attack = 100
defence = 100
fall.defence_up = 50
liedown.time = 60
airjuggle = 15
sparkno = 2
guard.sparkno = S8200
KO.echo = 0
volume = 255
IntPersistIndex = 60
FloatPersistIndex = 40

[Size]
xscale = .85           ;Horizontal scaling factor.
yscale = 1           ;Vertical scaling factor.
ground.back = 37     ;Player width (back, ground)
ground.front = 38    ;Player width (front, ground)
air.back = 36        ;Player width (back, air)
air.front = 37       ;Player width (front, air)
height = 90          ;Height of player (for opponent to jump over)
attack.dist = 160    ;Default attack distance
proj.attack.dist = 90 ;Default attack distance for projectiles
proj.doscale = 0     ;Set to 1 to scale projectiles too
head.pos = -5, -90   ;Approximate position of head
mid.pos = -5, -60    ;Approximate position of midsection
shadowoffset = 0     ;Number of pixels to vertically offset the shadow
draw.offset = 0,0    ;Player drawing offset in pixels (x, y)

[Velocity]
walk.fwd  = 2.3      ;Walk forward
walk.back = -2.1     ;Walk backward
run.fwd  = 5.7,-3.5  ;Run forward (x, y) x+2 
run.back = -5.8,-4.0 ;Hop backward (x, y) x+2
jump.neu = 0,-9.5    ;Neutral jumping velocity (x, y)
jump.back = -3.55    ;Jump back Speed (x, y)
jump.fwd = 3.5       ;Jump forward Speed (x, y)
runjump.back = -2.55,-9.5 ;Running jump speeds (opt)
runjump.fwd = 4,-9.5      ;.
airjump.neu = 0,-9.5      ;.
airjump.back = -2.55      ;Air jump speeds (opt)
airjump.fwd = 2.5         ;.

[Movement]
airjump.num = 0      ;Number of air jumps allowed (opt)
airjump.height = 35  ;Minimum distance from ground before you can air jump (opt)
yaccel = .50         ;Vertical acceleration
stand.friction = .90  ;Friction coefficient when standing
crouch.friction = .88 ;Friction coefficient when crouching

;---------------------------------------------------------------------------
; Format:
; [Statedef STATENO]
; type = ?      S/C/A/L  stand/crouch/air/liedown
; movetype = ?  I/A/H    idle/attack/gethit
; physics = ?   S/C/A/N  stand/crouch/air/none
; juggle = ?             air juggle points move requires
;
; [State STATENO, ?]     ? - any number you choose
; type = ?
; ...

;---------------------------------------------------------------------------
; Lose (on timeover)
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170,0]
type = PlaySnd
trigger1 = Time = 0
value = 7,0

[State 170,1]
type = AssertSpecial
trigger1 = Time = [0,100]
flag = RoundNotOver

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; Draw game (on timeover)
[Statedef 175]
type = S
ctrl = 0
anim = 175
velset = 0,0

[State 175,0]
type = PlaySnd
trigger1 = Time = 0
value = 6,2
channel = 0

[State 175,1]
type = AssertSpecial
trigger1 = Time = [0,100]
flag = RoundNotOver

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; Winposes
[Statedef 180]  ; winpose selector
type = S
ctrl = 0
velset = 0,0

[State 180,Winpose decider]
type = ChangeState
trigger1 = Time = 0
value = 181 + ((Random * 4) / 1000)     ; change the 1 to however many winposes you have

;---------------------------------------------------------------------------
; Winpose #1 ("He he!" thumbs down)
[Statedef 181]
type = S
ctrl = 0
anim = 800
velset = 0,0

[State 181,0]
type = PlaySnd
trigger1 = Time = 0
value = 6,1
channel = 0

[State 181,1]
type = AssertSpecial
trigger1 = Time = [0,200]
flag = RoundNotOver

;---------------------------------------------------------------------------
; Winpose #2 ("You lose!" -- pointing up at the sky)
[Statedef 182]
type = S
ctrl = 0
anim = 801
velset = 0,0

[State 182,0]
type = PlaySnd
trigger1 = Time = 0
value = 6,2
channel = 0

[State 182,1]
type = AssertSpecial
trigger1 = Time = [0,200]
flag = RoundNotOver

;---------------------------------------------------------------------------
; Winpose #3 ("Oh yeah!" -- Football gear)
[Statedef 183]
type = S
ctrl = 0
anim = 799
velset = 0,0

[State 182, 0]
type = Explod
trigger1 = Time = 0
anim = 798
ontop = 1

[State 182,1]
type = PlaySnd
trigger1 = Time = 0
value = 6,3
channel = 0

[State 182,2]
type = AssertSpecial     
trigger1 = Time = [0,200]
flag = RoundNotOver

;---------------------------------------------------------------------------
; Winpose #4 ("Thank you..." -- Elvis costume)
[Statedef 184]
type = S
ctrl = 0
anim = 700
velset = 0,0

[State 182, 0]
type = Explod
trigger1 = Time = 0
anim = 798
ontop = 1

[State 182,1]
type = PlaySnd
trigger1 = Time = 0
value = 6,4
channel = 0

[State 182,2]
type = AssertSpecial     
trigger1 = Time = [0,200]
flag = RoundNotOver

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; Intros
[Statedef 190]  ; intro selector
type = S
ctrl = 0
velset = 0,0

[State 190,intro decider]
type = ChangeState
trigger1 = Time = 0
value = 191 + ((Random * 2) / 1000)     ; change the 1 to however many intros you have

;---------------------------------------------------------------------------
; Intro #1 (torn jacket)
[Statedef 191]
type = S
ctrl = 0
anim = 850
velset = 0,0

[State 191, jacket shreds]
type = Explod
trigger1 = Time = 0
anim = 851
ontop = 1

[State 191, playsnd]
type = PlaySnd
trigger1 = AnimElem = 6
value = 5,0
channel = 0

[State 191, 2]
type = AssertSpecial
trigger1 = Time = [0,120]
flag = Intro

;---------------------------------------------------------------------------
; Intro #2 (Caddy)
[Statedef 192]
type = S
ctrl = 0
anim = 797
velset = 0,0
sprpriority = -1

[State 192, playsnd]
type = PlaySnd
trigger1 = Time = 10
value = 5,1
channel = 1

[State 192, car driving off]
type = Explod
trigger1 = AnimElem = 7
anim = 796
pos = 60,0
vel = 25,0
removetime = 60 ;-2
sprpriority = -1

[State 192, Landing Dust]
type = Explod
triggerall =  NumExplod(931) < 1
trigger1 = StateNo = 192 ;Intro - Caddy
trigger1 = AnimElem = 17 
persistent = 0
ID = 931
anim = 931
postype = p1
pos = 7, 3
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = -2
ownpal = 1

[State 192, Landing Sound]
type = PlaySnd
trigger1 = StateNo = 192 ;Intro - Caddy
trigger1 = AnimElem = 17 
value = 8, 1

[State 192, envshake]
type = EnvShake
trigger1 = AnimElem = 17
time = 10

[State 192, 2]
type = AssertSpecial
trigger1 = Time = [0,150]
flag = Intro

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; Taunt (Energy Clock Charge / Gorilla)
[StateDef 195]
anim = 802
velset = 0,0

[State 195, playsnd 1]
type = PlaySnd
;triggerall = command = "hold-start"
trigger1 = (Time % 10) = 0
value = 2,0

;[State 195, playsnd 2]
;type = Null
;trigger1 = command = "holdfwd" 
;trigger2 = command = "holdback"

;[State 195, playsnd 2]
;type = PlaySnd
;trigger1 = (Time % 10) = 0
;value = 1,0

[State 195, varadd]
type = VarAdd
;triggerall = command != "holdfwd" || command != "holdback"
;triggerall = command = "hold-start"
trigger1 = (GameTime % 10) = 0 ;&& command != "holdfwd" || command != "holdback"
trigger1 = Var(1) < 60
v = 1
value = 1

[State 195, 1] ;cancel with jumping
type = ChangeState
trigger1 = Command = "holdup"
value = 40
ctrl = 1

[State 195, 2] ;cancel with crouching
type = ChangeState
trigger1 = Command = "holddown"
value = 10
ctrl = 1

[State 195, 3] ;cancel with walking forward or back
type = ChangeState
trigger1 = Command = "holdfwd"
trigger2 = Command = "holdback"
value = 20
ctrl = 1


;-----------------------------------------------------------------
; NORMAL ATTACKS
;
; Sprite numbering system
;  200: shared transition frames
;  210: light punch
;  220: medium punch
;  230: hard punch
;  240: light kick
;  250: medium kick
;  260: hard kick
;-----------------------------------------------------------------
; Stand Light Punch
[StateDef 200]
anim = 210
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0
poweradd = 30
juggle  = 2  

[State 200, swoosh]
type = PlaySnd
trigger1 = Time = 0
value = 0,0

[State 200, grunt]
type = PlaySnd
trigger1 = Time = 1
value = 1,0
channel = 0

[State 200, HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, NA
damage = 30,12
guardflag = MA
pausetime = 8,8
hitsound = S2,0
guardsound = S3,0
sparkno = S8210
guard.sparkno = S8200
sparkxy = 0,-80
animtype = Light
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -3
guard.velocity = -2
air.velocity = -2,-1

[state 200, 2]
type = VelSet
trigger1 = Time = 0 
trigger1 = PrevStateno = 100
x = 4

[state 200, 3]
type = VelSet
trigger1 = Time = 0 
trigger1 = PrevStateno = 105
x = -4

[State 200, 4]
type = Explod
trigger1 = Time = 0 
trigger1 = PrevStateno = 100 || PrevStateno = 105
persistent = 0
anim = 8041
postype = p1
pos = ifelse(Vel X < 0, 30, -30), 0
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 3

[State 200, Energy Dissipate]
type = VarAdd
triggerall = Var(1) > 0
trigger1 = (AnimTime = 0) && MoveContact
v = 1
value = -1
ignorehitpause = 1

[State 200, back to stance]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------------------------------------------
; Stand Medium Punch
[StateDef 210]
anim = 220
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0
poweradd = 60
juggle = 3

[State 210, swoosh]
type = PlaySnd
trigger1 = Time = 0
value = 0,1

[State 210, grunt]
type = PlaySnd
trigger1 = Time = 1
value = 1,1
channel = 0

[State 210, HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, NA
damage = 60,18
guardflag = MA
pausetime = 10,10 ;12,12
hitsound = S2,3
guardsound = S3,0
sparkno = S8220
guard.sparkno = S8200
sparkxy = -30,-110
animtype = Medium
ground.type = High
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = -10 ;12,-4
guard.velocity = -8
air.velocity = -3,-6

[state 210, 2]
type = VelSet
trigger1 = Time = 0 
trigger1 = PrevStateno = 100
x = 4

[state 210, 3]
type = VelSet
trigger1 = Time = 0 
trigger1 = PrevStateno = 105
x = -4

[State 210, 4]
type = Explod
trigger1 = Time = 0 
trigger1 = PrevStateno = 100 || PrevStateno = 105
persistent = 0
anim = 8041
postype = p1
pos = ifelse(Vel X < 0, 30, -30), 0
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 3

[State 210, Energy Dissipate]
type = VarAdd
triggerall = Var(1) > 0
trigger1 = (AnimTime = 0) && MoveContact
v = 1
value = -2
ignorehitpause = 1

[State 210, 1]
type = Width
trigger1 = Time >= 1
player = 20, 0

[State 210, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------------------------------------------
; Stand Hard Punch
[StateDef 220]
anim = 230
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0
poweradd = 100
juggle  = 3  

[State 220, swoosh]
type = PlaySnd
trigger1 = Time = 2
value = 0,2

[State 220, grunt]
type = PlaySnd
trigger1 = Time = 0
value = 1,4
channel = 0

[State 220, HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, NA
damage = 100,30
guardflag = MA
pausetime = 12,12 ;16,16
hitsound = S2,3
guardsound = S3,0
sparkno = S8230
guard.sparkno = S8200
sparkxy = 0,-110
animtype = Back
fall = 1
ground.type = High
ground.slidetime = 15
ground.hittime  = 18
ground.velocity = -18,-6
guard.velocity = -7
air.velocity = -4,3
envshake.time = 4
envshake.freq = 60
envshake.ampl = -4

[state 220, 2]
type = VelSet
trigger1 = Time = 0 
trigger1 = PrevStateno = 100
x = 4

[state 220, 3]
type = VelSet
trigger1 = Time = 0 
trigger1 = PrevStateno = 105
x = -4

[State 220, 4]
type = Explod
trigger1 = Time = 0 
trigger1 = PrevStateno = 100 || PrevStateno = 105
persistent = 0
anim = 8041
postype = p1
pos = ifelse(Vel X < 0, 30, -30), 0
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 3

[State 220, Energy Dissipate]
type = VarAdd
triggerall = Var(1) > 0
trigger1 = (AnimTime = 0) && MoveContact
v = 1
value = -3
ignorehitpause = 1

[State 220, back to stance]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------------------------------------------
; Stand Light Kick
[StateDef 230]
anim = 240
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0
poweradd = 10
juggle  = 2  

[State 230, swoosh]
type = PlaySnd
trigger1 = Time = 2
value = 0,0

[State 230, grunt]
type = PlaySnd
trigger1 = Time = 0
value = 1,0
channel = 0

[State 230, HitDef]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage = 15,5
guardflag = MAFD
pausetime = 8,8
hitsound = S2,0
guardsound = S3,0
sparkno = S8210
guard.sparkno = S8200
sparkxy = 0,0
animtype = Light
ground.type = Low
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2
guard.velocity = -1
air.velocity = -1,-1

[state 230, 2]
type = VelSet
trigger1 = Time = 0 
trigger1 = PrevStateno = 100
x = 4

[state 230, 3]
type = VelSet
trigger1 = Time = 0 
trigger1 = PrevStateno = 105
x = -4

[State 230, 4]
type = Explod
trigger1 = Time = 0 
trigger1 = PrevStateno = 100 || PrevStateno = 105
persistent = 0
anim = 8041
postype = p1
pos = ifelse(Vel X < 0, 30, -30), 0
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 3

[State 230, Energy Dissipate]
type = VarAdd
triggerall = Var(1) > 0
trigger1 = (AnimTime = 0) && MoveContact
v = 1
value = -1
ignorehitpause = 1

[State 230, back to stance]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------------------------------------------
; Stand Medium Kick
[StateDef 240]
anim = 250
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0
poweradd = 52
juggle  = 3  

[State 240, swoosh]
type = PlaySnd
trigger1 = Time = 2
value = 0,1

[State 240, grunt]
type = PlaySnd
trigger1 = Time = 0
value = 1,1
channel = 0

[State 240, HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, NA
damage = 50,10
guardflag = MA
pausetime = 8,8
hitsound = S2,1
guardsound = S3,0
sparkno = S8220
guard.sparkno = S8200
sparkxy = 0,-70
animtype = Medium
ground.type = High
ground.slidetime = 5
ground.hittime  = 15
ground.velocity = -7
guard.velocity = -5
air.velocity = -3,-6

[state 240, 2]
type = VelSet
trigger1 = Time = 0 
trigger1 = PrevStateno = 100
x = 4

[state 240, 3]
type = VelSet
trigger1 = Time = 0 
trigger1 = PrevStateno = 105
x = -4

[State 240, 4]
type = Explod
trigger1 = Time = 0 
trigger1 = PrevStateno = 100 || PrevStateno = 105
persistent = 0
anim = 8041
postype = p1
pos = ifelse(Vel X < 0, 30, -30), 0
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 3

[State 240, Energy Dissipate]
type = VarAdd
triggerall = Var(1) > 0
trigger1 = (AnimTime = 0) && MoveContact
v = 1
value = -2
ignorehitpause = 1

[State 240, back to stance]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------------------------------------------
; Stand Hard Kick
[StateDef 250]
anim = 260
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0
poweradd = 65
juggle = 3

[State 250, swoosh]
type = PlaySnd
trigger1 = Time = 2
value = 0,2

[State 250, grunt]
type = PlaySnd
trigger1 = Time = 0
value = 1,3
channel = 0

[State 250, HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, NA
damage = 65,10
guardflag = MA
pausetime = 8,8
hitsound = S2,2
guardsound = S3,0
sparkno = S8230
guard.sparkno = S8200
sparkxy = 0,-70
animtype = Heavy
ground.type = High
ground.slidetime = 8
ground.hittime  = 15
ground.velocity = -3,-8
guard.velocity = -5
air.velocity = -1,-8

[state 250, 2]
type = VelSet
trigger1 = Time = 0 
trigger1 = PrevStateno = 100
x = 4

[state 250, 3]
type = VelSet
trigger1 = Time = 0 
trigger1 = PrevStateno = 105
x = -4

[State 250, 4]
type = Explod
trigger1 = Time = 0 
trigger1 = PrevStateno = 100 || PrevStateno = 105
persistent = 0
anim = 8041
postype = p1
pos = ifelse(Vel X < 0, 30, -30), 0
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 3

[State 250, Energy Dissipate]
type = VarAdd
triggerall = Var(1) > 0
trigger1 = (AnimTime = 0) && MoveContact
v = 1
value = -3
ignorehitpause = 1

[State 250, back to stance]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;-----------------------------------------------------------------
; CROUCHING ATTACKS
;
; Sprite numbering system
;  400: shared transition frames
;  410: light punch
;  420: medium punch
;  430: hard punch
;  440: light kick
;  450: medium kick
;  460: hard kick
;-----------------------------------------------------------------

;---------------------------------------------------------------------------
; Crouch Light Punch
[StateDef 400]
anim = 410
ctrl = 0
type = C
movetype = A
physics = C
velset = 0,0
poweradd = 20
juggle  = 2  

[State 400, swoosh]
type = PlaySnd
trigger1 = Time = 2
value = 0,0

[State 400, grunt]
type = PlaySnd
trigger1 = Time = 0
value = 1,0
channel = 0

[State 400, HitDef]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage = 20
guardflag = L
pausetime = 8,8
hitsound = S2,0
guardsound = S3,0
sparkno = S8210
guard.sparkno = S8200
sparkxy = -20,-40
animtype = Light
ground.type = Low
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -3
guard.velocity = -2
air.velocity = -3,-6

[State 400, Energy Dissipate]
type = VarAdd
triggerall = Var(1) > 0
trigger1 = (AnimTime = 0) && MoveContact
v = 1
value = -1
ignorehitpause = 1

[State 400, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouch Medium Punch
[StateDef 410]
anim = 420
ctrl = 0
type = C
movetype = A
physics = C
velset = 0,0
poweradd = 55
juggle  = 3  

[State 410, swoosh]
type = PlaySnd
trigger1 = Time = 2
value = 0,1

[State 410, grunt]
type = PlaySnd
trigger1 = Time = 0
value = 1,1
channel = 0

[State 410, HitDef]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage = 50,15
guardflag = MA
pausetime = 9,9
hitsound = S2,2
guardsound = S3,0
sparkno = S8220
guard.sparkno = S8200
sparkxy = -20,0
animtype = Medium
ground.type = Low;Trip
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = -8
guard.velocity = -10
air.velocity = -3,-6

[State 410, Energy Dissipate]
type = VarAdd
triggerall = Var(1) > 0
trigger1 = (AnimTime = 0) && MoveContact
v = 1
value = -2
ignorehitpause = 1

[State 410, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;-----------------------------------------------------------------
; Crouching Hard Punch
[StateDef 420]
anim = 430
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0
poweradd = 100
juggle  = 3  

[State 420, swoosh]
type = PlaySnd
trigger1 = Time = 2
value = 0,2

[State 420, grunt]
type = PlaySnd
trigger1 = Time = 0
value = 1,5
channel = 0

[State 420, HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, NA
damage = 100,30
hitflag = MAF
guardflag = MA
pausetime = 17,14
hitsound = S2,3
guardsound = S3,0
sparkno = S8230
guard.sparkno = S8200
sparkxy = -20,-50
animtype = Up
;fall = 1
ground.type = High
ground.slidetime = 15
ground.hittime  = 37
ground.velocity = 0,-14.5
air.velocity = -4,-3
envshake.time = 4
envshake.freq = 60
envshake.ampl = -4

[State 420, 2] ;Launcher Spark
type = Explod
trigger1 = MoveHit
persistent = 0
anim = 8240
postype = p2
pos = -20, -50
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 7
ownpal = 1
supermovetime = 1000
pausemovetime = 1000
ignorehitpause = 1

[State 420, Energy Dissipate]
type = VarAdd
triggerall = Var(1) > 0
trigger1 = (AnimTime = 0) && MoveContact
v = 1
value = -3
ignorehitpause = 1

[State 420, back to stance]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;-----------------------------------------------------------------
; Crouch Light Kick
[StateDef 430]
anim = 440
ctrl = 0
type = C
movetype = A
physics = C
velset = 0,0
poweradd = 10
juggle  = 2  

[State 430, swoosh]
type = PlaySnd
trigger1 = Time = 2
value = 0,0

[State 430, grunt]
type = PlaySnd
trigger1 = Time = 0
value = 1,0
channel = 0

[State 430, HitDef]
type = HitDef
trigger1 = Time = 0
attr = C, NA
hitflag = MAFD
damage = 15,5
guardflag = L
pausetime = 8,8
hitsound = S2,0
guardsound = S3,0
sparkno = S8210
guard.sparkno = S8200
sparkxy = -10,0
animtype = Light
ground.type = Low
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -6
guard.velocity = -3

[State 430, Energy Dissipate]
type = VarAdd
triggerall = Var(1) > 0
trigger1 = (AnimTime = 0) && MoveContact
v = 1
value = -1
ignorehitpause = 1

[State 430, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;-----------------------------------------------------------------
; Crouch Medium Kick
[StateDef 440]
anim = 450
ctrl = 0
type = C
movetype = A
physics = C
velset = 0,0
poweradd = 50
juggle  = 3  

[State 440, swoosh]
type = PlaySnd
trigger1 = Time = 2
value = 0,1

[State 440, grunt]
type = PlaySnd
trigger1 = Time = 0
value = 1,1
channel = 0

[State 440, HitDef]
type = HitDef
trigger1 = Time = 0
attr = C, NA
hitflag = MAFD
damage = 50,10
guardflag = L
pausetime = 8,8
hitsound = S2,1
guardsound = S3,0
sparkno = S8220
guard.sparkno = S8200
sparkxy = -10,0
animtype = Medium
ground.type = Low
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = -6
guard.velocity = -3

[State 440, Energy Dissipate]
type = VarAdd
triggerall = Var(1) > 0
trigger1 = (AnimTime = 0) && MoveContact
v = 1
value = -2
ignorehitpause = 1

[State 440, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouch Hard Kick
[StateDef 450]
anim = 460
ctrl = 0
type = C
movetype = A
physics = C
velset = 0,0
poweradd = 75
juggle  = 3  

[State 450, swoosh]
type = PlaySnd
trigger1 = Time = 2
value = 0,2

[State 450, grunt]
type = PlaySnd
trigger1 = Time = 0
value = 1,3
channel = 0

[State 450, HitDef]
type = HitDef
trigger1 = Time = 0
attr = C, NA
hitflag = MAF
damage = 70,10
guardflag = L
pausetime = 5,5
hitsound = S2,2
guardsound = S3,0
sparkno = S8230
guard.sparkno = S8200
sparkxy = -20,-30
animtype = Heavy
ground.type = Trip 
ground.slidetime = 15
ground.hittime  = 12
ground.velocity = -6, -1
guard.velocity = -5
air.velocity = -5, -1  

[State 450, Energy Dissipate]
type = VarAdd
triggerall = Var(1) > 0
trigger1 = (AnimTime = 0) && MoveContact
v = 1
value = -3
ignorehitpause = 1

[State 450, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1


;-----------------------------------------------------------------
; JUMPING ATTACKS
;
; Sprite numbering system
;  600: shared transition frames
;  610: light punch
;  620: medium punch
;  630: hard punch
;  640: light kick
;  650: medium kick
;  660: hard kick
;-----------------------------------------------------------------
; Air Light Punch
[StateDef 600]
anim = 610
ctrl = 0
type = A
movetype = A
physics = A
poweradd = 20
juggle  = 2  

[State 600, swoosh]
type = PlaySnd
trigger1 = Time = 2
value = 0,0

[State 600, grunt]
type = PlaySnd
trigger1 = Time = 0
value = 1,0
channel = 0

[State 600, HitDef]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 20
guardflag = HA
pausetime = 6,8
hitsound = S2,0
guardsound = S3,0
sparkno = S8210
guard.sparkno = S8200
sparkxy = -20,-70
animtype = Light
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -5
airguard.velocity = -2,-.8
air.velocity = -2,-1

[State 600, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 53
ctrl = 1


;-----------------------------------------------------------------
; Air Medium Punch
[StateDef 610]
anim = 620
ctrl = 0
type = A
movetype = A
physics = A
poweradd = 45
juggle  = 3  

[State 610, swoosh]
type = PlaySnd
trigger1 = Time = 2
value = 0,1

[State 610, grunt]
type = PlaySnd
trigger1 = Time = 0
value = 1,1
channel = 0

[State 610, HitDef]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 45
guardflag = HA
pausetime = 8,8
hitsound = S2,1
guardsound = S3,0
sparkno = S8220
guard.sparkno = S8200
sparkxy = 0,-70
animtype = Medium
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -5
airguard.velocity = -2, 1
air.velocity = -2, 1

[State 610, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 53
ctrl = 1


;-----------------------------------------------------------------
; Air Hard Punch
[StateDef 620]
anim = 630
ctrl = 0
type = A
movetype = A
physics = A
poweradd = 90
juggle  = 3  

[State 620, swoosh]
type = PlaySnd
trigger1 = Time = 2
value = 0,2

[State 620, grunt]
type = PlaySnd
trigger1 = Time = 0
value = 1,4
channel = 0

[State 620, HitDef]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 95,15
guardflag = HA
pausetime = 8,8
hitsound = S2,3
guardsound = S3,0
sparkno = S8230
guard.sparkno = S8200
sparkxy = -60,-70
animtype = Heavy
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -5
airguard.velocity = -3, 5
air.velocity = -7, 9
fall = 0
air.fall = 1

[State 620, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 53
ctrl = 1


;-----------------------------------------------------------------
; Air Light Kick
[StateDef 630]
anim = 640
ctrl = 0
type = A
movetype = A
physics = A
poweradd = 10
juggle  = 2  

[State 630, swoosh]
type = PlaySnd
trigger1 = Time = 2
value = 0,0

[State 630, grunt]
type = PlaySnd
trigger1 = Time = 0
value = 1,0
channel = 0

[State 630, HitDef]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 10
guardflag = HA
pausetime = 7,8
hitsound = S2,0
guardsound = S3,0
sparkno = S8210
guard.sparkno = S8200
sparkxy = -40,-90
animtype = Light
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -5
airguard.velocity = -2,-.8
air.velocity = -2, 1

[State 630, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 53
ctrl = 1


;-----------------------------------------------------------------
; Air Medium Kick
[StateDef 640]
anim = 650
ctrl = 0
type = A
movetype = A
physics = A
poweradd = 20
juggle  = 3  

[State 640, swoosh]
type = PlaySnd
trigger1 = Time = 2
value = 0,1

[State 640, grunt]
type = PlaySnd
trigger1 = Time = 0
value = 1,1
channel = 0

[State 640, HitDef]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 30
guardflag = HA
pausetime = 8,8
hitsound = S2,1
guardsound = S3,0
sparkno = S8220
guard.sparkno = S8200
sparkxy = -40,-80
animtype = Medium
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -5
airguard.velocity = -2,-1
air.velocity = -2,-3

[State 640, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 53
ctrl = 1


;-----------------------------------------------------------------
; Air Hard Kick
[StateDef 650]
anim = 660
ctrl = 0
type = A
movetype = A
physics = A
poweradd = 25
juggle  = 3  

[State 650, swoosh]
type = PlaySnd
trigger1 = Time = 2
value = 0,2

[State 650, grunt]
type = PlaySnd
trigger1 = Time = 0
value = 1,2
channel = 0

[State 650, HitDef]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 50
guardflag = HA
pausetime = 8,8
hitsound = S2,2
guardsound = S3,0
sparkno = S8230
guard.sparkno = S8200
sparkxy = -20,-10
animtype = Heavy
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -5
airguard.velocity = -3, 5
air.velocity = -7, 9
fall = 0
air.fall = 1

[State 650, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 53
ctrl = 1



;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; Throw: Neck Choke hold: strong punch + forward when near P2
[StateDef 800]
anim = 940
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0
poweradd = 100
juggle  = 0  

[State 800, 0]
type = HitDef
trigger1 = Time = 0
attr = S, NT          ;Attributes: Standing, Normal Throw
hitflag = M-          ;Affect only ground people who are not being hit
;guardflag = M
priority = 1, Miss    ;Throw has low priority, must be miss or dodge type.
guard.sparkno = S8200
sparkno = S8250       ;No spark 
sparkxy = 15, -95 
guardsound = S3, 0     
hitsound = S3, 1      
sprpriority = 1       ;Draw in front of p2
guard.dist = 0        ;This prevents p2 from going into a guard state if close
fall = 1              ;Force p2 into falling down
;mindist = 
;maxdist = 
;snap = 0,0
sprpriority = 1
p2facing = 1
p1stateno = 802
p2stateno = 803

[State 800, missed]
type = ChangeState
trigger1 = AnimTime = 0
value = 801
ctrl = 1

;---------------------------------------------------------------------------
; Neck Choke (missed)
[StateDef 801]
anim = 941
ctrl = 0
type = S
movetype = I
physics = S
velset = 0,0

[State 801, back to stance]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Neck Choke (hit)
[StateDef 802]
anim = 942
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0

[State 802, 0]
type = PlaySnd
trigger1 = Time = 26
persistent = 0
value = 3,1

[State 802, 2]
type = PlaySnd
trigger1 = Time = 52
persistent = 0
value = 3,1

[State 802, 3]
type = PlaySnd
trigger1 = Time = 78
persistent = 0
value = 3,1

[State 802, 2] ;Hit Ground
type = Explod
trigger1 = Time = 26
persistent = 0
anim = 1005
ID = 1005
postype = p2
pos = 0, 0
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 4
ownpal = 1
ignorehitpause = 1

[State 802, 2] ;Hit Ground
type = Explod
trigger1 = Time = 52
persistent = 0
anim = 1005
ID = 1005
postype = p2
pos = 0, 0
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 4
ownpal = 1
ignorehitpause = 1

[State 802, 2] ;Hit Ground
type = Explod
trigger1 = Time = 78
persistent = 0
anim = 1005
ID = 1005
postype = p2
pos = 0, 0
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 4
ownpal = 1
ignorehitpause = 1

[State 802, Bind 1]
type = TargetBind
trigger1 = AnimElemTime(2) < 0
pos = 65, -135

; drop p2 after 4 chokes
[State 802, Throw 11]
type = TargetState
trigger1 = Time = 104
value = 804

[State 802, back to stance]
type = ChangeState
trigger1 = Time = 104
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Neck Choke (p2 custom hit state)
[StateDef 803]
type = A
movetype = H
physics = N
ctrl = 0
velset = 0,0

[State 803, ChangeAnim2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 943

[State 803, lifeadd #1]
type = LifeAdd
trigger1 = Time = 26
value = -30
kill = 1

[State 803, lifeadd #2]
type = LifeAdd
trigger1 = Time = 52
value = -30
kill = 1

[State 803, lifeadd #3]
type = LifeAdd
trigger1 = Time = 78
value = -30
kill = 1

[State 803, screenbound]  ; don't move the camera to follow P2
type = ScreenBound
trigger1 = Alive
movecamera = 0,0

;---------------------------------------------------------------------------
; Neck Choke End (p2 custom hit state)
[StateDef 804]
type = A
movetype = H
physics = N
ctrl = 0
velset = -1,6

[State 804, 0]
type = PosSet
trigger1 = Time = 0
y = Pos Y + (Const(size.height) * 2)

[State 804, 1]  ; don't move the camera to follow P2
type = ScreenBound
trigger1 = Alive
movecamera = 0,0

[State 804, 2] ;dropped
type = SelfState
trigger1 = Time = 0
value = 5050



;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; Pinhead (weak)
[StateDef 1000]
anim = 920
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0
poweradd = 75
juggle  = 5  

[State 1000, incoming!]
type = PlaySnd
trigger1 = AnimElem = 1
value = 9,2
channel = 0

[State 1000, dust]
type = Explod
trigger1 = Time = 0
anim = 918
supermove = 1
ontop = 1
removeongethit = 1

;[State 1000, movement lines]
;type = Explod
;trigger1 = Time = 10
;anim = 919
;supermove = 1
;removeongethit = 1

[State 1000, 3] 
type = VarRandom
trigger1 = 1
v = 6
range = 4

[State 1000, 4]
type = Explod
trigger1 = Time % 4 = 0 
anim = 8100 + var(6) 
postype = p1
pos = -30, -50
velocity = -3, 0
accel = 0, 0
random = 35, 85
removetime = -2
sprpriority = 3
ownpal = 1

[State 1000, 5]
type = Explod
trigger1 = Time % 6 = 0 
anim = 8104 
postype = p1
pos = -30, -50
velocity = -5, 0
accel = 0, 0
random = 25, 75
removetime = -2
sprpriority = 3
ownpal = 1

[State 1000, move fwd]
type = VelSet
trigger1 = Time > 9
x = 7

[State 1000, HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, NA
damage = 75,10
guardflag = MA
pausetime = 4,2
hitsound = S2,2
guardsound = S3,0
sparkno = S8270
guard.sparkno = S8200
sparkxy = 0,-60
animtype = Light
ground.type = Low
ground.slidetime = 5
ground.hittime  = 5
ground.velocity = -5,-6
guard.velocity = -1
air.velocity = -4,-5
envshake.time = 4
envshake.freq = 60
envshake.ampl = -4
fall = 1
air.fall = 1

[State 1000, Energy Dissipate]
type = VarAdd
triggerall = Var(1) > 0
trigger1 = (AnimTime = 0) && MoveContact
v = 1
value = -2
ignorehitpause = 1

[State 1000, back to stance]
type = ChangeState
trigger1 = Time = 20
value = 1005
ctrl = 1

;---------------------------------------------------------------------------
; Pinhead - (move end)
[Statedef 1005]
type    = S
physics = S
ctrl = 0
anim = 923
sprpriority = 2

[State 1005, 1]  
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Pinhead (medium)
[StateDef 1001]
anim = 920
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0
poweradd = 100
juggle  = 5  

[State 1001, incoming!]
type = PlaySnd
trigger1 = AnimElem = 1
value = 9,2
channel = 0

[State 1001, dust]
type = Explod
trigger1 = Time = 0
anim = 918
supermove = 1
ontop = 1
removeongethit = 1

;[State 1001, movement lines]
;type = Explod
;trigger1 = Time = 10
;anim = 919
;supermove = 1
;removeongethit = 1

[State 1001, 3] 
type = VarRandom
trigger1 = 1
v = 6
range = 4

[State 1001, 4]
type = Explod
trigger1 = Time % 4 = 0 
anim = 8100 + var(6) 
postype = p1
pos = -30, -50
velocity = -3, 0
accel = 0, 0
random = 35, 85
removetime = -2
sprpriority = 3
ownpal = 1

[State 1001, 5]
type = Explod
trigger1 = Time % 6 = 0 
anim = 8104 
postype = p1
pos = -30, -50
velocity = -5, 0
accel = 0, 0
random = 25, 75
removetime = -2
sprpriority = 3
ownpal = 1

[State 1001, move fwd]
type = VelSet
trigger1 = Time > 9
x = 8.5

[State 1001, HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, SA
damage = 100,10
guardflag = MA
pausetime = 4,2
hitsound = S2,2
guardsound = S3,0
sparkno = S8270
guard.sparkno = S8200
sparkxy = 0,-60
animtype = Medium
ground.type = Low
ground.slidetime = 5
ground.hittime  = 5
ground.velocity = -6,-7
guard.velocity = -1
air.velocity = -5,-6
envshake.time = 4
envshake.freq = 60
envshake.ampl = -4
fall = 1
air.fall = 1

[State 1001, Energy Dissipate]
type = VarAdd
triggerall = Var(1) > 0
trigger1 = (AnimTime = 0) && MoveContact
v = 1
value = -4
ignorehitpause = 1

[State 1001, back to stance]
type = ChangeState
trigger1 = Time = 25
value = 1005
ctrl = 1

;---------------------------------------------------------------------------
; Pinhead (strong)
[StateDef 1002]
anim = 920
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0
poweradd = 125
juggle  = 5  

[State 1002, incoming!]
type = PlaySnd
trigger1 = AnimElem = 1
value = 9,2
channel = 0

[State 1002, dust]
type = Explod
trigger1 = Time = 0
anim = 918
supermove = 1
ontop = 1
removeongethit = 1

;[State 1002, movement lines]
;type = Explod
;trigger1 = Time = 10
;anim = 919
;supermove = 1
;removeongethit = 1

[State 1002, 3] 
type = VarRandom
trigger1 = 1
v = 6
range = 4

[State 1002, 4]
type = Explod
trigger1 = Time % 4 = 0 
anim = 8100 + var(6) 
postype = p1
pos = -30, -50
velocity = -3, 0
accel = 0, 0
random = 35, 85
removetime = -2
sprpriority = 3
ownpal = 1

[State 1002, 5]
type = Explod
trigger1 = Time % 6 = 0 
anim = 8104 
postype = p1
pos = -30, -50
velocity = -5, 0
accel = 0, 0
random = 25, 75
removetime = -2
sprpriority = 3
ownpal = 1

[State 1002, move fwd]
type = VelSet
trigger1 = Time > 9
x = 10

[State 1002, HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, SA
damage = 125,25
guardflag = MA
pausetime = 4,2
hitsound = S2,2
guardsound = S3,0
sparkno = S8270
guard.sparkno = S8200
sparkxy = 0,-60
animtype = Hard
ground.type = Low
ground.slidetime = 5
ground.hittime  = 5
ground.velocity = -8,-9
guard.velocity = -1
air.velocity = -6,-7
envshake.time = 4
envshake.freq = 60
envshake.ampl = -4
fall = 1
air.fall = 1

[State 1002, Energy Dissipate]
type = VarAdd
triggerall = Var(1) > 0
trigger1 = (AnimTime = 0) && MoveContact
v = 1
value = -6
ignorehitpause = 1

[State 1002, back to stance]
type = ChangeState
trigger1 = Time = 30
value = 1005
ctrl = 1



;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; Alpha Counter - Pinhead - Start (from Ethan's Blaze Agent, by Soldats)

[Statedef 1050]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
Anim = 1500
poweradd = -500
sprpriority = 2

[State 1050, 1]
type = NotHitBy
trigger1 = Time >= 0
value = SCA
time = 1

[State 1050, 2.1]
type = Explod
trigger1 = AnimElem = 2
anim = 8280
id = 8280
pos  =  30,-54
postype = P1
sprpriority = 3
ignorehitpause = 1
supermovetime = 20
ownpal = 1

[State 1050, 2.2]
type = Explod
trigger1 = AnimElem = 2
anim = 8421
id = 8421
pos  =  0,0
postype = P1
sprpriority = 3
ignorehitpause = 1
supermovetime = 20
ownpal = 1

[State 1050, 3]
type = SuperPause
trigger1 = AnimElem = 2
anim = -1
darken = 0
time = 20
movetime = 20
poweradd = -500

[State 1050, 4]
type = EnvColor
trigger1 = Time = 0
value = 255, 255, 255
time = 1

[State 1050, 5]
type = PlaySnd
trigger1 = AnimElem = 2
value = 18,3

[State 1050, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 1051
ctrl = 0

;---------------------------------------------------------------------------
; Alpha Counter - Pinhead - Attack

[StateDef 1051]
anim = 920
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0
poweradd = 125

[State 1051, explod]
type = Explod
trigger1 = Time = 0
anim = 8000
pos = -5,-180
postype = p1
bindtime = 1
removetime = 30
supermove = 1

[State 1051, incoming!]
type = PlaySnd
trigger1 = AnimElem = 1
value = 9,2
channel = 0

[State 1051, dust]
type = Explod
trigger1 = Time = 1
anim = 918
supermove = 1
ontop = 1
removeongethit = 1

;[State 1051, movement lines]
;type = Explod
;trigger1 = Time = 10
;anim = 919
;supermove = 1
;removeongethit = 1

[State 1051, 3] 
type = VarRandom
trigger1 = 1
v = 6
range = 4

[State 1051, 4]
type = Explod
trigger1 = Time % 4 = 0 
anim = 8100 + var(6) 
postype = p1
pos = -30, -50
velocity = -3, 0
accel = 0, 0
random = 35, 85
removetime = -2
sprpriority = 3
ownpal = 1

[State 1051, 5]
type = Explod
trigger1 = Time % 6 = 0 
anim = 8104 
postype = p1
pos = -30, -50
velocity = -5, 0
accel = 0, 0
random = 25, 75
removetime = -2
sprpriority = 3
ownpal = 1

[State 1051, move fwd]
type = VelSet
trigger1 = Time = 10
x = 20

[State 1051, HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, SA
damage = 125,25
guardflag = MA
pausetime = 4,2
hitsound = S2,2
guardsound = S3,0
sparkno = S8270
guard.sparkno = S8200
sparkxy = 0,-60
animtype = Hard
ground.type = Low
ground.slidetime = 25
ground.hittime  = 12
ground.velocity = -7,-8
guard.velocity = -1
air.velocity = -6,-7
envshake.time = 4
envshake.freq = 60
envshake.ampl = -4
fall = 1
air.fall = 1
p2stateno = 1052

[State 1051, 1]
type = Explod
trigger1 = P2StateNo = 928
trigger1 = P2MoveType = H
trigger1 = MoveHit = 1
persistent = 0
anim = 8420
id = 8420
pos  =  10,-55
postype = P2
sprpriority = 1
ignorehitpause = 1
bindtime = -1
ownpal = 1

[State 1051, Energy Dissipate]
type = VarAdd
triggerall = Var(1) > 0
trigger1 = (AnimTime = 0) && MoveContact
v = 1
value = -6
ignorehitpause = 1

[State 1051, back to stance]
type = ChangeState
trigger1 = Time = 50
value = 1053
ctrl = 1
;---------------------------------------------------------------------------
; Alpha Counter - Pinhead - (move end)
[Statedef 1053]
type    = S
physics = S
ctrl = 0
anim = 923
sprpriority = 2

[State 1053, 1]  
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Alpha Counter - Pinhead - P2 Get Hit State

[Statedef 1052]
type    = A
movetype= H
physics = N
ctrl = 0

[State 1052, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 1502

[State 1052, 2]
type = PosSet
trigger1 = Time = 0
y = -30

[State 1052, 3]
type = VelSet
trigger1 = AnimElem = 1
x = -7
y = -7

[State 1052, 4]
type = VelAdd
trigger1 = 1
y = .55

[State 1052, 5]
type = SelfState
trigger1 = Pos Y >= 0
value = 5100



;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; Blanka Envy (weak)
[StateDef 1100]
anim = 950
ctrl = 0
type = A
movetype = A
physics = A
velset = 2,-10
poweradd = 130
juggle  = 5  

[State 1100, ChangeState]
type = ChangeState
trigger1 = Alive
value = 1104

;---------------------------------------------------------------------------
; Blanka Envy (medium)
[StateDef 1101]
anim = 950
ctrl = 0
type = A
movetype = A
physics = A
velset = 2.5,-11.5  ;7,-5
poweradd = 150
juggle  = 5  

[State 1101, ChangeState]
type = ChangeState
trigger1 = Alive
value = 1104

;---------------------------------------------------------------------------
; Blanka Envy (strong)
[StateDef 1102]
anim = 950
ctrl = 0
type = A
movetype = A
physics = A
velset = 3,-13
poweradd = 175
juggle  = 5  

[State 1102, ChangeState]
type = ChangeState
trigger1 = Alive
value = 1104

;---------------------------------------------------------------------------
; Blanka Envy (hitdef handler)
[StateDef 1104]
type = A
movetype = A
physics = A

[State 1104, swoosh]
type = PlaySnd
trigger1 = Time = 2
value = 0,2

[State 1104, hohaha!]
type = PlaySnd
trigger1 = Time = 0
value = 9,0
channel = 0

[State 1104, superjump sparks]
type = Explod
trigger1 = (Time % 10 = 0)
anim = 912
supermove = 1
removeongethit = 1
ownpal = 1

[State 1104, dust]
type = Explod
trigger1 = Time = 0
anim = 918
supermove = 1
ontop = 1
removeongethit = 1
ownpal = 1

[State 1104, HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, SA
damage = 125,25
guardflag = MA
pausetime = 4, 2
hitsound = S2,2
guardsound = S3,0
sparkno = S8270
guard.sparkno = S8200
sparkxy = 0,-60
animtype = Hard
ground.type = High
ground.slidetime = 25
ground.hittime  = 12
ground.velocity = -3, -6 ;ifelse(P2BodyDist X < 0, 6, -6),-4
guard.velocity = -3
air.velocity = -2, -5 ;ifelse(P2BodyDist X < 0, 5, -5),-3
envshake.time = 4
envshake.freq = 60
envshake.ampl = -4
p1stateno = 1105
fall = 1
air.fall = 1

[State 1104, Energy Dissipate]
type = VarAdd
triggerall = Var(1) > 0
trigger1 = (AnimTime = 0) && MoveContact
v = 1
value = -6
ignorehitpause = 1

;---------------------------------------------------------------------------
; Blanka Envy: p1 successfully hit
[StateDef 1105]
ctrl = 0
type = A
movetype = I
physics = A
;anim = 951

[State 1105, veladd]
type = VelAdd
trigger1 = Time = 0
x = -3
y = -3



;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; Run Deep Weak (football "fireball")
[StateDef 1200]
anim = 960
ctrl = 0
type = S
movetype = A
physics = S
poweradd = 80
juggle  = 5  

[State 1200, rundeep]
type = PlaySnd
trigger1 = Time = 0
value = 9,1
channel = 0

;[State 1200, dust]
;type = Explod
;trigger1 = Time = 0
;anim = 918
;supermove = 1
;ontop = 1
;removeongethit = 1

[State 1200, HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, NA
damage = 30,12
guardflag = MA
pausetime = 8,8
hitsound = S2,0
guardsound = S3,0
sparkno = S8210
guard.sparkno = S8200
sparkxy = 0,-80
animtype = Light
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -3
guard.velocity = -2
air.velocity = -2,-1

[State 1200, 4]
type = Helper
trigger1 = AnimElem = 4
helpertype = normal
name = "Ball"
ID = 1205 
pos = 90, -100
postype = p1
;bindtime = -1
;facing = 1
stateno = 1205 
ownpal = 1

;[State 1200, football]
;type = Projectile
;trigger1 = AnimElem = 4
;ProjID = 960
;projanim = 906
;projhitanim = 907
;;projremanim = 
;;projcancelanim = 
;;projremove = 1
;;projremovetime = -1
;velocity = 5,0
;offset = 90,-100
;attr = S, SP
;damage = 70,5
;guardflag = MA
;pausetime = 8,6
;hitsound = S2,2
;guardsound = S3,0
;sparkno = S8270
;guard.sparkno = S8200
;animtype = Hard
;ground.type = High
;ground.slidetime = 15
;ground.hittime  = 5
;ground.velocity = -8
;guard.velocity = -3
;air.velocity = -1,-1
;envshake.time = 4
;envshake.freq = 60
;envshake.ampl = -4

[State 1200, 1]
type = Width
trigger1 = Time = [19,24]
player = 20, 0

[State 1200, back to stance]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Run Deep Medium (football "fireball")
[StateDef 1201]
anim = 960
ctrl = 0
type = S
movetype = A
physics = S
poweradd = 80
juggle  = 5  

[State 1201, rundeep]
type = PlaySnd
trigger1 = Time = 0
value = 9,1
channel = 0

;[State 1201, dust]
;type = Explod
;trigger1 = Time = 0
;anim = 918
;supermove = 1
;ontop = 1
;removeongethit = 1

[State 1201, HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, NA
damage = 30,12
guardflag = MA
pausetime = 8,8
hitsound = S2,0
guardsound = S3,0
sparkno = S8210
guard.sparkno = S8200
sparkxy = 0,-80
animtype = Light
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -3
guard.velocity = -2
air.velocity = -2,-1

[State 1201, 4]
type = Helper
trigger1 = AnimElem = 4
helpertype = normal
name = "Ball"
ID = 1206 
pos = 90, -100
postype = p1
;bindtime = -1
;facing = 1
stateno = 1206 
ownpal = 1

;[State 1201, football]
;type = Projectile
;trigger1 = AnimElem = 4
;ProjID = 960
;projanim = 906
;projhitanim = 907
;;projremanim = 
;;projcancelanim = 
;;projremove = 1
;;projremovetime = -1
;velocity = 6,0
;offset = 90,-100
;attr = S, SP
;damage = 70,5
;guardflag = MA
;pausetime = 8,6
;hitsound = S2,2
;guardsound = S3,0
;sparkno = S8270
;guard.sparkno = S8200
;animtype = Hard
;ground.type = High
;ground.slidetime = 15
;ground.hittime  = 5
;ground.velocity = -8
;guard.velocity = -3
;air.velocity = -1,-1
;envshake.time = 4
;envshake.freq = 60
;envshake.ampl = -4

[State 1201, 1]
type = Width
trigger1 = Time = [19,24]
player = 20, 0

[State 1201, back to stance]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Run Deep Strong (football "fireball")
[StateDef 1202]
anim = 960
ctrl = 0
type = S
movetype = A
physics = S
poweradd = 80
juggle  = 5  

[State 1202, rundeep]
type = PlaySnd
trigger1 = Time = 0
value = 9,1
channel = 0

;[State 1202, dust]
;type = Explod
;trigger1 = Time = 0
;anim = 918
;supermove = 1
;ontop = 1
;removeongethit = 1

[State 1202, HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, NA
damage = 30,12
guardflag = MA
pausetime = 8,8
hitsound = S2,0
guardsound = S3,0
sparkno = S8210
guard.sparkno = S8200
sparkxy = 0,-80
animtype = Light
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -3
guard.velocity = -2
air.velocity = -2,-1

[State 1202, 4]
type = Helper
trigger1 = AnimElem = 4
helpertype = normal
name = "Ball"
ID = 1207 
pos = 90, -100
postype = p1
;bindtime = -1
;facing = 1
stateno = 1207 
ownpal = 1

;[State 1202, football]
;type = Projectile
;trigger1 = AnimElem = 4
;ProjID = 960
;projanim = 906
;projhitanim = 907
;;projremanim = 
;;projcancelanim = 
;;projremove = 1
;;projremovetime = -1
;velocity = 7,0
;offset = 90,-100
;attr = S, SP
;damage = 70,5
;guardflag = MA
;pausetime = 8,6
;hitsound = S2,2
;guardsound = S3,0
;sparkno = S8270
;guard.sparkno = S8200
;animtype = Hard
;ground.type = High
;ground.slidetime = 15
;ground.hittime  = 5
;ground.velocity = -8
;guard.velocity = -3
;air.velocity = -1,-1
;envshake.time = 4
;envshake.freq = 60
;envshake.ampl = -4

[State 1202, 1]
type = Width
trigger1 = Time = [19,24]
player = 20, 0

[State 1202, back to stance]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Ball: Helper - X
[Statedef 1205]
type    = A
movetype= A
anim = 906
sprpriority = 3

[state 1205, 1]
type = VelSet
trigger1 = Time = 0
x = 6

[State 1205, 2]
type = HitDef
trigger1 = Time = 0 && P2BodyDist X > 80
attr = A, SP                     
damage = floor(100 + (root,var(41))/(1+(root,Var(19)/5.0))), 6
animtype = Heavy                 
guardflag = MA                  
hitflag = MAF                  
priority = 4 + var(43), Hit               
sprpriority = 3
pausetime = 3, 3      
guard.sparkno = S8200           
sparkno = S8270                      
sparkxy = 0, 0              
hitsound = S2, 2                  
guardsound = S3, 0                
ground.type = High               
ground.slidetime = 15
ground.hittime  = 25             
ground.velocity = -5
airguard.velocity = -1     
air.type = High                  
air.velocity = -4, -2           
air.hittime = 25
envshake.time = 4
envshake.freq = 60
envshake.ampl = -4

[State 1205, 3]
type = HitDef
trigger1 = Time = 0 && P2BodyDist X <= 80
attr = A, SP                     
damage = floor(105 + (root,var(41))/(1+(root,Var(19)/5.0))), 7
animtype = Heavy                 
guardflag = MA                  
hitflag = MAF                  
priority = 4 + var(43), Hit               
sprpriority = 3
pausetime = 3, 3 
guard.sparkno = S8200                
sparkno = S8270
sparkxy = 0, 0              
hitsound = S2, 2                  
guardsound = S3, 0                
ground.type = High               
ground.slidetime = 20
ground.hittime  = 25             
ground.velocity = -10, -5
airguard.velocity = -5
air.type = High                  
air.velocity = -9, -4           
air.hittime = 25
fall = 1
air.fall = 1
envshake.time = 4
envshake.freq = 60
envshake.ampl = -4

[State 1205, 4]
type = HitBy
trigger1 = 1
value = SCA, NP,SP,HP,HA

[State 1205, 5]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AT,AP,NA,NP,SP,HP,HA,NT,HT
stateno = 1208
time = -1

[State 1205, 6]
type = ChangeState
trigger1 = MoveContact || BackEdgeDist < -45 || FrontEdgeDist < -45 ;Thanks Ixnaydk
value = 1208

;---------------------------------------------------------------------------
; Ball: Helper - Y
[Statedef 1206]
type    = A
movetype= A
anim = 906
sprpriority = 3

[state 1206, 1]
type = VelSet
trigger1 = Time = 0
x = 7

[State 1206, 2]
type = HitDef
trigger1 = Time = 0 && P2BodyDist X > 80
attr = A, SP                     
damage = floor(100 + (root,var(41))/(1+(root,Var(19)/5.0))), 6
animtype = Heavy                 
guardflag = MA                  
hitflag = MAF                  
priority = 4 + var(43), Hit               
sprpriority = 3
pausetime = 2, 2   
guard.sparkno = S8200              
sparkno = S8270
sparkxy = 0, 0              
hitsound = S2, 2                  
guardsound = S3, 0                
ground.type = High               
ground.slidetime = 15
ground.hittime  = 25             
ground.velocity = -5
airguard.velocity = -1     
air.type = High                  
air.velocity = -4, -2           
air.hittime = 25
envshake.time = 4
envshake.freq = 60
envshake.ampl = -4

[State 1206, 3]
type = HitDef
trigger1 = Time = 0 && P2BodyDist X <= 80
attr = A, SP                     
damage = floor(105 + (root,var(41))/(1+(root,Var(19)/5.0))), 7
animtype = Heavy                 
guardflag = MA                  
hitflag = MAF                  
priority = 4 + var(43), Hit               
sprpriority = 3
pausetime = 3, 3 
guard.sparkno = S8200                
sparkno = S8270
sparkxy = 0, 0              
hitsound = S2, 2                  
guardsound = S3, 0                
ground.type = High               
ground.slidetime = 20
ground.hittime  = 25             
ground.velocity = -10, -5
airguard.velocity = -5
air.type = High                  
air.velocity = -9, -4           
air.hittime = 25
fall = 1
air.fall = 1
envshake.time = 4
envshake.freq = 60
envshake.ampl = -4

[State 1206, 4]
type = HitBy
trigger1 = 1
value = SCA, NP,SP,HP,HA

[State 1206, 5]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AT,AP,NA,NP,SP,HP,HA,NT,HT
stateno = 1208
time = -1

[State 966, 6]
type = ChangeState
trigger1 = MoveContact || BackEdgeDist < -45 || FrontEdgeDist < -45 
value = 1208

;---------------------------------------------------------------------------
; Ball: Helper - Z
[Statedef 1207]
type    = A
movetype= A
anim = 906
sprpriority = 3

[state 1207, 1]
type = VelSet
trigger1 = Time = 0
x = 8

[State 1207, 2]
type = HitDef
trigger1 = Time = 0 && P2BodyDist X > 80
attr = A, SP                     
damage = floor(100 + (root,var(41))/(1+(root,Var(19)/5.0))), 6
animtype = Heavy                 
guardflag = MA                  
hitflag = MAF                  
priority = 4 + var(43), Hit               
sprpriority = 3
pausetime = 1, 1     
guard.sparkno = S8200            
sparkno = S8270
sparkxy = 0, 0              
hitsound = S2, 2                  
guardsound = S3, 0                
ground.type = High               
ground.slidetime = 15
ground.hittime  = 25             
ground.velocity = -5
airguard.velocity = -1     
air.type = High                  
air.velocity = -4, -2           
air.hittime = 25
envshake.time = 4
envshake.freq = 60
envshake.ampl = -4

[State 1207, 3]
type = HitDef
trigger1 = Time = 0 && P2BodyDist X <= 80
attr = A, SP                     
damage = floor(105 + (root,var(41))/(1+(root,Var(19)/5.0))), 7
animtype = Heavy                 
guardflag = MA                  
hitflag = MAF                  
priority = 4 + var(43), Hit               
sprpriority = 3
pausetime = 3, 3  
guard.sparkno = S8200               
sparkno = S8270
sparkxy = 0, 0              
hitsound = S2, 2                  
guardsound = S3, 0                
ground.type = High               
ground.slidetime = 20
ground.hittime  = 25             
ground.velocity = -10, -5
airguard.velocity = -5
air.type = High                  
air.velocity = -9, -4           
air.hittime = 25
fall = 1
air.fall = 1
envshake.time = 4
envshake.freq = 60
envshake.ampl = -4

[State 1207, 4]
type = HitBy
trigger1 = 1
value = SCA, NP,SP,HP,HA

[State 1207, 5]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AT,AP,NA,NP,SP,HP,HA,NT,HT
stateno = 1208
time = -1

[State 1207, 6]
type = ChangeState
trigger1 = MoveContact || BackEdgeDist < -45 || FrontEdgeDist < -45 
value = 1208

;---------------------------------------------------------------------------
; Ball: Helper (end)
[Statedef 1208]
type = A
movetype = I
physics = A
ctrl = 0
anim = 907
velset = 0, 0
sprpriority = 2

[state 1208, 1]
type = VelSet
trigger1 = Time = [0, 20]
x = -.5
y = -3.5

[state 1208, 2]
type = VelSet
trigger1 = Time = [21, 22]
x = -1
y = -.5

[state 1208, 2]
type = VelSet
trigger1 = Time = [23, 25]
x = -1
;y = 3

[State 1208, 3]
type = DestroySelf
trigger1 = AnimTime = 0



;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; Guard Push (Stand) (by Soldats)
[Statedef 1400]
type    = S
movetype= I
physics = N
poweradd= 0
velset = 10,0
ctrl = 0
anim = 1400
sprpriority = 2

[State 1400, VelMul]
type = VelMul
trigger1 = 1
x = 0.75

[State 1400, VelSet]
type = VelSet
trigger1 = Time = 10
x = 0

[State 1400, Width]
type = Width
trigger1 = 1
value = 20,0

[State 1400, NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 23

[State 1400, PlaySnd 1]
type = PlaySnd
trigger1 = Time = 0
value = 5,0 ;1,2
channel = 0

[State 1400, PlaySnd 2]
type = PlaySnd
trigger1 = Time = 0
value = 18,2

[State 1400, Push Spark]
type = Explod
trigger1 = Time = 0
anim = 1001
ID = 1001;8260
postype = p1
pos = 41,-65
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 4

[State 1400, Guard Push Helper]
type = Helper
trigger1 = Time = 0
helpertype = Normal
name = "BreakPush"
postype = P1
pos = -50,0
stateno = 1450
ownpal = 1
size.height = 200
size.ground.back = 30
size.ground.front = 30

[State 1400, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Guard Push (Helper) (by Soldats)
[Statedef 1450]
type    = S
movetype= I
physics = N
poweradd= 0
ctrl = 0
anim = 1450
sprpriority = -4

[State 1450, PlayerPush]
type = PlayerPush
trigger1 = Time >= 0
value = 1

[State 1450, VelSet 1]
type = VelSet
trigger1 = Time = [0,10]
x = 30

[State 1450, VelSet 2]
type = VelSet
trigger1 = Time = [11,13]
x = 20

[State 1450, VelSet 2]
type = VelSet
trigger1 = Time >= 14
x = 10

[State 1450, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 10

[State 1450, DestroySelf]
type = DestroySelf
trigger1 = Time >= 18

;---------------------------------------------------------------------------
; Guard Push (Crouching) (by Soldats)
[Statedef 1410]
type    = C
movetype= I
physics = N
poweradd= 0
velset = 10,0
ctrl = 0
anim = 1410
sprpriority = 2

[State 1410, VelMul]
type = VelMul
trigger1 = 1
x = 0.75

[State 1410, VelSet]
type = VelSet
trigger1 = Time = 10
x = 0

[State 1410, Width]
type = Width
trigger1 = 1
value = 20,0

[State 1410, NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 23

[State 1410, PlaySnd 1]
type = PlaySnd
trigger1 = Time = 0
value = 5,0
channel = 0

[State 1410, PlaySnd 2]
type = PlaySnd
trigger1 = Time = 0
value = 18,2

[State 1410, Push Spark]
type = Explod
trigger1 = Time = 0
anim = 1001
ID = 1001
postype = p1
pos = 40,-56
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 4

[State 1410, Guard Push Helper]
type = Helper
trigger1 = Time = 0
helpertype = Normal
name = "BreakPush"
postype = P1
pos = -50,0
stateno = 1450
ownpal = 1
size.height = 200
size.ground.back = 30
size.ground.front = 30

[State 1410, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Guard Push (Air) (by Soldats)
[Statedef 1420]
type    = A
movetype= I
physics = N
poweradd= 0
velset = 10,0
ctrl = 0
anim = 1420
sprpriority = 2

[State 1420, VelMul]
type = VelMul
trigger1 = 1
x = 0.75

[State 1420, VelSet]
type = VelSet
trigger1 = Time = 10
x = 0

[State 1420, Width]
type = Width
trigger1 = 1
value = 20,0

[State 1420, NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 23

[State 1420, PlaySnd 1]
type = PlaySnd
trigger1 = Time = 0
value = 5,0
channel = 0

[State 1420, PlaySnd 2]
type = PlaySnd
trigger1 = Time = 0
value = 18,2

[State 1420, Push Spark]
type = Explod
trigger1 = Time = 0
anim = 1001
ID = 1001
postype = p1
pos = 30,-90;84
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 4

[State 1420, Guard Push Helper]
type = Helper
trigger1 = Time = 0
helpertype = Normal
name = "BreakPush"
postype = P1
pos = -50,0
stateno = 1450
ownpal = 1
size.height = 200
size.ground.back = 30
size.ground.front = 30

[State 1420, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 53
ctrl = 1



;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; Touchdown (intro)
[StateDef 3000]
type    = A
movetype = A
physics = A
ctrl = 0
anim = 900
velset = -3,-6
juggle  = 7  

[State 3000, varset]
type = VarSet
trigger1 = Time = 0
v =  2
value = 1

[State 3000, HitBy]
type = HitBy
trigger1 = 1
value = SCA, HA,SP,HP

type = Null
trigger1 = Alive

;---------------------------------------------------------------------------
; Touchdown (running)
[StateDef 3001]
type = A
movetype = A
physics = N
ctrl = 0
anim = 901
velset = 0,0 ;7,0;6,0

[State 3001, 1]
type = EnvShake
trigger1 = AnimElem = 2
time = 140
;freq = 60
;ampl = -4
;phase = 

[State 3001, varset]
type = VarSet
trigger1 = Time = 0
v =  2
value = 0

[State 3001, 5] ;Super BG (start)
type = Explod
trigger1 = Time = 0
persistent = 0
anim = 1006
postype = left
pos = 0, 0
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = -5
supermovetime = -1
bindtime = -1
ownpal = 1

[State 3001, superpause]
type = SuperPause
trigger1 = Time = 0
time = 40
movetime = 40
anim = S1002
sound = S10,1
pos = 15,-83
darken = 1
poweradd = -1000

[State 3001, hyperbg #1] 
type = Explod
trigger1 = Time = 0
anim = 10000
ID = 10000
pos = IfElse(Facing=1, 0, 319), 40 ;Floor(ScreenPos Y - 175)
facing = Facing
postype = left
bindtime = 100
ownpal = 1
supermovetime = 40
sprpriority = -3

[State 3001, hyperportrait]
type = Explod
trigger1 = Time = 0
anim = 10001
ID = 10001
pos = IfElse(Facing=1, -54, -54), 40 ;-100,-175
postype = back;p1
bindtime = 100
supermovetime = 40
sprpriority = -2
ownpal = 1

[State 3001, hyperbg #2]
type = Explod
trigger1 = AnimElem = 2
ID = 3001
anim = 1007
pos = IfElse(Facing=1, 0, 1), 0 ;0,0
postype = back;left
bindtime = 999
removetime = 60
supermove = 40
;pausemovetime = 40
sprpriority = -5
ownpal = 1
ignorehitpause = 1

[State 3001, 5]
type = AssertSpecial
trigger1 = Time = [0, 250]
flag = nobardisplay
ignorehitpause = 1
supermovetime = 40

[State 3001, 6]
type = AssertSpecial
trigger1 = Time = [0, 40] ;40 + 60
flag = NoFG
ignorehitpause = 1
supermovetime = 40

[State 3001, 6.2]
type = AssertSpecial
trigger1 = Time = [42, 101] ;NumExplod(3001) 
flag = NoFG
ignorehitpause = 1
supermovetime = 40

[State 3001, 7]
type = VelSet
trigger1 = Time = 40
x = 7
y = 0

[State 3001, Big Dust]
type = Explod
;trigger1 = Time = 40 
trigger1 = (GameTime%8)=40
;persistent = 0
anim = 8041
postype = p1
pos = -40, 0 ;ifelse(Vel X < 0, 30, -30), 0
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 3

;[State 3001, pass over p2]
;type = PlayerPush
;trigger1 = Time > 40
;value = 0

[State 3001, HitDef]
type = HitDef
trigger1 = Time % 8 = 0 && Time < 196 ;156	
attr = S,HA
damage = 10,5
guardflag = M
pausetime = 0,8
hitsound = S2,2
guardsound = S3,0
sparkno = S8270 ;1005
guard.sparkno = S8200
sparkxy = -30,-90
animtype = Heavy
ground.type = High
air.type = Low  
;p1stateno = 3003
;p2stateno = 3010

[State 3001, HitDef]
type = HitDef
trigger1 = Time > 198 ;158
attr = S,HA
damage = 10,5
guardflag = M
pausetime = 0,5
hitsound = S2,2
guardsound = S3,0
sparkno = S8270
guard.sparkno = S8200
sparkxy = -30,-90
animtype = Heavy
ground.type = High
;ground.hittime  = 12             
;ground.velocity = -11, -5
airguard.velocity = -1     
air.type = Low                  
;air.velocity = -4, -2           
;air.hittime = 25
fall = 1
;p1stateno = 3003
;p2stateno = 3010

;[State 3001, 0]
;type = RemoveExplod
;trigger1 = MoveGuarded = 1
;ID = 3001

[State 3001, back to stance]
type = ChangeState
trigger1 = (MoveGuarded = 1) && (Time >= 200)
value = 800;0
ctrl = 1

[State 3001, width]
type = Width
trigger1 = Time = 0;< 45
;edge = 0,0
;player = 0,0
value = 25,25

[State 3001, HitBy]
type = HitBy
trigger1 = 1
value = SCA, HA,SP,HP

[State 3001, spike the ball!]
type = ChangeState
trigger1 = P2Dist X < -5 
trigger2 = Time >= 200;160 
value = 3002

;---------------------------------------------------------------------------
; Touchdown (finish, spike the ball)
[StateDef 3002]
type    = S
movetype = A
physics = S
anim = 902
velset = 0,0

[State 3002, 0]
type = AssertSpecial
trigger1 = Time = [0, 50]
flag = nobardisplay
ignorehitpause = 1
supermovetime = 40

;[State 3002, 0] ;Turn if not facing opponent
;type = Turn
;trigger1 = Time = 0

[State 3002, 0]
type = RemoveExplod
trigger1 = Time = 0
ID = 3001

[State 3002, ball]
type = Explod
trigger1 = AnimElem = 5
anim = 909
pos = 73,10
ownpal = 1

[State 3002, TOUCH-down!]
type = PlaySnd
trigger1 = AnimElem = 3
value = 10,2
channel = 0

[State 3002, hitdef]
type = HitDef
trigger1 = AnimElem = 4
attr = S,HA
hitflag = MAFD
guardflag = MA
;affectteam = E
;animtype = Light
;air.animtype = Light
;fall.animtype = Back
;priority = 4,Hit
damage = 70,0
pausetime = 8,8
guard.pausetime = 8,8
sparkno = S8270
guard.sparkno = S8200
sparkxy = 0,0
hitsound = S2,2
guardsound = S3,0
;ground.type = High
;air.type = High
;ground.slidetime = -1, 100
;guard.slidetime = 0
;ground.hittime = 0
;guard.hittime = 0
;air.hittime = 20
;guard.ctrltime = 0
;guard.dist = 
;yaccel = 0
ground.velocity = 0,4
;guard.velocity = 0,0
;air.velocity = 0,4
;airguard.velocity = 0,0
envshake.time = 40  ;envshake_time (int)
envshake.freq = 60
envshake.ampl = -8  ;-4
envshake.phase = 50
;fall.envshake.time = 
;fall.envshake.freq = 60
;fall.envshake.ampl = -4
;fall.envshake.phase = 
;attack.width = ,
p2stateno = 3010

[State 3002, shockwave]
type = Explod
trigger1 = AnimElem = 5
anim = 931
pos = 73,10
ownpal = 1

[State 3002, 2] ;Hit Ground
type = Explod
trigger1 = Time = 32
persistent = 0
anim = 8400
ID = 8400
postype = p2
pos = 0, 0
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 4
ownpal = 1
ignorehitpause = 1

[State 3002, 2] ;Hit Ground
type = Explod
trigger1 = Time = 30
persistent = 0
anim = 8401
ID = 8401
postype = p2
pos = 0, 0
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = -4
ownpal = 1
ignorehitpause = 1

[State 3002, 2] ;Ball
type = Explod
trigger1 = Time = 32
persistent = 0
anim = 905
ID = 905
postype = p2
pos = 0, 0
velocity = 1, -1
accel = 0, .2
removetime = -2
sprpriority = 4
ownpal = 1
ignorehitpause = 1

[State 3002, BUM!]
type = PlaySnd
trigger1 = AnimElem = 5
value = 8,2

[State 3002, Energy Dissipate]
type = VarAdd
triggerall = Var(1) > 0
trigger1 = (AnimTime = 0) && MoveContact
v = 1
value = -20
ignorehitpause = 1

[State 3002, HitBy]
type = HitBy
trigger1 = 1
value = SCA, HA,SP,HP

[State 3002, back to normal]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Touchdown (Push P2)
[StateDef 3003]
type    = S
movetype = A
physics = N
anim = 903

[State 3003, width]
type = Width
trigger1 = Time < 45
;edge = 0,0
;player = 0,0
value = 25,25

[State 3003, selfstate]
type = SelfState
trigger1 = Time >= 160
value = 3002

;---------------------------------------------------------------------------
; Touchdown (P2 custom state--being pushed)
[StateDef 3010]
type    = S
movetype = H
physics = N

[state 3010, 1]
type = PosSet
trigger1 = Time = 0
y = 6

[state 3010, 2]
type = PosSet
trigger1 = Time = 1
y = 0

;[State 3010, 3]
;type = EnvShake
;trigger1 = Time = 0
;time = 40
;freq = 60
;ampl = -8
;phase = 50

[State 3010, changeanim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 5030;904

;[state 3010, 1]
;type = VelSet
;trigger1 = Time = 20
;y = -7

;[State 3010, 10] 
;type = StateTypeSet
;trigger1 = Time = 30 
;statetype = A
;movetype = H
;physics = A

[State 3010, 4]
type = SelfState
trigger1 = Time > 0 ;HitFall
;trigger1 = HitOver
;trigger1 = Vel Y > 0    ;Hit ground
;trigger1 = Pos Y >= 10  ;.
value = 5110 
;ctrl = 1

;[State 3010, damage]
;type = LifeAdd
;trigger1 = (Time < 160) && (Time % 10 = 0)
;value = -10

;[State 3010, changeanim2]
;type = ChangeAnim2
;trigger1 = Time = 160
;value = 904



;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; Hyper Pinhead
[StateDef 3100]
anim = 924
ctrl = 0
type = S
movetype = A
physics = S
velset = 0,0
juggle  = 7  

[State 3100, 5] ;Super BG (start)
type = Explod
trigger1 = Time = 0
persistent = 0
anim = 1006
postype = left
pos = 0, 0
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = -5
supermovetime = -1
bindtime = -1
ownpal = 1

[State 3100, superpause]
type = SuperPause
trigger1 = Time = 0
time = 40
movetime = 40
anim = S1002
sound = S10,1
pos = 30,-50
darken = 1
poweradd = -1000

[State 3100, hyperbg #1] 
type = Explod
trigger1 = Time = 0
anim = 10000
ID = 10000
pos = IfElse(Facing=1, 0, 319), 40 ;Floor(ScreenPos Y - 175)
facing = Facing
postype = left
bindtime = 100
ownpal = 1
supermovetime = 40
sprpriority = -3

[State 3100, hyperportrait]
type = Explod
trigger1 = Time = 0
anim = 10001
ID = 10001
pos = IfElse(Facing=1, -54, -54), 40 ;-100,-175
postype = back;p1
bindtime = 100
supermovetime = 40
sprpriority = -2
ownpal = 1

[State 3100, hyperbg #2]
type = Explod
trigger1 = AnimElem = 2
ID = 3001
anim = 1007
pos = IfElse(Facing=1, 0, 1), 0 ;0,0
postype = back;left
bindtime = 999
removetime = 60
supermove = 40
;pausemovetime = 40
sprpriority = -5
ownpal = 1
ignorehitpause = 1

[State 3100, 5]
type = AssertSpecial
trigger1 = Time = [0, 190]
flag = nobardisplay
ignorehitpause = 1
supermove = 40

[State 3100, 6]
type = AssertSpecial
trigger1 = Time = [0, 40] ;40 + 60
flag = NoFG
ignorehitpause = 1
supermove = 40

[State 3100, 6.2]
type = AssertSpecial
trigger1 = NumExplod(3001) ;Time = [50, 109] 
flag = NoFG
ignorehitpause = 1
supermovetime = 40

[State 3100, incoming!]
type = PlaySnd
trigger1 = AnimElem = 2
value = 10,3
channel = 0

;[State 3100, movement lines]
;type = Explod
;trigger1 = Time = 10
;ID = 3101
;anim = 919
;supermove = 1
;removeongethit = 1

[State 3100, 1] 
type = VarRandom
trigger1 = 1
v = 6
range = 4

[State 3100, 2]
type = Explod
trigger1 = Time % 4 = 50 ;10
anim = 8100 + var(6) 
postype = p1
pos = -30, -50
velocity = -3, 0
accel = 0, 0
random = 35, 85
removetime = -2
sprpriority = 3
ownpal = 1

[State 3100, 3]
type = Explod
trigger1 = Time % 6 = 50 
anim = 8104 
postype = p1
pos = -30, -50
velocity = -5, 0
accel = 0, 0
random = 25, 75
removetime = -2
sprpriority = 3
ownpal = 1

[State 3100, ground shockwave]
type = Explod
trigger1 = Time = 50
ID = 3102
anim = 921
bindtime = 100
removetime = -1
supermove = 1
removeongethit = 1

[State 3100, front shockwave]
type = Explod
trigger1 = Time = 50
ID = 3103
anim = 922
bindtime = 100
removetime = -1
supermove = 1
removeongethit = 1
ontop = 1

;[State 3100, 1]
;type = AfterImage
;trigger1 = Time = 10
;time = 100
;;length = 20
;;palcolor = 256
;;palinvertall = 0
;palbright = 120,40,-50
;palcontrast = -2,-1,1 ;120,120,220
;;palpostbright = 0,0,0
;;paladd = 20,20,-255 ;40,-60,-150
;;color = 1
;;invertall = 1
;palmul = 128,128,256    ;.65,.65,.75
;;timegap = 1
;;framegap = 4
;trans = add1
;;ignorehitpause = 0
;;persistent = 1

[State 3100, move fwd]
type = VelSet
trigger1 = Time > 49
x = 20

[State 3100, HitDef]
type = HitDef
trigger1 = Time % 6 = 0 && Time < 135 ;95
attr = S, NA
damage = 12, 5
guardflag = MA
pausetime = 2,2
hitsound = S2,2
guardsound = S3,0
sparkno = S8270
guard.sparkno = S8200
sparkxy = 0,-60
animtype = Hard
ground.type = Low
ground.slidetime = 5
ground.hittime  = 5
ground.velocity = -2
guard.velocity = -1
air.velocity = -1,-1
envshake.time = 4
envshake.freq = 60
envshake.ampl = -4
;p1stateno = 3100

[State 3100, HitDef]
type = HitDef
trigger1 = Time > 135
attr = S, NA
damage = 17, 8
guardflag = MA
pausetime = 8,2
hitsound = S2,2
guardsound = S3,0
sparkno = S8270
guard.sparkno = S8200
sparkxy = 0,-60
animtype = Hard
ground.type = Low
ground.slidetime = 5
ground.hittime  = 5
ground.velocity = -11, -8
guard.velocity = -5 
air.velocity = -1,-1
envshake.time = 4
envshake.freq = 60
envshake.ampl = -4
fall = 1
;p1stateno = 3100

[State 3100, Energy Dissipate]
type = VarAdd
triggerall = Var(1) > 0
trigger1 = (AnimTime = 0) && MoveContact
v = 1
value = -10
ignorehitpause = 1

[State 3100, 0]
type = RemoveExplod
trigger1 = Time = 140;AnimElem = 15;AnimTime = 0
;ID = 3100

[State 3100, HitBy]
type = HitBy
trigger1 = 1
value = SCA, HA,SP,HP

[State 3100, back to stance]
type = ChangeState
trigger1 = Time = 140
value = 3101
ctrl = 1

;---------------------------------------------------------------------------
; Pinhead - (move end)
[Statedef 3101]
type    = S
physics = S
ctrl = 0
anim = 923
sprpriority = 2

[State 3101, 1]  
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1



;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; Mega Mass (intro)
[StateDef 3200]
type    = S
physics = S
ctrl = 0
anim = 929
velset = 0,0
juggle  = 7  

[State 3200, HitBy]
type = HitBy
trigger1 = 1
value = SCA, HA,SP,HP

[State 3200, let the beating begin!]
type = ChangeState
trigger1 = AnimTime = 0
value = 3201
ctrl = 1

;---------------------------------------------------------------------------
; Mega Mass (wham!)
[StateDef 3201]
type    = S
physics = S
movetype = A
ctrl = 0
anim = 930
velset = 0,0

[State 3201, HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, HA
damage = 250,125
animtype = Heavy  
guardflag = HA
pausetime = 17,17
hitsound = S2,1
guardsound = S3,0
sparkno = S8270
guard.sparkno = S8200
sparkxy = 0,-70
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -25,-9
guard.velocity = -9
air.velocity = -24,-6
fall = 1
air.fall = 1

[State 3201, 2] ;Launcher Spark
type = Explod
trigger1 = MoveHit
persistent = 0
anim = 8240
postype = p2
pos = 0, -70
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 7
ownpal = 1
supermovetime = 1000
pausemovetime = 1000
ignorehitpause = 1

[State 3201, 5] ;Super BG (start)
type = Explod
trigger1 = AnimElem = 1
persistent = 0
anim = 1006
postype = left
pos = 0, 0
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = -5
supermovetime = -1
bindtime = -1
ownpal = 1

[State 3201, superpause]
type = SuperPause
trigger1 = AnimElem = 1
time = 40
movetime = 40
anim = S1002
sound = S10,1
pos = 12,-80
darken = 1
poweradd = -1000

[State 3201, Portrait left]
type = Explod
trigger1 = Time = 0
anim = 9000
postype = left
pos = 0,0
ownpal = 1
ignorehitpause = 1
sprpriority = -1
supermovetime = 40
removeongethit = 1

[State 3201, Portrait Right]
type = Explod
trigger1 = Time = 0
anim = 9001
postype = left
pos = 0,0
ownpal = 1
ignorehitpause = 1
sprpriority = -1
supermovetime = 40
removeongethit = 1

;[State 3201, hyperbg]
;type = Explod
;trigger1 = AnimElem = 1
;anim = 10000
;ID = 10000
;pos = 0,0
;postype = left
;supermove = 20
;sprpriority = -3
;
;[State 3201, hyperportrait]
;type = Explod
;trigger1 = AnimElem = 1
;anim = 10001
;ID = 10001
;pos = 50,0
;postype = left

[State 3201, 5]
type = AssertSpecial
trigger1 = Time = [0, 100]
flag = nobardisplay
ignorehitpause = 1
supermove = 40

[State 3201, 6]
type = AssertSpecial
trigger1 = Time = [0, 40] ;40 + 60
flag = NoFG
ignorehitpause = 1
supermove = 40

[State 3201, 2] ;Dust
type = Explod
trigger1 = AnimElem = 5
persistent = 0
anim = 931
ID = 931
postype = p1
pos = 150, 0
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = -5
ownpal = 1
ignorehitpause = 1

[State 3201, 2] ;Hit Ground
type = Explod
trigger1 = AnimElem = 5
persistent = 0
anim = 8402
ID = 8402
postype = p1
pos = 150, 0
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 4
ownpal = 1
ignorehitpause = 1

[State 3201, 2] ;Hit Ground
type = Explod
trigger1 = AnimElem = 5
persistent = 0
anim = 8401
ID = 8401
postype = p1
pos = 150, 0
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = -4
ownpal = 1
ignorehitpause = 1

[State 3201, 1] ;Hole
type = Explod
trigger1 = AnimElem = 5
persistent = 0
anim = 932
postype = p1
pos = 150, 0
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = -5
supermovetime = -1
ignorehitpause = 1
;bindtime = -1
ownpal = 1

[State 3201, 2]
type = EnvShake
trigger1 = AnimElem = 5
time = 33;23
ampl = -7
freq = 60
phase = 30
supermovetime = 1000
ignorehitpause = 1

[State 3201, Ahhhrrr!]
type = PlaySnd
trigger1 = Time = 0
value = 4,1
channel = 0
supermovetime = 1000
ignorehitpause = 1

[State 3201, Grunt!]
type = PlaySnd
trigger1 = AnimElem = 4
value = 1,2
channel = 0
supermovetime = 1000
ignorehitpause = 1

[State 3201, swoosh]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0,3
supermovetime = 1000
ignorehitpause = 1

[State 3201, BUM!]
type = PlaySnd
trigger1 = AnimElem = 5
value = 8,2
channel = 1
supermovetime = 1000
ignorehitpause = 1

[State 3201, Energy Dissipate (all of it)]
type = VarAdd
trigger1 = Var(1) > 0
trigger1 = AnimElem = 5;(AnimTime = 0) && MoveContact
v = 1
value = -Var(1)
ignorehitpause = 1

[State 3201, HitBy]
type = HitBy
trigger1 = 1
value = SCA, HA,SP,HP

[State 3201, 1]
type = Width
trigger1 = Time = [46,82]
player = 30, 10

[State 3201, back to normal]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1



;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; Hyper Blanka Envy 
[StateDef 3300]
anim = 952
ctrl = 0
type = A
movetype = A
physics = A
velset = 3,-13
poweradd = 175
juggle  = 7  

[State 3300, PalFX]
type = AfterImage
trigger1 = Time = 0
length = 10
;PalBright   =  160, 240, 140
;PalContrast =  80, 120, 220
;TimeGap  = 2
FrameGap = 2
Trans = Add1
time = 10

[State 3300, HitBy]
type = HitBy
trigger1 = 1
value = SCA, HA,SP,HP

[State 3300, ChangeState]
type = ChangeState
trigger1 = Alive
value = 3301

;---------------------------------------------------------------------------
; Hyper Blanka Envy (hitdef handler)
[StateDef 3301]
type = A
movetype = A
physics = N
ctrl = 0

[State 3301, 5] ;Super BG (start)
type = Explod
trigger1 = Time = 0
persistent = 0
anim = 1006
postype = left
pos = 0, 0
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = -5
supermovetime = -1
bindtime = -1
ownpal = 1

[State 3301, superpause]
type = SuperPause
trigger1 = Time = 0
time = 40
movetime = 40
anim = S1002
sound = S10,1
pos = 15,-83
darken = 1
poweradd = -1000

[State 3301, hyperbg #1] 
type = Explod
trigger1 = Time = 0
anim = 10000
ID = 10000
pos = IfElse(Facing=1, 0, 319), 40 ;Floor(ScreenPos Y - 175)
facing = Facing
postype = left
bindtime = 100
ownpal = 1
supermovetime = 40
sprpriority = -3

[State 3301, hyperportrait]
type = Explod
trigger1 = Time = 0
anim = 10001
ID = 10001
pos = IfElse(Facing=1, -54, -54), 40 ;-100,-175
postype = back;p1
bindtime = 100
supermovetime = 40
sprpriority = -2
ownpal = 1

[State 3301, 5]
type = AssertSpecial
trigger1 = Time = [0, 300]
flag = nobardisplay
ignorehitpause = 1
supermove = 40

[State 3301, 6]
type = AssertSpecial
trigger1 = Time = [0, 40] ;40 + 60
flag = NoFG
ignorehitpause = 1
supermove = 40

[State 3301, PalFX]
type = AfterImage
trigger1 = Time = 40
length = 10
;PalBright   =  160, 240, 140
;PalContrast =  80, 120, 220
;TimeGap  = 2
FrameGap = 2
Trans = Add1
time = 75

[State 3301, 0] 
type = StateTypeSet
trigger1 = Time = 40 
statetype = A
movetype = A
physics = A

[State 3301, 0]
type = VelSet
trigger1 = Time = 1
x = 0
y = 0

[State 3301, 1]
type = VelSet
trigger1 = Time = 40
x = 3
y = -13

[State 3301, swoosh]
type = PlaySnd
trigger1 = Time = 42
value = 0,2

[State 3301, hohaha!]
type = PlaySnd
trigger1 = Time = 40
value = 9,0
channel = 0

[State 3301, superjump sparks]
type = Explod
trigger1 = (Time % 10 = 40)
anim = 912
supermove = 1
removeongethit = 1
ownpal = 1

[State 3301, dust]
type = Explod
trigger1 = Time = 0
anim = 918
supermove = 1
ontop = 1
removeongethit = 1
ownpal = 1

[State 3301, HitDef]
type = HitDef
trigger1 = Time % 4 = 0
attr = S, HA
damage = 10,5
guardflag = MA
pausetime = 2, 2
hitsound = S2,2
guardsound = S3,0
sparkno = S8270
guard.sparkno = S8200
sparkxy = 0,-60
animtype = Hard
ground.type = High
ground.slidetime = 25
ground.hittime  = 12
ground.velocity = -2, 3 ;ifelse(P2BodyDist X < 0, 6, -6),-4
guard.velocity = -3
air.velocity = -1, 1 ;ifelse(P2BodyDist X < 0, 5, -5),-3
envshake.time = 4
envshake.freq = 60
envshake.ampl = -4
;p1stateno = 1105
;fall = 0
;air.fall = 1

[State 3301, Energy Dissipate]
type = VarAdd
triggerall = Var(1) > 0
trigger1 = (AnimTime = 0) && MoveContact
v = 1
value = -6
ignorehitpause = 1

[State 3301, HitBy]
type = HitBy
trigger1 = 1
value = SCA, HA,SP,HP

[State 3301, 1]
type = ChangeState
triggerall = Time > 40
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 3302

;---------------------------------------------------------------------------
; Hyper Blanka Envy (hitdef handler)
[StateDef 3302]
type = S
movetype = A
physics = S
anim = 950
ctrl = 0
;velset = -5, 0

[State 3302, 5]
type = AssertSpecial
trigger1 = Time = [0, 70]
flag = nobardisplay
ignorehitpause = 1
supermove = 40

[State 3302, PalFX]
type = AfterImage
trigger1 = Time = 0
length = 10
;PalBright   =  160, 240, 140
;PalContrast =  80, 120, 220
;TimeGap  = 2
FrameGap = 2
Trans = Add1
time = 68

[State 3302, envshake]
type = EnvShake
trigger1 = Time = 0
time = 10

[State 3302, Back Dust]
type = Explod
trigger1 = Time = 4
persistent = 0
anim = 918
postype = p1
pos = 0, 0
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 4
ownpal = 1

[State 3302, 2]
type = VelSet
trigger1 = Time = [5, 69];3
x = 7

[State 3302, swoosh]
type = PlaySnd
trigger1 = Time = 2
value = 0,2

[State 3302, hohaha!]
type = PlaySnd
trigger1 = Time = 0
value = 9,0
channel = 0

[State 3302, superjump sparks]
type = Explod
trigger1 = (Time % 10 = 0)
anim = 912
supermove = 1
removeongethit = 1
ownpal = 1

;[State 3302, dust]
;type = Explod
;trigger1 = Time = 0
;anim = 918
;supermove = 1
;ontop = 1
;removeongethit = 1;
;ownpal = 1

[State 3302, HitDef]
type = HitDef
trigger1 = Time % 6 = 0 && Time <= 68
attr = S, HA
damage = 12, 5
guardflag = MA
pausetime = 2, 2
hitsound = S2,2
guardsound = S3,0
sparkno = S8270
guard.sparkno = S8200
sparkxy = 0,-60
animtype = Hard
ground.type = High
ground.slidetime = 25
ground.hittime  = 12
ground.velocity = -1 ;ifelse(P2BodyDist X < 0, 6, -6),-4
guard.velocity = -3
air.velocity = -1 ;ifelse(P2BodyDist X < 0, 5, -5),-3
envshake.time = 4
envshake.freq = 60
envshake.ampl = -4
;p1stateno = 1105
;fall = 0
;air.fall = 1

[State 3302, HitDef]
type = HitDef
trigger1 = Time > 68
attr = S, HA
damage = 17,8
guardflag = MA
pausetime = 2, 2
hitsound = S2,2
guardsound = S3,0
sparkno = S8270
guard.sparkno = S8200
sparkxy = 0,-60
animtype = Hard
ground.type = High
ground.slidetime = 25
ground.hittime  = 12
ground.velocity = -10,-6 ;ifelse(P2BodyDist X < 0, 6, -6),-4
guard.velocity = -3
air.velocity = -9,-5 ;ifelse(P2BodyDist X < 0, 5, -5),-3
envshake.time = 4
envshake.freq = 60
envshake.ampl = -4
;p1stateno = 1105
fall = 1
air.fall = 1

[State 3302, Energy Dissipate]
type = VarAdd
triggerall = Var(1) > 0
trigger1 = (AnimTime = 0) && MoveContact
v = 1
value = -6
ignorehitpause = 1

[State 3302, HitBy]
type = HitBy
trigger1 = 1
value = SCA, HA,SP,HP

[State 3302, 1]
type = ChangeState
trigger1 = Time = 70
;trigger1 = Vel Y > 0
;trigger1 = Pos Y >= 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; Finish Hit Explod (based on FlowaGirl and Ethan Lives codes)
[Statedef 8900]
type = S
movetype = I
physics = N
anim = 8930

;[State 8900, 1]
;type = Pause
;trigger1 = (!Time)
;time = 12
;movetime = 12

[State 8900, 1]
type = EnvShake
trigger1 = (!Time)
time = 12
freq = 120;10
ampl = -3;2
phase = 90

[State 8900, 2]
type = Explod
triggerall = (NumExplod(8900) < 1)
trigger1 = Time = 0
persistent = 0
anim = 8900
ID = 8900
postype = left
pos = 0, 0
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = -4
bindtime = -1
ontop = 1
ownpal = 1
supermovetime = 1000
pausemovetime = 1000
ignorehitpause = 1

[State 8900, 3]
type = PlaySnd
trigger1 = (NumExplod(8900) != 0)
value = 30, 0
persistent = 0
supermovetime = 1000
pausemovetime = 1000
ignorehitpause = 1



;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;Author: FlowaGirl
;flowergirl@cutey.com
;http://blargh.i-xcell.com
;
; Super Finish BG
[Statedef 8920]
type = A
movetype = I
physics = N
anim = 8930

;[State 8920, 1]
;type = Pause
;trigger1 = (!Time)
;time = 12
;movetime = 12

[State 8920, 1]
type = EnvShake
trigger1 = (!Time)
time = 12
freq = 120;10
ampl = -3;2
phase = 90

[State 8920, 2] ;Super Finish BG
type = Explod
triggerall = (NumExplod(1000) < 1)
trigger1 = Time = 0
persistent = 0
anim = 1000
ID = 1000
postype = left
pos = 0, 0
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = -4
bindtime = -1
ownpal = 1
ignorehitpause = 1

[State 8920, 3]
type = AssertSpecial
trigger1 = (NumExplod(1000) != 0)
flag = NoBG
flag2 = NoFG
;flag3 = NoMusic

[State 8920, 4]
type = PlaySnd
trigger1 = (NumExplod(1000) != 0)
value = 30, 1
persistent = 0
supermovetime = 1000
pausemovetime = 1000
ignorehitpause = 1



;-------------------------------------------------------------------------
;-------------------------------------------------------------------------
; Super Armor - Em P (by {_Carnificina_})
[Statedef 1061]
type = S
movetype = A
physics = S
;ctrl = 0

;[State 1061, 5]
;type = ChangeAnim
;trigger1 = time = 0
;value = 0

[State 1061, 1]
type = NotHitBy
trigger1 = Time <= 4
value = SCA
time = 1

[State 1061, 2]
type = velset
trigger1 = time <= 5
x = -1;-3

[State 1061, 0]
type = PosSet
trigger1 = Pos Y != 0
y = 0

[State 1061, 4]
type = ChangeState
trigger1 = time > 0
trigger1 = Pos Y = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------
; Super Armor - Abaixado (by {_Carnificina_})
[Statedef 1062]
type = C
movetype = H
physics = C
;ctrl = 0
;anim = 11

;[State 1062, 5]
;type = ChangeAnim
;trigger1 = time = 0
;value = anim;11

[State 1062, 1]
type = NotHitBy
trigger1 = Time <= 4
value = SCA
time = 1

[State 1062, 2]
type = velset
trigger1 = time <= 5
x = -1;-3

[State 1062, 0]
type = PosSet
trigger1 = Pos Y != 0
y = 0

[State 1062, 4]
type = ChangeState
trigger1 = time >= 6
trigger1 = Pos Y = 0
value = 11
ctrl = 1

;-------------------------------------------------------------------------
; Super Armor - No ar (by {_Carnificina_})
[Statedef 1063]
type = A
movetype = H
physics = A
;ctrl = 0

;[State 1063, 5]
;type = ChangeAnim
;trigger1 = time = 0
;value = anim

[State 1063, 1]
type = NotHitBy
trigger1 = Time <= 4
value = SCA
time = 1

[State 1063, 2]
type = velset
trigger1 = time <= 5
x = -1;-3

[State 1063, 4]
type = CtrlSet
trigger1 = time >= 6
value = 1



;---------------------------------------------------------------------------
; Override common states (use same number to override) :
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; Stand to Crouch
[Statedef 10]
type    = C
physics = C
anim = 10

[State 10, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 10, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 10, 3]
type = VelMul
trigger1 = Time = 0
x = .75

[State 10, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11


;---------------------------------------------------------------------------
; Jump Start
[Statedef 40]
type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 40, 3]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = prevstateno = 100 ;RUN_FWD
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;; ----- (customization) -----
;[State 40: VarSet]
;type = VarSet
;trigger1 = (!Time)
;var(0) = 0

;[State 40: VarSet]
;type = VarSet
;triggerall = (Var(0) = 0)
;trigger1 = ((PrevStateNo = 100) && (Command = "holdfwd")) || ((PrevStateNo = 105) && (Command = ;"holdback")) || (Command = "super_jump_up")
;var(0) = 1
;; --- (end customization) ---



;---------------------------------------------------------------------------
; Jump Up
[Statedef 50]
type    = A
physics = A

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

;; ----- (customization) -----
;[State 50: VelAdd]
;type = VelAdd
;trigger1 = (!Time) && (Var(0) = 1)
;x = IfElse((Vel X) = 0,0,IfElse((Vel X) < 0,-4,4))
;y = -6  ;-3

;[State 50: AfterImage]
;type = AfterImage
;trigger1 = (!Time) && (Var(0) = 1) ;&& (Vel X != 0))
;time = 15
;timegap = 4
;framegap = 1
;length = 10
;paladd = 0, 0, 0
;palmul = .50, .50, .50
;palcontrast = 110,110,110
;trans = add
;persistent = 0

;[State 954, superjump sparks]
;type = Explod
;trigger1 = (Time % 4 = 0) && (Var(0) = 1) && (Vel Y < 0)
;anim = 912
;supermove = 1
;random = 20,20
;;ontop = 1
;removeongethit = 1

;[State 50, PlaySnd]
;type = PlaySnd
;trigger1 = (!Time) && (Var(0) = 1) ;&& (Vel X != 0))
;value = S8, 0
;; --- (end customization) ---


;;---------------------------------------------------------------------------
;; Jump Down (empty state for compatibility)
;[Statedef 51]
;type    = A
;physics = A

;[State 51, 1]
;type = Null
;trigger1 = 1

;; ----- (customization) -----
;[State 51, changeanim]
;type = ChangeAnim
;trigger1 = Time = 0
;value = 51
;; --- (end customization) ---

;---------------------------------------------------------------------------
; Jump Land
[Statedef 52]
type    = S
physics = S
ctrl = 0
anim = 47

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 3]
type = CtrlSet
trigger1 = Time = 3
value = 1

[State 52, 4]
type = Turn
triggerall = P2BodyDist X < 0
trigger1 = Command = "holdup" || Command = "holddown" 
;trigger3 = Command = "holdfwd" || Command = "holdback" 
trigger2 = Command = "holdup" && Command = "holdfwd" || Command = "holdback"

[State 52, 5]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = AnimElem = 2 && Command = "holddown"
value = ifelse(Command = "holddown", 11, 0);0
ctrl = 1

; ----- (customization) -----
[State 52, envshake]
type = EnvShake
trigger1 = Time = 0
time = 10

[State 3000, on to the move!]
type = ChangeState
trigger1 = Var(2) = 1
value = 3001 ;Thouchdown super - running
ctrl = 0

[State 3000, on to the move 2!]
type = ChangeState
trigger1 = PrevStateNo = 3301
value = 3302 ;Hyper Blanka Envy super - 2nd Part
ctrl = 0
; --- (end customization) ---


;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; Jump Fall (after a move)
[Statedef 53]
type    = A
physics = A
anim = 53

[state 53, 1]
type = VelAdd
triggerall = PrevStateno != 60
trigger1 = Time = 0
y = -0.08;-0.05


;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; Hop Forward (start)
[Statedef 100]
type    = A
physics = N
ctrl = 0
anim = 100
sprpriority = 1

[State 100, 1]
type = VelSet
trigger1 = Time = 0
x = const(velocity.run.fwd.x)   
y = const(velocity.run.fwd.y)  

[state 100, 2]
type = VelAdd
trigger1 = Time >= 1
y = .47

[State 100, 3] 
type = VarRandom
trigger1 = 1
v = 6
range = 4

[State 100, 4]
type = Explod
trigger1 = Time % 2 = 0 
anim = 8100 + var(6) 
postype = p1
pos = -30, -50
velocity = -3, 0
accel = 0, 0
random = 35, 90
removetime = -2
sprpriority = 3
ownpal = 1

[State 100, 5]
type = Explod
trigger1 = Time % 4 = 0 
anim = 8104 
postype = p1
pos = -30, -50
velocity = -5, 0
accel = 0, 0
random = 25, 80
removetime = -2
sprpriority = 3
ownpal = 1

[State 100, 6] 
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

;[State 100, 7]
;type = PlaySnd
;trigger1 = Time = 1
;value = 3, 0

[State 100, 8] ;by Hsieh
type = PosSet
trigger1 = command = "a"
trigger2 = command = "b"
trigger3 = command = "c"
trigger4 = command = "x"
trigger5 = command = "y"
trigger6 = command = "z"
trigger7 = command = "holdup"
trigger8 = command = "holddown"
y = 0

[State 100, 9] ;cancel with light punch
type = ChangeState
trigger1 = Command = "x"
value = 200

[State 100, 10] ;cancel with medium punch
type = ChangeState
trigger1 = Command = "y"
value = 210

[State 100, 11] ;cancel with strong punch
type = ChangeState
trigger1 = Command = "z"
value = 220

[State 100, 12] ;cancel with light kick
type = ChangeState
trigger1 = Command = "a"
value = 230

[State 100, 13] ;cancel with medium kick
type = ChangeState
trigger1 = Command = "b"
value = 240

[State 100, 14] ;cancel with strong kick
type = ChangeState
trigger1 = Command = "c"
value = 250

[State 100, 15] ;cancel with jumping
type = ChangeState
trigger1 = Command = "holdup"
value = 40
ctrl = 1

[State 100, 16] ;cancel with crouching
type = ChangeState
trigger1 = Command = "holddown"
value = 10
ctrl = 1

[State 100, 17]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52;101

;---------------------------------------------------------------------------
; Hop Forward (land) 
[Statedef 101]
type    = S
physics = S
ctrl = 0
anim = 47

[State 101, 1] ;brake 
type = VelMul
trigger1 = AnimElem = 1
x = .01

[State 101, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 101, 3]
type = PosSet
trigger1 = Time = 0
y = 0

[State 101, 4]
type = MakeDust
trigger1 = Time = 2
pos = -5,-2
spacing = 1

[State 101, envshake]
type = EnvShake
trigger1 = Time = 0
time = 10

[State 101, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; Hop Backward (start)
[Statedef 105]
type    = A
physics = N
ctrl = 0
anim = 105
sprpriority = 1

[State 105, 1]
type = VelSet
trigger1 = Time = 0
x = const(velocity.run.back.x)
y = const(velocity.run.back.y)

[state 105, 2]
type = VelAdd
trigger1 = Time >= 1
y = .48

[State 105, 3] 
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

;[State 105, 4]
;type = PlaySnd
;trigger1 = Time = 1
;value = 3, 1

[State 105, 5] ;by Hsieh
type = PosSet
trigger1 = command = "a"
trigger2 = command = "b"
trigger3 = command = "c"
trigger4 = command = "x"
trigger5 = command = "y"
trigger6 = command = "z"
trigger7 = command = "holdup"
trigger8 = command = "holddown"
y = 0

[State 105, 6] ;cancel with light punch
type = ChangeState
trigger1 = Command = "x"
value = 200

[State 105, 7] ;cancel with medium punch
type = ChangeState
trigger1 = Command = "y"
value = 210

[State 105, 8] ;cancel with strong punch
type = ChangeState
trigger1 = Command = "z"
value = 220

[State 105, 9] ;cancel with light kick
type = ChangeState
trigger1 = Command = "a"
value = 230

[State 105, 10] ;cancel with medium kick
type = ChangeState
trigger1 = Command = "b"
value = 240

[State 105, 11] ;cancel with strong kick
type = ChangeState
trigger1 = Command = "c"
value = 250

[State 105, 12] ;cancel with jumping
type = ChangeState
trigger1 = Command = "holdup"
value = 40
ctrl = 1

[State 105, 13] ;cancel with crouching
type = ChangeState
trigger1 = Command = "holddown"
value = 10
ctrl = 1

[State 105, 14]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52;106

;---------------------------------------------------------------------------
; Hop Backward (land) 
[Statedef 106]
type    = S
physics = S
ctrl = 0
anim = 47

[State 106, 1] ;brake 
type = VelMul
trigger1 = AnimElem = 1
x = .01

[State 106, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 106, 3]
type = PosSet
trigger1 = Time = 0
y = 0

[State 106, 4]
type = MakeDust
trigger1 = Time = 2
pos = -5,-2
spacing = 1

[State 106, envshake]
type = EnvShake
trigger1 = Time = 0
time = 10

[State 106, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; Super Jump (start)
[Statedef 60]
type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State 60, VelAdd]; by GGN
type = VelAdd
triggerall = Vel X >= -2
trigger1 = command = "holdback"
trigger1 = Anim != 43
x = -0.1

[State 60, VelAdd]; by GGN
type = VelAdd
triggerall = Vel X <= 2.5
trigger1 = command = "holdfwd"
trigger1 = Anim != 42
x = 0.25

[State 60, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 60, 2]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 60, 3]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 60, 4]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 60, 5]
type = PlaySnd
trigger1 = Time = 1
value = 8, 0

[State 60, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 61
ctrl = 1

;---------------------------------------------------------------------------
; Super Jump (up)
[Statedef 61]
type    = A
physics = A
anim = 60 ;ifelse((Vel X) = 0, 60, ifelse((Vel X) > 0, 61, 62))
ctrl = 1

[State 61, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[state 61, 2]
type = VelSet
trigger1 = Time = 0
y = -15

[state 61, 3]
type = VelAdd
trigger1 = Time = 1
y = -.105 ;.102

[State 61, 4]
type = VelAdd
trigger1 = Time >= 5 
trigger1 = Command = "holdback" 
trigger1 = Vel X > -1.8
x = -0.18

[State 61, 5]
type = VelAdd
trigger1 = Time >= 5 
trigger1 = Command = "holdfwd" 
trigger1 = Vel X < 1.8
x = 0.18

[State 61, Super Jump Sparks]
type = Explod
trigger1 = time % 4 = 0 && Time < 25
anim = 912
postype = p1
;pos = 0,50
;bindtime = 25
;removetime = 25
random = 20,20
ownpal = 1
sprpriority = -2
;removeongethit = 1
ignorehitpause = 1
ownpal = 1

[state 61, 10]
type = VelAdd
trigger1 = AnimElem = 15
y = 0.05

[State 61, Variavelzinha muito til]; from GGN's Ryu (by Soldats)
type = VarSet
trigger1 = Time = 0
v = 12
value = 1

[State 61, 11]
type = Turn
trigger1 = P2Dist X < -5 ;0

;---------------------------------------------------------------------------
;Super Jump opponent locator
[Statedef 910]
type    = A
physics = N
ctrl = 0
sprpriority = 2

[State 910, p1/p2 indicator]
type = ChangeAnim
trigger1 = IsHelper(0)
value = 910

[State 910, destroyself]
type = DestroySelf
triggerall = IsHelper(0)
trigger1 = RootDist Y > 0



;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; SGUARDHIT (shaking)
[Statedef 150]
type    = S
movetype= H
physics = N
velset = 0,0

[State 150, 1]
type = ChangeAnim
trigger1 = 1
value = 150

[State 150, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")

[State 150, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 150, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 150, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 3

; ----- (customization) -----
[State 150, Energy buildup]
type = VarAdd
trigger1 = Time = 0
trigger1 = Var(1) < 60
v = 1
value = 1
ignorehitpause = 1
; ----- (end customization) -----

;---------------------------------------------------------------------------
; CGUARDHIT (shaking)
[Statedef 152]
type    = C
movetype= H
physics = N
velset = 0,0

[State 152, 1]
type = ChangeAnim
trigger1 = 1
value = 151

[State 152, 3]
type = ChangeState
trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")

[State 152, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 152, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 152, 4]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

; ----- (customization) -----
[State 152, Energy buildup]
type = VarAdd
trigger1 = Time = 0
trigger1 = Var(1) < 60
v = 1
value = 1
ignorehitpause = 1
; ----- (end customization) -----

;---------------------------------------------------------------------------
; AGUARDHIT (shaking)
[Statedef 154]
type    = A
movetype= H
physics = N
velset = 0,0

[State 154, 1]
type = ChangeAnim
trigger1 = 1
value = 152

[State 154, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 155 ;AGUARDHIT2

[State 154, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

; ----- (customization) -----
[State 154, Energy buildup]
type = VarAdd
trigger1 = Time = 0
trigger1 = Var(1) < 60
v = 1
value = 1
ignorehitpause = 1
; ----- (end customization) -----



;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; HITG_SHAKE (with Super Armor code by {_Carnificina_})
[Statedef 5000]
type = S
movetype= H
physics = N
velset = 0,0

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
;triggerall = NumEnemy > 0  
;trigger1 = (Var(1) < 20)
;trigger1 = GetHitVar(hitcount) >=2;3
triggerall = GetHitVar(animtype) != [3,5]
trigger1 = var(10) = 1 ;|| var(10) = 3
trigger2 = var(10) = 2 ;|| var(10) = 4
;trigger3 = var(10) = 4 
;trigger4 = var(10) = 5 
;trigger1 = enemyNear, hitdefattr = SCA, NA,NP ;SA,SP,HA,HP
;trigger2 = (Var(1) >= 20) && (Var(1) < 40)
;trigger2 = GetHitVar(hitcount) >=3
;trigger2 = GetHitVar(animtype) != [3,5]
;trigger2 = enemyNear, hitdefattr = SCA, NA,NP ;SA,SP,HA,HP
;trigger3 = (Var(1) >= 40) && (Var(1) < 60)
;trigger3 = GetHitVar(hitcount) >=4
;trigger3 = GetHitVar(animtype) != [3,5]
;trigger3 = enemyNear, hitdefattr = SCA, NA,NP ;SA,SP,HA,HP
;trigger4 = (Var(1) = 60)
;trigger4 = GetHitVar(hitcount) >=5
;trigger4 = GetHitVar(animtype) != [3,5]
;trigger4 = enemyNear, hitdefattr = SCA, NA,NP ;SA,SP,HA,HP
;trigger5 = Time = 0
;trigger5 = GetHitVar(animtype) != [3,5]
;trigger5 = enemyNear, hitdefattr = SCA, SA,SP,HA,HP 
;;trigger6 = NumHelper > 0 
;;trigger6 = Time = 0
;;trigger6 = GetHitVar(animtype) != [3,5]
;;trigger6 = Helper, hitdefattr = SCA, SA,SP,HA,HP ;MoveHit
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

;[State 5000, 1.2] ;Anim for HIT_LIGHT to HIT_HARD
;type = ChangeAnim
;triggerall = NumHelper > 0 
;trigger1 = (Var(1) < 20)
;trigger1 = GetHitVar(hitcount) >=2;3
;trigger1 = GetHitVar(animtype) != [3,5]
;trigger1 = Helper, MoveHit;hitdefattr = SCA, NA,NP;SA,SP,HA,HP
;trigger2 = (Var(1) >= 20) && (Var(1) < 40)
;trigger2 = GetHitVar(hitcount) >=3
;trigger2 = GetHitVar(animtype) != [3,5]
;trigger2 = Helper, MoveHit;hitdefattr = SCA, NA,NP;SA,SP,HA,HP
;trigger3 = (Var(1) >= 40) && (Var(1) < 60)
;trigger3 = GetHitVar(hitcount) >=4
;trigger3 = GetHitVar(animtype) != [3,5]
;trigger3 = Helper, MoveHit;hitdefattr = SCA, NA,NP;SA,SP,HA,HP
;trigger4 = (Var(1) = 60)
;trigger4 = GetHitVar(hitcount) >=5
;trigger4 = GetHitVar(animtype) != [3,5]
;trigger4 = Helper, MoveHit;hitdefattr = SCA, NA,NP;SA,SP,HA,HP
;trigger5 = Time = 0
;trigger5 = GetHitVar(animtype) != [3,5]
;trigger5 = Helper, MoveHit;hitdefattr = SCA, SA,SP,HA,HP
;value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

;trigger1 = (Var(1) < 10) ;cinetic lv 0
;trigger1 = (Var(1) >= 10) && (Var(1) < 20) ;cinetic lv 1
;trigger1 = (Var(1) >= 20) && (Var(1) < 30) ;cinetic lv 2
;trigger1 = (Var(1) = 30) ;cinetic lv 3

;[State 5007, 7]
;type = HitOverride
;triggerall = GetHitVar(animtype) = [3,5]
;trigger1 = GetHitVar(hitcount) < 3
;;trigger1 = 1;enemyNear, hitdefattr = SCA, NA, NP
;;trigger2 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
;attr = SCA, NA,NP  
;stateno = 0
;time = -1
;ctrl = 1

;[State 5007, 7]
;type = HitOverride
;triggerall = PrevStateNo = [3000, 4999]
;trigger1 = 1 ;enemyNear, hitdefattr = SCA, NA, NP
;attr = SCA, AA,AT,AP,NA,SP,NP,SP,NT,HT 
;stateno = -1
;time = -1

[State 5000, 2.1] ;Anim for HIT_BACK
type = ChangeAnim
;triggerall = NumEnemy > 0
;trigger1 = (Var(1) < 20)
;trigger1 = GetHitVar(hitcount) >=2
triggerall = GetHitVar(animtype) = [3,5]
trigger1 = var(10) = 1 ;|| var(10) = 3
trigger2 = var(10) = 2 ;|| var(10) = 4
;trigger3 = var(10) = 4 
;trigger4 = var(10) = 5 
;trigger1 = enemyNear, hitdefattr = SCA, NA,NP ;SA,SP,HA,HP
;trigger2 = (Var(1) >= 20) && (Var(1) < 40)
;trigger2 = GetHitVar(hitcount) >=3
;trigger2 = GetHitVar(animtype) = [3,5]
;trigger2 = enemyNear, hitdefattr = SCA, NA,NP ;SA,SP,HA,HP
;trigger3 = (Var(1) >= 40) && (Var(1) < 60)
;trigger3 = GetHitVar(hitcount) >=4
;trigger3 = GetHitVar(animtype) = [3,5]
;trigger3 = enemyNear, hitdefattr = SCA, NA,NP ;SA,SP,HA,HP
;trigger4 = (Var(1) = 60)
;trigger4 = GetHitVar(hitcount) >=5
;trigger4 = GetHitVar(animtype) = [3,5]
;trigger4 = enemyNear, hitdefattr = SCA, NA,NP ;SA,SP,HA,HP
;trigger5 = time = 0
;trigger5 = GetHitVar(animtype) = [3,5]
;trigger5 = enemyNear, hitdefattr = SCA, SA,SP,HA,HP 
value = 5030

;[State 5000, 2.2] ;Anim for HIT_BACK
;type = ChangeAnim
;triggerall = NumHelper > 0 
;trigger1 = (Var(1) < 20)
;trigger1 = GetHitVar(hitcount) >=2
;trigger1 = GetHitVar(animtype) = [3,5]
;trigger1 = Helper, MoveHit;hitdefattr = SCA, NA,NP;SA,SP,HA,HP
;trigger2 = (Var(1) >= 20) && (Var(1) < 40)
;trigger2 = GetHitVar(hitcount) >=3
;trigger2 = GetHitVar(animtype) = [3,5]
;trigger2 = Helper, MoveHit;hitdefattr = SCA, NA,NP;SA,SP,HA,HP
;trigger3 = (Var(1) >= 40) && (Var(1) < 60)
;trigger3 = GetHitVar(hitcount) >=4
;trigger3 = GetHitVar(animtype) = [3,5]
;trigger3 = Helper, MoveHit;hitdefattr = SCA, NA,NP;SA,SP,HA,HP
;trigger4 = (Var(1) = 60)
;trigger4 = GetHitVar(hitcount) >=5
;trigger4 = GetHitVar(animtype) = [3,5]
;trigger4 = Helper, MoveHit;hitdefattr = SCA, NA,NP;SA,SP,HA,HP
;trigger5 = time = 0
;trigger5 = GetHitVar(animtype) = [3,5]
;trigger5 = Helper, MoveHit;hitdefattr = SCA, SA,SP,HA,HP
;value = 5030

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
;triggerall = NumEnemy > 0 
;trigger1 = (Var(1) < 20)
;trigger1 = GetHitVar(hitcount) >=2
triggerall = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
trigger1 = var(10) = 1 ;|| var(10) = 3
trigger2 = var(10) = 2 ;|| var(10) = 4
;trigger3 = var(10) = 4 
;trigger4 = var(10) = 5 
;trigger1 = enemyNear, hitdefattr = SCA, NA,NP ;SA,SP,HA,HP
;trigger2 = (Var(1) >= 20) && (Var(1) < 40)
;trigger2 = GetHitVar(hitcount) >=3
;trigger2 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
;trigger2 = enemyNear, hitdefattr = SCA, NA,NP ;SA,SP,HA,HP
;trigger3 = (Var(1) >= 40) && (Var(1) < 60)
;trigger3 = GetHitVar(hitcount) >=4
;trigger3 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
;trigger3 = enemyNear, hitdefattr = SCA, NA,NP ;SA,SP,HA,HP
;trigger4 = (Var(1) = 60)
;trigger4 = GetHitVar(hitcount) >=5
;trigger4 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
;trigger4 = enemyNear, hitdefattr = SCA, NA,NP ;SA,SP,HA,HP
;trigger5 = time = 0
;trigger5 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
;trigger5 = enemyNear, hitdefattr = SCA, SA,SP,HA,HP 
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

;[State 5000, 3.2] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
;type = ChangeAnim
;triggerall = NumHelper > 0  
;trigger1 = (Var(1) < 20)
;trigger1 = GetHitVar(hitcount) >=2
;trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
;trigger1 = Helper, MoveHit;hitdefattr = SCA, NA,NP;SA,SP,HA,HP
;trigger2 = (Var(1) >= 20) && (Var(1) < 40)
;trigger2 = GetHitVar(hitcount) >=3
;trigger2 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
;trigger2 = Helper, MoveHit;hitdefattr = SCA, NA,NP;SA,SP,HA,HP
;trigger3 = (Var(1) >= 40) && (Var(1) < 60)
;trigger3 = GetHitVar(hitcount) >=4
;trigger3 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
;trigger3 = Helper, MoveHit;hitdefattr = SCA, NA,NP;SA,SP,HA,HP
;trigger4 = (Var(1) = 60)
;trigger4 = GetHitVar(hitcount) >=5
;trigger4 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
;trigger4 = Helper, MoveHit;hitdefattr = SCA, NA,NP;SA,SP,HA,HP
;trigger5 = time = 0
;trigger5 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
;trigger5 = Helper, MoveHit;hitdefattr = SCA, SA,SP,HA,HP
;value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 5.1] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = (Var(1) < 20)
trigger1 = GetHitVar(hitcount) =2;3
trigger1 = GetHitVar(yvel) != 0 && GetHitVar(fall)
trigger2 = Pos Y != 0
value = a

[State 5000, 5.2] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = (Var(1) >= 20) && (Var(1) < 40)
trigger1 = GetHitVar(hitcount) =3
trigger1 = GetHitVar(yvel) != 0 && GetHitVar(fall)
trigger2 = Pos Y != 0
value = a

[State 5000, 5.3] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = (Var(1) >= 40) && (Var(1) < 60)
trigger1 = GetHitVar(hitcount) =4
trigger1 = GetHitVar(yvel) != 0 && GetHitVar(fall)
trigger2 = Pos Y != 0
value = a

[State 5000, 5.4] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = (Var(1) = 60)
trigger1 = GetHitVar(hitcount) =5
trigger1 = GetHitVar(yvel) != 0 && GetHitVar(fall)
trigger2 = Pos Y != 0
value = a

[State 5000, 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 5001 ;HITG_SLIDE

[State 5000, 7]
type = ChangeState
trigger1 =HitShakeOver
value = 5030

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

[State 5000, 1]
type = veladd
trigger1 = GetHitVar(hitcount) =1
trigger2 = GetHitVar(hitcount) =2
trigger3 = GetHitVar(hitcount) =3
time = 5
value = -5

[State 5000, 1.1]
type = PalFX
trigger1 = GetHitVar(hitcount) =1
trigger2 = GetHitVar(hitcount) =2
time = 1;5
add = 255,50,0
color = 0
ignorehitpause = 1

[State 5000, 1.2]
type = PalFX
trigger1 = GetHitVar(hitcount) =3
trigger2 = GetHitVar(hitcount) =4
time = 1;5
add = 255,0,0
color = 0
ignorehitpause = 1

[State 5000, 1.3]
type = PalFX
trigger1 = GetHitVar(hitcount) =5
time = 1;5
add = 200,0,20
color = 0
ignorehitpause = 1

;[State 5000, 1] ;by O Ilusionista
;type = PalFX
;trigger1 = GetHitVar(hitcount) =1
;time = 2
;add = 255,255,0 ;amarelo
;color = 0

;[State 5000, 1] ;by O Ilusionista
;type = PalFX
;trigger1 = GetHitVar(hitcount) =2
;time = 2
;add = 255,128,0 ;laranja 
;color = 0

;[State 5000, 1] ;by O Ilusionista
;type = PalFX
;trigger1 = GetHitVar(hitcount) =3
;time = 2
;add = 255,0,0 ;vermelho
;color = 0

;---------------------------------------------------------------------------
; HITG_SLIDE
[Statedef 5001]
type    = S
movetype= H
physics = S

[State 5001, 1.1]
type = HitVelSet
trigger1 = (Var(1) < 20)
trigger1 = GetHitVar(hitcount) >=2
trigger1 = Time = 0
x = 1;2

[State 5001, 1.2]
type = HitVelSet
trigger1 = (Var(1) >= 20) && (Var(1) < 40)
trigger1 = GetHitVar(hitcount) >=3 
trigger1 = Time = 0
x = 1

[State 5001, 1.3]
type = HitVelSet
trigger1 = (Var(1) >= 40) && (Var(1) < 60)
trigger1 = GetHitVar(hitcount) >=4
trigger1 = Time = 0
x = 1;0

[State 5001, 1.4]
type = HitVelSet
trigger1 = (Var(1) = 60)
trigger1 = GetHitVar(hitcount) >=5 
trigger1 = Time = 0
x = 1;0

;trigger1 = (Var(1) < 10) ;cinetic lv 0
;trigger1 = (Var(1) >= 10) && (Var(1) < 20) ;cinetic lv 1
;trigger1 = (Var(1) >= 20) && (Var(1) < 30) ;cinetic lv 2
;trigger1 = (Var(1) = 30) ;cinetic lv 3

[State 5001, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5005 + GetHitVar(animtype) + (GetHitVar(groundtype)=2)*10

[State 5001, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5001, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5001, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5001, 6]
type = ChangeState
trigger1 = HitOver
value = 0
ctrl = 1


; ----- (customization) -----
[State 5001, Energy buildup #1]
type = VarAdd
trigger1 = GetHitVar(animtype) = 0
trigger1 = Time = 0
trigger1 = Var(1) < 60
v = 1
value = 1
ignorehitpause = 1

[State 5001, Energy buildup #2]
type = VarAdd
trigger1 = GetHitVar(animtype) = 1
trigger1 = Time = 0
trigger1 = Var(1) < 60
v = 1
value = 2
ignorehitpause = 1

[State 5001, Energy buildup #3]
type = VarAdd
trigger1 = GetHitVar(animtype) = [2,5]
trigger1 = Time = 0
trigger1 = Var(1) < 60
v = 1
value = 3
ignorehitpause = 1
; ----- (end customization) -----

;---------------------------------------------------------------------------
; HITC_SHAKE
[Statedef 5010]
type    = C
movetype= H
physics = N
velset = 0,0

[State 5010, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
;triggerall = NumEnemy > 0
;trigger1 = (Var(1) < 20)
;trigger1 = GetHitVar(hitcount) >=2;3
triggerall = GetHitVar(animtype) != [3,5]
trigger1 = var(10) = 1 
trigger2 = var(10) = 2 
;trigger1 = enemyNear, hitdefattr = SCA, NA,NP ;SA,SP,HA,HP
;trigger2 = (Var(1) >= 20) && (Var(1) < 40)
;trigger2 = GetHitVar(hitcount) >=3
;trigger2 = GetHitVar(animtype) != [3,5]
;trigger2 = enemyNear, hitdefattr = SCA, NA,NP ;SA,SP,HA,HP
;trigger3 = (Var(1) >= 40) && (Var(1) < 60)
;trigger3 = GetHitVar(hitcount) >=4
;trigger3 = GetHitVar(animtype) != [3,5]
;trigger3 = enemyNear, hitdefattr = SCA, NA,NP ;SA,SP,HA,HP
;trigger4 = (Var(1) = 60)
;trigger4 = GetHitVar(hitcount) >=5
;trigger4 = GetHitVar(animtype) != [3,5]
;trigger4 = enemyNear, hitdefattr = SCA, NA,NP ;SA,SP,HA,HP
;trigger5 = Time = 0
;trigger5 = GetHitVar(animtype) != [3,5]
;trigger5 = enemyNear, hitdefattr = SCA, SA,SP,HA,HP
value = 5020 + GetHitVar(animtype)

[State 5010, 2] ;Anim for HIT_BACK
type = ChangeAnim
;triggerall = NumEnemy > 0
;trigger1 = (Var(1) < 20)
;trigger1 = GetHitVar(hitcount) >=2
triggerall = GetHitVar(animtype) = [3,5]
trigger1 = var(10) = 1 
trigger2 = var(10) = 2 
;trigger1 = enemyNear, hitdefattr = SCA, NA,NP ;SA,SP,HA,HP
;trigger2 = (Var(1) >= 20) && (Var(1) < 40)
;trigger2 = GetHitVar(hitcount) >=3
;trigger2 = GetHitVar(animtype) = [3,5]
;trigger2 = enemyNear, hitdefattr = SCA, NA,NP ;SA,SP,HA,HP
;trigger3 = (Var(1) >= 40) && (Var(1) < 60)
;trigger3 = GetHitVar(hitcount) >=4
;trigger3 = GetHitVar(animtype) = [3,5]
;trigger3 = enemyNear, hitdefattr = SCA, NA,NP ;SA,SP,HA,HP
;trigger4 = (Var(1) = 60)
;trigger4 = GetHitVar(hitcount) >=5
;trigger4 = GetHitVar(animtype) = [3,5]
;trigger4 = enemyNear, hitdefattr = SCA, NA,NP ;SA,SP,HA,HP
;trigger5 = time = 0
;trigger5 = GetHitVar(animtype) = [3,5]
;trigger5 = enemyNear, hitdefattr = SCA, SA,SP,HA,HP
value = 5030

[State 5010, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
;triggerall = NumEnemy > 0
;trigger1 = (Var(1) < 20)
;trigger1 = GetHitVar(hitcount) >=2
triggerall = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
trigger1 = var(10) = 1 
trigger2 = var(10) = 2 
;trigger1 = enemyNear, hitdefattr = SCA, NA,NP ;SA,SP,HA,HP
;trigger2 = (Var(1) >= 20) && (Var(1) < 40)
;trigger2 = GetHitVar(hitcount) >=3
;trigger2 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
;trigger2 = enemyNear, hitdefattr = SCA, NA,NP ;SA,SP,HA,HP
;trigger3 = (Var(1) >= 40) && (Var(1) < 60)
;trigger3 = GetHitVar(hitcount) >=4
;trigger3 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
;trigger3 = enemyNear, hitdefattr = SCA, NA,NP ;SA,SP,HA,HP
;trigger4 = (Var(1) = 60)
;trigger4 = GetHitVar(hitcount) >=5
;trigger4 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
;trigger4 = enemyNear, hitdefattr = SCA, NA,NP ;SA,SP,HA,HP
;trigger5 = time = 0
;trigger5 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
;trigger5 = enemyNear, hitdefattr = SCA, SA,SP,HA,HP
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5010, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5010, 5]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 5011 ;HITC_SLIDE

[State 5010, 6]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5010, FFB Light]
type = ForceFeedback
trigger1 = anim = 5020
persistent = 0
time = 6
waveform = square

[State 5010, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5021
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5010, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5022
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

[State 5010, 1]
type = veladd
trigger1 = GetHitVar(hitcount) =1
trigger2 = GetHitVar(hitcount) =2
trigger3 = GetHitVar(hitcount) =3
time = 5
value = -5

[State 5010, 1.1]
type = PalFX
trigger1 = GetHitVar(hitcount) =1
trigger2 = GetHitVar(hitcount) =2
time = 1;5
add = 255,50,0
color = 0
ignorehitpause = 1

[State 5010, 1.2]
type = PalFX
trigger1 = GetHitVar(hitcount) =3
trigger2 = GetHitVar(hitcount) =4
time = 1;5
add = 255,0,0
color = 0
ignorehitpause = 1

[State 5010, 1.3]
type = PalFX
trigger1 = GetHitVar(hitcount) =5
time = 1;5
add = 200,0,20
color = 0
ignorehitpause = 1

;---------------------------------------------------------------------------
; HITC_SLIDE
[Statedef 5011]
type    = C
movetype= H
physics = C

[State 5011, 1.1]
type = HitVelSet
trigger1 = (Var(1) < 20)
trigger1 = GetHitVar(hitcount) >=2
trigger1 = Time = 0
x = 1

[State 5011, 1.2]
type = HitVelSet
trigger1 = (Var(1) >= 20) && (Var(1) < 40)
trigger1 = GetHitVar(hitcount) >=3 
trigger1 = Time = 0
x = 1

[State 5011, 1.3]
type = HitVelSet
trigger1 = (Var(1) >= 40) && (Var(1) < 60)
trigger1 = GetHitVar(hitcount) >=4
trigger1 = Time = 0
x = 1

[State 5011, 1.4]
type = HitVelSet
trigger1 = (Var(1) = 60)
trigger1 = GetHitVar(hitcount) >=5 
trigger1 = Time = 0
x = 1

[State 5011, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5025 + GetHitVar(animtype)

[State 5011, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5011, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5011, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5011, 6]
type = ChangeState
trigger1 = HitOver
value = 11
ctrl = 1

; ----- (customization) -----
[State 5011, Energy buildup #1]
type = VarAdd
trigger1 = GetHitVar(animtype) = 0
trigger1 = Time = 0
trigger1 = Var(1) < 60
v = 1
value = 1
ignorehitpause = 1

[State 5011, Energy buildup #2]
type = VarAdd
trigger1 = GetHitVar(animtype) = 1
trigger1 = Time = 0
trigger1 = Var(1) < 60
v = 1
value = 2
ignorehitpause = 1

[State 5011, Energy buildup #3]
type = VarAdd
trigger1 = GetHitVar(animtype) = [2,5]
trigger1 = Time = 0
trigger1 = Var(1) < 60
v = 1
value = 3
ignorehitpause = 1
; ----- (end customization) -----

;---------------------------------------------------------------------------
; HITA_UP (initial going up)
[Statedef 5030]
type    = A
movetype= H
physics = N
ctrl = 0

[State 5030, 0]
type = ChangeState
triggerall = PrevStateNo != [5020, 5110] 
;triggerall = Pos Y <= 0 ;StateType != A
trigger1 = var(10) = 3 ;|| var(10) = 6
;trigger2 = var(10) = 6 
;triggerall = NumEnemy > 0 
;trigger1 = (Var(1) < 20)
;trigger1 = GetHitVar(hitcount) < 2;3
;trigger1 = enemyNear, hitdefattr = SCA, NA,NP ;SA,SP,HA,HP 
;trigger2 = (Var(1) >= 20) && (Var(1) < 40)
;trigger2 = GetHitVar(hitcount) < 3
;trigger2 = enemyNear, hitdefattr = SCA, NA,NP ;SA,SP,HA,HP
;trigger3 = (Var(1) >= 40) && (Var(1) < 60)
;trigger3 = GetHitVar(hitcount) < 4
;trigger3 = enemyNear, hitdefattr = SCA, NA,NP ;SA,SP,HA,HP
;trigger4 = (Var(1) = 60)
;trigger4 = GetHitVar(hitcount) < 5
;trigger4 = enemyNear, hitdefattr = SCA, NA,NP ;SA,SP,HA,HP
;trigger5 = NumHelper > 0 
;trigger5 = GetHitVar(hitcount) > 0 
;trigger5 = Helper, MoveHit
value = var(11) ;ifelse(StateType = C, ifelse(StateType = A, 1063, 1062), 1061)
ctrl = 1

;[State 5030, 0.2]
;type = ChangeState
;triggerall = NumHelper > 0 
;trigger1 = (Var(1) < 20)
;trigger1 = GetHitVar(hitcount) < 2;3
;trigger1 = Helper, MoveHit;hitdefattr = SCA, NA,NP ;SA,SP,HA,HP 
;trigger2 = (Var(1) >= 20) && (Var(1) < 40)
;trigger2 = GetHitVar(hitcount) < 3
;trigger2 = Helper, MoveHit;hitdefattr = SCA, NA,NP ;SA,SP,HA,HP
;trigger3 = (Var(1) >= 40) && (Var(1) < 60)
;trigger3 = GetHitVar(hitcount) < 4
;trigger3 = Helper, MoveHit;hitdefattr = SCA, NA,NP ;SA,SP,HA,HP
;trigger4 = (Var(1) = 60)
;trigger4 = GetHitVar(hitcount) < 5
;trigger4 = Helper, MoveHit;hitdefattr = SCA, NA,NP ;SA,SP,HA,HP
;value = ifelse(StateType = C, 1062, 1061)
;ctrl = 1

[State 5030, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)

[State 5030, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5030, 3]
type = ChangeState
triggerall = !HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 5040 ;HITA_RECOV

[State 5030, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 5050 ;HITA_FALL

[State 5030, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 5035 ;HITA_UP (transition)


; ----- (customization) -----
[State 5030, Energy buildup #1]
type = VarAdd
trigger1 = GetHitVar(animtype) = 0
trigger1 = Time = 0
trigger1 = Var(1) < 60
v = 1
value = 1
ignorehitpause = 1

[State 5030, Energy buildup #2]
type = VarAdd
trigger1 = GetHitVar(animtype) = 1
trigger1 = Time = 0
trigger1 = Var(1) < 60
v = 1
value = 2
ignorehitpause = 1

[State 5030, Energy buildup #3]
type = VarAdd
trigger1 = GetHitVar(animtype) = [2,5]
trigger1 = Time = 0
trigger1 = Var(1) < 60
v = 1
value = 3
ignorehitpause = 1
; ----- (end customization) -----

;---------------------------------------------------------------------------
; HIT_TRIP (shaking)
[Statedef 5070]
type    = A
movetype= H
physics = N
velset = 0,0

[State 5070, 1]
type = veladd
trigger1 = GetHitVar(hitcount) =1
trigger2 = GetHitVar(hitcount) =2
trigger3 = GetHitVar(hitcount) =3
time = 5
value = -5

[State 5070, 1.1]
type = PalFX
trigger1 = GetHitVar(hitcount) =1
trigger2 = GetHitVar(hitcount) =2
time = 1;5
add = 255,50,0
color = 0
ignorehitpause = 1

[State 5070, 1.2]
type = PalFX
trigger1 = GetHitVar(hitcount) =3
trigger2 = GetHitVar(hitcount) =4
time = 1;5
add = 255,0,0
color = 0
ignorehitpause = 1

[State 5070, 1.3]
type = PalFX
trigger1 = GetHitVar(hitcount) =5
time = 1;5
add = 200,0,20
color = 0
ignorehitpause = 1

[State 5070, 0]
type = ChangeState
triggerall = PrevStateNo != [5020, 5110] 
trigger1 = var(10) = 3 ;|| var(10) = 6
;trigger2 = var(10) = 6 
;triggerall = NumEnemy > 0 || NumHelper > 0
;trigger1 = (Var(1) < 20)
;trigger1 = GetHitVar(hitcount) < 2;3
;trigger1 = enemyNear, hitdefattr = SCA, NA,NP || Helper, hitdefattr = SCA, NA,NP;SA,SP,HA,HP
;trigger2 = (Var(1) >= 20) && (Var(1) < 40)
;trigger2 = GetHitVar(hitcount) < 3
;trigger2 = enemyNear, hitdefattr = SCA, NA,NP || Helper, hitdefattr = SCA, NA,NP;SA,SP,HA,HP
;trigger3 = (Var(1) >= 40) && (Var(1) < 60)
;trigger3 = GetHitVar(hitcount) < 4
;trigger3 = enemyNear, hitdefattr = SCA, NA,NP || Helper, hitdefattr = SCA, NA,NP;SA,SP,HA,HP
;trigger4 = (Var(1) = 60)
;trigger4 = GetHitVar(hitcount) < 5
;trigger4 = enemyNear, hitdefattr = SCA, NA,NP || Helper, hitdefattr = SCA, NA,NP;SA,SP,HA,HP
value = var(11) ;ifelse(StateType = C, 11, 0)
ctrl = 1

[State 5070, 1]
type = ChangeAnim 
trigger1 = 1
value = 5070

[State 5070, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 5071

[State 5070, 3]
type = ForceFeedback
trigger1 = time = 0
time = 12
waveform = sinesquare
ampl = 140


; ----- (customization) -----
[State 5070, Energy buildup #1]
type = VarAdd
trigger1 = GetHitVar(animtype) = 0
trigger1 = Time = 0
trigger1 = Var(1) < 60
v = 1
value = 1
ignorehitpause = 1

[State 5070, Energy buildup #2]
type = VarAdd
trigger1 = GetHitVar(animtype) = 1
trigger1 = Time = 0
trigger1 = Var(1) < 60
v = 1
value = 2
ignorehitpause = 1

[State 5070, Energy buildup #3]
type = VarAdd
trigger1 = GetHitVar(animtype) = [2,5]
trigger1 = Time = 0
trigger1 = Var(1) < 60
v = 1
value = 3
ignorehitpause = 1
; ----- (end customization) -----

;---------------------------------------------------------------------------
; HITL_SLIDE
[Statedef 5081]
type    = L
movetype= H
physics = C

[State 5081, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5081, 2]
type = VelSet
trigger1 = HitOver
x = 0

[State 5081, 3] ;Don't show hit ground frame
type = VarSet
trigger1 = Time = 0
sysvar(0) = 1

[State 5081, 4]
type = ChangeState
trigger1 = HitOver
value = 5110 ;HIT_LIEDOWN


; ----- (customization) -----
[State 5081, Energy buildup #1]
type = VarAdd
trigger1 = GetHitVar(animtype) = 0
trigger1 = Time = 0
trigger1 = Var(1) < 60
v = 1
value = 1
ignorehitpause = 1

[State 5081, Energy buildup #2]
type = VarAdd
trigger1 = GetHitVar(animtype) = 1
trigger1 = Time = 0
trigger1 = Var(1) < 60
v = 1
value = 2
ignorehitpause = 1

[State 5081, Energy buildup #3]
type = VarAdd
trigger1 = GetHitVar(animtype) = [2,5]
trigger1 = Time = 0
trigger1 = Var(1) < 60
v = 1
value = 3
ignorehitpause = 1
; ----- (customization) -----

;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 5100]
type    = L
movetype= H
physics = N

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 7]
type = ChangeState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 5110 ;HIT_LIEDOWN

;[State 5100, 8]
;type = GameMakeAnim
;trigger1 = Time = 1
;value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
;pos = 0, 0
;under = sysvar(1) <= 14

[State 5100, 8] ;Hit Ground Spark (front)
type = Explod
trigger1 = Time = 3
persistent = 0
ID = 8400
anim = 8400
postype = p1
pos = -4, -3
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 3
ownpal = 1

[State 5100, 9] ;Hit Ground Spark (back)
type = Explod
trigger1 = Time = 1
persistent = 0
ID = 8401
anim = 8401
postype = p1
pos = -4, -3
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = -3
ownpal = 1

[State 5100, 10]
type = HitFallDamage
trigger1 = Time = 3

[State 5100, 11]
type = PlaySnd
trigger1 = Time = 1
value = 8, 1;F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5100, 12]
type = PosFreeze
trigger1 = 1

[State 5100, 13]
type = ChangeState
trigger1 = AnimTime = 0
value = 5101

[State 5100, 14]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20


; ----- (customization) -----
[State 5100, envshake]
type = EnvShake
trigger1 = Time = 0
time = 10

[State 5100, Energy buildup #1]
type = VarAdd
trigger1 = Time = 0
trigger1 = Var(1) < 60
v = 1
value = 2
ignorehitpause = 1
; ----- (end customization) -----

;---------------------------------------------------------------------------
; HIT_LIEDOWN
[Statedef 5110]
type    = L
movetype= H
physics = N

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 5110, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5110, 6]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 8,1 ;F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5110, 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14

[State 5110, 8] ;Hit Ground Spark (front)
type = Explod
;triggerall = PrevStateNo = 5071 
trigger1 = Time = 3
persistent = 0
ID = 8400
anim = 8400
postype = p1
pos = -4, -3
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 3
ownpal = 1

[State 5110, 9] ;Hit Ground Spark (back)
type = Explod
;triggerall = PrevStateNo = 5071 
trigger1 = Time = 1
persistent = 0
ID = 8401
anim = 8401
postype = p1
pos = -4, -3
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = -3
ownpal = 1

[State 5110, 10]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5110, 11] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 5110, 12] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 5110, 13] ;If just died
type = ChangeState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 5110, 14]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 15] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5110, 16]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 5110, 17]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine


; ----- (customization) -----
[State 5110, envshake]
type = EnvShake
trigger1 = Time = 0
time = 10

[State 5110, Energy buildup #1]
type = VarAdd
trigger1 = Time = 0
trigger1 = Var(1) < 60
v = 1
value = 2
ignorehitpause = 1
; ----- (end customization) -----



;---------------------------------------------------------------------------
; States that are always executed (use statedef -2)
;---------------------------------------------------------------------------
[Statedef -2]

[State -2, VarSet values]  
type = VarSet
trigger1 = StateType = S
v = 11
value = 1061

[State -2, VarSet values]  
type = VarSet
trigger1 = StateType = C
v = 11
value = 1062

[State -2, VarSet values]  
type = VarSet
trigger1 = StateType = A
v = 11
value = 1063

;[State -2, var SA normal proj] 
;type = VarSet
;triggerall = NumEnemy > 0
;triggerall = enemyNear, NumProj > 0 ;&& ProjHit
;triggerall = enemyNear, hitdefattr = SCA, NA,NP
;trigger1 = (Var(1) < 20)
;trigger1 = GetHitVar(hitcount) >=2
;trigger2 = (Var(1) >= 20) && (Var(1) < 40)
;trigger2 = GetHitVar(hitcount) >=3
;trigger3 = (Var(1) >= 40) && (Var(1) < 60)
;trigger3 = GetHitVar(hitcount) >=4
;trigger4 = (Var(1) = 60)
;trigger4 = GetHitVar(hitcount) >=5
;;trigger1 = MoveType = H 
;v = 10
;value = 1

;[State -2, var SA special/super proj] 
;type = VarSet
;triggerall = NumEnemy > 0
;triggerall = enemyNear, NumProj > 0 ;&& ProjHit
;triggerall = enemyNear, hitdefattr = SCA, SA,SP,HA,HP
;trigger1 = Time = 0
;;trigger1 = MoveType = H 
;v = 10
;value = 2

[State -2, var SA normal attack] 
type = VarSet
triggerall = NumEnemy > 0  
triggerall = enemyNear, hitdefattr = SCA, NA,NP 
trigger1 = (Var(1) < 20)
trigger1 = GetHitVar(hitcount) >=2
trigger2 = (Var(1) >= 20) && (Var(1) < 40)
trigger2 = GetHitVar(hitcount) >=3
trigger3 = (Var(1) >= 40) && (Var(1) < 60)
trigger3 = GetHitVar(hitcount) >=4
trigger4 = (Var(1) = 60)
trigger4 = GetHitVar(hitcount) >=5
v = 10
value = 1

[State -2, var SA special/super attack] 
type = VarSet
triggerall = NumEnemy > 0  
triggerall = enemyNear, hitdefattr = SCA, SA,SP,HA,HP
trigger1 = Time = 0
v = 10
value = 2

;[State -2, var SA normal helper] 
;type = VarSet
;triggerall = NumHelper > 0  
;triggerall = Helper, hitdefattr = SCA, NA,NP 
;trigger1 = (Var(1) < 20)
;trigger1 = GetHitVar(hitcount) >=2
;trigger2 = (Var(1) >= 20) && (Var(1) < 40)
;trigger2 = GetHitVar(hitcount) >=3
;trigger3 = (Var(1) >= 40) && (Var(1) < 60)
;trigger3 = GetHitVar(hitcount) >=4
;trigger4 = (Var(1) = 60)
;trigger4 = GetHitVar(hitcount) >=5
;v = 10
;value = 1;4

;[State -2, var SA special/super helper] 
;type = VarSet
;triggerall = NumHelper > 0  
;triggerall = Helper, hitdefattr = SCA, SA,SP,HA,HP
;trigger1 = Time = 0
;v = 10
;value = 2;5

;[State -2, var SA normal proj (ChangeState)] 
;type = VarSet
;triggerall = NumEnemy > 0
;triggerall = enemyNear, NumProj > 0 ;&& ProjHit
;triggerall = enemyNear, hitdefattr = SCA, NA,NP
;trigger1 = (Var(1) < 20)
;trigger1 = GetHitVar(hitcount) < 2
;trigger2 = (Var(1) >= 20) && (Var(1) < 40)
;trigger2 = GetHitVar(hitcount) < 3
;trigger3 = (Var(1) >= 40) && (Var(1) < 60)
;trigger3 = GetHitVar(hitcount) < 4
;trigger4 = (Var(1) = 60)
;trigger4 = GetHitVar(hitcount) < 5
;;trigger1 = MoveType = H 
;v = 10
;value = 5

[State -2, var SA normal attack (for ChangeState)] 
type = VarSet
triggerall = NumEnemy > 0  
triggerall = enemyNear, hitdefattr = SCA, NA,NP 
trigger1 = (Var(1) < 20)
trigger1 = GetHitVar(hitcount) < 2
trigger2 = (Var(1) >= 20) && (Var(1) < 40)
trigger2 = GetHitVar(hitcount) < 3
trigger3 = (Var(1) >= 40) && (Var(1) < 60)
trigger3 = GetHitVar(hitcount) < 4
trigger4 = (Var(1) = 60)
trigger4 = GetHitVar(hitcount) < 5
v = 10
value = 3

;[State -2, var SA normal attack/helper (for ChangeState)] 
;type = VarSet
;;;trigger1 = MoveType = H
;;trigger1 = var(10) != [1,2] 
;triggerall = NumHelper > 0  
;triggerall = Helper, hitdefattr = SCA, NA,NP 
;trigger1 = (Var(1) < 20)
;trigger1 = GetHitVar(hitcount) < 2
;trigger2 = (Var(1) >= 20) && (Var(1) < 40)
;trigger2 = GetHitVar(hitcount) < 3
;trigger3 = (Var(1) >= 40) && (Var(1) < 60)
;trigger3 = GetHitVar(hitcount) < 4
;trigger4 = (Var(1) = 60)
;trigger4 = GetHitVar(hitcount) < 5
;v = 10
;value = 3;6

[State -2, var SA reset] 
type = VarSet
;;triggerall = var(10) != 0
trigger1 = var(10) = [1,2] 
trigger1 = Anim = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)
trigger1 = Time >= 2
trigger2 = var(10) = [1,2] 
trigger2 = Anim = 5030 
trigger2 = Time >= 3
trigger3 = var(10) = [1,2] 
trigger3 = Anim = 5047 + GetHitVar(animtype) ;5051 - 4 + type
trigger3 = Time >= 2
trigger4 = var(10) = 3
trigger4 = StateNo = 0 || StateNo = 11
trigger4 = Time = 0
;;trigger2 = StateNo = 5001 || StateNo = 5030 || StateNo = 5071
;trigger2 = Time = 1
;trigger4 = Anim = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)
;trigger4 = Anim = 5030 
;trigger4 = Anim = 5047 + GetHitVar(animtype) ;5051 - 4 + type
;trigger4 = NumHelper > 0  
;trigger4 = Helper, hitdefattr = SCA, NA,NP 
;trigger5 = NumEnemy > 0  
;trigger5 = enemyNear, hitdefattr = SCA, NA,NP 
;;trigger4 = var(10) = 4
;;trigger5 = var(10) = 5
;;trigger6 = var(10) = 6
;;trigger1 = PrevStateNo = [5000, 5999]
;;trigger1 = StateNo = [5030,1063];!= [5000, 5999]
;;trigger1 = HitShakeOver ;MoveType != H 
v = 10
value = 0

;[State -2, Super Armor - Make Heavy]
;type = VelSet
;trigger1 = StateNo = [5000, 5029]
;trigger2 = StateNo = [5030, 5999]
;trigger2 = Anim = [5000, 5029]
;x = 0
;persistent = 1

;[State -2, Super Armor - Make Heavy]
;type = VelAdd
;trigger1 = Pos Y > 0
;trigger1 = StateNo = [5000, 5099]
;trigger1 = GetHitVar(hitcount) < 3 ;enemy, HitCount < 3
;y = 2
;persistent = 1

;[State -2, Super Armor - Make Heavy 2]
;type = VelSet
;triggerall = enemyNear, hitdefattr = SCA, NA
;triggerall = !Win
;trigger1 = (Var(1) < 10)
;trigger1 = GetHitVar(hitcount) < 2
;trigger2 = (Var(1) >= 10) && (Var(1) < 20)
;trigger2 = GetHitVar(hitcount) < 3
;trigger3 = (Var(1) >= 20) && (Var(1) < 30)
;trigger3 = GetHitVar(hitcount) < 4
;trigger4 = (Var(1) = 30)
;trigger4 = GetHitVar(hitcount) < 5
;x = 0
;y = 0
;persistent = 1

;[State -2, jump landing sound]   ; custom jump-landing sound
;trigger1 = stateno = 52
;trigger1 = Time = 1
;type = PlaySnd
;persistent = 0
;value = 8,1

[State -2, debug]       ; (debug clipboard)
type = DisplayToClipboard
trigger1 = Alive
text = "Clock Energy: %d -- Position: %f,%f"    ; \n BackEdgeDist: %f -- FrontEdgeDist: %f"
params = Var(1), floor(ScreenPos X), floor(ScreenPos Y) ;, BackEdgeDist, FrontEdgeDist

;[State -2, gethits]         ; custom gethit sounds
;type = PlaySnd
;trigger1 = (stateno = 5000) && (!IsHelper) && (RoundState = 2) && (Random < 100)
;channel = 0
;lowpriority = 1
;value = 4,(Random/333)

;[State -2, superjump opponent locator]
;type = Helper
;triggerall = (NumHelper(0) = 0)
;trigger1 = (Pos Y < -200) && (P2Dist Y > 50)
;ID = 0
;pos = 0,-120
;postype = p2
;stateno = 910
;facing = 1
;ownpal = 1

;;-------------------------
;; WinKO by Hyper -- special background
;;
;; Adapted from code by FlowaGirl
;;flowergirl@cutey.com
;;http://blargh.i-xcell.com

;[State -2: Explod]
;type = Explod
;triggerall = (WinKO) && (NumExplod(4000) = 0) && (RoundState=3)
;trigger1 = StateNo = 3001
;anim = 1000
;ID = 4000
;pos = 0,0
;postype = left
;bindtime = 1000
;;removetime = 60
;supermovetime = 1000
;pausemovetime = 1000
;ignorehitpause = 1

;[State -2: Helper]
;type = Helper
;trigger1 = (WinKO) && (NumHelper(4000) = 0) && (RoundState=3)
;helpertype = Normal
;name = "WinKO"
;ID = 4000
;pos = 0,0
;postype = left
;stateno = 4000
;;removetime = 60
;supermovetime = 1000
;pausemovetime = 1000
;ignorehitpause = 1

:--------------------------
;-------------------------
; Kinetic Energy "Clock"
;
; Adapted from code by FlowaGirl
;flowergirl@cutey.com
;http://blargh.i-xcell.com

; Energy clock display (frame)
[State -2: clock frame]
type = Explod
trigger1 = Alive
trigger2 = NumPartner > 0
;trigger1 = PlayerIDExist(var(3) = 1 || var(3) = 2)
;trigger1 = NumExplod(803) != 1
;trigger1 = P1Name = "Strong Guy"  
;trigger2 = P2Name = "Strong Guy"
anim = 803
pos = ifelse(TeamSide = 1, 15, 305), 204 ;12;IfElse(TeamSide = 1,1,262), 195
postype = left
bindtime = -1
removetime = 1
ontop = 1
shadow = 0,0,0
ownpal = 1
facing = ifelse(TeamSide = 1, 1, -1)
ignorehitpause = 1
;;-------------------------
;; Energy clock display (frame) - P3 & P4
;[State -2: clock frame]
;type = Explod
;trigger1 = Alive
;;trigger1 = Name = "Strong Guy"
;;trigger1 = P1Name = "Strong Guy"
;;trigger2 = P2Name = "Strong Guy" 
;anim = 803
;;ID = 803
;pos = ifelse(partner,TeamSide = 1, 15, 305), 224 ;12;IfElse(TeamSide = 1,1,262), 195
;postype = left
;bindtime = -1
;removetime = 1
;ontop = 1
;shadow = 0,0,0
;ownpal = 1
;facing = ifelse(partner,TeamSide = 1, 1, -1)
;ignorehitpause = 1

:--------------------------
;-------------------------
; Energy clock display (level number)
[State -2: clock energy level 1]
type = Explod
triggerall = (Alive) && (Var(1) > 19) && (Var(1) < 40) ;9 - 20
trigger1 = P1Name = "Strong Guy"  
trigger2 = P2Name = "Strong Guy"
anim = 804
pos = ifelse(TeamSide = 1, -26, 146), 175 ;83;IfElse(TeamSide = 1,1,262),195
postype = left
bindtime = -1
removetime = 1
ontop = 1
shadow = 0,0,0
ownpal = 1
;facing = ifelse(TeamSide = 1, 1, -1)
ignorehitpause = 1
;-------------------------
; Energy clock display (level number) - P3 & P4
[State -2: clock energy level 1]
type = Explod
triggerall = (Alive) && (Var(1) > 19) && (Var(1) < 40) ;9 - 20
trigger1 = P3Name = "Strong Guy"
trigger2 = P4Name = "Strong Guy" 
anim = 804
pos = ifelse(TeamSide = 1, -26, 146), 195 ;83;IfElse(TeamSide = 1,1,262),195
postype = left
bindtime = -1
removetime = 1
ontop = 1
shadow = 0,0,0
ownpal = 1
;facing = ifelse(TeamSide = 1, 1, -1)
ignorehitpause = 1

[State -2: clock energy level 2]
type = Explod
triggerall = (Alive) && (Var(1) > 39) && (Var(1) < 60) ;19 - 30
trigger1 = P1Name = "Strong Guy"  
trigger2 = P2Name = "Strong Guy"
anim = 805
pos = ifelse(TeamSide = 1, -26, 145), 175 ;IfElse(TeamSide = 1,1,262),195
postype = left
bindtime = -1
removetime = 1
ontop = 1
shadow = 0,0,0
ownpal = 1
;facing = ifelse(TeamSide = 1, 1, -1)
ignorehitpause = 1
;-------------------------
[State -2: clock energy level 2] - P3 & P4
type = Explod
triggerall = (Alive) && (Var(1) > 39) && (Var(1) < 60) ;19 - 30
trigger1 = P3Name = "Strong Guy"
trigger2 = P4Name = "Strong Guy" 
anim = 805
pos = ifelse(TeamSide = 1, -26, 145), 195 ;IfElse(TeamSide = 1,1,262),195
postype = left
bindtime = -1
removetime = 1
ontop = 1
shadow = 0,0,0
ownpal = 1
;facing = ifelse(TeamSide = 1, 1, -1)
ignorehitpause = 1

[State -2: clock energy level 3]
type = Explod
triggerall = (Alive) && (Var(1) = 60);30
trigger1 = P1Name = "Strong Guy"  
trigger2 = P2Name = "Strong Guy"
anim = 806
pos = ifelse(TeamSide = 1, -26, 144), 175 ;IfElse(TeamSide = 1,1,262),195
postype = left
bindtime = -1
removetime = 1
ontop = 1
shadow = 0,0,0
ownpal = 1
;facing = ifelse(TeamSide = 1, 1, -1)
ignorehitpause = 1
;-------------------------
[State -2: clock energy level 3] - P3 & P4
type = Explod
triggerall = (Alive) && (Var(1) = 60);30
trigger1 = P3Name = "Strong Guy"
trigger2 = P4Name = "Strong Guy" 
anim = 806
pos = ifelse(TeamSide = 1, -26, 144), 195 ;IfElse(TeamSide = 1,1,262),195
postype = left
bindtime = -1
removetime = 1
ontop = 1
shadow = 0,0,0
ownpal = 1
;facing = ifelse(TeamSide = 1, 1, -1)
ignorehitpause = 1

:--------------------------
:-------------------------
; Energy letters display 
[State -2: letters display]
type = Explod
triggerall = Alive
trigger1 = P1Name = "Strong Guy"  
trigger2 = P2Name = "Strong Guy"  
anim = 807
pos = ifelse(TeamSide = 1, 12, 253), 203 ;11;IfElse(TeamSide = 1,1,262),195
postype = left
bindtime = -1
removetime = 1
ontop = 1
shadow = 0,0,0
ownpal = 1
;facing = ifelse(TeamSide = 1, 1, -1)
ignorehitpause = 1
;-------------------------
; Energy letters display - P3 & P4
[State -2: letters display]
type = Explod
triggerall = Alive
trigger1 = P3Name = "Strong Guy" 
trigger2 = P4Name = "Strong Guy" 
anim = 807
pos = ifelse(TeamSide = 1, 12, 249), 223 ;11;IfElse(TeamSide = 1,1,262),195
postype = left
bindtime = -1
removetime = 1
ontop = 1
shadow = 0,0,0
ownpal = 1
;facing = ifelse(TeamSide = 1, 1, -1)
ignorehitpause = 1

:--------------------------
;-------------------------
; Energy clock display (bar)
[State -2: clock bar]
type = Explod
triggerall = (Alive) ;&& (Var(1) > 0)
trigger1 = P1Name = "Strong Guy"  
trigger2 = P2Name = "Strong Guy"  
anim = 810 + (Var(1)/2)
pos = ifelse(TeamSide = 1, 7, 313), 199 ;207;IfElse(TeamSide = 1,1,262),195
postype = left
bindtime = -1
removetime = 1
ontop = 1
shadow = 0,0,0
ownpal = 1
facing = ifelse(TeamSide = 1, 1, -1)
ignorehitpause = 1
:--------------------------
; Energy clock display (bar) - P3 & P4 
[State -2: clock bar]
type = Explod
triggerall = (Alive) ;&& (Var(1) > 0)
trigger1 = P3Name = "Strong Guy"  
trigger2 = P4Name = "Strong Guy" 
anim = 810 + (Var(1)/2)
pos = ifelse(TeamSide = 1, 7, 313), 219 ;207;IfElse(TeamSide = 1,1,262),195
postype = left
bindtime = -1
removetime = 1
ontop = 1
shadow = 0,0,0
ownpal = 1
facing = ifelse(TeamSide = 1, 1, -1)
ignorehitpause = 1

;-------------------------
; Energy clock normalization
[State -2: VarSet]  ; if below 0, set back to 0
type = VarSet
trigger1 = Var(1) < 0
v = 1
value = 0

[State -2: VarSet]  ; if above 30, set back to 30
type = VarSet
trigger1 = Var(1) > 60;30
v = 1
value = 60;30

;-------------------------
; Energy clock level 0
[State -2: AttackMulSet 0]
type = AttackMulSet
trigger1 = (Var(1) < 20)
value = 1   ; regular (100%) attack power

;[State -2: DefenceMulSet 0]
;type = DefenceMulSet
;trigger1 = (Var(1) < 20)
;value = 1   ; regular (100%) defence

;-------------------------
; Energy clock level 1
[State -2: AttackMulSet 1]
type = AttackMulSet
trigger1 = (Var(1) >= 20) && (Var(1) < 40)
value = 1.35    ; 135% attack power

;[State -2: DefenceMulSet 1]
;type = DefenceMulSet
;trigger1 = (Var(1) >= 20) && (Var(1) < 40)
;value = 0.9    ; 90% defence

[State -2, reduce life] ;thanks SMI
type = LifeAdd
trigger1 = (Var(1) >= 20) && (Var(1) < 40)
trigger1 = (GameTime%200)=0 ;!gametime % 40
value = -5

[State -2, add power] 
type = PowerAdd
trigger1 = (Var(1) >= 20) && (Var(1) < 40)
trigger1 = (GameTime%200)=0 
value = 15

[State -2, Heart Beating - Normal]
type = PlaySnd
trigger1 = (Var(1) >= 20) && (Var(1) < 40)
trigger1 = (GameTime%150)=0
value = 20, 2
channel = 2
;ignorehitpause = 1
;persistent = 0
;loop = 1

;-------------------------
; Energy clock level 2
[State -2: AttackMulSet 2]
type = AttackMulSet
trigger1 = (Var(1) >= 40) && (Var(1) < 60)
value = 1.75    ; 175% attack power

;[State -2: DefenceMulSet 2]
;type = DefenceMulSet
;trigger1 = (Var(1) >= 40) && (Var(1) < 60)
;value = 0.75    ; 75% defence

[State -2, reduce life] ;thanks SMI
type = LifeAdd
trigger1 = (Var(1) >= 40) && (Var(1) < 60)
trigger1 = (GameTime%100)=0 ;!gametime % 40
value = -10

[State -2, add power] 
type = PowerAdd
trigger1 = (Var(1) >= 40) && (Var(1) < 60)
trigger1 = (GameTime%100)=0 
value = 30

[State -2, Heart Beating - Normal]
type = PlaySnd
trigger1 = (Var(1) >= 40) && (Var(1) < 60)
trigger1 = (GameTime%60)=0
value = 20, 0
channel = 2
;ignorehitpause = 1
;persistent = 0
;loop = 1

;-------------------------
; Energy clock level 3
[State -2: AttackMulSet 3]
type = AttackMulSet
trigger1 = (Var(1) = 60)
value = 2.0     ; 200% attack power

;[State -2: DefenceMulSet 3]
;type = DefenceMulSet
;trigger1 = (Var(1) = 60)
;value = 0.6     ; 60% defence

[State -2, reduce life] ;thanks SMI
type = LifeAdd
trigger1 = (Var(1) = 60)
trigger1 = (GameTime%40)=0 
value = -10

[State -2, add power] 
type = PowerAdd
trigger1 = (Var(1) = 60)
trigger1 = (GameTime%40)=0 
value = 30

[State -2, Heart Beating - Fast]
type = PlaySnd
trigger1 = (Var(1) = 60)
trigger1 = (GameTime%25)=0
value = 20, 1
channel = 2
;ignorehitpause = 1
;persistent = 0
;loop = 1

[State -2, Red PalFX] 
type = PalFX
trigger1 = (Var(1) = 60)
;trigger1 = Time = [84,171]
add = Floor((0 + 124 * sin((2 * pi * (time))/20.0)) + 0.5),Floor((0 + 0 * sin((2 * pi * (time))/20.0))+0.5),Floor((0 + 0 *sin((2 * pi * (time))/20.0))+0.5);164
time = 1
;color = 0


;==========================[Armor]============================
[State -2,1] ;by {_Carnificina_}
type = VarSet
trigger1 = var(30) >= 500
v = 30
value = 0

[State -2,2]
type = Varadd
trigger1 = var(30) >= 1
v = 30
value = 1

[State -2, Armor Mode ]
type = ChangeState
trigger1 = var(30) >= 1
trigger1 = Alive = 1
trigger1 = movetype = H
trigger1 = anim >= 5000
trigger1 = anim <= 5110
trigger1 = StateType = S
time = 1
attr = SCA, NA, NP;SA, NP, SP
slot = 0
value = 1061

[State -2, Armor Mode ]
type = ChangeState
trigger1 = var(30) >= 1
trigger1 = Alive = 1
trigger1 = movetype = H
trigger1 = anim >= 5000
trigger1 = anim <= 5110
trigger1 = StateType = C
time = 1
attr = SCA, NA, NP;SA, NP, SP
slot = 1
value = 1062

[State -2, Armor Mode ]
type = ChangeState
trigger1 = var(30) >= 1
trigger1 = Alive = 1
trigger1 = movetype = H
trigger1 = anim >= 5000
trigger1 = anim <= 5110
trigger1 = StateType = A
time = 1
attr = SCA, NA, NP;SA, NP, SP
slot = 2
value = 1063
;=============================================================



;---------------------------------------------------------------------------
; States that are executed when in self's state file (use statedef -3)
;---------------------------------------------------------------------------
;[Statedef -3]

[State -3, Landing Dust]
type = Explod
triggerall =  NumExplod(931) < 1
triggerall = Time = 3
trigger1 = StateNo = 52 ;Jump land
trigger2 = StateNo = 101 ;Run-fdw land
trigger3 = StateNo = 106 ;Run-back land
trigger4 = PrevStateNo = 52 && StateNo = 11 ;Jump land/crouch 
trigger5 = StateNo = 3302 ;Hyper Blanka Envy
persistent = 0
ID = 931
anim = 931
postype = p1
pos = 7, 3
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = -2
ownpal = 1

[State -3, Landing Sound]
type = PlaySnd
triggerall = Time = 1
trigger1 = StateNo = 52 ;Jump land
trigger2 = StateNo = 101 ;Run-fwd land
trigger3 = StateNo = 106 ;Run-back land
trigger4 = StateNo = 3302 ;Hyper Blanka Envy
value = 8, 1

[State -3, Super Jump] ;from GGN's Ryu (by Soldats)
type = VarSet
trigger1 = Stateno = 0
v = 12
value = 0

[State -3, end AfterImage by GetHit]
type = AfterImageTime
triggerall = PrevStateNo = [3000, 3999] 
triggerall = MoveType = H 
trigger1 = StateNo = [5000, 5999] 
time = 0
ignorehitpause = 1

[State -3, Random GetHit Sounds] 
type = VarRandom
trigger1 = 1
v = 4
range = 3

[State -3, GetHit Sounds] 
type = PlaySnd
triggerall = roundstate = 2
trigger1 = Time = 0 && StateNo = [5000, 5999]
trigger2 = Time = 1 && StateNo = 5100
value = 4, 0 + var(4)
;persistent = 0
supermovetime = 1000
pausemovetime = 1000
ignorehitpause = 1

;--------------------------------
[State -3, Finish Hit Explod - Helper] ;based on FlowaGirl and Ethan Lives codes
type = Helper
triggerall = NumHelper(8920) < 1
triggerall = (WinKO) && (NumHelper(8900) = 0) ;&& (StateNo != 1210)
trigger1 = (StateNo = [200,2999]) && (Time >= 0) 
trigger2 = NumHelper(1205) = 1 || NumHelper(1206) = 1 || NumHelper(1207) = 1
helpertype = Normal
name = "Finish Hit Explod"
id = 8900
pos = 0, 0
postype = p1
facing = 0
stateno = 8900
keyctrl = 0
ownpal = 1
supermovetime = 1000
pausemovetime = 1000
ignorehitpause = 1

;--------------------------------
;Author: FlowaGirl
;flowergirl@cutey.com
;http://blargh.i-xcell.com
;and Ethan Lives triggers.
[State -3, Super Finish BG - Helper] 
type = Helper
triggerall = NumHelper(8900) < 1
triggerall = (WinKO) && (NumHelper(8920) = 0) 
trigger1 = (StateNo = [3000,4999]) && (Time >= 0)
helpertype = Normal
name = "Super Finish BG"
id = 8920
pos = 0, 0
postype = p1
facing = 0
stateno = 8920
keyctrl = 0
ownpal = 1
supermovetime = 1000
pausemovetime = 1000
ignorehitpause = 1



;---------------------------------------------------------------------------
; Vars:
;   ;0: for Super Jump
;   1: Clock Energy (i.e. hit power)
;   2: For Touchdown
;   ;3: Clock Energy (2x var(1))
;   4: GetHit Sounds 
;   6: Random Dash Winds
;   10: Super Armor (attributes)
;   11: Super Armor (ChangeState values)
;   12: Super Jump
;   30: Super Armor 
; Helpers:
;   0: Superjump opponent locator arrow
; Explods:
;   2001: Touchdown hyper background
;---------------------------------------------------------------------------


;ウォリアー攻撃1
[Statedef 200]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
ctrl = 0
anim = 200
poweradd = 30
sprpriority = 2

[State 200, var(28)]
type = varset
trigger1 = var(3) = 1
trigger1 = time = 0
v= 28
value = ifelse(var(28)=0, 1, 0)

[state 200, 1]
type = ChangeAnim
triggerall = var(3) = 1
trigger1 = time = 0
value = ifelse(var(28)=1, 400, 410)

[State 200, 2]
type = HitDef
triggerall = var(3) = 0
trigger1 = AnimElem = 2
attr = S, NA
damage = 18, 0
animtype = Medium
guardflag = MA
priority = 4, Hit
pausetime = 10, ifelse(p2statetype = A, 1, 11)
gurad.pausetime = 10, 11
sparkno = S910
guard.sparkno = S900
sparkxy = ceil(-10*const(size.xscale)), ceil(-78*const(size.yscale))
hitsound = S6, 0
guardsound = S7, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -5
airguard.velocity = -3,-2
air.velocity = ifelse(p2movetype = H, -2, -3),ifelse(p2movetype = H, 0, -6)
air.fall = 1
fall.recover = 0

[State 200, 3]
type = HitDef
triggerall = var(3) = 1
trigger1 = anim = 400
trigger1 = AnimElem = 2
attr = S, NA
damage = 12, 0
animtype = Medium
guardflag = MA
priority = 3,Hit
pausetime = 10, ifelse(p2statetype = A, 1, 11)
gurad.pausetime = 10, 11
sparkno = S910
guard.sparkno = S900
sparkxy = ceil(-10*const(size.xscale)), ceil(-68*const(size.yscale))
hitsound = S8, 2
guardsound = S7, 0
ground.type = High
ground.slidetime = 22
ground.hittime  = 22
ground.velocity = -6
airguard.velocity = -3,-2
air.velocity = ifelse(p2movetype = H, -2, -3),ifelse(p2movetype = H, 0, -6)
air.fall = 1
fall.recover = 0

[State 200, 3]
type = HitDef
triggerall = var(3) = 1
trigger1 = anim = 410
trigger1 = AnimElem = 3
attr = S, NA
animtype  = Medium
damage    = 20
guardflag = MA
priority = 3,Hit
pausetime = 9, ifelse(p2statetype = A, 1, 11)
gurad.pausetime = 9, 11
sparkno = S910
guard.sparkno = S900 
sparkxy = ceil(-10*const(size.xscale)), ceil(-55*const(size.yscale))
hitsound   = S8,2
guardsound = S7,0
ground.type = low
ground.slidetime = 26
ground.hittime  = 26
ground.velocity = -6
airguard.velocity = -3,-3
air.velocity = ifelse(p2movetype = H, -2, -3),ifelse(p2movetype = H, 0, -6)
air.fall = 1
fall.recover = 0

[State 200, 4]
type = PlaySnd
triggerall = var(3) = 0
trigger1 = AnimElem = 2
value = 0, 4

[State 200, 5]
type = PlaySnd
triggerall = var(3) = 1
trigger1 = anim = 400
trigger1 = AnimElem = 2
value = 0, 1

[State 200, 6]
type = PlaySnd
triggerall = var(3) = 1
trigger1 = anim = 410
trigger1 = AnimElem = 3
value = 0, 1

[state 200, B]
type = Explod
trigger1 = movehit
trigger1 = numtarget
trigger1 = var(3) = 0 || var(3) = 1 && var(28) = 0
anim = ifelse(target,Name="PREDATOR WARRIOR" || target,Name="ALIEN WARRIOR" || target,Name="CHRYSALIS" || target,Name="RAZOR CLAWS" || target,Name="EGG CHAMBER" || target,Name="ROYAL GUARD", 840, 830)
postype = p2
pos = ceil(-10*const(size.xscale)), ceil(-70*const(size.yscale))
sprpriority = 3
bindtime = 1
id = 830
removetime = 15
facing = ifelse(target,p2dist x < 0, 1, -1)
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ウォリアー攻撃2
[Statedef 210]
type = S
movetype= A
physics = S
juggle  = 4
poweradd= 32
ctrl = 0
velset = 0,0
anim = 210
sprpriority = 2

[State 210, var(28)]
type = varset
trigger1 = var(3) = 1
trigger1 = time = 0
v= 28
value = ifelse(var(28)=1, 0, 1)

[State 210, turn]
type = Turn
trigger1 = var(58) = 2
trigger1 = time = 0
trigger1 = command = "holdback"

[State 210, 0]
type = varset
trigger1 = Time = 0
trigger1 = var(12) = 1
v= 12
value = 2

[state 210, 1]
type = ChangeAnim
triggerall = var(3) = 1
trigger1 = time = 0
value = ifelse(var(28)=0, 410, 400)

[State 210, 2]
type = HitDef
triggerall = var(3) = 0
trigger1 = AnimElem = 3
attr = S, NA
animtype  = Medium
damage    = 24
guardflag = MA
priority = 4, Hit
pausetime = 12, ifelse(p2statetype = A, 1, 13)
gurad.pausetime = 12, 13
sparkno = S910
guard.sparkno = S900 
sparkxy = ceil(-10*const(size.xscale)), ceil(-55*const(size.yscale))
hitsound   = S7,1
guardsound = S7,0
ground.type = low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -5
airguard.velocity = -3,-3
air.velocity = ifelse(p2movetype = H, -2, -3),ifelse(p2movetype = H, 0, -6)
air.fall = 1
fall.recover = 0

[State 210, 3]
type = HitDef
triggerall = var(3) = 1
trigger1 = anim = 410
trigger1 = AnimElem = 3
attr = S, NA
animtype  = Medium
damage    = 20
guardflag = MA
priority = 3,Hit
pausetime = 9, ifelse(p2statetype = A, 1, 11)
gurad.pausetime = 9, 11
sparkno = S910
guard.sparkno = S900 
sparkxy = ceil(-10*const(size.xscale)), ceil(-55*const(size.yscale))
hitsound   = S8,2
guardsound = S7,0
ground.type = low
ground.slidetime = 26
ground.hittime  = 26
ground.velocity = -6
airguard.velocity = -3,-3
air.velocity = ifelse(p2movetype = H, -2, -3),ifelse(p2movetype = H, 0, -6)
air.fall = 1
fall.recover = 0

[State 210, 3]
type = HitDef
triggerall = var(3) = 1
trigger1 = anim = 400
trigger1 = AnimElem = 2
attr = S, NA
damage = 12, 0
animtype = Medium
guardflag = MA
priority = 3,Hit
pausetime = 10, ifelse(p2statetype = A, 1, 11)
gurad.pausetime = 10, 11
sparkno = S910
guard.sparkno = S900
sparkxy = ceil(-10*const(size.xscale)), ceil(-68*const(size.yscale))
hitsound = S8, 2
guardsound = S7, 0
ground.type = High
ground.slidetime = 22
ground.hittime  = 22
ground.velocity = -6
airguard.velocity = -3,-2
air.velocity = ifelse(p2movetype = H, -2, -3),ifelse(p2movetype = H, 0, -6)
air.fall = 1
fall.recover = 0

[State 210, 4]
type = PlaySnd
triggerall = var(3) = 0
trigger1 = AnimElem = 3
value = 0, 3

[State 210, 5]
type = PlaySnd
triggerall = var(3) = 1
trigger1 = anim = 400
trigger1 = AnimElem = 2
value = 0, 1

[State 210, 6]
type = PlaySnd
triggerall = var(3) = 1
trigger1 = anim = 410
trigger1 = AnimElem = 3
value = 0, 1

[state 210, B]
type = Explod
trigger1 = movehit
trigger1 = numtarget
trigger1 = var(3) = 0 || var(3) = 1 && var(28) = 0
anim = ifelse(target,Name="PREDATOR WARRIOR" || target,Name="ALIEN WARRIOR" || target,Name="CHRYSALIS" || target,Name="RAZOR CLAWS" || target,Name="EGG CHAMBER" || target,Name="ROYAL GUARD", 840, 830)
postype = p2
pos = ceil(-10*const(size.xscale)), ceil(-62*const(size.yscale))
sprpriority = 3
bindtime = 1
id = 830
removetime = 15
facing = ifelse(target,p2dist x < 0, 1, -1)
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 210, 7]
type = varset
trigger1 = AnimTime = 0
trigger1 = var(12) = 2
v= 12
value = 0

[State 210, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------
;ウォリアー攻撃3
[Statedef 220]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 45
ctrl = 0
velset = 0,0
anim = 220
sprpriority = 2

[State 220, turn]
type = Turn
trigger1 = var(58) = 2
trigger1 = time = 0
trigger1 = command = "holdback"

[State 220, 0]
type = varset
trigger1 = Time = 0
trigger1 = var(12) = 3
v= 12
value = 4

[state 220, 1]
type = ChangeAnim
triggerall = var(3) = 1
trigger1 = time = 0
value = 420

[State 220, 2]
type = PlaySnd
triggerall = var(3) = 0
trigger1 = AnimElem = 3
value = 0, 2

[State 220, 4]
type = PlaySnd
triggerall = var(3) = 1
trigger1 = AnimElem = 3
value = 0, 4

[State 220, 5]
type = HitDef
triggerall = var(3) = 0
trigger1 = AnimElem = 3
attr = S, NA
animtype  = Back
damage    = 28
guardflag = MA
priority = 5, Hit  
pausetime = 11, ifelse(p2statetype = A, 1, 12)
gurad.pausetime = 11, 12
sparkno = S920
guard.sparkno = S900
sparkxy = ceil(-10*const(size.xscale)), ceil(-70*const(size.yscale))
hitsound   = S12,1
guardsound = S7,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -4
airguard.velocity = -3.5,-3
air.velocity = ifelse(p2movetype = H, -2, -3),ifelse(p2movetype = H, 0, -6)
air.fall = 1
fall.recover = 0

[State 220, 6]
type = HitDef
triggerall = var(3) = 1
trigger1 = AnimElem = 4
attr = S, NA
animtype  = Back
damage    = 20
guardflag = MA
priority = 4, Hit  
pausetime = 11, ifelse(p2statetype = A, 1, 12)
gurad.pausetime = 11, 12
sparkno = S920
guard.sparkno = S900
sparkxy = ceil(-10*const(size.xscale)), ceil(-70*const(size.yscale))
hitsound   = S8,3
guardsound = S7,0
ground.type = High
ground.slidetime = 22
ground.hittime  = 22
ground.velocity = -6
airguard.velocity = -3.5,-3
air.velocity = ifelse(p2movetype = H, -2, -3),ifelse(p2movetype = H, 0, -6)
air.fall = 1
fall.recover = 0

[state 220, B]
type = Explod
trigger1 = movehit
trigger1 = numtarget
trigger1 = var(3) = 0
anim = ifelse(target,Name="PREDATOR WARRIOR" || target,Name="ALIEN WARRIOR" || target,Name="CHRYSALIS" || target,Name="RAZOR CLAWS" || target,Name="EGG CHAMBER" || target,Name="ROYAL GUARD", 840, 830)
postype = p2
pos = ceil(-10*const(size.xscale)), ceil(-70*const(size.yscale))
sprpriority = 3
bindtime = 1
id = 830
removetime = 15
facing = ifelse(target,p2dist x < 0, 1, -1)
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 220, 7]
type = varset
trigger1 = AnimTime = 0
trigger1 = var(12) = 4
v= 12
value = 0

[State 220, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------
;ウォリアー攻撃3(素手時レバー前入れ)
[Statedef 225]
type    = S
movetype= A
physics = N
juggle  = 5
poweradd= 45
ctrl = 0
velset = 0,0
anim = 425
sprpriority = 2

[State 225, turn]
type = Turn
trigger1 = var(58) = 2
trigger1 = time = 0
trigger1 = command = "holdback"

[State 225, 0]
type = varset
trigger1 = Time = 0
trigger1 = var(12) = 3
v= 12
value = 4

[State 225, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 4

[State 225, 2]
type = velset
trigger1 = time = 1
x= 8

[State 225, 3]
type = veladd
trigger1 = vel x > 0
trigger1 = time >= 1
x= -.47

[State 225, 4]
type = velset
trigger1 = AnimElem = 5
x= 0

[State 225, 5]
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
animtype  = Back
damage    = 20
guardflag = MA
priority = 4, Hit  
pausetime = 11, ifelse(p2statetype = A, 1, 12)
gurad.pausetime = 11, 12
sparkno = S920
guard.sparkno = S900
sparkxy = ceil(-10*const(size.xscale)), ceil(-70*const(size.yscale))
hitsound   = S8,3
guardsound = S7,0
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -6
airguard.velocity = -4,-3
air.velocity = ifelse(p2movetype = H, -2, -3),ifelse(p2movetype = H, 0, -6)
air.fall = 1
fall.recover = 0

[State 225, 6]
type = varset
trigger1 = AnimTime = 0
trigger1 = var(12) = 4
v= 12
value = 0

[State 225, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ウォリアー攻撃4(スピア版)
[Statedef 230]
type    = S
movetype= A
physics = S
juggle  = 6
poweradd= 100
velset = 0,0
anim = 230
ctrl = 0
sprpriority = 2

[State 230, turn]
type = Turn
trigger1 = var(58) = 2
trigger1 = time = 0
trigger1 = command = "holdback"

[State 230, 0]
type = varset
trigger1 = Time = 0
v= 12
value = 0

[State 230, 1]
type = PlaySnd
trigger1 = AnimElem = 6
value = 0, 0

[State 230, 2]
type = HitDef
trigger1 = AnimElem = 6
attr = A, NA
animtype  = Hard
damage    = 52
priority  = 5,Hit
guardflag = MA
pausetime = 10, ifelse(p2statetype = A, 1, 14)
gurad.pausetime = 10, 14
sparkno = S930
guard.sparkno = S900
sparkxy = ceil(-10*const(size.xscale)), ceil(-70*const(size.yscale))
hitsound   = S8,3
guardsound = S7,0
ground.type = high
ground.slidetime = 26
ground.hittime  = 26
ground.velocity = -6,-6
guard.velocity = -7
airguard.velocity = -7,-2
air.velocity = ifelse(p2movetype = H, -2, -3),ifelse(p2movetype = H, 0, -6)
envshake.time = 12
envshake.freq = 120
envshake.ampl = 6
fall = 1
air.fall = 1
fall.recover = 0

[State 230, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ウォリアー攻撃4(素手版)
[Statedef 235]
type    = A
movetype= A
physics = N
juggle  = 6
poweradd= 22
velset = 0,0
anim = 430
ctrl = 0
sprpriority = 2

[State 235, turn]
type = Turn
trigger1 = var(58) = 2
trigger1 = time = 0
trigger1 = command = "holdback"

[State 235, 1]
type = velset
trigger1 = time = 0
trigger1 = var(12) = 6
x= 4.5

[State 235, 2]
type = varset
trigger1 = Time = 0
v= 12
value = 0

[State 235, 3]
type = Width
trigger1 = vel X > 0
trigger1 = AnimElemTime (1) >= 0
value = 25,0

[State 235, 4]
type = velset
trigger1 = AnimElem = 3
y= -4.8

[State 235, 5]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 4

[State 235, 6]
type = HitDef
trigger1 = AnimElem = 5
attr = A, NA
animtype  = Hard
damage    = 46
priority  = 5,Hit
guardflag = MA
pausetime = 11, ifelse(p2statetype = A, 1, 14)
sparkno = S930
guard.sparkno = S900
sparkxy = ceil(-10*const(size.xscale)), ceil(-65*const(size.yscale))
hitsound   = S8,3
guardsound = S7,0
ground.type = high
ground.slidetime = 22
ground.hittime  = 22
ground.velocity = -5,-7
guard.velocity = -7
airguard.velocity = -6,-3
air.velocity = ifelse(p2movetype = H, -2, -3),ifelse(p2movetype = H, 0, -6)
envshake.time = 12
envshake.freq = 120
envshake.ampl = 6
fall = 1
air.fall = 1
fall.recover = 1

[State 235, 7]
type = posadd
trigger1 = vel X > 0
trigger1 = moveguarded
x= -8

[State 235, 8]
type = gravity
trigger1 = time >= 2

[state 235, 9]
type = posset
trigger1 = time >= 2
trigger1 = vel Y > 0
trigger1 = pos Y >= 0
y= 0

[State 235, 10]
type = ChangeState
trigger1 = pos Y >= 0
trigger1 = vel Y > 0
trigger1 = Time >= 2
value = 0
ctrl = 1

;--------------------------------------------------------------
;ハンター攻撃1
[Statedef 500]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
ctrl = 0
anim = 500
poweradd = 30
sprpriority = 2

[state 500, 1]
type = ChangeAnim
triggerall = var(3) = 1
trigger1 = time = 0
value = 600

[State 500, 2]
type = HitDef
triggerall = var(3) = 0
trigger1 = AnimElem = 2
attr = S, NA
damage = 18, 0
animtype = Light
guardflag = MA
priority = 4, Hit
pausetime = 12, ifelse(p2statetype = A, 1, 13)
gurad.pausetime = 12, 13
sparkno = S910
guard.sparkno = S900
sparkxy = ceil(-10*const(size.xscale)), ceil(-60*const(size.yscale))
hitsound = S7,5
guardsound = S7, 0
ground.type = low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -4
airguard.velocity = -3,-2
air.velocity = ifelse(p2movetype = H, -2, -3),ifelse(p2movetype = H, 0, -6)
air.fall = 1
fall.recover = 0

[State 500, 3]
type = HitDef
triggerall = var(3) = 1
trigger1 = AnimElem = 2
attr = S, NA
damage = 12, 0
animtype = Medium
guardflag = MA
priority = 3,Hit
pausetime = 10, ifelse(p2statetype = A, 1, 11)
gurad.pausetime = 10, 11
sparkno = S910
guard.sparkno = S900
sparkxy = ceil(-10*const(size.xscale)), ceil(-60*const(size.yscale))
hitsound = S8, 2
guardsound = S7, 0
ground.type = high
ground.slidetime = 22
ground.hittime  = 22
ground.velocity = -6
airguard.velocity = -3,-2
air.velocity = ifelse(p2movetype = H, -2, -3),ifelse(p2movetype = H, 0, -6)
air.fall = 1
fall.recover = 0

[State 500, 4]
type = PlaySnd
triggerall = var(3) = 0
trigger1 = AnimElem = 2
value = 0, 4

[State 500, 5]
type = PlaySnd
triggerall = var(3) = 1
trigger1 = AnimElem = 2
value = 0, 1

[state 500, B]
type = Explod
trigger1 = movehit
trigger1 = numtarget
trigger1 = var(3) = 0
anim = ifelse(target,Name="PREDATOR WARRIOR" || target,Name="ALIEN WARRIOR" || target,Name="CHRYSALIS" || target,Name="RAZOR CLAWS" || target,Name="EGG CHAMBER" || target,Name="ROYAL GUARD", 840, 830)
postype = p2
pos = ceil(-10*const(size.xscale)), ceil(-60*const(size.yscale))
sprpriority = 3
bindtime = 1
id = 830
removetime = 15
facing = ifelse(target,p2dist x < 0, 1, -1)
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 500, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ハンター攻撃2
[Statedef 510]
type = S
movetype= A
physics = S
juggle  = 4
poweradd= 32
ctrl = 0
velset = 0,0
anim = 510
sprpriority = 2

[State 510, turn]
type = Turn
trigger1 = var(58) = 2
trigger1 = time = 0
trigger1 = command = "holdback"

[State 510, 0]
type = varset
trigger1 = Time = 0
trigger1 = var(13) = 1
v= 13
value = 2

[state 510, 1]
type = ChangeAnim
triggerall = var(3) = 1
trigger1 = time = 0
value = 610

[State 510, 2]
type = HitDef
triggerall = var(3) = 0
trigger1 = AnimElem = 2
attr = S, NA
animtype  = Medium
damage    = 24
guardflag = MA
priority = 4, Hit
pausetime = 14, ifelse(p2statetype = A, 1, 15)
gurad.pausetime = 14, 15
sparkno = S920
guard.sparkno = S900 
sparkxy = ceil(-10*const(size.xscale)), ceil(-55*const(size.yscale))
hitsound   = S7,5
guardsound = S7,0
ground.type = low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -4
airguard.velocity = -3,-3
air.velocity = ifelse(p2movetype = H, -2, -3),ifelse(p2movetype = H, 0, -6)
air.fall = 1
fall.recover = 0

[State 510, 3]
type = HitDef
triggerall = var(3) = 1
trigger1 = AnimElem = 3
attr = S, NA
animtype  = Medium
damage    = 20
guardflag = MA
priority = 3,Hit
pausetime = 10, ifelse(p2statetype = A, 1, 11)
gurad.pausetime = 10, 11
sparkno = S910
guard.sparkno = S900 
sparkxy = ceil(-10*const(size.xscale)), ceil(-55*const(size.yscale))
hitsound   = S8,2
guardsound = S7,0
ground.type = low
ground.slidetime = 26
ground.hittime  = 26
ground.velocity = -6
airguard.velocity = -3,-3
air.velocity = ifelse(p2movetype = H, -2, -3),ifelse(p2movetype = H, 0, -6)
air.fall = 1
fall.recover = 0

[State 510, 4]
type = PlaySnd
triggerall = var(3) = 0
trigger1 = AnimElem = 2
value = 0, 3

[State 510, 5]
type = PlaySnd
triggerall = var(3) = 1
trigger1 = AnimElem = 3
value = 0, 1

[state 510, B]
type = Explod
trigger1 = movehit
trigger1 = numtarget
anim = ifelse(target,Name="PREDATOR WARRIOR" || target,Name="ALIEN WARRIOR" || target,Name="CHRYSALIS" || target,Name="RAZOR CLAWS" || target,Name="EGG CHAMBER" || target,Name="ROYAL GUARD", 840, 830)
postype = p2
pos = ceil(-10*const(size.xscale)), ceil(-55*const(size.yscale))
sprpriority = 3
bindtime = 1
id = 830
removetime = 15
facing = ifelse(target,p2dist x < 0, 1, -1)
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 510, 6]
type = varset
trigger1 = AnimTime = 0
trigger1 = var(13) = 2
v= 13
value = 0

[State 510, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ハンター攻撃3
[Statedef 520]
type    = S
movetype= A
physics = S
anim = 520
juggle  = 5
poweradd= 30
ctrl = 0
sprpriority = 2
velset = 0,0

[State 520, turn]
type = Turn
trigger1 = var(58) = 2
trigger1 = time = 0
trigger1 = command = "holdback"

[State 520, 0]
type = varset
trigger1 = Time = 0
trigger1 = var(13) = 3
v= 13
value = 4

[state 520, 1]
type = ChangeAnim
triggerall = var(3) = 1
trigger1 = time = 0
value = 620

[State 520, 2]
type = HitDef
triggerall = var(3) = 0
trigger1 = AnimElem = 3
attr = S, NA
animtype  = Back
damage    = 28
guardflag = MA
priority = 5, Hit  
pausetime = 13, ifelse(p2statetype = A, 1, 15)
gurad.pausetime = 13, 15
sparkno = S940
guard.sparkno = S900 
sparkxy = ceil(-10*const(size.xscale)), ceil(-55*const(size.yscale))
hitsound   = S7,1
guardsound = S7,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -5
airguard.velocity = -4,-4
air.velocity = ifelse(p2movetype = H, -2, -3),ifelse(p2movetype = H, 0, -6)
air.fall = 0
fall.recover = 1

[State 520, 3]
type = HitDef
triggerall = var(3) = 1
trigger1 = AnimElem = 4
attr = S, NA
animtype  = Back
damage    = 20
guardflag = MA
priority = 4, Hit  
pausetime = 11, ifelse(p2statetype = A, 1, 12)
gurad.pausetime = 11, 12
sparkno = S930
guard.sparkno = S900 
sparkxy = ceil(-10*const(size.xscale)), ceil(-55*const(size.yscale))
hitsound   = S8,3
guardsound = S7,0
ground.type = High
ground.slidetime = 22
ground.hittime  = 22
ground.velocity = -6
airguard.velocity = -3,-4
air.velocity = ifelse(p2movetype = H, -2, -3),ifelse(p2movetype = H, 0, -6)
air.fall = 1
fall.recover = 0

[State 520, 4]
type = PlaySnd
triggerall = var(3) = 0
trigger1 = AnimElem = 3
value = 0,2
volume = 255

[State 520, 6]
type = PlaySnd
triggerall = var(3) = 1
trigger1 = Time = 1
value = 0,1

[state 520, B]
type = Explod
trigger1 = movehit
trigger1 = numtarget
trigger1 = var(3) = 0
anim = ifelse(target,Name="PREDATOR WARRIOR" || target,Name="ALIEN WARRIOR" || target,Name="CHRYSALIS" || target,Name="RAZOR CLAWS" || target,Name="EGG CHAMBER" || target,Name="ROYAL GUARD", 840, 830)
postype = p2
pos = ceil(-10*const(size.xscale)), ceil(-55*const(size.yscale))
sprpriority = 3
bindtime = 1
id = 830
removetime = 15
facing = ifelse(target,p2dist x < 0, 1, -1)
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 520, 7]
type = varset
trigger1 = AnimTime = 0
trigger1 = var(13) = 4
v= 13
value = 0

[State 520, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------
;ハンター攻撃3(素手時レバー前入れ)
[Statedef 525]
type    = S
movetype= A
physics = N
juggle  = 5
poweradd= 45
ctrl = 0
velset = 0,0
anim = 620
sprpriority = 2

[State 525, turn]
type = Turn
trigger1 = var(58) = 2
trigger1 = time = 0
trigger1 = command = "holdback"

[State 525, 0]
type = varset
trigger1 = Time = 0
trigger1 = var(13) = 3
v= 13
value = 4

[State 525, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 4

[State 525, 2]
type = velset
trigger1 = time = 1
x= 8

[State 525, 3]
type = veladd
trigger1 = time >= 1
trigger1 = vel x > 0
x= -.44

[State 525, 4]
type = velset
trigger1 = AnimElem = 8
x= 0

[State 525, 5]
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
animtype  = Back
damage    = 20
guardflag = MA
priority = 4, Hit  
pausetime = 8, ifelse(p2statetype = A, 1, 12)
gurad.pausetime = 8, 12
sparkno = S930
guard.sparkno = S900
sparkxy = ceil(-10*const(size.xscale)), ceil(-70*const(size.yscale))
hitsound   = S8,3
guardsound = S7,0
ground.type = High
ground.slidetime = 22
ground.hittime  = 22
ground.velocity = -6
airguard.velocity = -3,-4
air.velocity = ifelse(p2movetype = H, -2, -3),ifelse(p2movetype = H, 0, -6)
air.fall = 1
fall.recover = 0

[State 525, 6]
type = Width
trigger1 = 1
value = 15,0

[State 525, 7]
type = varset
trigger1 = AnimTime = 0
trigger1 = var(13) = 4
v= 13
value = 0

[State 525, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ハンター攻撃4(スピアー)
[Statedef 530]
type    = S
movetype= A
physics = S
juggle  = 6
poweradd= 45
ctrl = 0
anim = 530
sprpriority = 2

[State 530, turn]
type = Turn
trigger1 = var(58) = 2
trigger1 = time = 0
trigger1 = command = "holdback"

[State 530, 0]
type = varset
trigger1 = Time = 0
v= 13
value = 0

[State 530, 1]
type = PlaySnd
triggerall = var(3) = 0
trigger1 = AnimElem = 3
value = 0, 5
volume = 255

[State 530, 2]
type = HitDef
triggerall = var(3) = 0
trigger1 = AnimElem = 5
attr = C, NA
damage    = 52
animtype  = hard
guardflag = MA
priority = 5, Hit  
pausetime = 10, ifelse(p2statetype = A, 1, 14)
gurad.pausetime = 10, 14
sparkno = S941
guard.sparkno = S900
sparkxy = ceil(-10*const(size.xscale)), ceil(-60*const(size.yscale))
hitsound   = S7,1
guardsound = S7,0
ground.type = high
ground.slidetime = 26
ground.hittime  = 26
ground.velocity = -3,-8
guard.velocity = -7
airguard.velocity = -3,-5
air.velocity = ifelse(p2movetype = H, -2, -3),ifelse(p2movetype = H, 0, -6)
fall = 1
air.fall = 1
fall.recover = 0

[state 530, B]
type = Explod
trigger1 = movehit
trigger1 = numtarget
trigger1 = var(3) = 0 || var(3) = 1 && var(28) = 0
anim = ifelse(target,Name="PREDATOR WARRIOR" || target,Name="ALIEN WARRIOR" || target,Name="CHRYSALIS" || target,Name="RAZOR CLAWS" || target,Name="EGG CHAMBER" || target,Name="ROYAL GUARD", 840, 830)
postype = p2
pos = ceil(-10*const(size.xscale)), ceil(-60*const(size.yscale))
sprpriority = 3
bindtime = 1
id = 830
removetime = 15
facing = ifelse(target,p2dist x < 0, 1, -1)
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 530, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ハンター攻撃4(素手版)
[Statedef 535]
type    = A
movetype= A
physics = N
juggle  = 6
poweradd= 22
velset = 0,0
anim = 630
ctrl = 0
sprpriority = 2

[State 535, turn]
type = Turn
trigger1 = var(58) = 2
trigger1 = time = 0
trigger1 = command = "holdback"

[State 535, 1]
type = velset
trigger1 = time = 0
trigger1 = var(13) = 6
x= 4.5

[State 535, 2]
type = varset
trigger1 = Time = 0
v= 13
value = 0

[State 535, 3]
type = Width
trigger1 = vel X > 0
value = 35,0

[State 535, 4]
type = velset
trigger1 = AnimElem = 3
y= -5

[State 535, 5]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 4
persistent = 0

[State 535, 6]
type = HitDef
trigger1 = AnimElem = 4
attr = A, NA
animtype  = Hard
damage    = 46
priority  = 5,Hit
guardflag = MA
pausetime = 13, ifelse(p2statetype = A, 1, 16)
sparkno = S920
guard.sparkno = S900
sparkxy = ceil(-20*const(size.xscale)), ceil(-65*const(size.yscale))
hitsound   = S7,2
guardsound = S7,0
ground.type = high
ground.slidetime = 22
guard.slidetime = 22
ground.hittime  = 22
ground.velocity = -5,-7
guard.velocity = -7
airguard.velocity = -4,-4
air.velocity = ifelse(p2movetype = H, -2, -3),ifelse(p2movetype = H, 0, -6)
envshake.time = 12
envshake.freq = 120
envshake.ampl = 6
fall = 1
air.fall = 1
fall.recover = 1

[State 535, 7]
type = posadd
trigger1 = vel X > 0
trigger1 = moveguarded
x= -8

[State 535, 8]
type = gravity
trigger1 = time >= 2

[state 535, 9]
type = posset
trigger1 = time >= 2
trigger1 = vel Y > 0
trigger1 = pos Y >= 0
y= 0

[State 535, 10]
type = ChangeState
trigger1 = pos Y >= 0
trigger1 = vel Y > 0
trigger1 = Time >= 2
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 立ちキック
[Statedef 255]
type    = S
movetype= A
physics = S
juggle  = 6
poweradd= 65
ctrl = 0
velset = 0,0
anim = 255
sprpriority = 2

[State 255, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 0

[State 255, 2]
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
animtype  = Medium
damage    = 58
guardflag = MA
priority = 4, Hit  
pausetime = 14, ifelse(p2statetype = A, 1, 14)
gurad.pausetime = 14, 14
sparkno = S920
guard.sparkno = S900
sparkxy = ceil(-10*const(size.xscale)), ceil(-77*const(size.yscale))
hitsound   = S7,2
guardsound = S7,0
ground.type = high
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -6
guard.velocity = -5
airguard.velocity = -4,-4
air.velocity = ifelse(p2movetype = H, -2, -3),ifelse(p2movetype = H, 0, -6)
air.fall = 1
fall.recover = 0

[State 255, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;スライディング
[Statedef 260]
type    = C
movetype= A
physics = N
juggle  = 1
poweradd= 40
velset= 0,0
ctrl = 0
anim = 260
sprpriority = 2

[state 260, 1]
type = ChangeAnim
triggerall = var(3) = 1
trigger1 = time = 0
value = 261
elem = ifelse(var(58)=2, 1, 2)

[state 260, 1]
type = ChangeAnim
triggerall = var(3) = 2
trigger1 = time = 0
value = 262
elem = ifelse(var(58)=2, 1, 2)

[State 260, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = C, NA
damage  = 40
hitflag = MAFD
guardflag = L
priority = 3, Hit  
pausetime = 11,11
sparkno = S910
guard.sparkno = S900
sparkxy = ceil(-5*const(size.xscale)), ceil(-10*const(size.yscale))
hitsound   = S7,2
guardsound = S7,0
ground.type = low
ground.slidetime = 28
ground.hittime  = 28
ground.velocity = -3,-5
air.velocity = -3,-2
guard.velocity = -4
fall = 1
air.fall = 1
fall.recover = 0

[State 260, 2]
type = velset
trigger1 = AnimElem = 2,=2 
x= 6

[State 260, 3]
type = veladd
trigger1 = vel x > 0
trigger1 = AnimElem = 2,>=2 && AnimElem = 4,<0
x= -.46

[State 260, 4]
type = velset
trigger1 = AnimElem = 4
x= 0

[State 260, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = ifelse(var(58)=2, 0, 11)
ctrl = 1

;---------------------------------------------------------------------------
;ガードキャンセルキック
[Statedef 270]
type    = S
movetype= A
physics = S
juggle  = 7
poweradd=  0
velset= 0,0
ctrl = 0
anim = 270
sprpriority = 2

[State 270, TurnA]
type = Turn
trigger1 = var(58) = 2
trigger1 = time = 0

[State 270, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 270, 2]
type = poweradd
trigger1 = var(58) != 2
trigger1 = time = 0
value = -500

[State 270, 3]
type = HitDef
trigger1 = AnimElem = 3
attr = C, NA
damage    = 28
hitflag = MA
guardflag = L
priority = 7, Hit  
pausetime = 12,12
sparkno = S920
guard.sparkno = S900
sparkxy = ceil(-5*const(size.xscale)), ceil(-10*const(size.yscale))
hitsound   = S7,2
guardsound = S7,0
ground.type = low
ground.slidetime = 28
ground.hittime  = 28
ground.velocity = -3,-5
air.velocity = -3,-2
guard.velocity = -8
fall = 1
air.fall = 1
fall.recover = 0
kill = ifelse(var(58) != 2, 0, 1)

[State 270, 4]
type = Explod
trigger1 = AnimElem = 2
anim = 271
id = 271
ownpal = 1
sprpriority = 4
postype = p1
pos = 0, 0
bindtime = -1
facing = 1
removetime = 9
removeongethit = 1

[State 270, TurnB]
type = Turn
trigger1 = var(58) = 2
trigger1 = AnimTime = 0

[State 270, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;スライディング(ロング)
[Statedef 275]
type    = C
movetype= A
physics = N
juggle  = 1
poweradd= 48
velset= 0,0
ctrl = 0
anim = 275
sprpriority = 2

[state 275, 1]
type = ChangeAnim
triggerall = var(3) = 1
trigger1 = time = 0
value = 276
elem = ifelse(var(58)=2, 1, 2)

[state 275, 1]
type = ChangeAnim
triggerall = var(3) = 2
trigger1 = time = 0
value = 277
elem = ifelse(var(58)=2, 1, 2)

[State 275, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = C, NA
damage  = 30
hitflag = MAFD
guardflag = L
priority = 3, Hit  
pausetime = 11,11
sparkno = S910
guard.sparkno = S900
sparkxy = ceil(-5*const(size.xscale)), ceil(-10*const(size.yscale))
hitsound   = S7,2
guardsound = S7,0
ground.type = low
ground.slidetime = 28
ground.hittime  = 28
ground.velocity = -4
air.velocity = -3,-2
guard.velocity = -4
air.fall = 1
fall.recover = 0

[State 275, 2]
type = HitDef
trigger1 = AnimElem = 4
attr = C, NA
damage  = 25
hitflag = MAFD
guardflag = L
priority = 3, Hit  
pausetime = 11,11
sparkno = S910
guard.sparkno = S900
sparkxy = ceil(-5*const(size.xscale)), ceil(-10*const(size.yscale))
hitsound   = S8,3
guardsound = S7,0
ground.type = low
ground.slidetime = 28
ground.hittime  = 28
ground.velocity = -3,-5
air.velocity = -3,-2
guard.velocity = -4
fall = 1
air.fall = 1
fall.recover = 0

[State 275, 3]
type = velset
trigger1 = AnimElem = 2,=2
x= 12

[State 260, 4]
type = veladd
trigger1 = vel x > 0
trigger1 = AnimElem = 2,>=2 && AnimElem = 5,<0
x= -.6

[State 275, 5]
type = velset
trigger1 = AnimElem = 5
x= 0

[State 275, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = ifelse(var(58)=2, 0, 11)
ctrl = 1

;---------------------------------------------------------------------------
;空中パンチ(ハンター)
[Statedef 280]
type    = A
movetype= A
physics = A
juggle  = 8
poweradd= 52
ctrl = 0
anim = ifelse(var(3)=0, 280, 281)
sprpriority = 1

[State 280, reset]
type = varset
trigger1 = numtarget
trigger1 = target,hitfall
v= 29
value = 0

[State 280, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 1

[State 280, 2]
type = HitDef
trigger1 = AnimElemTime(2) >= 0
trigger1 = hitcount <= 3
attr = A, NA
damage = 16
guardflag = HA
priority = 3,Hit
pausetime = 8, 12
sparkno = S920
guard.sparkno = S900
sparkxy = ceil(-10*const(size.xscale)), ceil(-40*const(size.yscale))
hitsound   = S0,6
guardsound = S7,0
animtype = High
ground.type = High
ground.slidetime = 19 ;38
ground.hittime  = 19  ;38
ground.velocity = ifelse(var(29)<8, -10, -5),ifelse(var(29)<8, 0, -6)
air.velocity = -5
fall = ifelse(var(29)<8, 0, 1)
air.fall = 1 ;ifelse(hitcount >= 3, 1, 0)
fall.recover = 1
persistent = 8

[State 280, down]
type = varadd
trigger1 = movehit
v= 29
value = 1

;------------------------------------------------------------
;空中パンチ2
[Statedef 290]
type    = A
movetype= A
physics = A
juggle  = 7
poweradd= 18
ctrl = 0
anim = 291
sprpriority = 2
hitcountpersist = 1

[state 290, 0]
type = ChangeAnim
triggerall = var(3) != 0
trigger1 = time = 0
value = 290

[State 290, reset]
type = varset
trigger1 = numtarget
trigger1 = target,hitfall
v= 29
value = 0

[State 290, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 0

[State 290, 2]
type = HitDef
trigger1 = AnimElem = 3
attr = A, NA
damage    = 24
guardflag = HA
priority = 4,Hit
pausetime = 8,14
sparkno = S931
guard.sparkno = S900
sparkxy = ceil(-10*const(size.xscale)), ceil(-40*const(size.yscale))
hitsound   = S7,1
guardsound = S7,0
ground.type = high
ground.slidetime = 17 ;34
ground.hittime  = 17  ;34
ground.velocity = ifelse(var(29)<4, -10, -5),ifelse(var(29)<4, 0, -6)
guard.velocity = -8
air.velocity = -5,-6
airguard.velocity = -6,-3
fall = ifelse(var(29)<4, 0, 1)
air.fall = 1
fall.recover = 1

[state 290, B]
type = Explod
trigger1 = movehit
trigger1 = numtarget
anim = ifelse(target,Name="PREDATOR WARRIOR" || target,Name="ALIEN WARRIOR" || target,Name="CHRYSALIS" || target,Name="RAZOR CLAWS" || target,Name="EGG CHAMBER" || target,Name="ROYAL GUARD", 840, 830)
postype = p2
pos = ceil(-10*const(size.xscale)), ceil(-70*const(size.yscale))
sprpriority = 3
bindtime = 1
id = 830
removetime = 15
facing = ifelse(target,p2dist x < 0, 1, -1)
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 290, down]
type = varadd
trigger1 = movehit
v= 29
value = 2
persistent = 0

;---------------------------------------------------------------------------
;空中パンチ(ウォリアー)
[Statedef 295]
type    = A
movetype= A
physics = A
juggle  = 8
poweradd= 50
ctrl = 0
anim = ifelse(var(3)=0, 295, 296)
sprpriority = 1

[State 295, reset]
type = varset
trigger1 = numtarget
trigger1 = target,hitfall
v= 29
value = 0

[State 295, 2]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 1

[State 295, 3]
type = HitDef
trigger1 = AnimElemTime(2) >= 0
trigger1 = hitcount <= 3
attr = A, NA
damage = 16
guardflag = HA
priority = 3,Hit
pausetime = 8, 12
sparkno = S920
guard.sparkno = S900
sparkxy = ceil(-10*const(size.xscale)), ceil(-40*const(size.yscale))
hitsound   = S0,6
guardsound = S7,0
animtype = hard
ground.type = High
ground.slidetime = 19
ground.hittime  = 19
ground.velocity = ifelse(var(29)<8, -10, -5),ifelse(var(29)<8, 0, -6)
air.velocity = -5
fall = ifelse(var(29)<8, 0, 1)
air.fall = 1 ;ifelse(hitcount >= 3, 1, 0)
fall.recover = 1
persistent = 5

[State 295, down]
type = varadd
trigger1 = movehit
v= 29
value = 1
persistent = 5

;---------------------------------------------------------------------------
;空中キック1
[Statedef 300]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 28
ctrl = 0
anim = 305
sprpriority = 2

[state 300, 1]
type = ChangeAnim
triggerall = var(3) != 0
trigger1 = time = 0
value = 300

[State 300, reset]
type = varset
trigger1 = numtarget
trigger1 = target,hitfall
v= 29
value = 0

[State 300, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 0
persistent = 0

[State 300, 2]
type = HitDef
trigger1 = AnimElem = 3
attr = A, NA
damage = 22
guardflag = HA
priority = 4,Hit
animtype  = hard
pausetime = 8, 12
sparkno = S920
guard.sparkno = S900
sparkxy = ceil(-5*const(size.xscale)), ceil(-50*const(size.yscale))
hitsound   = S8,3
guardsound = S7,0
ground.type = High
ground.slidetime = 20 ;40
ground.hittime  = 20 ;40
ground.velocity = ifelse(var(29)<8, -10, -3),ifelse(var(29)<8, 0, -8)
air.velocity = -3,-6
fall = ifelse(var(29)<8, 0, 1)
air.fall = 1

[State 300, down]
type = varadd
trigger1 = movehit
v= 29
value = 4
persistent = 0

[State 300, 3]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = var(3) = 0
value = 301

[State 300, 4]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = var(3) = 1
value = 302

[State 300, 5]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = var(3) = 2
value = 303

;---------------------------------------------------------------------------
;空中キック2
[Statedef 310]
type    = A
movetype= A
physics = A
juggle  = 2
poweradd= 60
ctrl = 0
anim = 311
sprpriority = 2
hitcountpersist = 1

[State 310, turn]
type = Turn
trigger1 = var(58) != 0
trigger1 = time = 0 && command = "holdback"

[State 310, velA]
type = velset
trigger1 = var(58) != 0
trigger1 =  vel X != 0
trigger1 = time = 0 && command = "holdback"
x= fvar(1)
y= fvar(2)

[State 310, velB]
type = veladd
trigger1 = var(58) != 0
trigger1 = time = 0 && vel X = 0
x= 9

[state 310, 0]
type = ChangeAnim
triggerall = var(3) != 0
trigger1 = time = 0
value = 310

[State 310, reset]
type = varset
trigger1 = numtarget
trigger1 = target,hitfall
v= 29
value = 0

[State 310, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 0
persistent = 0

[State 310, 2]
type = HitDef
trigger1 = AnimElem = 3
attr = A, NA
damage    = 28
guardflag = HA
priority = 4,Hit
pausetime = 8, 13
sparkno = S931
guard.sparkno = S900
sparkxy = ceil(-10*const(size.xscale)), ceil(-40*const(size.yscale))
hitsound   = S8,3
guardsound = S7,0
animtype = hard
ground.type = High
ground.slidetime = 18 ;36
ground.hittime  = 18 ;36
ground.velocity = ifelse(var(29)<8, -10, -3),ifelse(var(29)<8, 0, -8)
air.velocity = -3,-6
fall = ifelse(var(29)<8, 0, 1)
air.fall = 1 ;ifelse(hitcount >= 1, 1, 0)

[State 310, down]
type = varadd
trigger1 = movehit
v= 29
value = 4
persistent = 0

[State 310, 3]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = var(3) = 0
value = 301

[State 310, 4]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = var(3) = 1
value = 302

[State 310, 5]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = var(3) = 2
value = 303

;---------------------------------------------------------------------------
;空中キック3
[Statedef 315]
type    = A
movetype= A
physics = A
juggle  = 2
poweradd= 20
ctrl = 0
anim = 305
sprpriority = 2

[State 315, turn]
type = Turn
trigger1 = var(58) != 0
trigger1 = time = 0 && command = "holdback"

[State 315, velA]
type = velset
trigger1 = var(58) != 0
trigger1 = time = 0 && command = "holdback"
x= fvar(1)
y= fvar(2)

[State 310, velB]
type = veladd
trigger1 = var(58) != 0
trigger1 = time = 0
x= 3
y= -3

[state 315, 0]
type = ChangeAnim
triggerall = var(3) != 0
trigger1 = time = 0
value = 300

[State 315, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 4
persistent = 0

[State 315, 2]
type = HitDef
trigger1 = AnimElem = 3
attr = A, NA
damage = 20
guardflag = HA
priority = 4,Hit
pausetime = 8, 12
sparkno = S920
guard.sparkno = S900
sparkxy = ceil(-5*const(size.xscale)), ceil(-50*const(size.yscale))
hitsound   = S8,3
guardsound = S7,0
ground.type = high
ground.slidetime = 26
ground.hittime  = 26
ground.velocity = -3,-8
guard.velocity = -8
air.velocity = -3,-8
airguard.velocity = -5,-3
fall = 1
air.fall = 1
fall.recover = 1

[State 315, reset]
type = varset
trigger1 = movehit
v= 29
value = 0

[State 315, 3]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = var(3) = 0
value = 301

[State 315, 4]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = var(3) = 1
value = 302

[State 315, 5]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = var(3) = 2
value = 303

;---------------------------------------------------------------------------
;プラズマキャノン(立ち)
[Statedef 860]
type    = S
movetype= A
physics = S
poweradd= 0
velset = 0,0
ctrl = 0
sprpriority = 2

[state 860, change1]
type = ChangeAnim
triggerall = numexplod(4510) = 1
trigger1 = time = 0
value = ifelse(var(3) = 0, 891, ifelse(var(3) = 1, 894, 897))

[state 860, change2]
type = ChangeAnim
triggerall = numexplod(4510) = 0
trigger1 = time = 0
value = ifelse(var(3) = 0, 890, ifelse(var(3) = 1, 893, 896))

[state 860, 1]
type = varadd
triggerall = var(8) = 0
triggerall = anim = 890 || (anim = 893 || anim = 896)
trigger1 = AnimElem = 1,=3
v = 14
value = -78

[State 860, 2]
type = Explod
triggerall = anim = 890 || (anim = 893 || anim = 896)
trigger1 = AnimElem = 1,=1
anim = 4530
id = 4530
pos = 0,0
postype = p1
facing = facing
sprpriority = 3
bindtime = -1
removetime = 11
persistent = 0

[State 860, 3]
type = Explod
triggerall = anim = 890 || (anim = 893 || anim = 896)
trigger1 = AnimElem = 1,=2
anim = 880
id = 880
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 13
ownpal = 1
scale = const(size.xscale), const(size.yscale)
persistent = 0

[State 860, 4]
type = Explod
triggerall = var(21) = 0
triggerall = anim = 890 || (anim = 893 || anim = 896)
trigger1 = AnimElem = 1,=3
anim = 882
id = 882
pos = 0,0
postype = p1
sprpriority = 3
bindtime = -1
removetime = 4
ownpal = 0
removeongethit = 1
scale = const(size.xscale), const(size.yscale)

[state 860, 5]
type = Helper
triggerall = Numhelper(891) = 0
triggerall = anim = 890 || (anim = 893 || anim = 896)
trigger1 = AnimElem = 1,=3
id = 861
name = "en1"
sprpriority = 5
pos = ceil(-3*const(size.xscale)), ceil(-83*const(size.yscale))
postype = p1
stateno = 861
helpertype = normal
keyctrl = 0
ownpal = 1
persistent = 0

[state 860, 6]
type = Helper
triggerall = Numhelper(891) >= 1
triggerall = anim = 890 || (anim = 893 || anim = 896)
trigger1 = AnimElem = 1,=3
id = 873
name = "homingEN"
sprpriority = 5
pos = ceil(-3*const(size.xscale)), ceil(-83*const(size.yscale))
postype = p1
stateno = 873
helpertype = normal
keyctrl = 0
ownpal = 1
persistent = 0

[state 860, 7]
type = PlaySnd
triggerall = NumExplod(950) = 0
triggerall = anim = 890 || (anim = 893 || anim = 896)
trigger1 = AnimElem = 1,=3
persistent = 0
value = S11,1

[State 860, 8]
type = Explod
triggerall = anim = 891 || (anim = 894 || anim = 897)
trigger1 = AnimElem = 1,=2
anim = 950
id = 950
pos = ceil(-4*const(size.xscale)), ceil(-6*const(size.yscale))
postype = p1
facing = facing
sprpriority = 3
bindtime = -1
removetime = 17
ownpal = 1
scale = const(size.xscale),const(size.yscale)

[state 860, 9]
type = PlaySnd
triggerall = NumExplod(950) = 1
triggerall = anim = 891 || (anim = 894 || anim = 897)
trigger1 = AnimElem = 1,=3
persistent = 0
value = S8,0

[State 860, turn]
type = Turn
triggerall = var(58) = 2
triggerall = command = "holdback"
trigger1 = time = 0
trigger2 = AnimElem = 1,>=4

[state 860, 10]
type = changestate
trigger1 = Animtime = 0
trigger1 = var(8) = 1 && command = "holdx" && command != "holddown"
value = 860

[state 860, 11]
type = changestate
trigger1 = var(58) != 2
trigger1 = Animtime = 0
trigger1 = var(8) = 1 && command = "holdx" && command = "holddown"
value = 920

[state 860, 12]
type = changestate
trigger1 = Animtime = 0
value = 0
ctrl = 1

;----------------------------------------------------------
;プラズマ弾地上（ノーマル弾）
[Statedef 861]
type = A
movetype = A
physics = N
velset = 0,0
anim = 870
sprpriority = 5

[State 861, 0]
type = AssertSpecial
trigger1 = 1
Flag = noshadow

[State 861, 1]
type = Hitdef
trigger1 = 1
attr = A, SP
animtype  = Hard
damage    = 92, 4
getpower  = 0
priority  = 5
hitflag = MAF
guardflag = MA
pausetime = 1,10
sparkno = S881
guard.sparkno = -1
sparkxy = -15,-10
hitsound   = -1
guardsound = -1
ground.type = Low
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = -3,-8
guard.velocity = -7
air.velocity = -3,-7.5
airguard.velocity = -5, -4
envshake.time = 8
envshake.freq = 100
envshake.ampl = 10
fall = 1
fall.recover = 0
persistent = 0

[State 861, target]
type = TargetState
trigger1 = movehit
value = 970
ignorehitpause = 1

[state 861, 16]
type = changestate
trigger1 = movecontact
value = 869
ignorehitpause = 1

[State 861, reset]
type = Movehitreset
trigger1 = numtarget
trigger1 = target,stateno = 970
ignorehitpause = 1

[State 861, 2]
type = VarSet
trigger1 = time = 0
fvar(5) = ifelse((root,fvar(8)=[0,1]),1,ifelse((root,fvar(8)=[-1,0]),-1,root,fvar(8)))

[State 861, 3]
type = VarSet
trigger1 = time = 0
fvar(6) = ceil(83*const(size.yscale))

[State 861, 4]
type = VarSet
trigger1 = time = 0
ignorehitpause = 1
fvar(7) = atan(fvar(5)/fvar(6))-(.5*pi*1)

[State 861, 5]
type = VelSet
trigger1 = time = 1
x = 3*cos(fvar(7))
y = -3*sin(fvar(7))

[State 861, 6]
type = VelAdd
trigger1 = time >= 1
trigger1 = vel x < 14
x = .35*cos(fvar(7))
y = -.35*sin(fvar(7))

[state 861, 7]
type = Explod
trigger1 = AnimElemTime(1) = 1
trigger2 = AnimElemTime(1) = 3
anim = 862
id = 862
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 861, 8]
type = Explod
trigger1 = AnimElemTime(2) = 2
trigger2 = AnimElemTime(2) = 4
anim = 863
id = 863
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 861, 9]
type = Explod
trigger1 = AnimElemTime(3) = 2
trigger2 = AnimElemTime(3) = 4
anim = 864
id = 864
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 861, 10]
type = Explod
trigger1 = AnimElemTime(4) = 2
trigger2 = AnimElemTime(4) = 4
anim = 865
id = 865
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 861, 11]
type = Explod
trigger1 = AnimElemTime(5) = 2
trigger2 = AnimElemTime(5) = 4
anim = 866
id = 866
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 861, 12]
type = Explod
trigger1 = AnimElemTime(6) = 2
trigger2 = AnimElemTime(6) = 4
anim = 867
id = 867
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 861, 12]
type = Explod
trigger1 = AnimElemTime(7) = 2
trigger2 = AnimElemTime(7) = 4
anim = 868
id = 868
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 861, 13]
type = Explod
trigger1 = AnimElemTime(8) = 2
trigger2 = AnimElemTime(8) = 4
anim = 869
id = 869
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 861, 14]
type = NotHitBy
trigger1 = 1
value = SCA

[state 861, 15]
type = changestate
trigger1 = pos Y >= 0
value = 870
ctrl = 0

[state 861, 16]
type = changestate
trigger1 = FrontEdgeBodyDist <= -120
trigger2 = BackEdgeBodyDist <= -120
value = 871
ctrl = 0

[state 861, 17]
type = destroyself
trigger1 = FrontEdgeBodyDist <= -120
trigger2 = BackEdgeBodyDist <= -120

;------------------------------------------------------------------------
;プラズマ弾空中（下方軌道）
[Statedef 862]
type = A
movetype = A
physics = N
velset = 0,0
anim = 870
sprpriority = 5

[State 862, 0]
type = AssertSpecial
trigger1 = 1
Flag = noshadow

[State 862, 1]
type = Hitdef
trigger1 = 1
attr = A, SP
animtype  = Hard
damage    = 92, 4
getpower  = 0
priority  = 5
hitflag = MAF
guardflag = MA
pausetime = 1,10
sparkno = S881
guard.sparkno = -1
sparkxy = -15,-10
hitsound   = -1
guardsound = -1
ground.type = Low
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = -3,-8
guard.velocity = -7
air.velocity = -3,-7.5
airguard.velocity = -5, -4
envshake.time = 8
envshake.freq = 100
envshake.ampl = 10
fall = 1
fall.recover = 0
persistent = 0

[State 862, target]
type = TargetState
trigger1 = movehit
value = 970
ignorehitpause = 1

[state 862, 14]
type = changestate
trigger1 = movecontact
value = 869
ignorehitpause = 1

[State 862, reset]
type = Movehitreset
trigger1 = numtarget
trigger1 = target,stateno = 970
ignorehitpause = 1

[State 862, 2]
type = velset
trigger1 = time = 1
x= .7
y= 7

[State 862, 3]
type = veladd
trigger1 = time >= 1
trigger1 = pos Y >= -122
x= .4
y= -.2

[state 862, 4]
type = Explod
trigger1 = AnimElemTime(1) = 1
trigger2 = AnimElemTime(1) = 3
anim = 862
id = 862
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 862, 5]
type = Explod
trigger1 = AnimElemTime(2) = 2
trigger2 = AnimElemTime(2) = 4
anim = 863
id = 863
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 862, 6]
type = Explod
trigger1 = AnimElemTime(3) = 2
trigger2 = AnimElemTime(3) = 4
anim = 864
id = 864
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 862, 7]
type = Explod
trigger1 = AnimElemTime(4) = 2
trigger2 = AnimElemTime(4) = 4
anim = 865
id = 865
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 862, 8]
type = Explod
trigger1 = AnimElemTime(5) = 2
trigger2 = AnimElemTime(5) = 4
anim = 866
id = 866
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 862, 9]
type = Explod
trigger1 = AnimElemTime(6) = 2
trigger2 = AnimElemTime(6) = 4
anim = 867
id = 867
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 862, 10]
type = Explod
trigger1 = AnimElemTime(7) = 2
trigger2 = AnimElemTime(7) = 4
anim = 868
id = 868
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 862, 11]
type = Explod
trigger1 = AnimElemTime(8) = 2
trigger2 = AnimElemTime(8) = 4
anim = 869
id = 869
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 862, 12]
type = NotHitBy
trigger1 = 1
value = SCA

[state 862, 13]
type = changestate
trigger1 = pos Y >= 0
value = 870
ctrl = 0

[state 862, 14]
type = changestate
trigger1 = FrontEdgeBodyDist <= -120
trigger2 = BackEdgeBodyDist <= -120
value = 871
ctrl = 0

[state 862, 15]
type = destroyself
trigger1 = FrontEdgeBodyDist <= -120
trigger2 = BackEdgeBodyDist <= -120

;------------------------------------------------------------------------
;プラズマ弾空中（水平軌道）
[Statedef 863]
type = A
movetype = A
physics = N
velset = 0,0
anim = 870
sprpriority = 5

[State 863, 0]
type = AssertSpecial
trigger1 = 1
Flag = noshadow

[State 863, 1]
type = Hitdef
trigger1 = 1
attr = A, SP
animtype  = Hard
damage    = 92, 4
getpower  = 0
priority  = 5
hitflag = MAF
guardflag = MA
pausetime = 1,10
sparkno = S881
guard.sparkno = -1
sparkxy = -15,-10
hitsound   = -1
guardsound = -1
ground.type = Low
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = -3,-8
guard.velocity = -7
air.velocity = -3,-7.5
airguard.velocity = -5, -4
envshake.time = 8
envshake.freq = 100
envshake.ampl = 10
fall = 1
fall.recover = 0
persistent = 0

[State 863, target]
type = TargetState
trigger1 = movehit
value = 970
ignorehitpause = 1

[state 863, 14]
type = changestate
trigger1 = movecontact
value = 869
ignorehitpause = 1

[State 863, reset]
type = Movehitreset
trigger1 = numtarget
trigger1 = target,stateno = 970
ignorehitpause = 1

[State 863, 2]
type = velset
trigger1 = time = 1
x= 3

[State 863, 3]
type = veladd
trigger1 = time >= 1
trigger1 = vel x < 14
x= .35

[state 863, 4]
type = Explod
trigger1 = AnimElemTime(1) = 1
trigger2 = AnimElemTime(1) = 3
anim = 862
id = 862
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 863, 5]
type = Explod
trigger1 = AnimElemTime(2) = 2
trigger2 = AnimElemTime(2) = 4
anim = 863
id = 863
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 863, 6]
type = Explod
trigger1 = AnimElemTime(3) = 2
trigger2 = AnimElemTime(3) = 4
anim = 864
id = 864
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 863, 7]
type = Explod
trigger1 = AnimElemTime(4) = 2
trigger2 = AnimElemTime(4) = 4
anim = 865
id = 865
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 863, 8]
type = Explod
trigger1 = AnimElemTime(5) = 2
trigger2 = AnimElemTime(5) = 4
anim = 866
id = 866
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 863, 9]
type = Explod
trigger1 = AnimElemTime(6) = 2
trigger2 = AnimElemTime(6) = 4
anim = 867
id = 867
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 863, 10]
type = Explod
trigger1 = AnimElemTime(7) = 2
trigger2 = AnimElemTime(7) = 4
anim = 868
id = 868
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 863, 11]
type = Explod
trigger1 = AnimElemTime(8) = 2
trigger2 = AnimElemTime(8) = 4
anim = 869
id = 869
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 863, 12]
type = NotHitBy
trigger1 = 1
value = SCA

[state 863, 13]
type = changestate
trigger1 = pos Y >= 0
value = 870
ctrl = 0

[state 863, 14]
type = changestate
trigger1 = FrontEdgeBodyDist <= -120
trigger2 = BackEdgeBodyDist <= -120
value = 871
ctrl = 0

[state 863, 15]
type = destroyself
trigger1 = FrontEdgeBodyDist <= -120
trigger2 = BackEdgeBodyDist <= -120

;------------------------------------------------------------------------
;プラズマ弾空中（上方軌道）
[Statedef 864]
type = A
movetype = A
physics = N
velset = 0,0
anim = 870
sprpriority = 5

[State 864, 0]
type = AssertSpecial
trigger1 = 1
Flag = noshadow

[State 864, 1]
type = Hitdef
trigger1 = 1
attr = A, SP
animtype  = Hard
damage    = 92, 4
getpower  = 0
priority  = 5
hitflag = MAF
guardflag = MA
pausetime = 1,10
sparkno = S881
guard.sparkno = -1
sparkxy = -15,-10
hitsound   = -1
guardsound = -1
ground.type = Low
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = -3,-8
guard.velocity = -7
air.velocity = -3,-7.5
airguard.velocity = -5, -4
envshake.time = 8
envshake.freq = 100
envshake.ampl = 10
fall = 1
fall.recover = 0
persistent = 0

[State 864, target]
type = TargetState
trigger1 = movehit
value = 970
ignorehitpause = 1

[state 864, 14]
type = changestate
trigger1 = movecontact
value = 869
ignorehitpause = 1

[State 864, reset]
type = Movehitreset
trigger1 = numtarget
trigger1 = target,stateno = 970
ignorehitpause = 1

[State 864, 2]
type = velset
trigger1 = time = 1
y= -6
persistent = 0

[State 864, 3]
type = veladd
trigger1 = time = [1,35]
x= .4
y= .2

[state 864, 4]
type = Explod
trigger1 = AnimElemTime(1) = 1
trigger2 = AnimElemTime(1) = 3
anim = 862
id = 862
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 864, 5]
type = Explod
trigger1 = AnimElemTime(2) = 2
trigger2 = AnimElemTime(2) = 4
anim = 863
id = 863
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 864, 6]
type = Explod
trigger1 = AnimElemTime(3) = 2
trigger2 = AnimElemTime(3) = 4
anim = 864
id = 864
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 864, 7]
type = Explod
trigger1 = AnimElemTime(4) = 2
trigger2 = AnimElemTime(4) = 4
anim = 865
id = 865
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 864, 8]
type = Explod
trigger1 = AnimElemTime(5) = 2
trigger2 = AnimElemTime(5) = 4
anim = 866
id = 866
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 864, 9]
type = Explod
trigger1 = AnimElemTime(6) = 2
trigger2 = AnimElemTime(6) = 4
anim = 867
id = 867
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 864, 10]
type = Explod
trigger1 = AnimElemTime(7) = 2
trigger2 = AnimElemTime(7) = 4
anim = 868
id = 868
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 864, 11]
type = Explod
trigger1 = AnimElemTime(8) = 2
trigger2 = AnimElemTime(8) = 4
anim = 869
id = 869
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 864, 12]
type = NotHitBy
trigger1 = 1
value = SCA

[state 864, 13]
type = changestate
trigger1 = pos Y >= 0
value = 870
ctrl = 0

[state 864, 14]
type = changestate
trigger1 = FrontEdgeBodyDist <= -120
trigger2 = BackEdgeBodyDist <= -120
value = 871
ctrl = 0

[state 864, 15]
type = destroyself
trigger1 = FrontEdgeBodyDist <= -120
trigger2 = BackEdgeBodyDist <= -120

;------------------------------------------------------------------------
;光弾ヒットorガード
[Statedef 869]
type = A
movetype = A
physics = N
velset = 0,0
sprpriority = 3

[State 869, 0]
type = AssertSpecial
trigger1 = 1
Flag = noshadow

[State 869,removeexplod]
type = removeexplod
trigger1 = time = 0

[State 869, 1]
type = Changeanim
trigger1 = time = 0
value = 4000

[State 869, 2]
type = AfterImageTime
trigger1 = Time = 0
time = 0

[state 869, 3]
type = posset
trigger1 = p2statetype != A
trigger1 = Time = 0
y= 0

[State 869, 4]
type = Explod
trigger1 = AnimElemTime(2) = 4
id = 4100
anim = 4100
sprpriority = 1
pos = 0,0
postype = p1
bindtime = 1
removetime = 31
ownpal = 1
persistent = 0

[State 869, 5]
type = Explod
trigger1 = AnimElemTime(3) = 2
id = 4100
anim = 4100
sprpriority = 4
pos = 20,0
postype = p1
bindtime = 1
removetime = 31
ownpal = 1
persistent = 0

[State 869, 6]
type = Explod
trigger1 = AnimElemTime(4) = 4
id = 4100
anim = 4100
sprpriority = 1
pos = 40,0
postype = p1
bindtime = 1
removetime = 31
ownpal = 1
persistent = 0

[State 869, 7]
type = Explod
trigger1 = AnimElemTime(6) = 2
id = 4100
anim = 4100
sprpriority = 4
pos = 60,0
postype = p1
bindtime = 1
removetime = 31
ownpal = 1
persistent = 0

[state 869,snd]
type = PlaySnd
trigger1 = time = 0
channel = 1
;lowpriority = 0
value = S19,0

[state 869,snd2]
type = PlaySnd
trigger1 = AnimElemTime(2) = 4
trigger2 = AnimElemTime(3) = 2
trigger3 = AnimElemTime(4) = 4
trigger4 = AnimElemTime(6) = 2
channel = 1
lowpriority = 0
value = S11,5

[State 869, 8]
type = Hitdef
trigger1 = 1
attr = A, SP
animtype  = Hard
damage    = 35, 4
priority  = 5
hitflag = MA
guardflag = MA
pausetime = 0,9
sparkno = S920
guard.sparkno = -1
sparkxy = -5,-15
hitsound   = -1
guardsound = -1
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -3,-7
guard.velocity = -7
air.velocity = -3,-7
airguard.velocity = -6, -4
fall = 1
fall.recover = 0
persistent = 0

[State 869, target]
type = TargetState
trigger1 = movehit
value = 970
ignorehitpause = 1

[State 869, reset]
type = Movehitreset
trigger1 = numtarget
trigger1 = target,stateno = 970
ignorehitpause = 1

[state 869, 9]
type = destroyself
trigger1 = AnimTime = 0

;------------------------------------------------------------------------
;地面着弾
[Statedef 870]
type = A
movetype = A
physics = N
velset = 0,0
sprpriority = 3

[State 870, 0]
type = AssertSpecial
trigger1 = 1
Flag = noshadow

[State 870, 1]
type = AfterImageTime
trigger1 = Time = 0
time = 0

[state 870, 2]
type = Changeanim
trigger1 = time = 0
value = 4000

[State 870, 3]
type = Explod
trigger1 = AnimElem = 2,=2
id = 4050
anim = 4050
sprpriority = 6
pos = -20, 0
postype = p1
bindtime = 1
removetime = 34
ownpal = 1
persistent = 0

[State 870, 4]
type = Explod
trigger1 = AnimElem = 3,=2
id = 4050
anim = 4050
sprpriority = 6
pos = 20, 0
postype = p1
bindtime = 1
removetime = 34
ownpal = 1
persistent = 0

[State 870, 5]
type = Explod
trigger1 = AnimElem = 4,=2
id = 4050
anim = 4050
sprpriority = 6
pos = -60, 0
postype = p1
bindtime = 1
removetime = 34
ownpal = 1
persistent = 0

[State 870, 6]
type = Explod
trigger1 = AnimElem = 5,=3
id = 4050
anim = 4050
sprpriority = 6
pos = 55, 0
postype = p1
bindtime = 1
removetime = 34
ownpal = 1
persistent = 0

[state 870,snd]
type = PlaySnd
trigger1 = time = 0
channel = 1
;lowpriority = 0
value = S19,0

[state 870,snd2]
type = PlaySnd
trigger1 = AnimElem = 2,=2
trigger2 = AnimElem = 3,=2
trigger3 = AnimElem = 4,=2
trigger4 = AnimElem = 5,=3
channel = 1
lowpriority = 0
value = S11,8

[State 870, 7]
type = Hitdef
trigger1 = 1
attr = A, SP
animtype  = Hard
damage    = 35, 4
priority  = 5
hitflag = MAFD
guardflag = MA
pausetime = 0,9
sparkno = S920
guard.sparkno = -1
sparkxy = -5,-15
hitsound   = -1
guardsound = -1
ground.type = Low
ground.slidetime = 50
ground.hittime  = 25
ground.velocity = -3,-8
guard.velocity = -7
air.velocity = -3,-8
airguard.velocity = -5, -4
fall = 1
fall.recover = 0
persistent = 0

[State 870, target]
type = TargetState
trigger1 = movehit
value = 970
ignorehitpause = 1

[State 870, reset]
type = Movehitreset
trigger1 = numtarget
trigger1 = target,stateno = 970
ignorehitpause = 1

[state 870, 8]
type = destroyself
trigger1 = AnimTime = 0

;------------------------------------------------------------------------
;画面外に着弾
[Statedef 871]
type = A
movetype = I
physics = N
velset = 0,0
sprpriority = 3

[State 871, 0]
type = AssertSpecial
trigger1 = 1
Flag = invisible

[State 871, 1]
type = AfterImageTime
trigger1 = Time = 0
time = 0

[state 871, 2]
type = Changeanim
trigger1 = time = 0
value = 4000

[state 871,snd]
type = PlaySnd
trigger1 = time = 0
channel = 1
;lowpriority = 0
value = S19,0

[state 871,snd2]
type = PlaySnd
trigger1 = AnimElem = 2,=2
trigger2 = AnimElem = 3,=2
trigger3 = AnimElem = 4,=2
trigger4 = AnimElem = 5,=3
channel = 1
lowpriority = 0
value = S11,8

[state 871, 3]
type = destroyself
trigger1 = AnimTime = 0

;----------------------------------------------------------
;プラズマ弾（ホーミング）
[Statedef 873]
type = A
movetype = A
physics = N
velset = 0,0
anim = 870
sprpriority = 5

[State 873, 0]
type = AssertSpecial
trigger1 = 1
Flag = noshadow

[State 873, 1]
type = Hitdef
trigger1 = 1
attr = A, SP
animtype  = Hard
damage    = 92, 4
getpower  = 0
priority  = 5
hitflag = MAF
guardflag = MA
pausetime = 1,10
sparkno = S881
guard.sparkno = -1
sparkxy = -15,-10
hitsound   = -1
guardsound = -1
ground.type = Low
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = -3,-8
guard.velocity = -7
air.velocity = -3,-7.5
airguard.velocity = -5, -4
envshake.time = 8
envshake.freq = 100
envshake.ampl = 10
fall = 1
fall.recover = 0
persistent = 0

[State 873, target]
type = TargetState
trigger1 = movehit
value = 970
ignorehitpause = 1

[state 873, 17]
type = changestate
trigger1 = movecontact
value = 869
ignorehitpause = 1

[State 873, reset]
type = Movehitreset
trigger1 = numtarget
trigger1 = target,stateno = 970
ignorehitpause = 1

[State 873, 2]
type = VarSet
trigger1 = time = 0
fvar(5) = ifelse((root,fvar(3)=[0,1]),1,ifelse((root,fvar(3)=[-1,0]),-1,root,fvar(3)))

[State 873, 3]
type = VarSet
trigger1 = time = 0
fvar(6) = ifelse((root,fvar(4)=[0,1]),1,ifelse((root,fvar(4)=[-1,0]),-1,root,fvar(4)))

[State 873, 4]
type = VarSet
trigger1 = time = 0
ignorehitpause = 1
fvar(7) = atan(fvar(5)/fvar(6))-(.5*pi*ifelse(root,fvar(4)<0,-1,1))

[State 873, 5]
type = VelSet
trigger1 = time = 1
x = 3*cos(fvar(7))
y = -3*sin(fvar(7))

[State 873, 6]
type = VelAdd
trigger1 = time >= 1
trigger1 = vel x < 14
x = .35*cos(fvar(7))
y = -.35*sin(fvar(7))

[state 873, 7]
type = Explod
trigger1 = AnimElemTime(1) = 1
trigger2 = AnimElemTime(1) = 3
anim = 862
id = 862
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 873, 8]
type = Explod
trigger1 = AnimElemTime(2) = 2
trigger2 = AnimElemTime(2) = 4
anim = 863
id = 863
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 873, 9]
type = Explod
trigger1 = AnimElemTime(3) = 2
trigger2 = AnimElemTime(3) = 4
anim = 864
id = 864
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 873, 10]
type = Explod
trigger1 = AnimElemTime(4) = 2
trigger2 = AnimElemTime(4) = 4
anim = 865
id = 865
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 873, 11]
type = Explod
trigger1 = AnimElemTime(5) = 2
trigger2 = AnimElemTime(5) = 4
anim = 866
id = 866
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 873, 12]
type = Explod
trigger1 = AnimElemTime(6) = 2
trigger2 = AnimElemTime(6) = 4
anim = 867
id = 867
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 873, 13]
type = Explod
trigger1 = AnimElemTime(7) = 2
trigger2 = AnimElemTime(7) = 4
anim = 868
id = 868
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 873, 14]
type = Explod
trigger1 = AnimElemTime(8) = 2
trigger2 = AnimElemTime(8) = 4
anim = 869
id = 869
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 873, 15]
type = NotHitBy
trigger1 = 1
value = SCA

[state 873, 16]
type = changestate
trigger1 = pos Y >= 0
value = 870
ctrl = 0

[state 873, 17]
type = changestate
trigger1 = FrontEdgeBodyDist <= -120
trigger2 = BackEdgeBodyDist <= -120
value = 871
ctrl = 0

[state 873, 18]
type = destroyself
trigger1 = FrontEdgeBodyDist <= -120
trigger2 = BackEdgeBodyDist <= -120

;-----------------------------------------------------------------------
;レーザーサイティング
[Statedef 880]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 892
ctrl = 0
sprpriority = 2

[state 880, change1]
type = ChangeAnim
triggerall = var(3) != 0
trigger1 = time = 0
value = ifelse(var(3)=1, 895, 898)

[state 880, snd]
type = PlaySnd
trigger1 = Time = 10
persistent = 0
value = 13,3
volume = 255

[state 880, 1]
type = Helper
trigger1 = time = 1
id = 860
name = "cursol"
sprpriority = 4
pos = ceil(100*const(size.xscale)), ceil(-20*const(size.yscale))
postype = p1
stateno = 890
helpertype = normal
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1

[state 880, 2]
type = changestate
trigger1 = command != "holda"
trigger2 = Numhelper(891) >= 1
value = 0
ctrl = 1

;------------------------------------------------------------------------
;カーソル(自動)
[Statedef 890]
type = A
movetype = I
physics = N
velset = 0,0
anim = 860
sprpriority = 6

[State 890, 0]
type = AssertSpecial
trigger1 = 1
Flag = noshadow

[state 890, 1]
type = velset
triggerall = time >= 1
trigger1 = P2BodyDist X <= -5
x = -2

[state 890, 2]
type = velset
triggerall = time >= 1
trigger1 = P2BodyDist X >= -5
x = 2

[state 890, 3]
type = velset
triggerall = time >= 1
trigger1 = P2BodyDist Y < 0
y = -2

[state 890, 4]
type = velset
triggerall = time >= 1
trigger1 = P2BodyDist Y > 0
y = 2

[State 890, pos]
type = posadd
triggerall = time >= 1
trigger1 = P2statetype != A
trigger1 = P2BodyDist y > -28
y = -2

[state 890, 5]
type = Helper
trigger1 = P2BodyDist X = (-70, -5)
trigger1 = P2BodyDist Y = (-5, 90)
trigger1 = Numhelper(891) = 0
id = 891
name = "lock-on"
sprpriority = 4
pos = 0, 0
postype = p1
stateno = 891
helpertype = normal
keyctrl = 0
ownpal = 1
persistent = 0

[state 890, 6]
type = Helper
trigger1 = root,command = "x"
trigger1 = Numhelper(891) = 0
id = 891
name = "lock-on"
sprpriority = 4
pos = 0, 0
postype = p1
stateno = 892
helpertype = normal
keyctrl = 0
ownpal = 1
persistent = 0

[state 890, snd]
type = PlaySnd
trigger1 = root,command != "holda"
trigger2 = root,movetype = H
persistent = 0
value = 13,4
volume = 255

[state 890, 6]
type = destroyself
trigger1 = root,command != "holda"
trigger2 = Numhelper(891) >= 1
trigger3 = root,movetype = H
trigger4 = root,command = "x"

;------------------------------------------------------------------------
;ロックオン(自動)
[Statedef 891]
type = S
movetype = I
physics = N
velset = 0,0
anim = 861
sprpriority = 6

[state 891, 0]
type = AssertSpecial
trigger1 = Time >= 0
flag = noshadow

[state 891, snd1]
type = PlaySnd
trigger1 = Time = 1
value = S11,4
volume = 255

[State 891, pos1]
type = posadd
trigger1 =P2Dist X > 0
x= 7

[State 891, pos1]
type = posadd
trigger1 =P2Dist X < 0
x= -7

[State 891, pos2]
type = posadd
trigger1 =P2BodyDist Y > 60
y= 7

[State 891, pos3]
type = posadd
trigger1 =P2BodyDist Y < 60
y= -7

[state 891, snd]
type = PlaySnd
trigger1 = RoundState != 2
trigger2 = root,movetype = H
trigger3 = root,command = "a" && root,command != "holddown"
trigger4 = NumHelper(873) >= 1
trigger4 = helper(873),stateno = 869 && helper(873),time = 1
trigger5 = NumHelper(874) >= 1 
trigger5 = helper(874),stateno = 869 && helper(874),time = 1
persistent = 0
value = 13,4
volume = 255

[state 891, 3]
type = destroyself
trigger1 = RoundState != 2
trigger2 = root,movetype = H
trigger3 = root,command = "a" && root,command != "holddown"
trigger4 = NumHelper(873) >= 1
trigger4 = helper(873),stateno = 869 && helper(873),time = 1
trigger5 = NumHelper(874) >= 1 
trigger5 = helper(874),stateno = 869 && helper(874),time = 1

;------------------------------------------------------------------------
;ロックオン(手動)
[Statedef 892]
type = S
movetype = I
physics = N
velset = 0,0
anim = 861
sprpriority = 6

[State 892, turn]
type = Turn
trigger1 = root,facing = 1 && facing = -1
trigger2 = root,facing = -1 && facing = 1

[state 892, 0]
type = AssertSpecial
trigger1 = Time >= 0
flag = noshadow

[state 892, snd1]
type = PlaySnd
trigger1 = Time = 1
value = S11,4
volume = 255

[State 892, pos1]
type = posadd
trigger1 = root,command = "holdfwd"
x= 6

[State 892, pos1]
type = posadd
trigger1 = root,command = "holdback"
x= -6

[State 892, pos2]
type = posadd
trigger1 = root,command = "holddown"
y= 6

[State 892, pos3]
type = posadd
trigger1 = root,command = "holdup"
y= -6

[State 892, pos4]
type = posadd
trigger1 = 1 ;pos Y >= -10
x= ifelse(frontedgebodydist <= 0, -6, ifelse(Backedgebodydist <= 0, 6, 0))
y= ifelse(pos y >= 0, -6, ifelse(pos y <= -239, 6, 0))

[state 892, snd2]
type = PlaySnd
trigger1 = RoundState != 2
trigger2 = root,movetype = H
trigger3 = root,command = "a" && root,command != "holddown"
trigger4 = NumHelper(873) >= 1
trigger4 = helper(873),stateno = 869 && helper(873),time = 1
trigger5 = NumHelper(874) >= 1 
trigger5 = helper(874),stateno = 869 && helper(874),time = 1
persistent = 0
value = 13,4
volume = 255

[state 892, 3]
type = destroyself
trigger1 = RoundState != 2
trigger2 = root,movetype = H
trigger3 = root,command = "a" && root,command != "holddown"
trigger4 = NumHelper(873) >= 1
trigger4 = helper(873),stateno = 869 && helper(873),time = 1
trigger5 = NumHelper(874) >= 1 
trigger5 = helper(874),stateno = 869 && helper(874),time = 1

;------------------------------------------------------------------------
;プラズマキャノン(空中)
[Statedef 900]
type    = A
movetype= A
physics = A
poweradd= 0
anim = 1070
ctrl = 0
sprpriority = 2

[state 900, change1]
type = ChangeAnim
triggerall = var(3) != 0
trigger1 = time = 0
value = 1071

[state 900, 1]
type = varadd
triggerall = var(8) = 0
triggerall = numexplod(4510) = 0
trigger1 = AnimElem = 1,=3
v = 14
value = -78

[State 900, 2]
type = Explod
triggerall = numexplod(4510) = 0
trigger1 = AnimElem = 1,=1
anim = 4530
id = 4530
pos = 0,0
postype = p1
facing = facing
sprpriority = 3
bindtime = -1
removetime = 11
persistent = 0

[State 860, 3]
type = Explod
triggerall = numexplod(4510) = 0
trigger1 = AnimElem = 1,=3
anim = 880
id = 880
pos = 0, ceil(-3*const(size.yscale))
postype = p1
sprpriority = 4
bindtime = 1
removetime = 13
ownpal = 1
scale = const(size.xscale), const(size.yscale)
persistent = 0

[State 900, 4]
type = Explod
triggerall = var(21) = 0
triggerall = numexplod(4510) = 0
trigger1 = AnimElem = 1,=3
anim = 883
id = 883
pos = 0,0
postype = p1
sprpriority = 3
bindtime = -1
removetime = 6
ownpal = 0
removeongethit = 1
scale = const(size.xscale), const(size.yscale)

[state 900, 5]
type = Helper
triggerall = Numhelper(891) = 0
triggerall = numexplod(4510) = 0
trigger1 = AnimElem = 1,=3
id = 862
name = "en2"
sprpriority = 5
pos = ceil(5*const(size.xscale)), ceil(-86*const(size.yscale))
postype = p1
stateno = 862
helpertype = normal
keyctrl = 0
ownpal = 1
persistent = 0

[state 900, 6]
type = Helper
triggerall = Numhelper(891) >= 1
triggerall = numexplod(4510) = 0
trigger1 = AnimElem = 1,=3
id = 874
name = "homingEN"
sprpriority = 5
pos = ceil(5*const(size.xscale)), ceil(-86*const(size.yscale))
postype = p1
stateno = 873
helpertype = normal
keyctrl = 0
ownpal = 1
persistent = 0

[state 900, 7]
type = PlaySnd
triggerall = numexplod(4510) = 0
trigger1 = AnimElem = 1,=3
persistent = 0
value = S11,1

[state 900, 8]
type = PlaySnd
triggerall = numexplod(4510) = 1
trigger1 = AnimElem = 1,=2
trigger2 = AnimElem = 1,>2 && command = "x"
value = S8,0
channel = 1

;-----------------------------------------------------------------
;プラズマキャノン水平軌道(空中)
[Statedef 910]
type    = A
movetype= A
physics = A
poweradd= 0
anim = 1070
ctrl = 0
sprpriority = 2

[state 910, change1]
type = ChangeAnim
triggerall = var(3) = 1 || var(3) = 2
trigger1 = time = 0
value = 1071

[state 910, 1]
type = varadd
triggerall = var(8) = 0
triggerall = numexplod(4510) = 0
trigger1 = AnimElem = 1,=3
v = 14
value = -78

[State 910, 2]
type = Explod
triggerall = numexplod(4510) = 0
trigger1 = AnimElem = 1,=1
anim = 4530
id = 4530
pos = 0,0
postype = p1
facing = facing
sprpriority = 3
bindtime = -1
removetime = 11
persistent = 0

[State 910, 3]
type = Explod
triggerall = numexplod(4510) = 0
trigger1 = AnimElem = 1,=3
anim = 880
id = 880
pos = 0, ceil(-3*const(size.yscale))
postype = p1
sprpriority = 4
bindtime = 1
removetime = 13
ownpal = 1
scale = const(size.xscale), const(size.yscale)
persistent = 0

[State 910, 4]
type = Explod
triggerall = var(21) = 0
triggerall = numexplod(4510) = 0
trigger1 = AnimElem = 1,=3
anim = 883
id = 883
pos = 0,0
postype = p1
sprpriority = 3
bindtime = -1
removetime = 6
ownpal = 0
removeongethit = 1
scale = const(size.xscale), const(size.yscale)

[state 910, 5]
type = Helper
triggerall = Numhelper(891) = 0
triggerall = numexplod(4510) = 0
trigger1 = AnimElem = 1,=3
id = 863
name = "en3"
sprpriority = 5
pos = ceil(5*const(size.xscale)), ceil(-86*const(size.yscale))
postype = p1
stateno = 863
helpertype = normal
keyctrl = 0
ownpal = 1
persistent = 0

[state 910, 6]
type = Helper
triggerall = Numhelper(891) >= 1
triggerall = numexplod(4510) = 0
trigger1 = AnimElem = 1,=3
id = 874
name = "homingEN"
sprpriority = 5
pos = ceil(5*const(size.xscale)), ceil(-86*const(size.yscale))
postype = p1
stateno = 873
helpertype = normal
keyctrl = 0
ownpal = 1
persistent = 0

[state 910, 7]
type = PlaySnd
triggerall = numexplod(4510) = 0
trigger1 = AnimElem = 1,=3
persistent = 0
value = S11,1

[state 910, 8]
type = PlaySnd
triggerall = numexplod(4510) = 1
trigger1 = AnimElem = 1,=2
trigger2 = AnimElem = 1,>2 && command = "x"
value = S8,0
channel = 1

;-------------------------------------------------------------------
;プラズマキャノン(しゃがみ)
[Statedef 920]
type    = C
movetype= A
physics = C
poweradd= 0
velset = 0,0
anim = 1075
ctrl = 0
sprpriority = 2

[state 920, change1]
type = ChangeAnim
triggerall = var(3) != 0
trigger1 = time = 0
value = ifelse(var(3)=1, 1076, 1077)

[state 920, 1]
type = varadd
triggerall = var(8) = 0
triggerall = numexplod(4510) = 0
trigger1 = AnimElem = 1,=3
v = 14
value = -78

[State 920, 2]
type = Explod
triggerall = numexplod(4510) = 0
trigger1 = AnimElem = 1,=1
anim = 4530
id = 4530
pos = 0,0
postype = p1
facing = facing
sprpriority = 3
bindtime = -1
removetime = 11
persistent = 0

[State 920, 3]
type = Explod
triggerall = numexplod(4510) = 0
trigger1 = AnimElem = 1,=2
anim = 880
id = 880
pos = ceil(8*const(size.xscale)), ceil(33*const(size.yscale))
postype = p1
sprpriority = 4
bindtime = 1
removetime = 13
ownpal = 1
scale = const(size.xscale), const(size.yscale)
persistent = 0

[State 920, 4]
type = Explod
triggerall = var(21) = 0
triggerall = numexplod(4510) = 0
trigger1 = AnimElem = 1,=2
anim = ifelse(Anim=1075, 884, ifelse(Anim=1076, 885, 886))
id = 884
pos = 0,0
postype = p1
sprpriority = 3
bindtime = -1
removetime = 6
ownpal = 0
removeongethit = 1
scale = const(size.xscale), const(size.yscale)

[state 920, 5]
type = Helper
triggerall = Numhelper(891) = 0
triggerall = numexplod(4510) = 0
trigger1 = AnimElem = 1,=3
id = 861
name = "en4"
sprpriority = 5
pos = ceil(9*const(size.xscale)), ceil(-50*const(size.yscale))
postype = p1
stateno = 863
helpertype = normal
keyctrl = 0
ownpal = 1
persistent = 0

[state 920, 6]
type = Helper
triggerall = Numhelper(891) >= 1
triggerall = numexplod(4510) = 0
trigger1 = AnimElem = 1,=3
id = 873
name = "homingEN"
sprpriority = 5
pos = ceil(9*const(size.xscale)), ceil(-50*const(size.yscale))
postype = p1
stateno = 873
helpertype = normal
keyctrl = 0
ownpal = 1
persistent = 0

[state 920, 7]
type = PlaySnd
triggerall = NumExplod(950) = 0
triggerall = numexplod(4510) = 0
trigger1 = AnimElem = 1,=3
persistent = 0
value = S11,1

[State 920, 8]
type = Explod
triggerall = numexplod(4510) = 1
trigger1 = AnimElem = 1,=2
anim = 950
id = 950
pos = ceil(-4*const(size.xscale)), ceil(30*const(size.yscale))
postype = p1
facing = facing
sprpriority = 3
bindtime = -1
removetime = 17
ownpal = 1
scale = const(size.xscale),const(size.yscale)

[state 920, 9]
type = PlaySnd
triggerall = NumExplod(950) = 1
triggerall = numexplod(4510) = 1
trigger1 = AnimElem = 1,=2
persistent = 0
value = S8,0

[state 920, 10]
type = changestate
trigger1 = time = 19
trigger1 = var(8) = 1 && command = "holdx" && command = "holddown"
value = 920

[state 920, 11]
type = changestate
trigger1 = time = 19
trigger1 = var(8) = 1 && command = "holdx" && command != "holddown"
value = 860

[state 920, 12]
type = changestate
trigger1 = time = 19
value = 11
ctrl = 1

;-----------------------------------------------------------------
;プラズマキャノン空中(上方軌道)
[Statedef 930]
type    = A
movetype= A
physics = A
poweradd= 0
anim = 1070
ctrl = 0
sprpriority = 2

[state 930, change1]
type = ChangeAnim
triggerall = var(3) != 0
trigger1 = time = 0
value = 1071

[state 930, 1]
type = varadd
triggerall = var(8) = 0
triggerall = numexplod(4510) = 0
trigger1 = AnimElemTime(1) = 3
v = 14
value = -78

[State 930, 2]
type = Explod
triggerall = numexplod(4510) = 0
trigger1 = AnimElemTime(1) = 1
anim = 4530
id = 4530
pos = 0,0
postype = p1
facing = facing
sprpriority = 3
bindtime = -1
removetime = 11
persistent = 0

[State 930, 3]
type = Explod
triggerall = numexplod(4510) = 0
trigger1 = AnimElemTime(1) = 3
anim = 880
id = 880
pos = 0, ceil(-3*const(size.yscale))
postype = p1
sprpriority = 4
bindtime = 1
removetime = 13
ownpal = 1
scale = const(size.xscale), const(size.yscale)
persistent = 0

[State 930, 4]
type = Explod
triggerall = var(21) = 0
triggerall = numexplod(4510) = 0
trigger1 = AnimElem = 1,=3
anim = 883
id = 883
pos = 0,0
postype = p1
sprpriority = 3
bindtime = -1
removetime = 6
ownpal = 0
removeongethit = 1
scale = const(size.xscale), const(size.yscale)

[state 930, 5]
type = Helper
triggerall = Numhelper(891) = 0
triggerall = numexplod(4510) = 0
trigger1 = AnimElemTime(1) = 3
id = 864
name = "en5"
sprpriority = 5
pos = ceil(5*const(size.xscale)), ceil(-86*const(size.yscale))
postype = p1
stateno = 864
helpertype = normal
keyctrl = 0
ownpal = 1
persistent = 0

[state 930, 6]
type = Helper
triggerall = Numhelper(891) >= 1
triggerall = numexplod(4510) = 0
trigger1 = AnimElemTime(1) = 3
id = 874
name = "homingEN"
sprpriority = 5
pos = ceil(5*const(size.xscale)), ceil(-86*const(size.yscale))
postype = p1
stateno = 873
helpertype = normal
keyctrl = 0
ownpal = 1
persistent = 0

[state 930, 7]
type = PlaySnd
triggerall = numexplod(4510) = 0
trigger1 = AnimElemTime(1) = 3
persistent = 0
value = S11,1

[state 930, 8]
type = PlaySnd
triggerall = numexplod(4510) = 1
trigger1 = AnimElemTime(1) = 2
trigger2 = AnimElemTime(1) > 2 && command = "x"
value = S8,0
channel = 1

;---------------------------------------------------------------------------
;キャノンhit
[Statedef 970]
type    = U
movetype= H
physics = N
velset = 0,0
ctrl = 0

[State 970, nothit]
type = NotHitBy
trigger1 = 1
value = SCA

[State 970, push]
type = PlayerPush
trigger1 = 1
value = 0

[State 970, pal]
type = PalFx
triggerall = name != "RAZOR CLAWS" && name != "CHRYSALIS" && name != "PREDATOR WARRIOR" && name != "ALIEN WARRIOR" && name != "EGG CHAMBER" && name != "PRIVATE" && name != "ROYAL GUARD"
trigger1 = time = 0
time = 52
mul = 180,170,160
add = 210,10,-200
sinadd = 60,40,50,20
invertall = -1

[State 970, avsp]
type = ChangeAnim
triggerall = name = "RAZOR CLAWS" || name = "CHRYSALIS" || name = "PREDATOR WARRIOR" || name = "ALIEN WARRIOR" || name = "EGG CHAMBER" || name = "PRIVATE" || Name = "ROYAL GUARD"
trigger1 = time = 0
value = 8100

[State 970, avsp]
type = ChangeAnim
trigger1 = Anim = 8100
trigger1 = time = 11
value = 8101

[State 970, 1]
type = ChangeAnim2
triggerall = name != "RAZOR CLAWS" && name != "CHRYSALIS" && name != "PREDATOR WARRIOR" && name != "ALIEN WARRIOR" && name != "EGG CHAMBER" && name != "PRIVATE" && Name != "ROYAL GUARD"
trigger1 = time = 0
value = 970

[State 970, 2]
type = velset
trigger1 = AnimElem = 2
x= -2
y= ifelse(Statetype = A, -8, -9)
persistent = 0

[State 970, 3]
type = StatetypeSet
trigger1 = AnimElem = 2
statetype = A
persistent = 0

[State 970, 4]
type = veladd
trigger1 = AnimElem = 2,>= 0
y= .35

[State 970, 5]
type = SelfState
Trigger1 = Pos Y >= 0 && Vel Y > 0
value = 5100

;----------------------------------------------------------------
;スローイングディスク
[Statedef 1000]
type = S
movetype = A
physics = S
poweradd = 70
velset = 0,0
ctrl = 0
anim = 1000

[State 1000, snd]
type = PlaySnd
trigger1 = var(58) != 2
trigger1 = Time = 2
value = 15,0

[state 1000, 1]
type = helper
trigger1 = AnimElemTime(1) = 2
id = 820
name = "disc1"
sprpriority = 4
pos = ceil(74*const(size.xscale)), ceil(-48*const(size.yscale))
postype = p1
stateno = 1010
helpertype = normal
keyctrl = 0
ownpal = 1
persistent = 0
size.xscale = 1
size.yscale = 1

[state 1000, 2]
type = ChangeState
trigger1 = AnimTime = 0 
value = 0
ctrl = 1 

;------------------------------------------------------------------
;ディスク挙動
[Statedef 1010]
type = A
movetype = A
physics = N
velset = 13, 0
juggle = 10
anim = 1011
sprpriority = 3

[state 1010, 1]
type = Hitdef
trigger1 = root,var(58) != 2
trigger1 = 1 && vel X >= 0
trigger1 = hitcount = 0
attr = A, SP
animtype  = hard
damage    = 84, 5
priority  = 7,Hit
hitflag = MA
guardflag = MA
pausetime = 6,ifelse(p2statetype = A, 1, 9)
guard.pausetime = 6, 9
sparkno = S930
guard.sparkno = S900
sparkxy = -15,-8
hitsound   = S13,2
guardsound = S7,0
ground.type = high
ground.slidetime = 30
ground.hittime  = 10
ground.velocity = -9
guard.velocity = -6
air.velocity = -6, -6
air.fall = 1
fall.recover = 1
persistent = 0

[state 1010, 2]
type = Hitdef
trigger1 = root,var(58) != 2
trigger1 = 1 && vel X < 0
trigger1 = !movecontact
attr = A, SP
animtype  = hard
damage    = 84, 5
priority  = 7,Hit
hitflag = MA
guardflag = MA
pausetime = 6,ifelse(p2statetype = A, 1, 9)
guard.pausetime = 6, 9
sparkno = S930
guard.sparkno = S900
sparkxy = -15,-8
hitsound   = S13,2
guardsound = S7,0
ground.type = high
ground.slidetime = 30
ground.hittime  = 10
ground.velocity = 9
guard.velocity = 6
air.velocity = 6, -6
air,fall = 1
fall.recover = 1
persistent = 0

[state 1010, AvsP]
type = Hitdef
trigger1 = root,var(58) = 2
trigger1 = 1 && vel X >= 0
trigger1 = hitcount = 0
attr = A, SP
animtype  = hard
damage    = 84, 5
priority  = 7,Hit
hitflag = MA
guardflag = MA
pausetime = 6,ifelse(p2statetype = A, 1, 9)
guard.pausetime = 6, 9
sparkno = S930
guard.sparkno = S900
sparkxy = -15,-8
hitsound   = S7,1
guardsound = S7,0
ground.type = high
ground.slidetime = 30
ground.hittime  = 10
ground.velocity = -9
guard.velocity = -6
air.velocity = -6, -6
air.fall = 1
fall.recover = 1
persistent = 0

[state 1010, AvsP]
type = Hitdef
trigger1 = root,var(58) = 2
trigger1 = 1 && vel X < 0
trigger1 = !movecontact
attr = A, SP
animtype  = hard
damage    = 84, 5
priority  = 7,Hit
hitflag = MA
guardflag = MA
pausetime = 6,ifelse(p2statetype = A, 1, 9)
guard.pausetime = 6, 9
sparkno = S930
guard.sparkno = S900
sparkxy = -15,-8
hitsound   = S7,1
guardsound = S7,0
ground.type = high
ground.slidetime = 30
ground.hittime  = 10
ground.velocity = 9
guard.velocity = 6
air.velocity = 6, -6
air,fall = 1
fall.recover = 1
persistent = 0

[state 1010, B1]
type = Explod
trigger1 = movehit
trigger1 = hitcount = 1
trigger1 = numtarget
anim = ifelse(target,Name="PREDATOR WARRIOR" || target,Name="ALIEN WARRIOR" || target,Name="CHRYSALIS" || target,Name="RAZOR CLAWS" || target,Name="EGG CHAMBER" || target,Name="ROYAL GUARD", 840, 830)
postype = p2
pos = 0,-50
sprpriority = 3
bindtime = 1
id = 830
removetime = 15
facing = ifelse(target,p2dist x < 0, 1, -1)
ownpal = 1
persistent = 0
ignorehitpause = 1

[state 1010, B2]
type = Explod
trigger1 = movehit
trigger1 = hitcount = 2
trigger1 = numtarget
anim = ifelse(target,Name="PREDATOR WARRIOR" || target,Name="ALIEN WARRIOR" || target,Name="CHRYSALIS" || target,Name="RAZOR CLAWS" || target,Name="EGG CHAMBER" || target,Name="ROYAL GUARD", 840, 830)
postype = p2
pos = 0,-50
sprpriority = 3
bindtime = 1
id = 830
removetime = 15
facing = ifelse(target,p2dist x < 0, 1, -1)
ownpal = 1
persistent = 0
ignorehitpause = 1

[state 1010, 3]
type = veladd
trigger1 = time >= 0 && vel X >= -13
x = -0.6

[state 1010, 4]
type = veladd
trigger1 = vel X >= -5 && vel X <= 5
y= .1

[state 1010, 5]
type = veladd
trigger1 = vel X <= 0 && vel Y >= 0
y= -.1

[State 1010, 6]
type = Parentvarset
trigger1 = ParentDist X = [-15,15]
var(7) = 1
ignorehitpause = 1

[State 1010, 7]
type = Parentvarset
trigger1 = ParentDist X > 15 || ParentDist X < -15
var(7) = 0
ignorehitpause = 1

[state 1010, 8]
type = destroyself
trigger1 = root,stateno = 1028
trigger1 = root,movetype != H
trigger1 = var(7) = 0
ignorehitpause = 1

[state 1010, 9]
type = changestate
trigger1 = BackEdgeDist <= -10
trigger1 = var(7) = 0
value = 1020
ctrl = 0
ignorehitpause = 1

;------------------------------------------------------------------
;ディスク跳ね返り(前方)
[Statedef 1019]
type = A
movetype = I
physics = N
velset = -2,-9
sprpriority = 3
anim = 1012

[State 1019, 1]
type = Parentvarset
trigger1 = time = 4
var(7) = 0

[state 1019, 2]
type = veladd
trigger1 = 1
y= .5

[state 1019, 3]
type = Changestate
trigger1 = pos Y >= -5
trigger1 = vel Y > 0
value = 1023

;------------------------------------------------------------------
;ディスク跳ね返り
[Statedef 1020]
type = A
movetype = I
physics = N
velset = 2,-9
sprpriority = 3
anim = 1012

[State 1020, 1]
type = Parentvarset
trigger1 = time = 4
var(7) = 0

[state 1020, 2]
type = veladd
trigger1 = 1
y= .5

[state 1020, 3]
type = Changestate
trigger1 = pos Y >= -5
trigger1 = vel Y > 0
value = 1023

;------------------------------------------------------------------
;ディスクバウンド
[Statedef 1023]
type = A
movetype = I
physics = N
velset = ifelse(PrevStateno = 1019, -2, 2),-5
sprpriority = 3
anim = 1012

[State 1023, 0]
type = posset
trigger1 = time = 0
y= 0

[state 1023, 1]
type = veladd
trigger1 = 1
y= .55

[State 1023, 2]
type = Posadd
trigger1 = FrontEdgeBodydist <= 0
trigger2 = BackEdgeBodydist <= 0
x= ifelse(FrontEdgeBodydist <= 0, -2, 2)

[state 1023, 3]
type = Changestate
trigger1 = pos Y >= -5
trigger1 = vel Y > 0
value = 1024

;------------------------------------------------------------------
;ディスク接地(落とした後)
[Statedef 1024]
type = S
movetype = I
physics = N
velset = 0,0
sprpriority = 3
anim = 1013

[state 1024, 1]
type = posset
trigger1 = time = 0
y= 0

[State 1024, 2]
type = Parentvarset
trigger1 = ParentDist X = [-25,25]
trigger3 = time < 606
var(4) = 1

[State 1024, 3]
type = Parentvarset
trigger1 = ParentDist X > 25 || ParentDist X < -25
trigger2 = root,stateno = 1028
trigger2 = root,movetype != H
trigger3 = time = 606
var(4) = 0

[State 1024, 4]
type = Parentvarset
trigger1 = time = 606
var(17) = 1

[state 1024, 4]
type = destroyself
trigger1 = root,movetype != H
trigger1 = root,stateno = [1027,1028]
trigger2 = time = 606

;------------------------------------------------------------------
;ディスク接地(AvsPモード初期配置)
[Statedef 1025]
type = S
movetype = I
physics = N
velset = 0,0
sprpriority = 3
anim = 1012

[state 1025, 1]
type = posset
trigger1 = time = 0
y= 0

[State 1025, 2]
type = Parentvarset
trigger1 = ParentDist X = [-15,15]
var(4) = 1

[State 1025, 3]
type = Parentvarset
trigger1 = ParentDist X > 15 || ParentDist X < -15
trigger2 = root,stateno = 1028
trigger2 = root,movetype != H
var(4) = 0

[State 1025, 4]
type = destroyself
trigger1 = root,movetype != H
trigger1 = root,stateno = [1027,1028]

;---------------------------------------------------------------------------
;武器拾い(ディスク)
[Statedef 1027]
type = C
movetype = I
physics = C
velset = 0,0
ctrl = 0
anim = 1027

[state 1027, nothit]
type = NotHitBy
trigger1 = 1
value = SCA

[state 1027, 1]
type = varset
trigger1 = time = 1
var(4) = 0

[state 1027, 2]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1 

;--------------------------------------------------------------------------
;ディスクキャッチ
[Statedef 1028]
type = S
movetype = I
physics = S
poweradd = 0
velset = 0,0
ctrl = 0

[State 1028, Anim]
type = ChangeAnim
triggerall = time = 0
trigger1 = var(58) != 2
trigger2 = var(58) = 2
trigger2 = command != "holdfwd" && command != "holdback"
value = ifelse(var(18) = 0, 1028, 1029)

[state 1028, nothit]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 2

[State 1028, 1]
type = PlaySnd
trigger1 = Time = 0
value = 11,6

[State 1028, 2]
type = varset
trigger1 = time = 1
v= 7
value = 0

[state 1028, ]
type = ChangeState
trigger1 = var(58) = 2
trigger1 = time = 1
trigger1 = command = "holdfwd" || command = "holdback"
value = 20
ctrl = 0

[state 1028, 3]
type = ChangeState
trigger1 = var(58) = 2
trigger1 = time >= 3
trigger2 = var(58) != 2
trigger2 = time >= 8
value = 0
ctrl = 1

;--------------------------------------------------------------------------
;クローキング(Cloaking)
[Statedef 1030]
type = S
movetype = I
physics = S
poweradd = 0
velset = 0,0
ctrl = 0
anim = 1030

[State 1030, snd1]
type = PlaySnd
trigger1 = Time = 17
value = 11, 7

[State 1030, explod1]
type = Explod
trigger1 = AnimElem = 5
anim = 1031
id = 1031
pos = 0,0
postype = p1
sprpriority = 2
bindtime = -1
removetime = 75
ownpal = 1
scale = const(size.xscale),const(size.yscale)

[State 1030, explod2]
type = Explod
trigger1 = AnimElem = 1
anim = 1032
id = 1033
pos = 0,0
postype = p1
sprpriority = 2
bindtime = -1
removetime = 80
ownpal = 1
scale = const(size.xscale),const(size.yscale)

[state 1030, 3]
type = ChangeState
trigger1 = AnimTime = 0 
value = 0
ctrl = 1 

;-------------------------------------------------------------------------------
;クローキング(解除)
[Statedef 1032]
type = S
movetype = I
physics = S
poweradd = 0
velset = 0,0
ctrl = 0
anim = 1033

[State 1032, snd1]
type = PlaySnd
trigger1 = Time = 1
value = 11, 7

[State 1032, explod1]
type = Explod
trigger1 = AnimElem = 1
anim = 1032
id = 1032
pos = 0,0
postype = p1
sprpriority = 2
bindtime = -1
removetime = 80
ownpal = 1
scale = const(size.xscale),const(size.yscale)

[State 1032, 4]
type = changestate
trigger1 = Animtime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
;クローキング時死亡(解除)
[Statedef 1035]
type = L
movetype = I
physics = N
velset = 0,0
ctrl = 0
anim = 1035

[State 1035, snd1]
type = PlaySnd
trigger1 = Time = 1
value = 11, 7

[State 1035, explod1]
type = Explod
trigger1 = AnimElem = 1
anim = 1032
id = 1032
pos = 0,ceil(58*const(size.yscale))
postype = p1
sprpriority = 2
bindtime = -1
removetime = 80
ownpal = 1
scale = const(size.xscale),const(size.yscale)

[State 1035, 1]
type = changestate
trigger1 = time = 40
value = 5150
ctrl = 1

;---------------------------------------------------------------------------------
;サプライズアタック
[Statedef 1050]
type    = A
movetype= A
physics = N
juggle  = 2
poweradd= 20
ctrl = 0
velset = 10,10
anim = 1050
sprpriority = 2

[State 1050, 1]
type = ChangeAnim
trigger1 = var(3) != 0
trigger1 = time = 0
value = 1060

[State 1050, 2]
type = gravity
trigger1 = time >= 0
trigger1 = vel Y < 0 && pos Y <= 0

[state 1050, 3]
type = varset
trigger1 = time = 0
trigger1 = pos Y <= -70
v= 9
value = ifelse(pos Y <= -120 , 1, 2)

[State 1050, 4]
type = HitDef
trigger1 = var(3) = 0
trigger1 = 1
trigger1 = hitcount < 3
attr = A, NA
animtype  = Hard
damage    = 36
hitflag = MAFD
guardflag = HA
pausetime = 11, ifelse(p2statetype = A, 1, 13)
guard.pausetime = 11, 13
sparkno = S920
guard.sparkno = S900
sparkxy = ceil(-10*const(size.xscale)), ceil(-35*const(size.yscale))
hitsound   = S6,0
guardsound = S7,0
ground.type = high
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -4, ifelse(hitcount >= 1, -7, 0)
air.velocity = -4, -7
fall = ifelse(hitcount >= 1, 1, 0)
fall.recover = ifelse(hitcount >= 1, 1, 0)
persistent = 6

[State 1050, 5]
type = HitDef
trigger1 = var(3) != 0
trigger1 = 1
trigger1 = hitcount < 5
attr = A, NA
animtype  = Hard
damage    = 40
hitflag = MAFD
guardflag = HA
pausetime = 11, ifelse(p2statetype = A, 1, 13)
guard.pausetime = 11, 13
sparkno = S920
guard.sparkno = S900
sparkxy = ceil(-10*const(size.xscale)), ceil(-35*const(size.yscale))
hitsound   = S7,2
guardsound = S7,0
ground.type = high
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -4, ifelse(hitcount >= 1, -7, 0)
air.velocity = -4, -7
fall = ifelse(hitcount >= 1, 1, 0)
fall.recover = ifelse(hitcount >= 1, 1, 0)
persistent = 5

[state 1050, B1]
type = Explod
trigger1 = movehit
trigger1 = hitcount = 1
trigger1 = numtarget
trigger1 = var(3) = 0
anim = ifelse(target,Name="PREDATOR WARRIOR" || target,Name="ALIEN WARRIOR" || target,Name="CHRYSALIS" || target,Name="RAZOR CLAWS" || target,Name="EGG CHAMBER" || target,Name="ROYAL GUARD", 840, 830)
postype = p2
pos = ceil(-10*const(size.xscale)), ceil(-35*const(size.yscale))
sprpriority = 3
bindtime = 1
id = 830
removetime = 15
facing = ifelse(target,p2dist x < 0, 1, -1)
ownpal = 1
persistent = 0
ignorehitpause = 1

[state 1050, B2]
type = Explod
trigger1 = movehit
trigger1 = hitcount = 2
trigger1 = numtarget
trigger1 = var(3) = 0
anim = ifelse(target,Name="PREDATOR WARRIOR" || target,Name="ALIEN WARRIOR" || target,Name="CHRYSALIS" || target,Name="RAZOR CLAWS" || target,Name="EGG CHAMBER" || target,Name="ROYAL GUARD", 840, 830)
postype = p2
pos = ceil(-10*const(size.xscale)), ceil(-35*const(size.yscale))
sprpriority = 3
bindtime = 1
id = 830
removetime = 15
facing = ifelse(target,p2dist x < 0, 1, -1)
ownpal = 1
persistent = 0
ignorehitpause = 1

[state 1050, B3]
type = Explod
trigger1 = movehit
trigger1 = hitcount = 3
trigger1 = numtarget
trigger1 = var(3) = 0
anim = ifelse(target,Name="PREDATOR WARRIOR" || target,Name="ALIEN WARRIOR" || target,Name="CHRYSALIS" || target,Name="RAZOR CLAWS" || target,Name="EGG CHAMBER" || target,Name="ROYAL GUARD", 840, 830)
postype = p2
pos = ceil(-10*const(size.xscale)), ceil(-35*const(size.yscale))
sprpriority = 3
bindtime = 1
id = 830
removetime = 15
facing = ifelse(target,p2dist x < 0, 1, -1)
ownpal = 1
persistent = 0
ignorehitpause = 1

[state 1050, 6]
type = ChangeAnim
trigger1 = vel Y > 0
trigger1 = pos Y >= 0
value = ifelse(var(3) = 0, 1051, ifelse(var(3) = 1, 1061,1062))

[state 1050, 7]
type = velset
trigger1 = vel Y > 0
trigger1 = pos Y >= 0
trigger1 = var(9) = 1
x= 4
y= -6

[state 1050, 8]
type = velset
trigger1 = vel Y > 0
trigger1 = pos Y >= 0
trigger1 = var(9) != 1
x= 3
y= ifelse(var(9) = 0, -12,-10)

[state 1050, 9]
type = ChangeState
trigger1 = (Anim = 1051 || Anim = 1061 || Anim = 1062) && var(9) = 1
trigger1 = AnimElem = 3
value = 1051
ctrl = 0

[state 1050, 10]
type = ChangeState
trigger1 = (Anim = 1051 || Anim = 1061 || Anim = 1062) && var(9) = 2
trigger1 = AnimElemTime(3) = 1
value = 1051
ctrl = 0

[state 1050, 11]
type = ChangeState
trigger1 = (Anim = 1051 || Anim = 1061 || Anim = 1062) && var(9) = 0
trigger1 = AnimElemTime(3) = 1
value = 1051
ctrl = 0

;---------------------------------------------------------------------------------
;サプライズアタック跳ね返り
[Statedef 1051]
type = A
movetype = I
physics = N
ctrl = 0
anim = 1055
sprpriority = 2

[State 1051, 0]
type = ChangeAnim
trigger1 = var(3) = 1
trigger1 = time = 0
value = 1065

[State 1051, AvsP]
type = ChangeAnim
trigger1 = var(3) = 2
trigger1 = time = 0
value = 1066

[state 1051, 1]
type = varset
trigger1 = time = 0
v= 9
value = 0

[state 1051, 2]
type = veladd
trigger1 = 1
y= .1

[state 1051, 3]
type = gravity
trigger1 = 1

[state 1051, 4]
type = Changestate
trigger1 = vel Y > 0
trigger1 = pos Y >= 0
value = 1052
ctrl = 0

;---------------------------------------------------------------------------------
;着地
[Statedef 1052]
type = S
movetype = I
physics = S
ctrl = 0
anim = 1056
velset = 0,0
sprpriority = 2

[State 1052, 1]
type = ChangeAnim
trigger1 = var(3) = 1
trigger1 = time = 0
value = 1057

[State 1052, 1]
type = ChangeAnim
trigger1 = var(3) = 2
trigger1 = time = 0
value = 1058

[State 1052, 2]
type = posset
trigger1 = time = 0
y= 0

[state 1052, 3]
type = Changestate
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------
;ダブルキック
[Statedef 1100]
type    = S
movetype= A
physics = N
juggle  = 8
poweradd= 80
velset = 0,0
anim = 1101
ctrl = 0
sprpriority = 2

[state 1100, 0]
type = ChangeAnim
triggerall = var(3) = 1
trigger1 = time = 0
value = 1100

[state 1100, AvsP]
type = ChangeAnim
triggerall = var(3) = 2
trigger1 = time = 0
value = 1102

[state 1100, 0]
type = statetypeset
trigger1 = AnimElem = 2
statetype = A
ignorehitpause = 1

[state 1100, 1]
type = velset
trigger1 = AnimElem = 2
x = 13
y = -8

[state 1100]
type = gravity
trigger1 = AnimElem = 2,>= 0

[state 1100, 2]
type = veladd
trigger1 = AnimElem = 2,>= 0
trigger1 = vel X >= 0
x = -.46

[state 1100, 3]
type = velset
trigger1 = AnimElem = 2,>= 0
trigger1 = vel X < 0 
x = 0

[State 1100, 4]
type = HitDef
trigger1 = AnimElem = 3
attr = A, SA
animtype  = Medium
getpower  = 0
damage    = 28, 2
priority  = 5,Hit
guardflag = MA
pausetime = 10,10
guard.pausetime = 10, 10
sparkno = S930
guard.sparkno = S900
sparkxy = ceil(-10*const(size.xscale)), ceil(-50*const(size.yscale))
hitsound   = S7,2
guardsound = S7,0
ground.type = low
ground.slidetime = 26
ground.hittime  = 26
ground.velocity = -6
guard.velocity = -6
air.velocity = -4,-6
air.fall = 1
fall.recover = 0

[State 1100, 5]
type = HitDef
trigger1 = AnimElem = 5
attr = A, SA
animtype  = Hard
getpower  = 0
damage    = 42, 2
priority  = 5,Hit
guardflag = MA
pausetime = 12,12
guard.pausetime = 12, 8
sparkno = S920
guard.sparkno = S900
sparkxy = ceil(-10*const(size.xscale)), ceil(-50*const(size.yscale))
hitsound   = S8,3
guardsound = S7,0
ground.type = high
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -6,-5
guard.velocity = -8
air.velocity = -6,-5
envshake.time = 12
envshake.freq = 120
envshake.ampl = 6
fall = 1
air.fall = 1
fall.recover = 1

[state 1100, 6]
type = Changestate
trigger1 = vel Y > 0
trigger1 = pos Y >= 0
value = 1105
ctrl = 0

;---------------------------------------------------------------------------------
;着地
[Statedef 1105]
type = S
movetype = I
physics = S
ctrl = 0
anim = 11
velset = 0,0
sprpriority = 2

[State 1105, 1]
type = ChangeAnim
trigger1 = var(3) = 1
trigger1 = time = 0
value = 12

[State 1105, AvsP]
type = ChangeAnim
trigger1 = var(3) = 2
trigger1 = time = 0
value = 1105

[State 1105, 2]
type = posset
trigger1 = time = 0
y= 0

[state 1105, 3]
type = Changestate
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------
;ライジングアッパー
[Statedef 1200]
type = S
movetype = A
physics = S
poweradd= 75
velset = 0,0
anim = 1200
juggle = 8
ctrl = 0
sprpriority = 2

[state 1200, 1]
type = NotHitby
trigger1 = time = 0
value = SCA
time = 10

[state 1200, 2]
type = Statetypeset
trigger1 = AnimElemTime(4) = 2
statetype = A
physics = N
ignorehitpause = 1

[state 1200, 3]
type = velset
trigger1 = AnimElemTime(4) = 2
x= 9
y= -10*const(size.yscale)

[state 1200, 4]
type = veladd
trigger1 = AnimElemTime(4) >= 2
x= ifelse(vel x <= 0, 0, -.5)
y= ifelse(vel y < 0, .5*const(size.yscale), 0)

[state 1200, 5]
type = HitDef
trigger1 = AnimElem = 2
attr = A, SA
animtype  = hard
damage    = 15, 2
priority  = 3,Hit
guardflag = MA
pausetime = 12, 13
guard.pausetime = 12, 13
sparkno = S910
guard.sparkno = S900
sparkxy = ceil(-10*const(size.xscale)), ceil(-40*const(size.yscale))
hitsound   = S0,6
guardsound = S7,0
ground.type = low
ground.slidetime = 32
ground.hittime  = 30
ground.velocity = -5
guard.velocity = -6
air.velocity = -2,-8 ;10
air.fall = 1
persistent = 0

[state 1200, 6]
type = HitDef
trigger1 = AnimElem = 3
attr = A, SA
animtype  = hard
getpower  = 0
damage    = 34, 2
priority  = 4,Hit
guardflag = MA
pausetime = 12, 13
guard.pausetime = 12, 13
sparkno = S930
guard.sparkno = S900
sparkxy = ceil(-10*const(size.xscale)), ceil(-60*const(size.yscale))
hitsound   = S8,3
guardsound = S7,0
ground.type = High
ground.slidetime = 32
ground.hittime  = 30
ground.velocity = -6
guard.velocity = -6
air.velocity = -2,-8 ;10
persistent = 0
air.fall = 1

[state 1200, 7]
type = HitDef
trigger1 = AnimElem = 4
attr = A, SA
animtype  = hard
getpower  = 0
damage    = 43, 4
priority  = 4,Hit
guardflag = MA
pausetime = 9, 12
guard.pausetime = 9, 12
sparkno = S930
guard.sparkno = S900
sparkxy = ceil(-10*const(size.xscale)), ceil(-60*const(size.yscale))
hitsound   = S7,2
guardsound = S7,0
ground.type = High
ground.slidetime = 32
ground.hittime  = 0
ground.velocity = -2,-10
guard.velocity = -6
air.velocity = -2,-8 ;10
envshake.time = 10
envshake.freq = 120
envshake.ampl = 6
persistent = 0
fall = 1
air.fall = 1
fall.recover = 0

[state 1200, 8]
type = ChangeState
trigger1 = Animtime = 0
value = 1210

;-------------------------------------------------------------------
;ライジングアッパー落下
[Statedef 1210]
type    = A
movetype= I
physics = A
velset = 0,0
anim = 1210
ctrl = 0
sprpriority = 2

[State 1210, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = var(3) = 1
value = 1211

[State 1210, AvsP]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = var(3) = 2
value = 1212

[state 1210, 2]
type = ChangeState
trigger1 = pos Y >= 0
trigger1 = vel Y > 0
value = 0
ctrl = 1

;-------------------------------------------------------
;コマンド投げ
[Statedef 1300]
type    = S
movetype= A
physics = S
poweradd= 62
velset = 0,0
ctrl = 0
anim = 1300
sprpriority = 2

[State 1300, nothitby]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1300, 1]
type = HitDef
Trigger1 = AnimElem = 2
attr = S, NT
hitflag = M-
priority = 2,hit
sparkno = -1
sprpriority = 1
p1stateno = 1310
p2stateno = 1350
p2facing = 1
numhits = 0

[State 1300, 2]
type = ChangeState
trigger1 = AnimTime >= 8
value = 0
ctrl = 1

;----------------------------------------------------------
;掴み
[Statedef 1310]
type    = S
movetype= A
physics = S
anim = 1300
velset = 0,0
ctrl = 0
sprpriority = 2

[State 1310, pos]
type = posadd
trigger1 = var(58) = 2
trigger1 = time = 0
trigger1 = PrevStateno != 1320 || PrevStateno != 1340
trigger1 = FrontEdgeBodyDist <= 30
x= -40

[State 1310, nothitby]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1310, 0]
type = ChangeAnim
trigger1 = PrevStateno = 1320
value = 1305

[state 1310, 1]
type = playerpush
trigger1 = 1
value = 0

[State 1310, 2]
type = posset
trigger1 = time = 0
y= 0

[State 1310, 3]
type = TargetBind
trigger1 = time = 0
pos = 40, 0

[State 1310, 4]
type = TargetState
trigger1 = time = 0
value = 1350

[State 1310, 5];高速連続打撃
type = ChangeState
triggerall = time >= 4
trigger1 = time >= 12
trigger1 = var(59) = 1 && Random < 80
value = 1390
ctrl = 0

[State 1310, 6];殴る
type = ChangeState
triggerall = time >= 4
triggerall = var(6) < 7
trigger1 = var(59) = 1 && Random < 120
value = 1320
ctrl = 0

[State 1310, 7];殴りフィニッシュ
type = ChangeState
triggerall = time >= 4
triggerall = var(6) = 7
trigger1 = var(59) = 1
value = 1325
ctrl = 0

[State 1310, 8];移動アッパー
type = ChangeState
triggerall = time >= 4
trigger1 = var(59) = 1 && Random < 60
value = 1330 
ctrl = 0

[State 1310, 9];グラビティクラッシュ
type = ChangeState
trigger1 = time >= 12
trigger1 = var(59) = 1 && Random < 40
value = 1340
ctrl = 0

[State 1310, 10]
type = TargetState
trigger1 = time = 60
trigger2 = PrevStateno = 1340
Trigger3 = stateno != 1310
Trigger4 = Life = 0
value = 1370

[State 1310, 11]
type = TargetState
trigger1 = NumTarget
trigger1 = target,life <= 0
value = 1380

[State 1310, var(24)]
type = varset
triggerall = var(58) = 2
trigger1 = time = 60
trigger2 = PrevStateno = 1340
trigger3 = NumTarget
trigger3 = target,movetype != H
trigger6 = NumTarget = 0
v= 24
value = 1

[State 1310, 12]
type = ChangeState
trigger1 = time = 60
trigger2 = movetype = H
trigger3 = Roundstate != 2
trigger4 = NumTarget
trigger4 = target,movetype != H
trigger5 = PrevStateno = 1340
trigger6 = NumTarget = 0
value = 0
ctrl = 1

;---------------------------------------------------
;殴り
[Statedef 1320]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 1310
ctrl = 0
sprpriority = 2

[State 1320, 1]
type = varadd
trigger1 = time = 0
v = 6
value = 1

[State 1320, 2]
type = TargetBind
trigger1 = Time = 0
pos = 35, 0

[State 1320, 3]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0,6

[State 1320, 4]
type = Explod
trigger1 = AnimElem = 3
anim = 910
id = 910
ownpal = 1
sprpriority = 5
postype = p2
pos = ceil(-10*const(size.xscale)), ceil(-55*const(size.yscale))
bindtime = 1
facing = 1
removetime = 7
removeongethit = 1

[State 1320, 5]
type = TargetState
trigger1 = AnimElem = 3
value = 1360

[state 1320, 6]
type = TargetLifeAdd
trigger1 = AnimElem = 3
value = -8

[State 1320, 7]
type = HitAdd
trigger1 = AnimElem = 3
value = 1

[State 1320, 8]
type = TargetState
Trigger1 = stateno != 1320
Trigger2 = Life = 0
value = 1370

[State 1320, 9]
type = Changestate
trigger1 = Animtime = 0
value = 1310

[State 1320, 10]
type = Changestate
trigger1 = NumTarget = 0
;trigger1 = target,stateno != [1350,1360]
value = 0
ctrl = 1

;---------------------------------------------------
;殴りフィニッシュ
[Statedef 1325]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 1325
ctrl = 0
sprpriority = 2

[State 1325, 0]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1325, 1]
type = TargetState
trigger1 = AnimElem = 2
value = 1395

[state 1325, 2]
type = HitDef
trigger1 = AnimElem = 3
attr = S, SA
damage = 32
animtype = hard
hitflag = MAF
guardflag = MA
priority = 5, Hit
pausetime = 0,0
sparkno = S910
guard.sparkno = S900
sparkxy = ceil(-10*const(size.xscale)), ceil(-52*const(size.yscale))
hitsound = S0,6
guardsound = S7,2
ground.type = hard
ground.slidetime = 40
ground.hittime  = 0
ground.velocity = 2,-5
airguard.velocity = 0,0
air.velocity = 2,-5
numhits = 0
fall = 1
air.fall = 1 

[state 1325, 3]
type = HitDef
trigger1 = AnimElem = 6
attr = S, SA
damage = 58
animtype = hard
hitflag = MAF
guardflag = MA
priority = 5, Hit
pausetime = 0,0
sparkno = S920
guard.sparkno = S900
sparkxy = ceil(-20*const(size.xscale)), ceil(-100*const(size.yscale))
hitsound = S7,2
guardsound = S7,0
ground.type = hard
ground.slidetime = 40
ground.hittime  = 40
ground.velocity = -3,-9
airguard.velocity = -4,-4
air.velocity = -3,-9
envshake.time = 12
envshake.freq = 120
envshake.ampl = 6
fall = 1
air.fall = 1 

[State 1325, 4]
type = TargetState
Trigger1 = stateno != 1325
Trigger2 = Life = 0
value = 1370

[State 1325, 5]
type = Changestate
trigger1 = Animtime = 0
value = 0
ctrl = 1

;--------------------------------------------
;移動アッパー
[Statedef 1330]
type    = S
movetype= A
physics = N
velset = 0,0
anim = 1315
juggle = 4
ctrl = 0
sprpriority = 2

[State 1330, 0]
type = turn
trigger1 = time = 0
trigger1 = command = "holdback"

[State 1330, 0]
type = TargetBind
trigger1 = time = 0
trigger1 = command = "holdback"
pos = 40,0

[State 1330, 0]
type = posadd
trigger1 = time = 0
trigger1 = Frontedgebodydist <= 10
x= -20

[State 1330, 0]
type = TargetState
trigger1 = time = 0
value = 1335

[state 1330, 1]
type = HitDef
trigger1 = AnimElem = 2
attr = S, SA
damage = 25, 0
animtype = hard
hitflag = MAF
guardflag = MA
priority = 5, Hit
pausetime = 8,8
sparkno = S910
guard.sparkno = S900
sparkxy = ceil(-10*const(size.xscale)), ceil(-38*const(size.yscale))
hitsound = S8,2
guardsound = S7,0
ground.type = low
ground.slidetime = 40
ground.hittime  = 45
ground.velocity = -6
airguard.velocity = -2,-1
air.velocity = -4
air.fall = 1

[state 1330, 2]
type = HitDef
trigger1 = AnimElem = 3
attr = S, SA
damage = 25, 0
animtype = medium
hitflag = MAF
guardflag = MA
priority = 5, Hit
pausetime = 8,8
sparkno = S910
guard.sparkno = S900
sparkxy = ceil(-30*const(size.xscale)), ceil(-68*const(size.yscale))
hitsound = S8,3
guardsound = S7,0
ground.type = high
ground.slidetime = 40
ground.hittime  = 45
ground.velocity = -4,-7
airguard.velocity = -2,-1
air.velocity = -4,-7
fall = 1
air.fall = 1

[state 1330, 3]
type = HitDef
trigger1 = AnimElem = 4
attr = S, SA
damage = 25, 0
animtype = hard
hitflag = MAF
guardflag = MA
priority = 5, Hit
pausetime = 8,8
sparkno = S910
guard.sparkno = S900
sparkxy = ceil(-30*const(size.xscale)), ceil(-75*const(size.yscale))
hitsound = S7,2
guardsound = S7,0
ground.type = high
ground.slidetime = 30
ground.hittime  = 35
ground.velocity = -4,-7
airguard.velocity = -2,-1
air.velocity = -4,-7
envshake.time = 12
envshake.freq = 120
envshake.ampl = 6
fall = 1
air.fall = 1

[State 1330, 4]
type = velset
trigger1 = AnimElemTime(1) = 1
x= 4

[State 1330, 5]
type = veladd
trigger1 = AnimElemTime(5) = [1,10]
x= -.4

[State 1330, 6]
type = velset
trigger1 = AnimElemTime(5) = 10
x= 0

[State 1330, AvsP]
type = null;posadd
trigger1 = var(58) = 2
trigger1 = FrontEdgeBodyDist < 20
x= -floor(vel x)

[State 1330, 7]
type = TargetState
Trigger1 = stateno != 1330
Trigger2 = Life = 0
value = 1370

[State 1330, 8]
type = Changestate
trigger1 = Animtime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------
;相手
[Statedef 1335]
type    = S
movetype= H
physics = N
velset = 0,0
facep2 = 1

[State 1335, 1]
type = changeanim2
trigger1 = time = 0
value = 5011

[State 1335, 2] 
type = SelfState
trigger1 = time >= 10
value = 0
ctrl = 1

;----------------------------------------------
;グラビティクラッシュ
[Statedef 1340]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 1320
ctrl = 0
sprpriority = 2

[State 1340, 1]
type = TargetBind
trigger1 = 1
pos = 20, 0

[State 1340, 2]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1340, 3]
type = velset
trigger1 = AnimElem = 2,=3
y= -10

[State 1340, 4]
type = velset
trigger1 = AnimElem = 2,=3
trigger1 = command = "holdfwd"
x= 3

[State 1340, 5]
type = velset
trigger1 = AnimElem = 2,=3
trigger1 = command = "holdback"
x= -3

[State 1340, AvsP]
type = posadd
trigger1 = var(58) = 2
trigger1 = FrontEdgeBodyDist < 40
x= -3

[State 1340, 6]
type = veladd
trigger1 = AnimElem = 2,>=3
y= .4

[State 1340, 7]
type = TargetState
Trigger1 = stateno != 1340
Trigger2 = Life = 0
value = 1380

[State 1340, 8]
type = Changestate
trigger1 = pos Y >= 0
trigger1 = vel Y > 0
value = 1310
ctrl = 0

[State 1341, 9]
type = varset
trigger1 = AnimElemTime(2) = [20,23]
trigger1 = command = "y"
var(9) = 1

[State 1340, 10]
type = ChangeState
triggerall = AnimElemTime(2) = [15,32]
trigger1 = command = "y"
trigger2 = var(59) = 1 && AnimElemTime(2) = [20,23]
value = 1341
ctrl = 0

;---------------------------------------------------------------------------
;落下
[Statedef 1341]
type    = A
movetype= I
physics = N
anim = 1321
;velset = 0,0
poweradd = 80

[State 1341, 0]
type = posfreeze
trigger1 = NumHelper(1345) != 0
trigger1 = helper(1345),movehit
value = 1

[State 1341, 0]
type = helper
trigger1 = time = 0
name = "rakka"
id = 1345
pos = 0,0
postype = p1
sprpriority = 5
stateno = 1345
ownpal = 1
persistent = 0

[state 1341, 1]
type = velset
trigger1 = time = 0
y= 0

[State 1341, 2]
type = NotHitBy
trigger1 = 1
value = SCA

[state 1341, 3]
type = velset
trigger1 = AnimElem = 1,>=0 && AnimElem = 2,< 0
y= ifelse(AnimElem=1,=5 || AnimElem=1,=6, 0, ceil(-1*const(size.yscale)))

[state 1341, 4]
type = velset
trigger1 = AnimElem = 2
x= 0
y= 0

[state 1341, 5]
type = velset
trigger1 = AnimElem = 2,= 3
x= 0
y= ifelse(var(9) = 1, 20, 8)

[state 1341, 6]
type = TargetState
trigger1 = time = 0
value = 1343

[state 1341, 7]
type = TargetBind
trigger1 = AnimElem = 2,< 0 
pos = 11,-8

[state 1341, 8]
type = TargetBind
trigger1 = AnimElem = 2,>= 0
pos = 0,0

[State 1341, 9]
type = TargetState
Trigger1 = stateno != 1341
Trigger2 = Life = 0
value = 1380

[state 1341, 9]
type = ChangeState
trigger1 = pos Y >= 0
trigger1 = vel Y > 0
value = 1342

;-----------------------------------------------------------------
;地面叩きつけ
[Statedef 1342]
type    = A
movetype= A
physics = N
anim = 1322
velset = 0,0
ctrl = 0

[State 1342, 0]
type = posset
trigger1 = time = 0
y= 0

[State 1342, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1342, 2]
type = HitAdd
trigger1 = Time = 0
value = 1

[State 1342, 3]
type = TargetLifeAdd
trigger1 = Time = 0
value = ifelse(var(9) = 1, -161, -95)

[State 1342, 4]
type = EnvShake
trigger1 = AnimElem = 2
time = 30
freq = 80
ampl = 4
phase = -4

[State 1342, 5]
type = pause
trigger1 = AnimElemtime(2) >= 0 && AnimElemtime(3) <= 20
trigger1 = var(9) = 1
time = 4
movetime = 0
persistent = 4

[State 1342, 6]
type = varset
trigger1 = AnimElemtime(3) = 21
var(9) = 0

[State 1342, 7]
type = PlaySnd
trigger1 = var(9) = 0 && Time = 2
value = 6,2

[State 1342, 8]
type = PlaySnd
trigger1 = var(9) = 1 && Time = 2
value = 7,2

[State 1342, 9]
type = Explod
trigger1 = AnimElemTime(2) = 3
anim = 910
id = 910
ownpal = 1
sprpriority = 5
postype = p2
pos = -10,0
bindtime = 1
facing = 1
removetime = 7

[State 1342, 10]
type = TargetState
trigger1 = AnimElemTime(2) = 2
value = 1344

[State 1342, 11]
type = velset
trigger1 = AnimElem >= 2
x= -1
y= -6

[State 1342, 12]
type = StateTypeSet
trigger1 = AnimElem = 3
physics = A

[State 1342, 13]
type = TargetState
Trigger1 = stateno != 1342
Trigger2 = Life = 0
value = 1380

;---------------------------------------------------------------------------
;落下時相手
[Statedef 1343]
type    = A
movetype= H
physics = N
velset = 0,0
ctrl = 0

[State 1343, 0]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1343, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 1343

[State 1343, 2]
type = ChangeAnim2
Trigger1 = Pos Y >= 0
value = 1344

;---------------------------------------------------------------------------
;叩きつけ時相手
[Statedef 1344]
type    = A
movetype= H
physics = A
velset = -3,-7
ctrl = 0

[State 1344, nothitby]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1344, 1]
type = SelfState
Trigger1 = Time = 0
value = 5050

;----------------------------------------------------------------------------
;落下時攻撃判定(helper)
[Statedef 1345]
type    = A
movetype= A
physics = N
velset = 0,0
anim = 1345
ctrl = 0

[State 1345, 0]
type = BindToParent
trigger1 = time = 0
time = -1
pos = 0,0
ignorehitpause = 1

[State 1345, 1]
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1

[State 1345, 2]
type = HitDef
trigger1 = AnimElem = 2
attr = A, SA
animtype  = Hard
damage = 62,8
guardflag  = HA
priority  = 5,hit
pausetime = 6,8
sparkxy = -10,-10
sparkno = S930
guard.sparkno = S900
hitsound   = S0,6
guardsound = S7,0
ground.type = high
ground.slidetime = 40
ground.hittime  = 40
ground.velocity = -4,-5
guard.velocity = -6
air.velocity = -4,-4
airguard.velocity = -5,-2
fall = 1
fall.recover = 0
persistent = 0

[State 1345, 3]
type = movehitreset
trigger1 = movehit
trigger1 = gametime%6 = 0
ignorehitpause = 1

[State 1345, 4]
type = destroyself
trigger1 = root,stateno = 1342
trigger1 = root,movetype != H
ignorehitpause = 1

;----------------------------------------------------------------
;掴み時相手
[Statedef 1350]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1350, 0]
type = PlayerPush
trigger1 = 1
value = 0

[State 1350, 0]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1350, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 5002

;----------------------------------------------------------------
;相手2
[Statedef 1360]
type    = S
movetype= H
physics = N
velset = 0,0

[State 1360, 0]
type = PlayerPush
trigger1 = 1
value = 0

[State 1360, 0]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1360, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 5010

;----------------------------------------------------------------
;相手開放
[Statedef 1370]
type    = A
movetype= H
physics = N
velset = 0,0
ctrl = 0

[State 1370, 1]
type = SelfState
trigger1 = Time = 0
value = 0
ctrl = 1

;----------------------------------------------------------------
;相手ふっとび
[Statedef 1380]
type    = A
movetype= H
physics = N
velset = -4,-5

[State 1380, 0]
type = gravity
trigger1 = 1

[State 1380, 1]
type = changeanim2
trigger1 = time = 0
value = 5070

[State 1380, 2]
type = Selfstate
trigger1 = pos Y >= 0
trigger1 = vel Y > 0
value = 5100

;--------------------------------------------
;高速連続打撃
[Statedef 1390]
type    = S
movetype= A
physics = N
velset = 0,0
anim = 1390
ctrl = 0
juggle = 6
sprpriority = 2

[State 1390, 0]
type = TargetState
trigger1 = AnimElem = 1
trigger2 = AnimElem = 4
trigger3 = AnimElem = 6
trigger4 = AnimElem = 10
trigger5 = AnimElem = 12
trigger6 = AnimElem = 16
value = 1395

[state 1390, 1]
type = HitDef
trigger1 = AnimElem = 2
trigger2 = AnimElem = 8
trigger3 = AnimElem = 14
attr = S, SA
damage = 15, 2
animtype = hard
hitflag = MAF
guardflag = MA
priority = 5, Hit
pausetime = 0,0
sparkno = S910
guard.sparkno = S900
sparkxy = ceil(-10*const(size.xscale)), ceil(-68*const(size.yscale))
hitsound = S0,6
guardsound = S7,0
ground.type = low
ground.slidetime = 60
ground.hittime  = 65
ground.velocity = 0,0
airguard.velocity = -4,-3
air.velocity = -4,-4
envshake.time = 8
envshake.freq = 120
envshake.ampl = 4
air.fall = 1

[state 1390, 2]
type = HitDef
trigger1 = AnimElem = 5
trigger2 = AnimElem = 11
attr = S, SA
damage = 18, 4
animtype = hard
hitflag = MAF
guardflag = MA
priority = 5, Hit
pausetime = 0,0
sparkno = S910
guard.sparkno = S900
sparkxy = ceil(-10*const(size.xscale)), ceil(-55*const(size.yscale))
hitsound = S0,6
guardsound = S7,0
ground.type = low
ground.slidetime = 60
ground.hittime  = 65
ground.velocity = 0,0
airguard.velocity = -4,-3
air.velocity = -4,-4
envshake.time = 8
envshake.freq = 120
envshake.ampl = 4
air.fall = 1

[state 1390, 3]
type = HitDef
trigger1 = AnimElem = 17
attr = S, SA
damage = 0, 0
animtype = hard
hitflag = MAF
guardflag = MA
priority = 5, Hit
pausetime = 0,0
sparkno = -1
guard.sparkno = -1
hitsound = -1
guardsound = -1
ground.type = high
ground.slidetime = 40
ground.hittime  = 45
ground.velocity = 2,-5
airguard.velocity = 0,0
air.velocity = 2,-5
fall = 1
air.fall = 1
numhits = 0

[state 1390, 4]
type = HitDef
trigger1 = AnimElem = 19
attr = S, SA
damage = 18, 2
animtype = hard
hitflag = MAF
guardflag = MA
priority = 5, Hit
pausetime = 0,0
sparkno = S910
guard.sparkno = S900
sparkxy = ceil(-10*const(size.xscale)), ceil(-68*const(size.yscale))
hitsound = S0,6
guardsound = S7,0
ground.type = low
ground.slidetime = 60
ground.hittime  = 65
ground.velocity = 2,-5
airguard.velocity = -4,-3
air.velocity = -2,-5
envshake.time = 8
envshake.freq = 120
envshake.ampl = 4
air.fall = 1

[state 1390, 5]
type = HitDef
trigger1 = AnimElem = 21
attr = S, SA
damage = 28, 4
animtype = hard
hitflag = MAF
guardflag = MA
priority = 5, Hit
pausetime = 0,0
sparkno = S910
guard.sparkno = S900
sparkxy = ceil(-10*const(size.xscale)), ceil(-82*const(size.yscale))
hitsound = S7,2
guardsound = S7,0
ground.type = high
ground.slidetime = 50
ground.hittime  = 55
ground.velocity = -3,-9
airguard.velocity = -4,-4
air.velocity = -3,-9
envshake.time = 16
envshake.freq = 120
envshake.ampl = 6
fall = 1
air.fall = 1 

[State 1390, 6]
type = Changestate
trigger1 = Animtime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------
;相手
[Statedef 1395]
type    = S
movetype= H
physics = N
velset = 0,0

[State 1395, 1]
type = changeanim2
trigger1 = time = 0
value = 5002

[State 1395, 2] 
type = SelfState
trigger1 = time >= 20
value = 0
ctrl = 1

;-----------------------------------------------------------------
;サプライジングロール
[Statedef 1400]
type    = A
movetype= A
physics = N
juggle  = 2
poweradd= 50
ctrl = 0
velset = 13,13
anim = 1400
sprpriority = 2

[state 1400, 1]
type = varset
trigger1 = time = 0
trigger1 = pos Y <= -70
v= 9
value = ifelse(pos Y <= -120 , 1, 2)

[State 1400, 2]
type = HitDef
trigger1 = 1
trigger1 = hitcount <= 4
attr = A, NA
animtype  = Hard
damage    = 25
hitflag = MAFD
guardflag = HA
pausetime = 9, ifelse(p2statetype = A, 0, 12)
guard.pausetime = 9, 12
sparkno = S920
guard.sparkno = S900
sparkxy = ceil(-10*const(size.xscale)), ceil(-30*const(size.yscale))
hitsound   = S8,3
guardsound = S7,0
ground.type = high
ground.slidetime = 22
ground.hittime  = 22
ground.velocity = -4, ifelse(hitcount >= 1, -6, 0)
air.velocity = -4, -6
fall = ifelse(hitcount >= 1, 1, 0)
fall.recover = ifelse(hitcount >= 2, 1, 0)
persistent = 7

[state 1400, 3]
type = velset
trigger1 = vel Y > 0
trigger1 = pos Y >= 7
trigger1 = var(9) = 1
x= 4
y= -6

[state 1400, 4]
type = velset
trigger1 = vel Y > 0
trigger1 = pos Y >= 7
trigger1 = var(9) != 1
x= 3
y= ifelse(var(9) = 0, -12,-11)

[state 1400, 5]
type = ChangeState
trigger1 = vel Y < 0
trigger1 = pos Y >= 7
value = 1405

;-----------------------------------------------------------------
;サプライジングロール上昇
[Statedef 1405]
type    = A
movetype= A
physics = A
ctrl = 0
sprpriority = 2
movehitpersist = 1
hitcountpersist = 1

[State 1405, 1]
type = HitDef
trigger1 = 1
trigger1 = hitcount <= 4
attr = A, NA
animtype  = Hard
damage    = 25
hitflag = MAFD
guardflag = HA
pausetime = 9, ifelse(p2statetype = A, 0, 12)
guard.pausetime = 9, 12
sparkno = S920
guard.sparkno = S900
sparkxy = ceil(-10*const(size.xscale)), ceil(-30*const(size.yscale))
hitsound   = S8,3
guardsound = S7,0
ground.type = high
ground.slidetime = 22
ground.hittime  = 22
ground.velocity = -5, ifelse(hitcount >= 1, -7, 0)
air.velocity = -4, -6
fall = ifelse(hitcount >= 1, 1, 0)
fall.recover = ifelse(hitcount >= 2, 1, 0)
persistent = 14

[state 1405, 2]
type = ChangeState
trigger1 = vel y >= 0
value = 1410
ctrl = 0

;----------------------------------------------------
;落下
[Statedef 1410]
type = A
movetype = I
physics = N
ctrl = 0
anim = 1410
sprpriority = 2

[State 1410, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = var(3) = 1
value = 1411

[State 1410, AvsP]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = var(3) = 2
value = 1412

[state 1410, 2]
type = veladd
trigger1 = time >= 0
y= .1

[state 1410, 3]
type = gravity
trigger1 = time >= 0

[state 1410, 4]
type = varset
trigger1 = time = 0
v= 9
value = 0

[State 1410, 5]
type = changestate
trigger1 = pos Y >= 0 && vel Y > 0
value = 1411
ctrl = 0

;---------------------------------------------------------------------------------
;着地
[Statedef 1411]
type = S
movetype = I
physics = S
ctrl = 0
anim = 1056
velset = 0,0
sprpriority = 2

[State 1411, 1]
type = ChangeAnim
trigger1 = var(3) = 1
trigger1 = time = 0
value = 1057

[State 1411, AvsP]
type = ChangeAnim
trigger1 = var(3) = 2
trigger1 = time = 0
value = 1058

[State 1411, 2]
type = posset
trigger1 = time = 0
y= 0

[state 1411, 3]
type = Changestate
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; メガクラッシュ(ディスク)
[Statedef 3000]
type    = S
movetype= A
physics = S
juggle  = 5
velset = 0,0
anim = 3000
ctrl = 0
sprpriority = 2

[State 3000, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3000, 2]
type = PlaySnd
trigger1 = AnimElem = 4
value = 9, 0

[State 3000, 3]
type = HitDef
trigger1 = 1
attr = S, HA
animtype  = Hard
damage    = 98,0
getpower  = 0
priority  = 6
hitflag   = MAFD
guardflag = MA
pausetime = 0, 4
sparkxy = ceil(-10*const(size.xscale)), ceil(-60*const(size.yscale))
sparkno = S930
guard.sparkno = S900
hitsound   = S7,2
guardsound = S7,0
ground.type = High
ground.slidetime = 28
ground.hittime  = 40
ground.velocity = -4,-8
guard.velocity = -8
air.velocity = -4,-7
airguard.velocity = -6,-3
fall.animtype = Hard
fall = 1
air.fall = 1
fall.recover = 1
persistent = 0

[State 3000, 3]
type = LifeAdd
trigger1 = movecontact
trigger1 = AnimTime = 0
value = -ceil(LifeMax/16) ;-62

[State 3000, 4]
type = LifeSet
trigger1 = movecontact
trigger1 = AnimTime = 0
trigger1 = Life <= 0
value = 1

[State 3000, NotHit]
type = NotHitBy
trigger1 = var(58) = 2
trigger1 = AnimTime = 0
Time = 42
value = SCA

[State 3000, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------
;メガクラッシュ(スピア)
[Statedef 3050]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 1080
ctrl = 0
sprpriority = 2

[State 3050, 0]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3050, 1]
type = PlaySnd
trigger1 = AnimElem = 4,=5
value = 8,1

[State 3050, 2]
type = Helper
trigger1 = AnimElem = 4,=1
id = 1081
name = "mc"
sprpriority = 5
pos = 0,0
postype = p1
stateno = 3051
helpertype = normal
keyctrl = 0
ownpal = 1

[State 3050, A1]
type = Explod
trigger1 = AnimElem = 4,>=2 && AnimElem = 13,<=0
anim = 1082
id = 1082
ownpal = 1
sprpriority = 5
postype = p1
pos = 74, 0
Random = 2,2
vel = -1
bindtime = 1
facing = 1
removetime = 14
removeongethit = 1
persistent = 12

[State 3050, A2]
type = Explod
trigger1 = AnimElem = 4,>=5 && AnimElem = 13,<=0
anim = 1082
id = 1082
ownpal = 1
sprpriority = 5
postype = p1
pos = 44, 8
Random = 2,2
vel = -2
bindtime = 1
facing = 1
removetime = 14
removeongethit = 1
persistent = 12

[State 3050, A3]
type = Explod
trigger1 = AnimElem = 4,>=7 && AnimElem = 13,<=0
anim = 1082
id = 1082
ownpal = 1
sprpriority = 5
postype = p1
pos = 14, 10
Random = 2,2
vel = -2
bindtime = 1
facing = 1
removetime = 14
removeongethit = 1
persistent = 12

[State 3050, A4]
type = Explod
trigger1 = AnimElem = 4,>=9 && AnimElem = 13,<=0
anim = 1082
id = 1082
ownpal = 1
sprpriority = 5
postype = p1
pos = -24, 8
Random = 2,2
vel = -2
bindtime = 1
facing = 1
removetime = 14
removeongethit = 1
persistent = 12

[State 3050, A5]
type = Explod
trigger1 = AnimElem = 4,>=11 && AnimElem = 13,<=0
anim = 1082
id = 1082
ownpal = 1
sprpriority = 5
postype = p1
pos = -54, 5
Random = 2,2
vel = -1
bindtime = 1
facing = 1
removetime = 14
removeongethit = 1
persistent = 12

[State 3050, B1]
type = Explod
trigger1 = AnimElem = 4,>=3 && AnimElem = 13,<=0
anim = 1082
id = 1082
ownpal = 1
sprpriority = 1
postype = p1
pos = -74, 0
Random = 2,2
vel = 1
bindtime = 1
facing = 1
removetime = 14
removeongethit = 1
persistent = 12

[State 3050, B2]
type = Explod
trigger1 = AnimElem = 4,>=5 && AnimElem = 13,<=0
anim = 1082
id = 1082
ownpal = 1
sprpriority = 1
postype = p1
pos = -54, -3
Random = 2,2
vel = 2
bindtime = 1
facing = 1
removetime = 14
removeongethit = 1
persistent = 12

[State 3050, B3]
type = Explod
trigger1 = AnimElem = 4,>=7 && AnimElem = 13,<=0
anim = 1082
id = 1082
ownpal = 1
sprpriority = 1
postype = p1
pos = -14, -5
Random = 2,2
vel = 2
bindtime = 1
facing = 1
removetime = 14
removeongethit = 1
persistent = 12

[State 3050, B4]
type = Explod
trigger1 = AnimElem = 4,>=9 && AnimElem = 13,<=0
anim = 1082
id = 1082
ownpal = 1
sprpriority = 1
postype = p1
pos = 24, -3
Random = 2,2
vel = 2
bindtime = 1
facing = 1
removetime = 14
removeongethit = 1
persistent = 12

[State 3050, B5]
type = Explod
trigger1 = AnimElem = 4,>=11 && AnimElem = 13,<=0
anim = 1082
id = 1082
ownpal = 1
sprpriority = 1
postype = p1
pos = 54, 0
Random = 2,2
vel = 1
bindtime = 1
facing = 1
removetime = 14
removeongethit = 1
persistent = 12

[State 3050, 4]
type = HitDef
trigger1 = AnimElemTime(4) >= 1 && AnimElemTime(11) <= 4
attr = S, HA
animtype  = Hard
damage    = 98,0
priority  = 5,Hit
hitflag   = MAFD
guardflag = MA
pausetime = 0, 4
sparkno = S920
guard.sparkno = S900
sparkxy = ceil(-10*const(size.xscale)), ceil(-70*const(size.yscale))
hitsound   = S7,2
guardsound = S7,0
ground.type = High
ground.slidetime = 45
ground.hittime  = 10
ground.velocity = -4,-8
guard.velocity = -8
air.velocity = -4,-7
sprpriority = 3
fall = 1
air.fall = 1
fall.recover = 1
persistent = 0

[State 3050, 5]
type = LifeAdd
trigger1 = movecontact
trigger1 = AnimTime = 0
value = -ceil(LifeMax/16) ;-62

[State 3050, 6]
type = LifeSet
trigger1 = movecontact
trigger1 = AnimTime = 0
trigger1 = Life <= 0
value = 1

[State 3050, NotHit]
type = NotHitBy
trigger1 = var(58) = 2
trigger1 = AnimTime = 0
Time = 42
value = SCA

[State 3050, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------
;スピア動作
[Statedef 3051]
type    = A
movetype= I
physics = N
anim = 1081
sprpriority = 5

[State 3051, 1]
type = Trans
trigger1 = root,var(21) = 1
trans = addalpha
alpha = 40,250

[State 3051, 2]
type = PalFx
trigger1 = root,var(21) = 1
time = 1
Add = 120,120,120
mul = 120,120,120
invertall = -1

[state 3051, 3]
type = BindToParent
trigger1 = 1
pos = 0,0
time = 1

[state 3051, 4]
type = destroyself
trigger1 = Time >= 31
trigger2 = root,movetype = H || root,Life <= 0

;-------------------------------------------------------------------------
;スローイングスピア
[Statedef 3100]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
anim = 3100
ctrl = 0
sprpriority = 2

[State 3100, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 8,1

[State 3100, 2]
type = Helper
trigger1 = AnimElem = 3
id = 3110
name = "spear1"
sprpriority = 4
pos = ceil(95*const(size.xscale)), ceil(-46*const(size.yscale))
postype = p1
stateno = 3110
helpertype = normal
keyctrl = 0
ownpal = 1
persistent = 0

[State 3100, 3]
type = changestate
Trigger1 = BackEdgeBodyDist <= -5
Trigger1 = AnimTime = 0
value = 3341
ctrl = 0

[State 3100, 4]
type = changestate
Trigger1 = BackEdgeBodyDist > -5
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------
;スピア動作
[Statedef 3110]
type    = A
movetype= A
physics = N
juggle  = 0
velset = 12,0
anim = 3110
ctrl = 0
sprpriority = 3

[state 3110, 1]
type = HitDef
trigger1 = AnimElem = 1
attr = A, SP
animtype  = Medium
damage    = 80,6
hitflag = MA
guardflag = MA
pausetime = 20, 12
guard.pausetime = 20, 12
sparkno = S930
guard.sparkno = S900
sparkxy = -10,-10
hitsound   = S6,0
guardsound = S7,0
ground.type = High
ground.slidetime = 26
ground.hittime  = 26
ground.velocity = -6,-4
guard.velocity = -8
air.velocity = -6, -5
fall = 1
air.fall = 1
fall.recover = 0
persistent = 0

[state 3110, B1]
type = Explod
trigger1 = movehit
trigger1 = hitcount = 1
trigger1 = numtarget
anim = ifelse(target,Name="PREDATOR WARRIOR" || target,Name="ALIEN WARRIOR" || target,Name="CHRYSALIS" || target,Name="RAZOR CLAWS" || target,Name="EGG CHAMBER" || target,Name="ROYAL GUARD", 840, 830)
postype = p2
pos = 0,-46
sprpriority = 3
bindtime = 1
id = 830
removetime = 15
facing = ifelse(target,p2dist x < 0, 1, -1)
ownpal = 1
persistent = 0
ignorehitpause = 1

[state 3110, B2]
type = Explod
trigger1 = movehit
trigger1 = hitcount = 2
trigger1 = numtarget
anim = ifelse(target,Name="PREDATOR WARRIOR" || target,Name="ALIEN WARRIOR" || target,Name="CHRYSALIS" || target,Name="RAZOR CLAWS" || target,Name="EGG CHAMBER" || target,Name="ROYAL GUARD", 840, 830)
postype = p2
pos = 0,-46
sprpriority = 3
bindtime = 1
id = 830
removetime = 15
facing = ifelse(target,p2dist x < 0, 1, -1)
ownpal = 1
persistent = 0
ignorehitpause = 1

[state 3110, 2]
type = HitOverride
trigger1 = time = 0
attr = SCA,AP,AA,AT
slot = 0
stateno = 3120
time = -1

[state 3110, 3]
type = Changestate
trigger1 = FrontEdgeBodyDist <= -10
value = 3120
ctrl= 0

;--------------------------------------------------------------------
;スピア弾かれる
[Statedef 3120]
type    = A
movetype= I
physics = N
velset = -2,-9
ctrl = 0
sprpriority = 3

[state 3120, var]
type = ParentVarSet
trigger1 = time = 0
trigger1 = root,var(31) = 1
v= 31
value = 0

[state 3120, 1]
type = ChangeAnim
trigger1 = time = 0
value = 3120

[state 3120, 2]
type = veladd
trigger1 = 1
y = .5

[state 3120, 3]
type = Posadd
trigger1 = BackEdgeBodyDist <= 0
x = 2

[state 3120, 4]
type = Changestate
trigger1 = vel Y > 0
trigger1 = Pos Y >= -5
value = 3121
ctrl = 0

;----------------------------------------------------------------------
;スピアバウンド
[Statedef 3121]
type    = A
movetype= I
physics = N
velset = -2,-6
anim = 3115
ctrl = 0
sprpriority = 3

[state 3121, 1]
type = posset
trigger1 = time = 0
y= 0

[state 3121, 2]
type = veladd
trigger1 = 1
y = .476

[state 3121, 3]
type = posadd
trigger1 = FrontEdgeBodyDist <= 0
trigger2 = BackEdgeBodyDist <= 0
x = ifelse(FrontEdgeBodyDist <= 0, -2, 2)

[state 3121, 4]
type = Changestate
trigger1 = vel Y > 0
trigger1 = Pos Y >= -5
value = 3122
ctrl = 0

;----------------------------------------------------------------------
;スピア接地
[Statedef 3122]
type    = S
movetype= I
physics = N
velset = 0,0
anim = 3115
ctrl = 0
sprpriority = 3

[state 3122, 1]
type = posset
trigger1 = time = 0
y= 0

[state 3122, 2]
type = Explod
trigger1 = TeamSide = 1
trigger1 = time = 5
anim = 4400
id = 4400
pos = 0,0
postype = p1
sprpriority = 5
bindtime = -1
facing = facing
removetime = 9999
ownpal = 1

[state 3122, 3]
type = Explod
trigger1 = TeamSide = 1
trigger1 = time = 5
anim = 4410
id = 4410
pos = 0,0
postype = p1
sprpriority = 4
bindtime = -1
facing = facing
removetime = 9999
ownpal = 1

[state 3122, 4]
type = Explod
trigger1 = TeamSide = 2
trigger1 = time = 5
anim = 4420
id = 4400
pos = 0,0
postype = p1
sprpriority = 5
bindtime = -1
facing = facing
removetime = 9999
ownpal = 1

[state 3122, 5]
type = Explod
trigger1 = TeamSide = 2
trigger1 = time = 5
anim = 4430
id = 4410
pos = 0,0
postype = p1
sprpriority = 4
bindtime = -1
facing = facing
removetime = 9999
ownpal = 1

[State 3122, 6]
type = Parentvarset
trigger1 = ParentDist X = [-50,50]
trigger1 = Animtime != 0
var(5) = 1

[State 3122, 7]
type = Parentvarset
trigger1 = ParentDist X > 50 || ParentDist X < -50
trigger2 = Animtime = 0
var(5) = 0

[State 3122, 8]
type = Parentvarset
trigger1 = Animtime = 0
var(16) = 1

[state 3122, 9]
type = removeexplod
trigger1 = root,stateno = 3123
trigger1 = root,movetype != H
trigger2 = AnimTime = 0
ID = 4400

[state 3122, 10]
type = removeexplod
trigger1 = root,stateno = 3123
trigger1 = root,movetype != H
trigger2 = AnimTime = 0
ID = 4410

[state 3122, 11]
type = destroyself
trigger1 = root,stateno = 3123
trigger1 = root,movetype != H
trigger2 = AnimTime = 0

;--------------------------------------------------------------------------
;武器拾い(スピア)
[Statedef 3123]
type = C
movetype = I
physics = C
velset = 0,0
ctrl = 0
anim = 1027

;ディスク落とす
[state -2]
type = Helper
trigger1 = time = 0
trigger1 = numhelper(820) = 0
trigger1 = var(3) = 2
id = 820
name = "disc1"
sprpriority = 3
pos = 0,-60
postype = p1
stateno = ifelse(FrontEdgeBodyDist >= 80, 1020, 1019)
helpertype = normal
keyctrl = 0
ownpal = 1
persistent = 0

[state 3123, 1]
type = varset
trigger1 = time = 1
var(5) = 0

[State 3123, 2]
type = playsnd
trigger1 = animelem = 1
value = 10,0
persistent = 0

[state 3123, 3]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1 

;--------------------------------------------------------------------
;スピア落とす(前方)
[Statedef 3130]
type    = A
movetype= I
physics = N
velset = 0,0
ctrl = 0
sprpriority = 3

[state 3130, 1]
type = ChangeAnim
trigger1 = time = 0
value = 3130

[state 3130, 2]
type = velset
trigger1 = time = 0
x = 2
y = -9

[state 3130, 2]
type = veladd
trigger1 = 1
y = .45

[state 3130, 3]
type = Posadd
trigger1 = FrontEdgeBodyDist <= 0
trigger2 = BackEdgeBodyDist <= 0
x = ifelse(FrontEdgeBodyDist <= 0, -2, 2)

[state 3130, 4]
type = Changestate
trigger1 = vel Y > 0
trigger1 = Pos Y >= -5
value = 3132

;--------------------------------------------------------------------
;スピア落とす(後方)
[Statedef 3131]
type    = A
movetype= I
physics = N
velset = 0,0
ctrl = 0
sprpriority = 3

[state 3131, 1]
type = ChangeAnim
trigger1 = time = 0
value = 3130

[state 3131, 2]
type = velset
trigger1 = time = 0
x = -2
y = -9

[state 3131, 2]
type = veladd
trigger1 = 1
y = .45

[state 3131, 3]
type = Posadd
trigger1 = FrontEdgeBodyDist <= 0
trigger2 = BackEdgeBodyDist <= 0
x = ifelse(FrontEdgeBodyDist <= 0, -2, 2)

[state 3131, 4]
type = Changestate
trigger1 = vel Y > 0
trigger1 = Pos Y >= -5
value = 3132

;----------------------------------------------------------------------
;バウンド
[Statedef 3132]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 3115
sprpriority = 3

[state 3131, 1]
type = posset
trigger1 = time = 0
y= 0

[state 3131, 2]
type = velset
trigger1 = time = 0
x = ifelse(PrevStateno = 3130, 2, -2)
y = -5

[state 3131, 3]
type = veladd
trigger1 = 1
y = .476

[state 3131, 4]
type = Posadd
trigger1 = FrontEdgeBodyDist <= 0
trigger2 = BackEdgeBodyDist <= 0
x = ifelse(FrontEdgeBodyDist <= 0, -2, 2)

[state 3131, 5]
type = Changestate
trigger1 = vel Y > 0
trigger1 = Pos Y >= -5
value = 3122
ctrl = 0

;----------------------------------------------------------------------------
;メガクラッシュ(素手)
[Statedef 3200]
type = A
movetype = A
physics = S
velset = 0,0
ctrl = 0
anim = 3200

[state 3200, 1]
type = posadd
trigger1 = AnimElemtime(3) = 2
y= -36

[state 3200, 2]
type = posadd
trigger1 = AnimElemtime(3) = 3
y= -18

[state 3200, 3]
type = posadd
trigger1 = AnimElemtime(3) = 4
y= -8

[State 3200, 4]
type = NotHitBy
trigger1 = 1 
value = SCA

[state 3200, 5]
type = Helper
triggerall = NumExplod(950) = 0
trigger1 = AnimElemTime(3) = 5
id = 3230
name = "enA"
sprpriority = 4
pos = ceil(-14*const(size.xscale)), ceil(-62*const(size.yscale))
postype = p1
stateno = 3230
helpertype = normal
keyctrl = 0
ownpal = 1
persistent = 0

[state 3200, 6]
type = Hitdef
trigger1 = AnimElem = 4
attr = A, HP
animtype  = Hard
damage    = 98, 14
priority  = 5
hitflag   = MAFD
guardflag = MA
pausetime = 0, 4
sparkno = S910
guard.sparkno = 900
sparkxy = ceil(-15*const(size.xscale)),0
hitsound   = 7,2
guardsound = -1
ground.type = Low
ground.slidetime = 25
ground.hittime  = 40
ground.velocity = -5,-5.5
guard.velocity = -7
air.velocity = -4.5,-4
airguard.velocity = -5, -3
persistent = 0
fall = 1

[State 3200, target]
type = TargetState
trigger1 = movehit
value = 3250
;persistent = 0

[State 3200, reset]
type = Movehitreset
trigger1 = numtarget
trigger1 = target,stateno = 3250

[State 3200, 7]
type = veladd
trigger1 = AnimElem = 6,>= 0
y= .4

[state 3200, 8]
type = statetypeset
trigger1 = AnimElem = 6
physics = A

[State 3200, NotHit]
type = NotHitBy
trigger1 = var(58) = 2
trigger1 = AnimElemTime(6) >= 0 && pos Y >= -10
Time = 42
value = SCA

[State 3200, 9]
type = LifeAdd
trigger1 = movecontact
trigger1 = AnimElemTime(6) >= 0 && pos Y >= -10
value = -ceil(LifeMax/16) ;-62
persistent = 0

[State 3200, 10]
type = LifeSet
trigger1 = movecontact
trigger1 = AnimElemTime(6) >= 0 && pos Y >= -10
trigger1 = Life <= 0
value = 1
persistent = 0

;----------------------------------------------------------------------
;光弾
[Statedef 3230]
type = A
movetype = A
physics = N
velset = 0,0
anim = 3230
sprpriority = 3

[State 3230, 0]
type = AssertSpecial
trigger1 = 1
Flag = noshadow

[State 3230, 0]
type = VelSet
trigger1 = time = 1
y= 5

[State 3230, 0]
type = VelAdd
trigger1 = time >= 1
trigger1 = vel x < 14
y= .35

[state 3230, 1]
type = Explod
trigger1 = AnimElem = 1,=2
trigger2 = AnimElem = 1,=4
anim = 862
id = 862
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 3230, 2]
type = Explod
trigger1 = AnimElem = 2,=2
trigger2 = AnimElem = 2,=4
anim = 863
id = 863
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 3230, 3]
type = Explod
trigger1 = AnimElem = 3,=2
trigger2 = AnimElem = 3,=4
anim = 864
id = 864
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 3230, 4]
type = Explod
trigger1 = AnimElem = 4,=2
trigger2 = AnimElem = 4,=4
anim = 865
id = 865
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 3230, 5]
type = Explod
trigger1 = AnimElem = 5,=2
trigger2 = AnimElem = 5,=4
anim = 866
id = 866
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 3230, 6]
type = Explod
trigger1 = AnimElem = 6,=2
trigger2 = AnimElem = 6,=4
anim = 867
id = 867
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 3230, 7]
type = Explod
trigger1 = AnimElem = 7,=2
trigger2 = AnimElem = 7,=4
anim = 868
id = 868
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 3230, 8]
type = Explod
trigger1 = AnimElem = 8,=2
trigger2 = AnimElem = 8,=4
anim = 869
id = 869
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 1
removetime = 7

[state 3230, 9]
type = ChangeState
trigger1 = pos Y >= 0
value = 3240

;-------------------------------------------------------------------
;地面着弾
[Statedef 3240]
type = A
movetype = A
physics = N
velset = 0,0
sprpriority = 3

[State 3240, 0]
type = AssertSpecial
trigger1 = 1
Flag = noshadow

[State 3240, 0]
type = AfterImageTime
trigger1 = Time = 0
time = 0

[state 3240, 1]
type = Changeanim
trigger1 = time = 0
value = 4000

[state 3240,snd]
type = PlaySnd
trigger1 = time = 0
channel = 1
;lowpriority = 0
value = S19,0

[state 3240,snd2]
type = PlaySnd
trigger1 = AnimElem = 2,=2
trigger2 = AnimElem = 3,=2
trigger3 = AnimElem = 4,=2
trigger4 = AnimElem = 5,=3
channel = 1
lowpriority = 0
value = S11,8

[State 3240, 2]
type = Explod
trigger1 = AnimElem = 2,=2
id = 4050
anim = 4050
sprpriority = 6
pos = -20, 0
postype = p1
bindtime = 1
removetime = 34
ownpal = 1
persistent = 0

[State 3240, 3]
type = Explod
trigger1 = AnimElem = 3,=2
id = 4050
anim = 4050
sprpriority = 6
pos = 20, 0
postype = p1
bindtime = 1
removetime = 34
ownpal = 1
persistent = 0

[State 3240, 4]
type = Explod
trigger1 = AnimElem = 4,=2
id = 4050
anim = 4050
sprpriority = 6
pos = -60, 0
postype = p1
bindtime = 1
removetime = 34
ownpal = 1
persistent = 0

[State 3240, 5]
type = Explod
trigger1 = AnimElem = 5,=3
id = 4050
anim = 4050
sprpriority = 6
pos = 55, 0
postype = p1
bindtime = 1
removetime = 34
ownpal = 1
persistent = 0

[state 3240, 6]
type = destroyself
trigger1 = AnimTime = 0

;---------------------------------------------------------------------------
;メガクラhit
[Statedef 3250]
type    = U
movetype= H
physics = N
velset = 0,0
ctrl = 0

[State 3250, nothit]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3250, push]
type = PlayerPush
trigger1 = 1
value = 0

[State 3250, pal]
type = PalFx
triggerall = name != "RAZOR CLAWS" && name != "CHRYSALIS" && name != "PREDATOR WARRIOR" && name != "ALIEN WARRIOR" && name != "EGG CHAMBER" && name != "PRIVATE" && Name != "ROYAL GUARD"
trigger1 = time = 0
time = 52
mul = 180,170,160
add = 210,10,-200
sinadd = 60,40,50,20
invertall = -1

[State 3250, avsp]
type = ChangeAnim
triggerall = name = "RAZOR CLAWS" || name = "CHRYSALIS" || name = "PREDATOR WARRIOR" || name = "ALIEN WARRIOR" || name = "EGG CHAMBER" || name = "PRIVATE" || Name = "ROYAL GUARD"
trigger1 = time = 0
value = 8100

[State 3250, avsp]
type = ChangeAnim
trigger1 = Anim = 8100
trigger1 = time = 5
value = 8101

[State 3250, 1]
type = ChangeAnim2
triggerall = name != "RAZOR CLAWS" && name != "CHRYSALIS" && name != "PREDATOR WARRIOR" && name != "ALIEN WARRIOR" && name != "EGG CHAMBER" && name != "PRIVATE" && Name != "ROYAL GUARD"
trigger1 = time = 0
value = 3250

[State 3250, 2]
type = velset
trigger1 = AnimElem = 2
x= -4
y= ifelse(Statetype = A, -9, -10)
persistent = 0

[State 3250, 3]
type = StatetypeSet
trigger1 = AnimElem = 2
statetype = A
persistent = 0

[State 3250, 4]
type = veladd
trigger1 = AnimElem = 2,>= 0
y= .5

[State 3250, 5]
type = SelfState
Trigger1 = Pos Y >= 0 && Vel Y > 0
value = 5100

;---------------------------------------------------------------------------
;一定時間エネルギー無限
[Statedef 3300]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 196
ctrl = 0
sprpriority = 2

[State 3300, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 18,0

[State 3300, 2]
type = PlaySnd
trigger1 = AnimElem = 4
value = 18,1

[State 3300, 3]
type = Palfx
trigger1 = AnimElem = 4
add = 100,100,200
mul = 200,200,200
time = 10

[State 3300, 4]
type = PowerAdd
trigger1 = AnimElem = 4
value = -1000

[State 3300, 5]
type = Explod
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(6) < 0
anim = 3950
id = 3950
pos = 0,0
postype = p1
sprpriority = 5
bindtime = -1
removetime = 28
ownpal = 1
facing = 1
persistent = 8

[State 3300, 6]
type = Explod
trigger1 = Animtime = 0
anim = 960
id = 960
pos = ceil(-15*const(size.xscale)), ceil(-99*const(size.yscale))
postype = p1
sprpriority = 5
bindtime = -1
removetime = 600
ownpal = 1
facing = facing
scale = const(size.xscale),const(size.yscale)
persistent = 0

[State 3300, 7]
type = Changestate
trigger1 = Animtime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------
;刺してぶん投げる
[Statedef 3400]
type = S
movetype = A
physics = S
ctrl = 0
velset = 0,0
anim = 3300
sprpriority = 4

[State 3400, 1]
type = NotHitBy
trigger1 = time = 0
trigger2 = AnimElem = 5
value = SCA
time = 4

[State 3400, 2]
type = Width
trigger1 = time >= 1
value = 30,0

[state 3400, 3]
type = Playsnd
trigger1 = AnimElem = 4
value = 0,4

[State 3400, 4]
type = HitDef
trigger1 = AnimElem = 5
attr = S, ST
animtype  = Hard
damage    = 64
priority  = 1,hit
hitflag = M-
pausetime = 10,100
sparkno = S930
guard.sparkno = S900
sparkxy = ceil(-10*const(size.xscale)), ceil(-45*const(size.yscale))
hitsound   = S12,2
guardsound = S7,0
ground.type = low
ground.slidetime = 26
ground.hittime  = 26
ground.velocity = -8
guard.velocity = -10
air.velocity = -7,-4
p1stateno = 3410
p2stateno = 3420
p2facing = 1
fall = 1
fall.recover = 0

[state 3400, 5]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;------------------------------------------------------
;ヒット
[Statedef 3410]
type = S
movetype = A
physics = S
ctrl = 0
anim = 3350
sprpriority = -1

[State 3410, 1]
type = TargetBind
trigger1 = time = 0
pos = 80, 0

[State 3410, 2]
type = TargetBind
trigger1 = AnimElem = 3
pos = 98, ceil(-60*const(size.yscale))

[State 3410, 3]
type = TargetBind
trigger1 = AnimElem = 4
pos = 70, ceil(-114*const(size.yscale))

[State 3410, 4]
type = TargetBind
trigger1 = AnimElem = 5
pos = 40, ceil(-110*const(size.yscale))

[State 3410, 5]
type = TargetBind
trigger1 = AnimElem = 6
pos = -50, ceil(-95*const(size.yscale))

[State 3410, 6]
type = Targetstate
trigger1 = AnimElem = 3
value = 3430

[State 3410, 7]
type = TargetState
trigger1 = AnimElem = 7
value = 3440

[state 3410, 8]
type = Explod
trigger1 = AnimElem = 1
anim = ifelse(target,Name="PREDATOR WARRIOR" || target,Name="ALIEN WARRIOR" || target,Name="CHRYSALIS" || target,Name="RAZOR CLAWS" || target,Name="EGG CHAMBER" || target,Name="ROYAL GUARD", 840, 830)
postype = p1
pos = ceil(85*const(size.xscale)), ceil(-50*const(size.yscale))
sprpriority = 5
bindtime = -1
id = 830
removetime = 15
facing = -1
ownpal = 1

[state 3410, 9]
type = Turn
trigger1 = Animtime = 0
trigger2 = var(58) != 2 || var(58) = 2 && var(57) = 1
trigger2 = power >= 3000
trigger2 = time >= 80
trigger2 = command = "SB_cancel"

[State 3410, 10]
type = TargetState
Trigger1 = stateno != 3410
Trigger2 = Life = 0
value = 3460

[state 3410, 11]
type = ChangeState
trigger1 = var(58) != 2 || var(58) = 2 && var(57) = 1
trigger1 = power >= 3000
trigger1 = time >= 80
trigger1 = command = "SB_cancel"
value = 3600

[state 3410, 12]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;--------------------------------------------------
;相手1
[Statedef 3420]
type    = A
movetype= H
physics = N
velset = 0,0

[State 3420, nothitby]
type = NotHitBy
trigger1 = 1 
value = SCA

[State 3420, 0]
type = PlayerPush
trigger1 = 1
value = 0

[State 3420, 0]
type = ScreenBound
trigger1 = 1
value = 0

[State 3420, 1]
type = posset
trigger1 = pos Y < 0
y= 0

[State 3420, 3]
type = ChangeAnim2
Trigger1 = Time = 0
value = 5012

;--------------------------------------------------
;相手2
[Statedef 3430]
type    = A
movetype= H
physics = N
velset = 0,0

[State 3430, nothitby]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3430, 1]
type = PlayerPush
trigger1 = 1
value = 0

[State 3430, 2]
type = ScreenBound
trigger1 = 1
value = 0

[State 3430, 3]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3345

;-----------------------------------------------------------------
;相手3
[Statedef 3440]
type    = A
movetype= H
physics = N
velset = 18,14

[State 3440, nothitby]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3440, 1]
type = changestate
Trigger1 = pos y >= 0
trigger1 = vel Y > 0
value = 3450
ctrl = 0

;-----------------------------------------------------------------
;相手4
[Statedef 3450]
type    = A
movetype= H
physics = N
velset = 4,-10

[State 3450, 1]
type = ChangeAnim2
Trigger1 = time = 0
value = 5070
ctrl = 0

[State 3450, 2]
type = playsnd
trigger1 = time = 0
value =  F7,2
volume = 255

[State 3450, 3]
type = Lifeadd
trigger1 = time = 0
value = -45

[State 3450, 4]
type = EnvShake
trigger1 = Time = 0
time = 12
freq = 90
ampl = 8
phase = -5

[State 3450, 5]
type = Explod
trigger1 = Time = 0
anim = F62
pos = 0, 0
postype = p1
sprpriority = 3

[State 3450, 6]
type = gravity
trigger1 = 1

[State 3450, 8]
type = selfstate
Trigger1 = pos y >= 0
trigger1 = vel Y > 0
value = 5100

;-----------------------------------------------------------------
;相手開放
[Statedef 3460]
type    = A
movetype= H
physics = A
velset = 0,0
ctrl = 0

[State 3460, 1]
type = ChangeAnim2
Trigger1 = time = 0
value = 5070
ctrl = 0

;--------------------------------------------------------------
;空中スピア投げ
[Statedef 3500]
type = A
movetype = A
physics = A
ctrl = 0
anim = 3500
sprpriority = 4

[State 3500, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 8, 1

[State 3500, 2]
type = helper
trigger1 = AnimElem = 5
name = "spear"
id = 3110
pos = ceil(72*const(size.xscale)), ceil(-47*const(size.yscale))
postype = p1
sprpriority = 5
stateno = 3501
ownpal = 1
persistent = 0

[State 3500, 3]
type = velset
trigger1 = Anim = 3500 && time = 0
x= -1
y= -6

[State 3500, 4]
type = ChangeAnim
trigger1 = Anim = 3500
trigger1 = AnimTime = 0
value = 1061

;------------------------------------------------------------------
;スピア
[Statedef 3501]
type = A
movetype = A
physics = N
velset = 12, 6
anim = 3501
sprpriority = 3

[state 3501, 0]
type = HitOverride
trigger1 = time = 0
attr = SCA,AP,AA,AT
slot = 0
stateno = 3120
time = -1

[state 3501, 1]
type = Hitdef
trigger1 = 1
trigger1 = hitcount = 0
attr = A, SP
animtype  = hard
damage    = 120, 10
priority  = 6,Hit
hitflag = MA
guardflag = MA
pausetime = 20, 12
sparkno = S930
guard.sparkno = S900
sparkxy = -10,10
hitsound   = S6,0
guardsound = S7,0
ground.type = high
ground.slidetime = 26
ground.hittime  = 26
ground.velocity = -5,-8
guard.velocity = -8
air.velocity = -8, -4
fall = 1
air.fall = 1
fall.recover = 1
persistent = 0

[state 3501, B1]
type = Explod
trigger1 = movehit
trigger1 = hitcount = 1
trigger1 = numtarget
anim = ifelse(target,Name="PREDATOR WARRIOR" || target,Name="ALIEN WARRIOR" || target,Name="CHRYSALIS" || target,Name="RAZOR CLAWS" || target,Name="EGG CHAMBER" || target,Name="ROYAL GUARD" , 840, 830)
postype = p2
pos = 0,-60
sprpriority = 3
bindtime = 1
id = 830
removetime = 15
facing = ifelse(target,p2dist x < 0, 1, -1)
ownpal = 1
persistent = 0
ignorehitpause = 1

[state 3501, B2]
type = Explod
trigger1 = movehit
trigger1 = hitcount = 2
trigger1 = numtarget
anim = ifelse(target,Name="PREDATOR WARRIOR" || target,Name="ALIEN WARRIOR" || target,Name="CHRYSALIS" || target,Name="RAZOR CLAWS" || target,Name="EGG CHAMBER" || target,Name="ROYAL GUARD", 840, 830)
postype = p2
pos = 0,-60
sprpriority = 3
bindtime = 1
id = 830
removetime = 15
facing = ifelse(target,p2dist x < 0, 1, -1)
ownpal = 1
persistent = 0
ignorehitpause = 1

[state 3501, 3]
type = Changestate
trigger1 = pos Y >= -18
trigger2 = FrontEdgeBodyDist <= -10
value = 3120
ctrl= 0

;-------------------------------------------------------------------------
;スピアぶん投げ
[Statedef 3600]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 3600
poweradd = -3000
ctrl = 0
sprpriority = 2

[state 3600, var]
type = VarSet
trigger1 = time = 0
trigger1 = PrevStateno = 3410
v= 31
value = 1

[State 3600, 0]
type = Palfx
trigger1 = Time = 0
add = 100,100,200
mul = 200,200,200
time = 10

[State 3600, screen]
type = ScreenBound
trigger1 = numhelper(3110)
trigger1 = helper(3110),stateno = [3610,3612]
value = 0

[State 3600, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 8,1

[State 3600, 2]
type = Helper
trigger1 = AnimElem = 5
id = 3110
name = "spear1"
sprpriority = 4
pos = ceil(95*const(size.xscale)), ceil(-46*const(size.yscale))
postype = p1
stateno = 3605
helpertype = normal
keyctrl = 0
ownpal = 1
persistent = 0

[State 3600, 3]
type = changestate
trigger1 = BackEdgeBodyDist <= 0
Trigger1 = AnimTime = 0
value = 3601

[State 3600, 4]
type = changestate
trigger1 = BackEdgeBodyDist > 0
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------
;追いかける
[Statedef 3601]
type    = S
movetype= I
physics = N
anim = 3601
velset = 4,0
poweradd = 0

[State 3601, 0]
type = NotHitBy
trigger1 = 1 
value = SCA

[State 3601, 1]
type = PlayerPush
trigger1 = 1
value = 0

[State 3601, screen]
type = ScreenBound
trigger1 = BackEdgeBodyDist < 100
value = 0

[state 3601, pos]
type = PosSet
trigger1 = BackEdgeBodyDist < -100
trigger1 = numhelper(3110)
trigger1 = helper(3110),stateno = [3611,3612]
x= facing*-400
persistent = 0

[State 3601, 2]
type = changestate
trigger1 = BackEdgeBodyDist >= 100
value = 0
ctrl = 1

;----------------------------------------------------------------
;スピア動作
[Statedef 3605]
type    = A
movetype= A
physics = N
velset = 18,0
anim = 3110
ctrl = 0
sprpriority = 4

[state 3605, var]
type = varset
trigger1 = time = 0
trigger1 = root,var(21) = 1
v= 21
value = 1
ignorehitpause = 1

[State -2, Trans]
type = Trans
trigger1 = var(21) = 1
trans = addalpha
alpha = 40,250
ignorehitpause = 1

[State -2, Palfx]
type = PalFx
trigger1 = var(21) = 1
time = 1
Add = 120,120,120
mul = 120,120,120
invertall = -1
ignorehitpause = 1

[State 3605, vel]
type = VelSet
trigger1 = time = [0,4]
trigger1 = root,command = "holdup" || root,command = "holddown"
y= ifelse(root,command = "holdup" && root,command != "holdy", -6, ifelse(root,command = "holdup" && root,command = "holdy", -12, 4))

[State 3605, pos1]
type = VelSet
trigger1 = Pos y <= -180
y= 6

[State 3605, pos2]
type = VelSet
trigger1 = Pos y >= -10
y= -6

[state 3605, 0]
type = NotHitBy
trigger1 = 1
value = SCA

[state 3605, 1]
type = HitDef
trigger1 = 1
attr = A,HP
animtype  = hard
damage    = 140,6
hitflag = MAF
guardflag = MA
pausetime = 0,0
guard.pausetime = 20,20
sparkno = S930
guard.sparkno = S900
sparkxy = -10,-10
hitsound   = S12,1
guardsound = S7,0
ground.type = High
ground.slidetime = 26
ground.hittime  = 26
ground.velocity = -8,-5
guard.velocity = -10
air.velocity = -7, -4
fall = 1
air.fall = 1
fall.recover = 0
kill = 0
hitonce = 0
persistent = 0

[State 3605, target]
type = TargetState
trigger1 = NumTarget
trigger1 = movehit
value = 3650
ignorehitpause = 1
persistent = 0

[state 3605, hit]
type = Changestate
trigger1 = NumTarget
trigger1 = movehit
value = 3610
ignorehitpause = 1

[state 3605, 3]
type = Changestate
trigger1 = FrontEdgeBodyDist <= -10
value = 3120

;----------------------------------------------------------------
;スピア槍先(透明用)
[Statedef 3606]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 3611
ctrl = 0
sprpriority = 2

[State -2, Trans]
type = Trans
trigger1 = Parent,var(21) = 1
trans = addalpha
alpha = 40,250

[State -2, Palfx]
type = PalFx
trigger1 = Parent,var(21) = 1
time = 1
Add = 120,120,120
mul = 120,120,120
invertall = -1

[state 3606, 1]
type = BindToParent
trigger1 = 1
pos = 0,0

[state 3606, 2]
type = destroyself
trigger1 = parent,stateno = 3620

;----------------------------------------------------------------
;スピアhit
[Statedef 3610]
type    = A
movetype= A
anim = 3610
ctrl = 0
sprpriority = 5

[State 3610, 0]
type = Helper
trigger1 = time = 0
trigger1 = var(21) = 1
id = 3606
name = "spear2"
sprpriority = 2
pos = 0,0
postype = p1
stateno = 3606
helpertype = normal
keyctrl = 0
ownpal = 1

[State -2, Trans]
type = Trans
trigger1 = var(21) = 1
trans = addalpha
alpha = 40,250
ignorehitpause = 1

[State -2, Palfx]
type = PalFx
trigger1 = var(21) = 1
time = 1
Add = 120,120,120
mul = 120,120,120
invertall = -1
ignorehitpause = 1

[state 3610, 0]
type = Explod
trigger1 = AnimElem = 1
anim = ifelse(target,Name="PREDATOR WARRIOR" || target,Name="ALIEN WARRIOR" || target,Name="CHRYSALIS" || target,Name="RAZOR CLAWS" || target,Name="EGG CHAMBER" || target,Name="ROYAL GUARD", 840, 830)
postype = p1
pos = 0,0
sprpriority = 6
bindtime = 1
id = 830
removetime = 15
facing = -1
ownpal = 1

[State 3610, target]
type = TargetState
trigger1 = root,var(31) = 0
trigger1 = root,var(56) = 1
trigger1 = time = 0
trigger1 = numtarget
trigger1 = target,Const(size.head.pos.y) <= Pos y + 8
trigger1 = target,Const(size.head.pos.y) >= Pos y - 8
value = 3700

[State 3610, pos]
type = PosSet
trigger1 = time = 0
y= ceil(-46*const(size.yscale))

[State 3610, vel1]
type = VelSet
trigger1 = Pos y <= -140
y= 1

[State 3610, vel2]
type = VelSet
trigger1 = Pos y >= -80
y= ifelse(pos y >=-40, -4, ifelse(pos y >=-60 && pos y <=-41, -2, -1))

[State 3610, vel3]
type = VelSet
trigger1 = numtarget
trigger1 = target,stateno = 3700
trigger1 = Pos y >= -140
y= -8

[State 3610, 1]
type = TargetBind
trigger1 = 1
pos = 0,0

[state 3610, 2]
type = Explod
trigger1 = time = 0
trigger1 = var(21) = 0
anim = 3611
postype = p1
pos = 0,0
sprpriority = 3
bindtime = -1
id = 3611
removetime = -1
facing = 1
ownpal = 1
scale = const(size.xscale),const(size.yscale)

[state 3610, 3]
type = Changestate
trigger1 = FrontEdgeBodyDist <= 0
trigger1 = numtarget
trigger1 = target,stateno != 3700
value = 3611

[state 3610, 4]
type = Changestate
trigger1 = FrontEdgeBodyDist <= 0
trigger1 = numtarget
trigger1 = target,stateno = 3700
value = 3612

;----------------------------------------------------------------
;スピア壁刺さり(腹部)
[Statedef 3611]
type    = A
movetype= A
velset = 0,0
anim = 3610
ctrl = 0
sprpriority = 5

[State -2, Trans]
type = Trans
trigger1 = var(21) = 1
trans = addalpha
alpha = 40,250
ignorehitpause = 1

[State -2, Palfx]
type = PalFx
trigger1 = var(21) = 1
time = 1
Add = 120,120,120
mul = 120,120,120
invertall = -1
ignorehitpause = 1

[State 3611, pos]
type = PosSet
trigger1 = roundstate <= 3
x= facing*135

[State 3611, 0]
type = EnvShake
trigger1 = time = 0
time = 25
freq = 120
ampl = 6
phase = -1

[State 3611, 1]
type = PlaySnd
trigger1 = time = 0
value = 12,3

[State 3611, 2]
type = TargetBind
trigger1 = numtarget
trigger1 = (target,stateno = [3650,3701]) || target,stateno = 5150
pos = 0,0

[state 3611, 3]
type = Explod
trigger1 = time = 0
trigger1 = var(21) = 0
anim = 3611
postype = p1
pos = 0,0
sprpriority = 3
bindtime = -1
id = 3611
removetime = -1
facing = 1
ownpal = 1
scale = const(size.xscale),const(size.yscale)

[state 3611, 0]
type = Explod
trigger1 = time = 60
trigger1 = var(21) = 1
anim = 3620
postype = p1
pos = 0,0
sprpriority = 6
bindtime = -1
id = 3620
removetime = -1
facing = 1
ownpal = 1
scale = const(size.xscale),const(size.yscale)

[state 3611, 0]
type = Explod
trigger1 = time = 60
trigger1 = var(21) = 1
anim = 3621
postype = p1
pos = 0,0
sprpriority = 3
bindtime = -1
id = 3621
removetime = -1
facing = 1
ownpal = 1
scale = const(size.xscale),const(size.yscale)

[state 3611, 0]
type = Explod
trigger1 = time = [60,160]
trigger1 = var(21) = 1
anim = 3622
postype = p1
pos = -(time)+65,0
Random = 5,5
sprpriority = 7
bindtime = -1
id = 3622
removetime = 12
facing = 1
ownpal = 1
persistent = 30

[state 3611, 0]
type = Explod
trigger1 = time = [60,160]
trigger1 = var(21) = 1
anim = 3623
postype = p1
pos = -(time)+65,0
Random = 5,5
sprpriority = 7
bindtime = -1
id = 3623
removetime = 8
facing = 1
ownpal = 1
persistent = 16

[state 3611, 0]
type = Explod
trigger1 = time = [60,160]
trigger1 = var(21) = 1
anim = 3624
postype = p1
pos = -(time)+65,0
Random = 5,5
sprpriority = 7
bindtime = -1
id = 3624
removetime = 4
facing = 1
ownpal = 1
persistent = 10

[State 3611, 0]
type = PlaySnd
trigger1 = time = 60
trigger1 = var(21) = 1
value = 18,1

[state 3611, var]
type = varset
trigger1 = time = 200
trigger1 = var(21) = 1
v= 21
value = 0

[State 3611, target1]
type = TargetState
trigger1 = numtarget
trigger1 = target,Life > 0
trigger1 = target,stateno = 3650
trigger1 = time >= 80
value = 3651

[State 3611, target2]
type = TargetState
trigger1 = numtarget
trigger1 = target,Life > 0
trigger1 = target,stateno = 3651
trigger1 = time >= 160
value = 3652

[State 3611, target2]
type = TargetState
triggerall = numtarget
trigger1 = target,Life > 0
trigger1 = target,stateno = 3652
trigger1 = time >= 320
trigger2 = target,Life <= 0
trigger2 = target,stateno != 3653 && target,stateno != 3710 && target,stateno != 5150
trigger2 = time >= 60
value = 3653

[state 3611, Life1]
type = TargetLifeAdd
trigger1 = time <= 200
value = -1

[state 3611, Life2]
type = TargetLifeAdd
trigger1 = time = 320
value = -50

[state 3611, 0]
type = Explod
triggerall = numtarget
triggerall = target,stateno = [3650,3701]
trigger1 = time = [0,80]
anim = ifelse(target,Name="PREDATOR WARRIOR" || target,Name="ALIEN WARRIOR" || target,Name="CHRYSALIS" || target,Name="RAZOR CLAWS" || target,Name="EGG CHAMBER" || target,Name="ROYAL GUARD", 840, 830)
postype = p1
pos = 0,0
sprpriority = 6
bindtime = 1
id = 830
removetime = 15
facing = -1
ownpal = 1
persistent = 60

[state 3611, 0]
type = Explod
triggerall = numtarget
triggerall = target,stateno = [3650,3701]
trigger1 = time = [81,160]
anim = ifelse(target,Name="PREDATOR WARRIOR" || target,Name="ALIEN WARRIOR" || target,Name="CHRYSALIS" || target,Name="RAZOR CLAWS" || target,Name="EGG CHAMBER" || target,Name="ROYAL GUARD", 840, 830)
postype = p1
pos = 0,0
sprpriority = 6
bindtime = 1
id = 830
removetime = 15
facing = -1
ownpal = 1
persistent = 90

[state 3611, 0]
type = Explod
triggerall = numtarget
triggerall = target,stateno = [3650,3701]
trigger1 = time = [161,260]
trigger2 = time = 310
anim = ifelse(target,Name="PREDATOR WARRIOR" || target,Name="ALIEN WARRIOR" || target,Name="CHRYSALIS" || target,Name="RAZOR CLAWS" || target,Name="EGG CHAMBER" || target,Name="ROYAL GUARD", 840, 830)
postype = p1
pos = 0,0
sprpriority = 6
bindtime = 1
id = 830
removetime = 15
facing = -1
ownpal = 1
persistent = 120

[state 3611, 0]
type = Changestate
triggerall = numtarget
trigger1 = target,stateno != [3650,3701]
value = 3620

;----------------------------------------------------------------
;スピア壁刺さり(頭部)
[Statedef 3612]
type    = A
movetype= A
velset = 0,0
anim = 3610
ctrl = 0
sprpriority = 5

[State -2, Trans]
type = Trans
trigger1 = var(21) = 1
trans = addalpha
alpha = 40,250
ignorehitpause = 1

[State -2, Palfx]
type = PalFx
trigger1 = var(21) = 1
time = 1
Add = 120,120,120
mul = 120,120,120
invertall = -1
ignorehitpause = 1

[State 3612, pos]
type = PosSet
trigger1 = roundstate <= 3
x= facing*135

[State 3612, 0]
type = EnvShake
trigger1 = time = 0
time = 25
freq = 120
ampl = 6
phase = -1

[State 3612, 1]
type = PlaySnd
trigger1 = time = 0
value = 12,3

[State 3612, 2]
type = TargetBind
trigger1 = numtarget
trigger1 = (target,stateno = [3700,3701]) || target,stateno = 5150
pos = 0,0

[state 3612, 3]
type = Explod
trigger1 = time = 0
trigger1 = var(21) = 0
anim = 3611
postype = p1
pos = 0,0
sprpriority = 3
bindtime = -1
id = 3611
removetime = -1
facing = 1
ownpal = 1
scale = const(size.xscale),const(size.yscale)

[state 3612, 0]
type = Explod
trigger1 = time = 60
trigger1 = var(21) = 1
anim = 3620
postype = p1
pos = 0,0
sprpriority = 6
bindtime = -1
id = 3620
removetime = -1
facing = 1
ownpal = 1
scale = const(size.xscale),const(size.yscale)

[state 3612, 0]
type = Explod
trigger1 = time = 60
trigger1 = var(21) = 1
anim = 3621
postype = p1
pos = 0,0
sprpriority = 3
bindtime = -1
id = 3621
removetime = -1
facing = 1
ownpal = 1
scale = const(size.xscale),const(size.yscale)

[state 3612, 0]
type = Explod
trigger1 = time = [60,160]
trigger1 = var(21) = 1
anim = 3622
postype = p1
pos = -(time)+65,0
Random = 5,5
sprpriority = 7
bindtime = -1
id = 3622
removetime = 12
facing = 1
ownpal = 1
persistent = 30

[state 3612, 0]
type = Explod
trigger1 = time = [60,160]
trigger1 = var(21) = 1
anim = 3623
postype = p1
pos = -(time)+65,0
Random = 5,5
sprpriority = 7
bindtime = -1
id = 3623
removetime = 8
facing = 1
ownpal = 1
persistent = 16

[state 3612, 0]
type = Explod
trigger1 = time = [60,160]
trigger1 = var(21) = 1
anim = 3624
postype = p1
pos = -(time)+65,0
Random = 5,5
sprpriority = 7
bindtime = -1
id = 3624
removetime = 4
facing = 1
ownpal = 1
persistent = 10

[State 3612, 0]
type = PlaySnd
trigger1 = time = 60
trigger1 = var(21) = 1
value = 18,1

[state 3612, var]
type = varset
trigger1 = time = 200
trigger1 = var(21) = 1
v= 21
value = 0

[State 3612, target1]
type = TargetState
trigger1 = numtarget
trigger1 = target,stateno = 3700
trigger1 = time = 0
value = 3701

[state 3612, 0]
type = Explod
trigger1 = time = 10
trigger2 = time = 60
anim = ifelse(target,Name="PREDATOR WARRIOR" || target,Name="ALIEN WARRIOR" || target,Name="CHRYSALIS" || target,Name="RAZOR CLAWS" || target,Name="EGG CHAMBER" || target,Name="ROYAL GUARD", 840, 830)
postype = p1
pos = 0,0
sprpriority = 6
bindtime = 1
id = 830
removetime = 15
facing = -1
ownpal = 1

[state 3612, 0]
type = Changestate
triggerall = numtarget
trigger1 = target,stateno != [3700,3701]
value = 3620

;--------------------------------------------------------------------
;スピア弾かれる
[Statedef 3620]
type    = A
movetype= I
physics = N
velset = -2,-9
ctrl = 0
sprpriority = 3

[State 3620, ex]
type = RemoveExplod
trigger1 = time = 0

[state 3620, 1]
type = ChangeAnim
trigger1 = time = 0
value = 3120

[state 3620, 2]
type = veladd
trigger1 = 1
y = .5

[state 3620, 3]
type = Posadd
trigger1 = BackEdgeBodyDist <= 0
x = 2

[state 3620, 4]
type = Changestate
trigger1 = vel Y > 0
trigger1 = Pos Y >= -5
value = 3621

;----------------------------------------------------------------------
;スピアバウンド
[Statedef 3621]
type    = A
movetype= I
physics = N
velset = -2,-6
anim = 3115
sprpriority = 3

[state 3621, 1]
type = posset
trigger1 = time = 0
y= 0

[state 3621, 2]
type = veladd
trigger1 = 1
y = .476

[state 3621, 3]
type = posadd
trigger1 = FrontEdgeBodyDist <= 0
trigger2 = BackEdgeBodyDist <= 0
x = ifelse(FrontEdgeBodyDist <= 0, -2, 2)

[state 3621, 4]
type = Changestate
trigger1 = vel Y > 0
trigger1 = Pos Y >= -5
value = 3622

;----------------------------------------------------------------------
;スピア接地
[Statedef 3622]
type    = S
movetype= I
physics = N
velset = 0,0
anim = 3625
sprpriority = 3

[state 3622, 1]
type = posset
trigger1 = time = 0
y= 0

[State 3622, 2]
type = Parentvarset
trigger1 = Time > 60
var(16) = 1

[state 3622, 3]
type = destroyself
trigger1 = Time > 60

;--------------------------------------------------
;相手1
[Statedef 3650]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 4

[State 3650, 0]
type = NotHitBy
trigger1 = 1 
value = SCA

[State 3650, 1]
type = PlayerPush
trigger1 = 1
value = 0

[State 3650, anim]
type = ChangeAnim2
trigger1 = time = 0
value = 3650

;--------------------------------------------------
;相手2
[Statedef 3651]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 4

[State 3651, 0]
type = NotHitBy
trigger1 = 1 
value = SCA

[State 3651, 1]
type = PlayerPush
trigger1 = 1
value = 0

[State 3651, anim]
type = ChangeAnim2
trigger1 = time = 0
value = 3651

;--------------------------------------------------
;相手3
[Statedef 3652]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 4

[State 3652, 1]
type = PlayerPush
trigger1 = 1
value = 0

[State 3652, anim]
type = ChangeAnim2
trigger1 = time = 0
value = 3652

;--------------------------------------------------
;相手4
[Statedef 3653]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 4

[State 3653, 1]
type = PlayerPush
trigger1 = 1
value = 0

[State 3653, anim]
type = ChangeAnim2
trigger1 = time = 0
value = 3653

[State 3653, 2]
type = ChangeState
triggerall = Life <= 0
triggerall = time >= 60
trigger1 = numpartner = 0
trigger2 = numpartner
trigger2 = partner,Life <= 0
value = 5150

[State 3653, 3]
type = ChangeState
trigger1 = time >= 60
trigger1 = Life > 0
trigger2 = time >= 180
trigger2 = numpartner
trigger2 = partner,Life > 0
trigger2 = Life <= 0
value = 3710

;--------------------------------------------------
;相手5
[Statedef 3700]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 4

[State 3700, anim]
type = ChangeAnim2
trigger1 = time = 0
value = 3700

[state 3700, Life]
type = LifeSet
trigger1 = time = 0
value = 0

;--------------------------------------------------
;相手6
[Statedef 3701]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 4

[State 3701, anim]
type = ChangeAnim2
trigger1 = time = 0
value = 3701

[State 3701, 1]
type = ChangeState
triggerall = Life <= 0
triggerall = time >= 120
trigger1 = numpartner = 0
trigger2 = numpartner
trigger2 = partner,Life <= 0
value = 5150

[State 3701, 2]
type = ChangeState
triggerall = time >= 240
trigger1 = Life > 0
trigger2 = numpartner
trigger2 = partner,Life > 0
trigger2 = Life <= 0
value = 3710

;--------------------------------------------------
;相手落下
[Statedef 3710]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 4

[State 3710, anim]
type = ChangeAnim2
trigger1 = time = 0
value = 3710

[State 3710, 1]
type = Gravity
trigger1 = 1

[State 3710, 2]
type = SelfState
trigger1 = pos y >= -30
trigger1 = vel y > 0
value = 5100

;-----------------------------------------------------------------
;自爆
[Statedef 3900]
type    = S
movetype= I
physics = S
velset = 0,0
anim = 3800
ctrl = 0
sprpriority = 2

[state 3910, 13]
type = BGpalfx
trigger1 = time >= 0
mul = 30,20,20
add = 50,40,40
time = 1
persistent = 1

[State 3900, 1]
type = playsnd
trigger1 = Time = 0
value = 14, 2
channel = 0

[State 3900, 2]
type = ChangeState
trigger1 = time = 130
value = 3905

;-----------------------------------------------------------------
;カウントスタート
[Statedef 3905]
type    = S
movetype= I
physics = S
velset = 0,0
ctrl = 0
sprpriority = 2

[State 3905, 1]
type = helper
trigger1 = time = 0
name = "daibakuhatu"
id = 3910
pos = 0,0
postype = p1
sprpriority = 5
stateno = 3910
ownpal = 0
persistent = 0

[state 3905, 3]
type = changestate
trigger1 = Time >= 60
value = 0
ctrl = 1

;----------------------------------------------------------------------------
;自爆装置
[Statedef 3910]
type    = S
movetype= I
physics = N
velset = 0,0
anim = 3940
ctrl = 0

[State 3910, 0]
type = BindToParent
trigger1 = 1
time = 1
pos = 0,0
ignorehitpause = 1

[State 3910, 1]
type = ParentVarSet
trigger1 = time = 0
var(2) = 1

[State 3910, 2]
type = ParentVarSet
trigger1 = time = 600
var(2) = 2

[State 3910, 3]
type = ParentVarSet
trigger1 = time = 635
var(2) = 3

[state 3910, 4]
type = Assertspecial
trigger1 = time = [0,660]
flag = nobardisplay 
flag2 = noFG

[state 3910, 5]
type = Playsnd
trigger1 = time = 655
value = 12,0

[state 3910, 6]
type = Playsnd
trigger1 = time >= 1
value = 14,0
channel = 2
persistent = 60
volume = 255

[state 3910, 7]
type = Playsnd
trigger1 = time >= 1
value = 14,1
channel = 3
volume = 255
persistent = 20

[state 3910, 8]
type = Stopsnd
trigger1 = root,life = 0
trigger2 = roundstate != 2 
channel = 2

[state 3910, 9]
type = Stopsnd
trigger1 = root,life = 0
trigger2 = roundstate != 2 
channel = 3

[State 3910, 10]
type = Explod
trigger1 = time = 0
anim = 3900
id = 3900
pos = 165,220
postype = back
bindtime = -1
removetime = 660
removeongethit = 1
sprpriority = 9998
ownpal = 0
persistent = 0

[State 3910, 11]
type = Explod
trigger1 = time = 570
trigger2 = time = 580
trigger3 = time = 610
trigger4 = time = 614
trigger5 = time = 618
trigger6 = time = 620
anim = 3910
id = 3910
pos = 165,220
postype = back
bindtime = -1
removetime = 18
removeongethit = 1
sprpriority = 9999
ownpal = 0

[State 3900, 12]
type = Explod
trigger1 = time = 560
trigger2 = time = 575
trigger3 = time = 595
trigger4 = time = 600
trigger5 = time = 605
trigger6 = time = 608
trigger7 = time = 612
trigger8 = time = 625
anim = 3920
id = 3920
pos = 165,220
postype = back
bindtime = -1
removetime = 18
removeongethit = 1
sprpriority = 9999
ownpal = 0

[state 3910, 13]
type = BGpalfx
trigger1 = time = [0,644]
mul = 30,20,20
add = 50,40,40
time = 1
persistent = 1

[state 3910, 13]
type = BGpalfx
trigger1 = time = 645
sinadd = 200,200,255,140
invertall = -1
time = 15

[state 3910, 14]
type = Allpalfx
trigger1 = time = 650
sinadd = 200,200,255,140
invertall = -1
time = 70

[state 3910, 15]
type = removeexplod
trigger1 = RoundState != 2
trigger2 = root,life = 0
ID = 3900

[State 3910, 16]
type = pause
trigger1 = time >= 635
time = 2
persistent = 1

[state 3910, 17]
type = changestate
trigger1 = time = 650
value = 3920
ctrl = 0

[state 3910, 18]
type = destroyself
trigger1 = root,life = 0
trigger2 = roundstate != 2

;----------------------------------------------------------------------------
；大爆発
[Statedef 3920]
type    = S
movetype= A
physics = N
velset = 0,0
anim = 3940
ctrl = 0
sprpriority = 2

[State 3920, 0]
type = ParentVarSet
trigger1 = time = 0
var(2) = 4

[state 3920, 1]
type = Assertspecial
trigger1 = time >= 0
flag = nokosnd
flag2 = nomusic

[state 3920, snd1]
type = PlaySnd
trigger1 = Time = [0,40]
value = S12,0
volume = 255
persistent = 10

[state 3920, snd2]
type = PlaySnd
trigger1 = Time = 60
trigger2 = Time = 80
trigger3 = Time = 100
value = S12,0
volume = 255
persistent = 0

[state 3920, snd3]
type = PlaySnd
trigger1 = (Time = [0,100]) && Random <= 500
value = S19,0
volume = 255
persistent = 4

[state 3920, snd4]
type = PlaySnd
trigger1 = (Time = [0,80]) && Random <= 200
value = S11,5
volume = 255
persistent = 4

[State 3920, pause]
type = pause
trigger1 = time = [0,140]
time = 1
movetime = 0
persistent = 2

[state 3920, BG1]
type = BGPalfx
trigger1 = time = 0
time = 160
mul = 220,220,255
add = 200,200,255
sinadd = 200,200,255,260

[State 3920, 1]
type = HitDef
trigger1 = Time = [3,120]
attr = S, HP
animtype  = Hard
damage = 999999
hitflag = MAFD
priority  = 7,hit
pausetime = 1,20
sparkxy = -10,-60
sparkno = -1
hitsound   = S11,5
guardsound = S11,8
ground.type = High
ground.slidetime = 200
ground.hittime  = 200
ground.velocity = -50,-20
guard.velocity = -40
air.velocity = -48,-10
airguard.velocity = -40,-20
palfx.time = 160
palcolor = 60
palfx.mul = 130,120,160
palfx.add = 255,255,255
palfx.sinadd = 140,130,180,60
palfx.invertall = 1
envshake.time = 200
envshake.freq = 500
envshake.ampl = 6
fall = 1
fall.recover = 0
affectteam = B
persistent = 0

[State 3920, target]
type = TargetState
trigger1 = NumTarget
trigger1 = movehit
value = 3950

[State 3920, reset]
type = movehitreset
trigger1 = NumTarget
trigger1 = movehit
trigger1 = Target,Stateno = 3950

[State 3920, 2]
type = Explod
trigger1 = time >= 3 && time < 200
anim = 4100
id = 4100
pos = 0,-20
postype = p2
sprpriority = 9999
bindtime = 1
random = 200,120
removetime = 31
ownpal = 0
persistent = 7

[state 3920, 3]
type = destroyself
trigger1 = time = 9999

;---------------------------------------------------------------------------
;hit
[Statedef 3950]
type    = A
movetype= H
physics = N
velset = 0,0
ctrl = 0

[State 3950, 1]
type = ScreenBound
trigger1 = Life <= 0
value = 0

[State 3950, 2]
type = AssertSpecial
trigger1 = 1
trigger1 = Life <= 0
flag = noshadow

[State 3950, 3]
type = ChangeAnim2
trigger1 = time = 0
value = 3960

[State 3950, 4]
type = velset
trigger1 = AnimElem = 4
x= -20
y= -40

[State 3950, 5]
type = ChangeState
trigger1 = Pos Y <= -400 && time >= 120
trigger1 = Life <= 0
value = 5150

[State 3950, 6]
type = gravity
trigger1 = AnimElem = 7,>= 0
trigger1 = Life > 0

[State 3950, 7]
type = SelfState
trigger1 = AnimElem = 7,>= 0
trigger1 = Life > 0
trigger1 = Pos y >= 0 && Vel y > 0
value = 5100

;---------------------------------------------------------------------------
;ボタンジャンプstart
[Statedef 4000]
type    = S
physics = S
velset = 0,0
ctrl = 0
sprpriority = 1

[State 4000, 1]
type = ChangeAnim
trigger1 = var(3) = 0
trigger1 = time = 0
value = 40

[State 4000, 2]
type = ChangeAnim
trigger1 = var(3) = 1
trigger1 = time = 0
value = 48

[State 4000, AvsP]
type = ChangeAnim
trigger1 = var(3) = 2
trigger1 = time = 0
value = 54

[State 4000, 3]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 4000, High jump?]
type = VarSet
trigger1 = Time = 0
trigger1 = command = "U"
var(1) = 1

[State 4000, 4]
type = VarSet
trigger1 = Time <= 2 && var(59) = 0
trigger1 = sysvar(1) = 0
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 4000, 5]
type = VarSet
trigger1 = Time <= 2 && var(59) = 0
trigger1 = sysvar(1) = 0
trigger1 = command = "holdback"
sysvar(1) = -1

[State 4000, back step?]
type = ChangeState
trigger1 = time <= 2
trigger1 = command = "B"
value = 105

[State 4000, 6]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 4000, 7]
type = veladd
trigger1 = var(1) = 1
trigger1 = sysvar(1) = 0
trigger1 = AnimTime = 0
x= 0
y= -3

[State 4000, 8]
type = veladd
trigger1 = sysvar(1) != 0
trigger1 = AnimTime = 0
x= ifelse(sysvar(1)=1, 2, -2)
y= -3

[State 4000, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;-----------------------------------------------------------------------------
;ボタンジャンプstart(前・後方)
[Statedef 4010]
type    = S
physics = S
velset = 0,0
ctrl = 0
sprpriority = 1

[State 4010, 0]
type = Turn
triggerall = time = 0
trigger1 = command = "holdback"
trigger2 = var(59) = 1 && Random < 250

[State 4010, 1]
type = ChangeAnim
trigger1 = var(3) = 0
trigger1 = time = 0
value = 40

[State 4010, 2]
type = ChangeAnim
trigger1 = var(3) = 1
trigger1 = time = 0
value = 48

[State 4010, AvsP]
type = ChangeAnim
trigger1 = var(3) = 2
trigger1 = time = 0
value = 54

[State 4010, 3]
type = VelSet
trigger1 = AnimTime = 0
x = 15
y = -4*const(size.yscale) ;-5

[State 4010, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 4020
ctrl = 1

;---------------------------------------------------------------------------
;Jump Up
[Statedef 4020]
type    = A
physics = N

[State 4020, 1]
type = PlaySnd
trigger1 = time = 1
value = 11, 2

[State 4020, 2]
type = varset
trigger1 = time = 0
v= 19
value = 1

[State 4020, 3]
type = varset
triggerall = var(20) = 0
triggerall = backedgebodydist < 12
triggerall = pos y < -12
trigger1 = var(58) = 0 && ((command = "holdup" && command = "holdfwd") || command = "holdfwd")
trigger2 = var(58) != 0 && command = "z" && ((command = "holdup" && command = "holdfwd") || command = "holdfwd")
trigger3 = var(59) = 1 && Random < 500
v = 20
value = 1

[State 4020, 4]
type = varset
triggerall = var(20) = 0
triggerall = frontedgebodydist < 12
triggerall = pos y < -12
trigger1 = var(58) = 0 && ((command = "holdup" && command = "holdback") || command = "holdback")
trigger2 = var(58) != 0 && command = "z" && ((command = "holdup" && command = "holdback") || command = "holdback")
trigger3 = var(59) = 1 && Random < 500
v = 20
value = -1

[State 4020, high jump?]
type = varset
triggerall = var(22) = 0
trigger1 = var(58) = 0 && var(20) = 1 && (command = "holdup" && command = "holdfwd")
trigger2 = var(58) = 0 && var(20) = -1 && (command = "holdup" && command = "holdback")
trigger3 = var(58) != 0 && var(20) = 1 && (command = "z" && command = "holdup" && command = "holdfwd")
trigger4 = var(58) != 0 && var(20) = -1 && (command = "z" && command = "holdup" && command = "holdback")
trigger5 = var(59) = 1 && Random > 250
v = 22
value = 1

[State 4020, 5]
type = ChangeAnim
;trigger1 = Anim != 70 || Anim != 71
trigger1 = var(3) = 0
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 4020, 6]
type = ChangeAnim
;trigger1 = Anim != 72 || Anim != 73
trigger1 = var(3) = 1
trigger1 = Time = 0
value = ifelse((vel x)=0, 49, ifelse((vel x)>0, 50, 51))

[State 4020, AvsP]
type = ChangeAnim
trigger1 = var(3) = 2
trigger1 = Time = 0
value = ifelse((vel x)=0, 55, ifelse((vel x)>0, 56, 57))

[State 4020, 7]
type = ChangeState
trigger1 = var(20) = 1
trigger2 = var(20) = -1
value = 53

[State 4020, 8]
type = ChangeState
trigger1 = pos y >= 0
trigger1 = vel y > 0
value = 52
ctrl = 0

;---------------------------------------------------------------------------
; HIT_LIEDEAD
[Statedef 5150]
type    = L
movetype= H
physics = N
sprpriority = ifelse(PrevStateno = 3653 || PrevStateno = 3701, 4, -3)

[State 5150, 0]
type = ScreenBound
trigger1 = PrevStateno = 3950
trigger2 = PrevStateno = 3653 || PrevStateno = 3701
value = 0

[State 5150, 0]
type = PosFreeze
trigger1 = PrevStateno = 3950
value = 1

[State 5150, 0]
type = AssertSpecial
trigger1 = PrevStateno = 3950
flag = noshadow
flag2 = invisible

[State 5150, 1]
type = ChangeAnim2
triggerall = PrevStateno = 3653 || PrevStateno = 3701
trigger1 = Time = 0
value = ifelse(PrevStateno = 3653, 3654, 3702)

[State 5150, 1] ;Normal anim
type = ChangeAnim
triggerall = PrevStateno != 3653
triggerall = PrevStateno != 3701
triggerall = Time = 0
triggerall = SelfAnimExist(5140)
trigger1 = (anim != [5111,5119]) && (anim != [5171,5179])
trigger2 = !SelfAnimExist(5140 + (anim % 10))
value = 5140

[State 5150, 3] ;Hit up type anim
type = ChangeAnim
triggerall = PrevStateno != 3653
triggerall = PrevStateno != 3701
trigger1 = Time = 0
trigger1 = (anim = [5111,5119]) || (anim = [5171,5179])
trigger1 = SelfAnimExist(5140 + (anim % 10))
value = 5140 + (anim % 10)

[State 5150, 4] ;Match over anim
type = ChangeAnim
persistent = 0
triggerall = PrevStateno != 3653
triggerall = PrevStateno != 3701
;trigger1 = Time = 0
trigger1 = MatchOver = 1
trigger1 = Anim = [5140,5149]
trigger1 = SelfAnimExist(anim+10)
value = anim+10

[State 5150, 5] ;Switch to 5110 if liedead anim does not exist
type = ChangeAnim
triggerall = PrevStateno != 3653
triggerall = PrevStateno != 3701
trigger1 = Time = 0
trigger1 = Anim != [5140,5159]
trigger1 = Anim != [5110,5119]
value = 5110

[State 5150, 6] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5150, 7] ;Friction
type = VelSet
trigger1 = Vel x < .05
persistent = 0
x = 0

[State 5150, 8]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
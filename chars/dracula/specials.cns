;---------------------------------------------------------------------------
; 試合開始直前
[Statedef 2010]
type = S
physics = S
anim = 2010
ctrl = 0
sprpriority = 0

[State 191, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 0, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 0, 3] ;Stop moving if low velocity or 4 ticks pass
type = VelSet
trigger1 = abs(vel x) < 2
trigger2 = Time = 4
x = 0

[State -2]
type = HitOverride
attr = SCA ,NA ,SA ,HA ,NP ,SP ,HP
trigger1 = 1
stateno = 5000

[State snd]
type = PlaySnd
trigger1 = time = 45
value = 1800,0

[State snd]
type = PlaySnd
trigger1 = time = 120
value = 1810,1

[State exp, *]
type = Explod
trigger1 = time = 0
anim = 1800
ID = 1800
pos = 0,-250
postype = p1
scale = 0,0
sprpriority = 2
ownpal = 1
Persistent = 6
bindtime = 9999999
ontop = 1

[State exp, *]
type = Explod
trigger1 = time = 31
anim = 1800
ID = 1810
pos = 0,0
postype = p1
scale = 0,0
sprpriority = 2
ownpal = 1
Persistent = 6
bindtime = 9999999
ontop = 1

[State exp, *]
type = Explod
trigger1 = time = 60
anim = 1810
ID = 1820
pos = 0,0
postype = p1
scale = 0,0
sprpriority = 2
ownpal = 1
Persistent = 6
bindtime = 9999999

[State var, *]
type = varset
trigger1 = time = 0
fvar(20) = 0

[State var, *]
type = varadd
trigger1 = time = [0,8]
fvar(20) = 0.0023

[State var, *]
type = varadd
trigger1 = time = [35,60]
fvar(20) = 0.0160

[State var, *]
type = varset
trigger1 = time = 0
fvar(21) = 0

[State var, *]
type = varadd
trigger1 = time = [0,34]
fvar(21) = -0.0118

[State exp, *]
type = modifyexplod
trigger1 = 1
ID = 1800
scale = 0.0+fvar(20),0.1+fvar(21)

[State var, *]
type = varset
trigger1 = time = 0
fvar(22) = 0

[State var, *]
type = varadd
trigger1 = time = [31,72]
fvar(22) = 0.0106

[State var, *]
type = varset
trigger1 = time = 0
fvar(23) = 0

[State var, *]
type = varadd
trigger1 = time = [31,80]
fvar(23) = 0.0138

[State exp, *]
type = modifyexplod
trigger1 = 1
ID = 1810
scale = 0.1+fvar(22),0.1+fvar(23)

[State var, *]
type = varset
trigger1 = time = 0
fvar(24) = 0

[State var, *]
type = varadd
trigger1 = time = [60,91]
fvar(24) = 0.0106

[State var, *]
type = varset
trigger1 = time = 0
fvar(25) = 0

[State var, *]
type = varadd
trigger1 = time = [60,109]
fvar(25) = 0.0138

[State var, *]
type = varadd
trigger1 = time = [130,165]
fvar(24) = -0.0106

[State var, *]
type = varadd
trigger1 = time = [130,160]
fvar(25) = -0.0138

[State exp, *]
type = modifyexplod
trigger1 = 1
ID = 1820
scale = 0.0+fvar(24),0.0+fvar(25)

[State turn, *]
type = turn
trigger1 = P2Dist x < 0

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 1
ctrl = 1

;---------------------------------------------------------------------------
;衝撃波
[Statedef 300]
type = S
movetype = A
physics = S
velset = 0,0
poweradd = 24
ctrl = 0
hitdefpersist	= 0
movehitpersist	= 0
hitcountpersist	= 0

[state 200,changeanim]
type = changeanim
trigger1 = (!time) && (anim != 300)
value = 300

[state 195,1]
type = varrandom
trigger1 = AnimElemtime(1) = 0
v = 9
range = 0,2

[State 3]
type = posset
trigger1 = 1
y = 0

[State var]
type = varset
trigger1 = time = 0
v = 17
value = 0

[state 200,hit]
type = hitoverride
trigger1 = (prevstateno != 8020)
trigger1 = var(50) = 0
time = -1
slot = 0
attr = sca, aa, ap
stateno = 8020

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(5) = 0
value = 300,var(9)
channel = 0

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(6) = 0
helpertype = Normal
ID = 315
name = "syougeki" 
postype = p1
pos = 48,-90
stateno = 315
size.xscale = 2
size.yscale = 2
ownpal = 1

[State 200, 7]
type = ChangeState
trigger1 = AnimElemtime(6) >= 10
trigger1 = AnimElemtime(7) <= 3
trigger1 = command = "syougeki2"
trigger2 = var(34) = 0
trigger2 = var(54) = 30
trigger2 = AnimElemtime(6) >= 10
trigger2 = AnimElemtime(7) <= 3
trigger2 = p2dist y >= -75
value = 320

[State 1000]
type = ChangeState
trigger1 = life = 0
value = 5150

[State 1000]
type = ChangeState
triggerall = var(32) = 0
trigger1 = var(21) = 0
trigger1 = Life <= lifemax / 2
trigger2 = var(21) = 1
trigger2 = Life = lifemax
value = 2500

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------
;衝撃波(当たり判定)
[Statedef 315]
type    = A
movetype= A
physics = N
juggle  = 2
anim = 316
ctrl = 0
sprpriority = 2

[State snd]
type = PlaySnd
trigger1 = time = 0
value = 305,0

[State snd]
type = PlaySnd
trigger1 = time = 0
value = 5150,1

[State ensha]
type = envshake
trigger1 = time = 0
time = 6
freq = 20

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
attr = S, NA
damage = 42, 4
animtype = back
guardflag = MA
hitflag = MAF
fall = 1
air.fall = 1
priority = 3
pausetime = 0, 18
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = s305,1
guardsound = s1010,0
ground.type = low
ground.slidetime = 15
ground.hittime  = 44
ground.velocity = 0,-6
airguard.velocity = -1.6,-.2
air.type = High
air.velocity = 0,-6
air.hittime = 50
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recovertime = 44
getpower = 30,0
palfx.time = 20
palfx.sinadd = 10,30,80,5
palfx.add = 120,120,220
guard.kill = 0

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = time = 0
anim = 315
id = 315
postype = p1
scale = 0,0
removetime = -2
ownpal = 1
pos = 0,0
sprpriority = 10
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = time = 1
trigger2 = time = 5
trigger3 = time = 9
trigger4 = time = 13
anim = 317
id = 317
postype = p1
scale = 2,2
random = 25,25
removetime = -2
ownpal = 1
pos = 0,0
sprpriority = 10
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = time = 0
trigger2 = time = 4
trigger3 = time = 8
trigger4 = time = 12
anim = 318
id = 318
postype = p1
scale = 2,2
random = 25,25
removetime = -2
ownpal = 1
pos = 2,2
sprpriority = 10
pausemovetime = 9999999
supermovetime = 9999999

[State var, *]
type = varset
trigger1 = time = 0
fvar(20) = 0

[State var, *]
type = varadd
trigger1 = time = [0,40]
fvar(20) = 0.1520

[State exp, *]
type = modifyexplod
trigger1 = 1
ID = 315
scale = 0.0+fvar(20),0.0+fvar(20)

[State 7001, 3]
type = DestroySelf
trigger1 = time = 25

;---------------------------------------------------------------------------
[Statedef 8020];攻撃を受けた場合に飛ばされるステート
type = U
movetype = H
physics = U
ctrl = 0
hitdefpersist	= 0
movehitpersist	= 0
hitcountpersist	= 0

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[State 1000]
type = ChangeState
triggerall = var(32) = 0
trigger1 = var(21) = 0
trigger1 = Life <= lifemax / 2
trigger2 = var(21) = 1
trigger2 = Life = lifemax
value = 2500

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(5) = 0
value = 300,var(9)
channel = 0

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(6) = 0
helpertype = Normal
ID = 315
name = "syougeki" 
postype = p1
pos = 48,-90
stateno = 315
size.xscale = 2
size.yscale = 2
ownpal = 1

[State 200, 7]
type = ChangeState
trigger1 = AnimElemtime(6) >= 10
trigger1 = AnimElemtime(7) <= 3
trigger1 = command = "syougeki2"
trigger2 = var(34) = 0
trigger2 = var(54) = 30
trigger2 = AnimElemtime(6) >= 10
trigger2 = AnimElemtime(7) <= 3
trigger2 = p2dist y >= -75
value = 320

[State 2000, 1]
type = ChangeState
trigger1 = Time >= 1
value = 300

[State 3]
type = posset
trigger1 = 1
y = 0

[State 2000, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;衝撃波(追加攻撃)
[Statedef 320]
type = S
movetype = A
physics = S
velset = 0,0
poweradd = 17
ctrl = 0
hitdefpersist	= 0
movehitpersist	= 0
hitcountpersist	= 0

[state 200,changeanim]
type = changeanim
trigger1 = (!time) && (anim != 310)
value = 310

[state 195,1]
type = varrandom
trigger1 = AnimElemtime(1) = 0
v = 9
range = 0,1

[State 3]
type = posset
trigger1 = 1
y = 0

[State var]
type = varset
trigger1 = time = 0
v = 17
value = 0

[state 200,hit]
type = hitoverride
trigger1 = (prevstateno != 8021)
trigger1 = var(50) = 0
time = -1
slot = 0
attr = sca, aa, ap
stateno = 8021

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(5) = 0
value = 310,var(9)
channel = 0

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(10) = 0
helpertype = Normal
ID = 325
name = "syougeki2"
postype = p1
pos = 48,-80
stateno = 325
size.xscale = 2
size.yscale = 2
ownpal = 1

[State 1000]
type = ChangeState
trigger1 = life = 0
value = 5150

[State 1000]
type = ChangeState
triggerall = var(32) = 0
trigger1 = var(21) = 0
trigger1 = Life <= lifemax / 2
trigger2 = var(21) = 1
trigger2 = Life = lifemax
value = 2500

[State 200, 7]
type = ChangeState
triggerall = var(43) != 0
trigger1 = AnimElemtime(11) >= 0
trigger1 = AnimElemtime(12) <= 1
trigger1 = command = "syougeki3"
trigger2 = var(34) = 0
trigger2 = var(54) = 30
trigger2 = AnimElemtime(11) >= 0
trigger2 = AnimElemtime(12) <= 1
value = 330

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------
;衝撃波(当たり判定爆発系)
[Statedef 325]
type    = A
movetype= A
physics = N
juggle  = 2
anim = 320
ctrl = 0
sprpriority = 5

[State snd]
type = PlaySnd
trigger1 = time = 0
value = 3250,0

[State snd]
type = PlaySnd
trigger1 = time = 0
value = 5150,1

[State ensha]
type = envshake
trigger1 = time = 0
time = 8
freq = 24

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
attr = S, NA
damage = 56, 8
animtype = back
guardflag = MA
hitflag = MAF
fall = 1
air.fall = 1
priority = 3
pausetime = 0,14
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = s305,2
guardsound = s1010,0
ground.type = low
ground.slidetime = 8
ground.hittime  = 30
ground.velocity = -9,-2
airguard.velocity = -1.2,-.3
air.type = High
air.velocity = -9,-2
air.hittime = 30
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = 0
getpower = 21,0
palfx.time = 16
palfx.sinadd = 0,20,80,6
palfx.add = -20,-20,220
guard.kill = 0

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = time = 1
trigger2 = time = 5
trigger3 = time = 9
trigger4 = time = 13
anim = 321
id = 321
postype = p1
scale = 2.0,2.0
accel = 0,-.17
random = 50,60
removetime = -2
ownpal = 1
pos = 0,0
sprpriority = 4
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = time = 0
trigger2 = time = 4
trigger3 = time = 8
trigger4 = time = 12
anim = 321
id = 321
postype = p1
scale = 1.5,1.5
accel = 0,-.17
random = 50,60
removetime = -2
ownpal = 1
pos = 2,2
sprpriority = 4
pausemovetime = 9999999
supermovetime = 9999999

[State 7001, 3]
type = DestroySelf
trigger1 = time = 40

;---------------------------------------------------------------------------
[Statedef 8021];攻撃を受けた場合に飛ばされるステート
type = U
movetype = H
physics = U
ctrl = 0
hitdefpersist	= 0
movehitpersist	= 0
hitcountpersist	= 0

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[State 1000]
type = ChangeState
triggerall = var(32) = 0
trigger1 = var(21) = 0
trigger1 = Life <= lifemax / 2
trigger2 = var(21) = 1
trigger2 = Life = lifemax
value = 2500

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(5) = 0
value = 310,var(9)
channel = 0

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(10) = 0
helpertype = Normal
ID = 325
name = "syougeki2"
postype = p1
pos = 48,-80
stateno = 325
size.xscale = 2
size.yscale = 2
ownpal = 1

[State 200, 7]
type = ChangeState
triggerall = var(43) != 0
trigger1 = AnimElemtime(11) >= 0
trigger1 = AnimElemtime(12) <= 1
trigger1 = command = "syougeki3"
trigger2 = var(34) = 0
trigger2 = var(54) = 30
trigger2 = AnimElemtime(11) >= 0
trigger2 = AnimElemtime(12) <= 1
value = 330

[State 2000, 1]
type = ChangeState
trigger1 = Time >= 1
value = 320

[State 3]
type = posset
trigger1 = 1
y = 0

[State 2000, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;フレイムピラー(追加攻撃)
[Statedef 330]
type = S
movetype = A
physics = S
velset = 0,0
poweradd = 25
ctrl = 0
hitdefpersist	= 0
movehitpersist	= 0
hitcountpersist	= 0

[state 200,changeanim]
type = changeanim
trigger1 = (!time) && (anim != 330)
value = 330

[State 3]
type = posset
trigger1 = 1
y = 0

[State var]
type = varset
trigger1 = time = 0
v = 17
value = 0

[state 200,hit]
type = hitoverride
trigger1 = (prevstateno != 8025)
trigger1 = var(50) = 0
time = -1
slot = 0
attr = sca, aa, ap
stateno = 8025

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(11) = 0
value = 330,0
channel = 0

[State 1100, 1]
type = Helper
trigger1 = FrontEdgeDist > 120
trigger1 = p2movetype = H
trigger1 = p2statetype != L
trigger1 = AnimElemtime(11) = 0
helpertype = Normal
ID = 335
name = "syougeki3"
postype = p2
pos = -35,0
stateno = 335
size.xscale = 1.5
size.yscale = 1.3
ownpal = 1

[State 1100, 1]
type = Helper
triggerall = AnimElemtime(11) = 0
trigger1 = p2movetype != H
trigger2 = p2statetype = L
trigger3 = FrontEdgeDist <= 120
helpertype = Normal
ID = 335
name = "syougeki3"
postype = p2
pos = 0,0
stateno = 335
size.xscale = 1.5
size.yscale = 1.3
ownpal = 1

[State 1000]
type = ChangeState
trigger1 = life = 0
value = 5150

[State 1000]
type = ChangeState
triggerall = var(32) = 0
trigger1 = var(21) = 0
trigger1 = Life <= lifemax / 2
trigger2 = var(21) = 1
trigger2 = Life = lifemax
value = 2500

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------
;フレイムピラー(当たり判定)
[Statedef 335]
type    = A
movetype= A
physics = N
juggle  = 2
anim = 335
ctrl = 0
sprpriority = 10

[State 3]
type = posset
trigger1 = 1
y = 0

[State snd]
type = PlaySnd
trigger1 = time = 0
value = 5150,1

[State snd]
type = PlaySnd
trigger1 = time = 4
value = 335,0

[State afimage]
type = AfterImage
trigger1 = time = 0
time = -1
trans = add
length   = 40
timegap  = 1
framegap = 3
PalBright = 120 , 120 , 120
PalContrast = 80 , 80 , 80
PalAdd = 0 , 0 , 0
;PalMul = 1.1 , 1.0 , 1.2
IgnoreHitPause = 1
Persistent = 1

[State Var]
type = Varset
trigger1 = time = 0
ignorehitpause = 1
fvar(19) = 0

[State Var]
type = Varadd
trigger1 = time >= 7
ignorehitpause = 1
fvar(19) = 0.017

[State Angle]
type = AngleDraw
trigger1 = time >= 7
scale = 1.0,1.0+fvar(19)

[State trans]
type = Trans
trigger1 = 1
trans = add

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
attr = S, NP
damage = 33, 3
animtype = up
guardflag = MA
hitflag = MAFD
fall = 1
air.fall = 1
priority = 3
pausetime = 0,16
sparkno = S1500
guard.sparkno = S1500
sparkxy = -10,-57
hitsound = s305,2
guardsound = s1010,0
ground.type = low
ground.slidetime = 6
ground.hittime  = 43
ground.velocity = 1.6,-7.2
airguard.velocity = 0.8,-.7
air.type = High
air.velocity = 1.6,-7.2
air.hittime = 43
down.velocity = 4, -.7
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recovertime = 43
getpower = 33,0
palfx.time = 32
palfx.sinadd = 40,20,100,6
palfx.add = 70,-20,220
guard.kill = 0

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200 ,exp]
type = Explod
trigger1 = time%4 = 0
trigger1 = MoveHit
anim = 321
id = 321
postype = p2
scale = 1.0,1.0
accel = 0,-.1
random = 60,80
bindtime = 6
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200 ,exp]
type = Explod
trigger1 = time%2 = 0
trigger1 = MoveHit
anim = 321
id = 321
postype = p2
scale = 0.7,0.7
accel = 0,-.1
random = 60,80
bindtime = 5
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 7001, 3]
type = DestroySelf
trigger1 = time = 32

;---------------------------------------------------------------------------
[Statedef 8025];攻撃を受けた場合に飛ばされるステート
type = U
movetype = H
physics = U
ctrl = 0
hitdefpersist	= 0
movehitpersist	= 0
hitcountpersist	= 0

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[State 1000]
type = ChangeState
triggerall = var(32) = 0
trigger1 = var(21) = 0
trigger1 = Life <= lifemax / 2
trigger2 = var(21) = 1
trigger2 = Life = lifemax
value = 2500

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(5) = 0
value = 330,0
channel = 0

[State 1100, 1]
type = Helper
trigger1 = FrontEdgeDist > 120
trigger1 = p2movetype = H
trigger1 = p2statetype != L
trigger1 = AnimElemtime(11) = 0
helpertype = Normal
ID = 335
name = "syougeki3"
postype = p2
pos = -35,0
stateno = 335
size.xscale = 1.5
size.yscale = 1.3
ownpal = 1

[State 1100, 1]
type = Helper
triggerall = AnimElemtime(11) = 0
trigger1 = p2movetype != H
trigger2 = p2statetype = L
trigger3 = FrontEdgeDist <= 120
helpertype = Normal
ID = 335
name = "syougeki3"
postype = p2
pos = 0,0
stateno = 335
size.xscale = 1.5
size.yscale = 1.3
ownpal = 1

[State 2000, 1]
type = ChangeState
trigger1 = Time >= 1
value = 330

[State 3]
type = posset
trigger1 = 1
y = 0

[State 2000, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;フェイタルレイ
[Statedef 500]
type = S
movetype = I
physics = S
velset = 0,0
poweradd = 30
ctrl = 0
hitdefpersist	= 0
movehitpersist	= 0
hitcountpersist	= 0

[state 200,hit]
type = hitoverride
trigger1 = (prevstateno != 8022)
trigger1 = var(50) = 0
time = -1
slot = 0
attr = sca, aa, ap
stateno = 8022

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[state 200,changeanim]
type = changeanim
trigger1 = (!time) && (anim != 502)
value = 502

[state 500,power]
type = poweradd
trigger1 = AnimElemtime(1) = 0
value = -200

[State 3]
type = posset
trigger1 = 1
y = 0

[State var]
type = varset
trigger1 = time = 0
v = 17
value = 0

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(6) = 0
value = 500,0

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(6) = 0
value = 510,0

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(5) = 0
value = 520,0

[State exp, *]
type = Explod
trigger1 = AnimElemtime(6) = 0
anim = 520 ;510
ID = 520 ;510
pos = 34,-117
postype = p1
scale = 0.75,0.6 ;1.5,1.5
sprpriority = 5
ownpal = 1
Persistent = 6
removetime = -2
ontop = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(6) = 0
helpertype = Normal
ID = 505
name = "dummyflei"
postype = p1
pos = 34,0
stateno = 505
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1000]
type = ChangeState
trigger1 = life = 0
value = 5150

[State 1000]
type = ChangeState
triggerall = var(32) = 0
trigger1 = var(21) = 0
trigger1 = Life <= lifemax / 2
trigger2 = var(21) = 1
trigger2 = Life = lifemax
value = 2500

[State 2000, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;フェイタルレイ(ダミー)
[Statedef 505]
type = S
movetype = I
physics = S
velset = 0,0
anim = 560
ctrl = 0
sprpriority = 5

[State snd]
type = PlaySnd
trigger1 = time = 43 ;28
trigger2 = time = 48 ;33
trigger3 = time = 53 ;38
value = 510,1
channel = 1

[State snd]
type = PlaySnd
triggerall = root,var(43) != 0
trigger1 = time = 58
trigger2 = time = 63
trigger3 = time = 68
trigger4 = time = 73
value = 510,1
channel = 1

[State 1000, hel];真ん中
type = Helper
trigger1 = time = 43 ;28
trigger2 = root,var(43) != 0
trigger2 = time = 63
helpertype = Normal
ID = 510
name = "fl1"
postype = p1
pos = 0,-300
stateno = 510
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 505, hel];右から２番目
type = Helper
trigger1 = time = 48 ;33
trigger2 = root,var(43) != 0
trigger2 = time = 58
trigger3 = root,var(43) != 0
trigger3 = time = 68
helpertype = Normal
ID = 511
name = "fl2"
postype = p1
pos = 65,-300
stateno = 510
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 505, hel];左から２番目
type = Helper
trigger1 = time = 48 ;33
trigger2 = root,var(43) != 0
trigger2 = time = 58
trigger3 = root,var(43) != 0
trigger3 = time = 68
helpertype = Normal
ID = 512
name = "fl3"
postype = p1
pos = -65,-300
stateno = 510
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 505, hel];一番右
type = Helper
trigger1 = time = 53 ;38
trigger2 = root,var(43) != 0
trigger2 = time = 73
helpertype = Normal
ID = 513
name = "fl4"
postype = p1
pos = 130,-300
stateno = 510
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 505, hel];一番左
type = Helper
trigger1 = time = 53 ;38
trigger2 = root,var(43) != 0
trigger2 = time = 73
helpertype = Normal
ID = 514
name = "fl5"
postype = p1
pos = -130,-300
stateno = 510
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 7001, 3]
type = DestroySelf
trigger1 = root,var(43) = 0
trigger1 = time = 60
trigger2 = root,var(43) != 0
trigger2 = time = 80

;---------------------------------------------------------------
;フェイタルレイ(落下中)
[Statedef 510]
type    = A
movetype= A
physics = N
juggle  = 6
anim = 3305
ctrl = 0
sprpriority = 5

[State afimage]
type = AfterImage
trigger1 = time = 0
time = -1
trans = add
length   = 30
timegap  = 1
framegap = 1
PalBright = 30 , 80 , 30
PalContrast = 50 , 130 , 50
PalAdd = 0 , 0 , 0
;PalMul = 1.0 , 1.2 , 1.0
IgnoreHitPause = 1
Persistent = 1

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SP
damage = 95, 8
animtype = back
guardflag = MA
hitflag = HAFD
fall = 1
air.fall = 1
priority = 3
pausetime = 0, 8
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = s1000,0
guardsound = s1010,0
ground.type = low
ground.slidetime = 10
ground.hittime  = 22
ground.velocity = -3.3,-2
airguard.velocity = -0.8,-0.3
air.type = High
air.velocity = -3.3,-2
air.hittime = 22
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 65,0
palfx.time = 20
palfx.sinadd = -20,80,50,8
palfx.add = -30,120,60
guard.kill = 0

[State 7004]
type = Velset
trigger1 = time = 0
y = 13.5

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 1100, 1]
type = Helper
trigger1 = pos y >= 0 && vel y > 0
helpertype = Normal
ID = 515
name = "tiru1"
postype = p1
pos = 0,0
stateno = 512
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = pos y >= 0 && vel y > 0
helpertype = Normal
ID = 516
name = "tiru2" 
postype = p1
pos = 0,0
stateno = 512
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = pos y >= 0 && vel y > 0
helpertype = Normal
ID = 517
name = "tiru3" 
postype = p1
pos = 0,0
stateno = 512
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = pos y >= 0 && vel y > 0
helpertype = Normal
ID = 518
name = "tiru4" 
postype = p1
pos = 0,0
stateno = 512
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 200, 7]
type = ChangeState
trigger1 = pos y >= 0 && vel y > 0
value = 511

;---------------------------------------------------------------
;フェイタルレイ(落下)
[Statedef 511]
type    = S
movetype= A
physics = N
juggle  = 6
velset = 0,0
anim = 3310
ctrl = 0
sprpriority = 2

[State posset]
type = posset
trigger1 = 1
y = 0

[State snd]
type = PlaySnd
trigger1 = time = 0
value = 510,3
channel = 1

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SP
damage = 13,2
animtype = back
guardflag = MA
hitflag = HAFD
fall = 1
air.fall = 1
priority = 3
pausetime = 0, 8
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = s1000,0
guardsound = s1010,0
ground.type = low
ground.slidetime = 10
ground.hittime  = 22
ground.velocity = -3.3,-2
airguard.velocity = -0.5,-0.4
air.type = High
air.velocity = -3.3,-2
air.hittime = 22
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 34,0
palfx.time = 20
palfx.sinadd = -20,80,50,8
palfx.add = -30,120,60
guard.kill = 0

[State 7004]
type = Velset
trigger1 = time = 0
y = 0

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 7001, 3]
type = DestroySelf
trigger1 = Animtime = 0

;---------------------------------------------------------------------------
;フェイタルレイ(散る)
[Statedef 512]
type = A
movetype = I
physics = N
velset = 0,-1
anim = 554
ctrl = 0
sprpriority = 1

[state 7800,1]
type = veladd
trigger1 = time = [1,30]
y = 0.09

[state 7800,1]
type = varrandom
trigger1 = time = 0
v = 19
range = -1,1

[State 7011,2]
type = Veladd
trigger1 = time = 0
x = 0 + var(19)
y = -1.8

[State 200, 1]
type = DestroySelf
trigger1 = pos y >= 0 && vel y > 0
trigger2 = Animtime = 0

;---------------------------------------------------------------------------
[Statedef 8022];攻撃を受けた場合に飛ばされるステート
type = U
movetype = H
physics = U
ctrl = 0
hitdefpersist	= 0
movehitpersist	= 0
hitcountpersist	= 0

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[State 1000]
type = ChangeState
triggerall = var(32) = 0
trigger1 = var(21) = 0
trigger1 = Life <= lifemax / 2
trigger2 = var(21) = 1
trigger2 = Life = lifemax
value = 2500

[state 500,power]
type = poweradd
trigger1 = AnimElemtime(1) = 0
value = -200

[State 3]
type = posset
trigger1 = 1
y = 0

[State var]
type = varset
trigger1 = time = 0
v = 17
value = 0

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(6) = 0
value = 500,0

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(6) = 0
value = 510,0

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(5) = 0
value = 520,0

[State exp, *]
type = Explod
trigger1 = AnimElemtime(6) = 0
anim = 520 ;510
ID = 520 ;510
pos = 34,-117
postype = p1
scale = 0.75,0.6 ;1.5,1.5
sprpriority = 5
ownpal = 1
Persistent = 6
removetime = -2
ontop = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(6) = 0
helpertype = Normal
ID = 505
name = "dummylei"
postype = p1
pos = 0,0
stateno = 505
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 2000, 1]
type = ChangeState
trigger1 = Time >= 1
value = 500

[State 2000, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;デストラクションレイ
[Statedef 530]
type = S
movetype = I
physics = S
velset = 0,0
poweradd = 15
ctrl = 0
hitdefpersist	= 0
movehitpersist	= 0
hitcountpersist	= 0

[state 200,hit]
type = hitoverride
trigger1 = (prevstateno != 8023)
trigger1 = var(50) = 0
time = -1
slot = 0
attr = sca, aa, ap
stateno = 8023

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[state 200,changeanim]
type = changeanim
trigger1 = var(43) = 0
trigger1 = (!time) && (anim != 502)
value = 502

[state 200,changeanim]
type = changeanim
trigger1 = var(43) != 0
trigger1 = (!time) && (anim != 502)
value = 502

[state 530,power]
type = poweradd
trigger1 = AnimElemtime(1) = 0
value = -300

[State 3]
type = posset
trigger1 = 1
y = 0

[State var]
type = varset
trigger1 = time = 0
v = 17
value = 0

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(6) = 0
value = 530,0

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(6) = 0
value = 510,0

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(5) = 0
value = 520,0

[State exp, *]
type = Explod
trigger1 = AnimElemtime(6) = 0
anim = 570 ;550
ID = 570 ;550
pos = 34,-117
postype = p1
scale = 0.75,0.6 ;1.5,1.5
sprpriority = 5
ownpal = 1
Persistent = 6
removetime = -2
ontop = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(6) = 15 ;10
helpertype = Normal
ID = 535
name = "dummydlei"
postype = p1
pos = 0,0
stateno = 535
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1000]
type = ChangeState
trigger1 = life = 0
value = 5150

[State 1000]
type = ChangeState
triggerall = var(32) = 0
trigger1 = var(21) = 0
trigger1 = Life <= lifemax / 2
trigger2 = var(21) = 1
trigger2 = Life = lifemax
value = 2500

[State 2000, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;デストラクションレイ(ダミー)
[Statedef 535]
type = S
movetype = I
physics = S
velset = 0,0
anim = 560
ctrl = 0
sprpriority = 5

[State snd]
type = PlaySnd
trigger1 = root,var(43) = 0
trigger1 = time >= 35
trigger1 = time%35 = 0
trigger2 = root,var(43) != 0
trigger2 = time >= 35
trigger2 = time%22 = 0
value = 510,1
channel = 1

[State 535, hel]
type = Helper
trigger1 = root,var(43) = 0
trigger1 = time >= 35
trigger1 = time%35 = 0
trigger2 = root,var(43) != 0
trigger2 = time >= 35
trigger2 = time%22 = 0
helpertype = Normal
ID = 540
name = "dl"
postype = p2
pos = 0,-240
stateno = 540
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 7001, 3]
type = DestroySelf
trigger1 = root,var(43) = 0
trigger1 = time = 180
trigger2 = root,var(43) != 0
trigger2 = time = 250
trigger3 = win
trigger4 = lose

;---------------------------------------------------------------
;デストラクションレイ(落下中)
[Statedef 540]
type    = A
movetype= A
physics = N
juggle  = 6
anim = 551
ctrl = 0
sprpriority = 5

[State afimage]
type = AfterImage
trigger1 = time = 0
time = -1
trans = add
length   = 30
timegap  = 1
framegap = 1
PalBright = 70 , 30 , 80
PalContrast = 120 , 50 , 130
PalAdd = 0 , 0 , 0
;PalMul = 1.1 , 1.0 , 1.2
IgnoreHitPause = 1
Persistent = 1

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SP
damage = ceil(ifelse(P2MoveType = H,18,45)),3
animtype = back
guardflag = MA
hitflag = HAFD
fall = 1
air.fall = 1
priority = 3
pausetime = 0, 8
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = s1000,0
guardsound = s1010,0
ground.type = low
ground.slidetime = 3
ground.hittime  = 30
ground.velocity = -3.8,1.8
airguard.velocity = -1.1,1.0
air.type = High
air.velocity = -3.8,1.8
air.hittime = 30
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recover = 0
getpower = 65,0
palfx.time = 20
palfx.sinadd = -50,80,20,8
palfx.add = 50,-30,120
guard.kill = 0

[State 7004]
type = Velset
trigger1 = root,var(43) = 0
trigger1 = time = 0
y = 10.7

[State 7004]
type = Velset
trigger1 = root,var(43) != 0
trigger1 = time = 0
y = 16.5

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 1100, 1]
type = Helper
trigger1 = pos y >= 0 && vel y > 0
helpertype = Normal
ID = 541
name = "tiru1"
postype = p1
pos = 0,0
stateno = 542
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = pos y >= 0 && vel y > 0
helpertype = Normal
ID = 542
name = "tiru2" 
postype = p1
pos = 0,0
stateno = 542
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = pos y >= 0 && vel y > 0
helpertype = Normal
ID = 543
name = "tiru3" 
postype = p1
pos = 0,0
stateno = 542
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = pos y >= 0 && vel y > 0
helpertype = Normal
ID = 544
name = "tiru4" 
postype = p1
pos = 0,0
stateno = 542
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 200, 7]
type = ChangeState
trigger1 = pos y >= 0 && vel y > 0
value = 541

;---------------------------------------------------------------
;デストラクションレイ(落下)
[Statedef 541]
type    = S
movetype= A
physics = N
juggle  = 6
velset = 0,0
anim = 552
ctrl = 0
sprpriority = 2

[State posset]
type = posset
trigger1 = 1
y = 0

[State snd]
type = PlaySnd
trigger1 = time = 0
value = 510,3
;channel = 1

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SP
damage = ceil(ifelse(P2MoveType = H,5,10)),1
animtype = back
guardflag = MA
hitflag = HAFD
fall = 1
air.fall = 1
priority = 3
pausetime = 0, 8
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = s1000,0
guardsound = s1010,0
ground.type = low
ground.slidetime = 3
ground.hittime  = 30
ground.velocity = -5.8,1.5
airguard.velocity = -1.1,0.2
air.type = High
air.velocity = -5.8,1.5
air.hittime = 30
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 34,0
palfx.time = 20
palfx.sinadd = -50,80,20,8
palfx.add = 50,-30,120
guard.kill = 0

[State 7004]
type = Velset
trigger1 = time = 0
y = 0

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 7001, 3]
type = DestroySelf
trigger1 = Animtime = 0

;---------------------------------------------------------------------------
;デストラクションレイ(散る)
[Statedef 542]
type = A
movetype = I
physics = N
velset = 0,-1
anim = 553
ctrl = 0
sprpriority = 1

[state 7800,1]
type = veladd
trigger1 = time = [1,30]
y = 0.09

[state 7800,1]
type = varrandom
trigger1 = time = 0
v = 19
range = -1,1

[State 7011,2]
type = Veladd
trigger1 = time = 0
x = 0 + var(19)
y = -1.8

[State 200, 1]
type = DestroySelf
trigger1 = pos y >= 0 && vel y > 0
trigger2 = Animtime = 0

;---------------------------------------------------------------------------
[Statedef 8023];攻撃を受けた場合に飛ばされるステート
type = U
movetype = H
physics = U
ctrl = 0
hitdefpersist	= 0
movehitpersist	= 0
hitcountpersist	= 0

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[State 1000]
type = ChangeState
triggerall = var(32) = 0
trigger1 = var(21) = 0
trigger1 = Life <= lifemax / 2
trigger2 = var(21) = 1
trigger2 = Life = lifemax
value = 2500

[state 530,power]
type = poweradd
trigger1 = AnimElemtime(1) = 0
value = -300

[State 3]
type = posset
trigger1 = 1
y = 0

[State var]
type = varset
trigger1 = time = 0
v = 17
value = 0

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(6) = 0
value = 530,0

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(6) = 0
value = 510,0

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(5) = 0
value = 520,0

[State exp, *]
type = Explod
trigger1 = AnimElemtime(6) = 0
anim = 570 ;550
ID = 570 ;550
pos = 34,-117
postype = p1
scale = 0.75,0.6 ;1.5,1.5
sprpriority = 5
ownpal = 1
Persistent = 6
removetime = -2
ontop = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(6) = 15 ;10
helpertype = Normal
ID = 535
name = "dummydlei"
postype = p1
pos = 0,0
stateno = 535
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 2000, 1]
type = ChangeState
trigger1 = Time >= 1
value = 530

[State 2000, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------
;バットムーヴ
[Statedef 600]
type = S
movetype = I
physics = N
velset = 0,0
ctrl = 0
poweradd = 20

[state 200,changeanim]
type = changeanim
trigger1 = (!time) && (anim != 600)
value = 600

[state 1300,power]
type = poweradd
trigger1 = AnimElemtime(1) = 0
value = -500

[State 3]
type = posset
trigger1 = 1
y = 0

[State var]
type = varset
trigger1 = time = 0
v = 17
value = 0

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(13) = 0
value = 600,0

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(1) = 0
value = 4000,0

[State 200]
type = Explod
trigger1 = AnimElemtime(1) = 0
anim = 4300
id = 4300
postype = p1
scale = 2,2
removetime = 22
ownpal = 1
ontop = 1
pos = 0,-70
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = AnimElemtime(1) = 0
anim = 4310
id = 4310
postype = p1
scale = 1.5,1.5
removetime = -2
ownpal = 1
ontop = 1
pos = 0,-70
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(1) = 1
value = 605,0
volume = -100

[State 1,ex]
type = Explod
trigger1 = time = [1,39]
trigger1 = time%7 = 0
anim = 605
id = 605
postype = p1
scale = 2,2
vel = 0.5,-1.9
facing = -1
removetime = -2
ownpal = 1
ontop = 1
pos = 5,-75
random = 30,60
sprpriority = 10

[State 1,ex]
type = Explod
trigger1 = time = [1,37]
trigger1 = time%4 = 0
anim = 606
id = 606
postype = p1
scale = 2,2
vel = -0.3,-2.1
facing = 1
removetime = -2
ownpal = 1
ontop = 1
pos = -6,-75
random = 36,70
sprpriority = 10

[State 1,ex]
type = Explod
trigger1 = time = [1,35]
trigger1 = time%8 = 0
anim = 607
id = 607
postype = p1
scale = 1.5,1.5
vel = 0.3,-2.3
facing = 1
removetime = -2
ownpal = 1
ontop = 1
pos = 8,-55
random = 26,50
sprpriority = 10

[State 1,ex]
type = Explod
trigger1 = time = [1,32]
trigger1 = time%5 = 0
anim = 605
id = 605
postype = p1
scale = 2,2
vel = -0.5,-2.4
facing = 1
removetime = -2
ownpal = 1
ontop = 1
pos = -4,-20
random = 27,38
sprpriority = 10

[State 1,ex]
type = Explod
trigger1 = time = [1,34]
trigger1 = time%6 = 0
anim = 606
id = 606
postype = p1
scale = 2,2
vel = 0.4,-1.9
facing = -1
removetime = -2
ownpal = 1
ontop = 1
pos = 4,-32
random = 34,45
sprpriority = 10

[state 195,1]
type = varrandom
trigger1 = var(43) = 0
trigger1 = 1
v = 28
range = 10,-10

[state 195,1]
type = varrandom
trigger1 = 1
v = 29
range = 0,-110

[state 195,1]
type = varrandom
trigger1 = var(43) != 0
trigger1 = 1
v = 28
range = 30,-30

[State 1100, 1]
type = Helper
trigger1 = var(43) = 0
trigger1 = time = [10,46]
trigger1 = time%2 = 0
trigger2 = var(43) != 0
trigger2 = time = [10,52]
trigger2 = time%1 = 0
helpertype = Normal
ID = 610
name = "bat"
postype = p1
pos = 0+var(28),-7+var(29)
stateno = 610
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State velset]
type = velset
trigger1 = var(43) = 0
trigger1 = AnimElemtime(13) = 48
x = 16

[State velset]
type = velset
trigger1 = var(43) != 0
trigger1 = AnimElemtime(13) = 48
x = 12

[State velset]
type = velset
trigger1 = AnimElemtime(13) = 60
x = 0

[State turn]
type = turn
trigger1 = roundstate = 2
trigger1 = P2Dist x <= 0
trigger1 = AnimElemtime(13) >= 59

[State pal]
type = PalFX
trigger1 = AnimElemtime(1) = 1
palcolor = 1
add = 0,0,0
sinadd = -256,-256,-256,400
time = 150

[State 200, 7]
type = ChangeState
trigger1 = var(43) = 0
trigger1 = AnimElemtime(13) = 76
trigger2 = var(43) != 0
trigger2 = AnimElemtime(13) = 96
value = 601
ctrl = 1

;---------------------------------------------------------------
;バットムーヴ(攻撃判定ヘルパー)
[Statedef 610]
type = A
movetype = A
physics = N
Anim = 610
sprpriority = 2

[state 195,1]
type = varrandom
trigger1 = root,var(43) = 0
trigger1 = time = 0
v = 24
range = 40,-40

[state 195,1]
type = varrandom
trigger1 = root,var(43) != 0
trigger1 = time = 0
v = 24
range = 100,-100

[state 195,1]
type = varrandom
trigger1 = root,var(43) = 0
trigger1 = time = 55
v = 24
range = 15,-15

[state 195,1]
type = varrandom
trigger1 = root,var(43) != 0
trigger1 = time = 55
v = 24
range = 22,-22

[State 2]
type = varset
trigger1 = time <= 54
fvar(25) = var(24) + rootdist x

[State 2]
type = varset
trigger1 = time >= 55
fvar(25) = var(24) + rootdist x

[State 3]
type = velset
trigger1 = time <= 25
x = fvar(25) * 0.08

[State 3]
type = null;velset
trigger1 = time > 25
x = fvar(25) * 0.30

[State 3]
type = velset
trigger1 = time = [25,45]
x = fvar(25) * 0

[State 3]
type = velset
trigger1 = time >= 46
x = fvar(25) * 0.15

[State 200, 1]
type = HitDef
trigger1 = root,var(43) = 0
trigger1 = AnimElem = 1
attr = S, SP
damage = ceil(ifelse(P2MoveType = H,21,14)),7
animtype = Light
guardflag = HA
hitflag = MAF
priority = 3, Hit
pausetime = 0, 0
sparkno = S1500
guard.sparkno = S1500
sparkxy = -20,0
hitsound = s610,0
guardsound = s1010,0
ground.type = light
ground.slidetime = 5
ground.hittime  = 1
ground.velocity = 0,0
airguard.velocity = 0,0.5
air.type = light
air.velocity = 0,0.5
air.hittime = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
palfx.time = 10
palfx.sinadd = 70,40,0,7
palfx.add = 120,-80,-80

[State 200, 1]
type = HitDef
trigger1 = root,var(43) != 0
trigger1 = AnimElem = 1
attr = S, SP
damage = ceil(ifelse(P2MoveType = H,5,8)),2
animtype = Light
guardflag = HA
hitflag = MAF
priority = 3, Hit
pausetime = 0, 0
sparkno = S1500
guard.sparkno = S1500
sparkxy = -20,0
hitsound = s610,0
guardsound = s1010,0
ground.type = light
ground.slidetime = 5
ground.hittime  = 1
ground.velocity = 0,0
airguard.velocity = 0,0.5
air.type = light
air.velocity = 0,0.5
air.hittime = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
palfx.time = 10
palfx.sinadd = 70,40,0,7
palfx.add = 120,-80,-80

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
random = 20,25
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State turn]
type = turn
triggerall = roundstate = 2
triggerall = P2Dist x <= 0
trigger1 = root,var(43) = 0
trigger1 = time >= 54
trigger2 = root,var(43) != 0
trigger2 = time >= 74

[State pal]
type = PalFX
trigger1 = root,var(43) = 0
trigger1 = time = 55
trigger2 = root,var(43) != 0
trigger2 = time = 75
palcolor = 1
add = 0,0,0
sinadd = -256,-256,-256,200
time = 150

[State 7001, 3]
type = DestroySelf
trigger1 = root,var(43) = 0
trigger1 = time = 90
trigger2 = root,var(43) != 0
trigger2 = time = 110

;---------------------------------------------------------------
;バットムーヴ(移動完了)
[Statedef 601]
type = S
movetype = I
physics = S
velset = 0,0
ctrl = 0
poweradd = 10

[state 200,changeanim]
type = changeanim
trigger1 = (!time) && (anim != 601)
value = 601

[State pal]
type = PalFX
trigger1 = AnimElemtime(2) = 0
palcolor = 1
add = -256,-256,-256
sinadd = 256,256,256,250
time = 66

[State 3]
type = posset
trigger1 = 1
y = 0

[State var]
type = varset
trigger1 = time = 0
v = 17
value = 0

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(1) = 0
value = 605,1
;volume = -100

[State 1,ex]
type = Explod
trigger1 = time = [0,39]
trigger1 = time%7 = 0
anim = 605
id = 605
postype = p1
scale = 2,2
vel = -0.5,1.9
facing = -1
removetime = -2
ownpal = 1
ontop = 1
pos = 24,-145
random = 19,40
sprpriority = 10

[State 1,ex]
type = Explod
trigger1 = time = [0,37]
trigger1 = time%4 = 0
anim = 606
id = 606
postype = p1
scale = 2,2
vel = 0.3,2.1
facing = 1
removetime = -2
ownpal = 1
ontop = 1
pos = -23,-137
random = 18,45
sprpriority = 10

[State 1,ex]
type = Explod
trigger1 = time = [0,35]
trigger1 = time%8 = 0
anim = 607
id = 607
postype = p1
scale = 1.5,1.5
vel = -0.3,2.3
facing = 1
removetime = -2
ownpal = 1
ontop = 1
pos = 22,-150
random = 17,36
sprpriority = 10

[State 1,ex]
type = Explod
trigger1 = time = [0,32]
trigger1 = time%5 = 0
anim = 605
id = 605
postype = p1
scale = 2,2
vel = 0.5,2.4
facing = 1
removetime = -2
ownpal = 1
ontop = 1
pos = -20,-90
random = 18,37
sprpriority = 10

[State 1,ex]
type = Explod
trigger1 = time = [0,34]
trigger1 = time%6 = 0
anim = 606
id = 606
postype = p1
scale = 2,2
vel = -0.4,1.9
facing = -1
removetime = -2
ownpal = 1
ontop = 1
pos = 18,-80
random = 14,33
sprpriority = 10

[State turn]
type = turn
trigger1 = roundstate = 2
trigger1 = P2Dist x <= 0
trigger1 = AnimElemtime(1) >= 0

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ヘルファイア
[Statedef 1000]
type = S
movetype = I
physics = S
;anim = 200
velset = 0,0
poweradd = 15
ctrl = 0
hitdefpersist	= 0
movehitpersist	= 0
hitcountpersist	= 0

[State 3]
type = posset
trigger1 = 1
y = 0

[State var]
type = varset
trigger1 = time = 0
v = 17
value = 0

[state 200,hit]
type = hitoverride
trigger1 = (prevstateno != 8030)
trigger1 = var(50) = 0
time = -1
slot = 0
attr = sca, aa, ap
stateno = 8030

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[state 200,changeanim]
type = changeanim
trigger1 = (!time) && (anim != 200)
value = 200

[State snd]
type = PlaySnd
trigger1 = AnimElem = 9
value = 1030,0

[State exp, *]
type = Explod
trigger1 = AnimElem = 8
anim = 210
ID = 1000
pos = -20,-58
postype = p1
scale = 1.5,1.5
sprpriority = 2
ownpal = 1
Persistent = 6
removetime = -2
ontop = 1

[State 7, 1]
type = Projectile
trigger1 = AnimElem = 9
attr = A, SP
ProjID = 1000
Projanim = 215
Projhitanim = 216
Projremanim = 216
Projcancelanim = 216
Projremove = 1
Projremovetime = 100
projedgebound = 510
projstagebound = 510
projheightbound = -500,1
Offset = -23,-58
Velocity = 5,0
Accel = 0,0
damage = 65, 8
Projemisstime = 1
Projepriority = 1
animtype = light
air.animtype = back
hitflag = MAFP
guardflag = MA
;fall.animtype = back
fall = 1
air.fall = 1
pausetime = 0,11
guard.pausetime = 0,11
sparkno = S1500
guard.sparkno = S1500
sparkxy = 15,0
hitsound = S1000,0
guardsound = s1010,0
ground.type = low
ground.slidetime = 9
ground.hittime  = 9
guard.slidetime = 7
guard.hittime = 7
ground.velocity = -5,-2
;ground.velocity = -5,-2
airguard.velocity = -3,-2
guard.velocity = -8
airguard.velocity = -3,-2
air.type = High
air.velocity = -5,-2
air.hittime = 9
palfx.time = 12
palfx.sinadd = 140,50,-40,7
palfx.add = 50,-40,-130
getpower = 50,50
sprpriority = 1
fall.recover = 0
p2facing = 1
yaccel = .45
fall.yvelocity = -4

[State 7, 1]
type = Projectile
trigger1 = AnimElem = 9
attr = A, SP
ProjID = 1001
Projanim = 215
Projremanim = 216
Projhitanim = 216
Projcancelanim = 216
Projremove = 1
Projremovetime = 100
projedgebound = 510
projstagebound = 510
projheightbound = -500,1
Offset = -23,-58
Velocity = 5,0.8
Accel = 0,0
damage = 65, 8
Projemisstime = 1
Projepriority = 1
animtype = light
air.animtype = back
hitflag = MAFP
guardflag = MA
;fall.animtype = back
fall = 1
air.fall = 1
pausetime = 0,11
guard.pausetime = 0,11
sparkno = S1500
guard.sparkno = S1500
sparkxy = 15,0
hitsound = S1000,0
guardsound = s1010,0
ground.type = low
ground.slidetime = 9
ground.hittime  = 9
guard.slidetime = 7
guard.hittime = 7
ground.velocity = -5,-2
;ground.velocity = -5,-2
airguard.velocity = -3,-2
guard.velocity = -8
airguard.velocity = -3,-2
air.type = High
air.velocity = -5,-2
air.hittime = 9
palfx.time = 12
palfx.sinadd = 140,50,-40,7
palfx.add = 50,-40,-130
getpower = 30,30
sprpriority = 1
fall.recover = 0
p2facing = 1
yaccel = .45
fall.yvelocity = -4

[State 7, 1]
type = Projectile
trigger1 = AnimElem = 9
attr = A, SP
ProjID = 1002
Projanim = 215
Projremanim = 216
Projhitanim = 216
Projcancelanim = 216
Projremove = 1
Projremovetime = 100
projedgebound = 510
projstagebound = 510
projheightbound = -500,1
Offset = -23,-58
Velocity = 5,-0.8
Accel = 0,0
damage = 65, 8
Projemisstime = 1
Projepriority = 1
animtype = light
air.animtype = back
hitflag = MAFP
guardflag = MA
;fall.animtype = back
fall = 1
air.fall = 1
pausetime = 0,11
guard.pausetime = 0,11
sparkno = S1500
guard.sparkno = S1500
sparkxy = 15,0
hitsound = S1000,0
guardsound = s1010,0
ground.type = low
ground.slidetime = 9
ground.hittime  = 9
guard.slidetime = 7
guard.hittime = 7
ground.velocity = -5,-2
;ground.velocity = -5,-2
airguard.velocity = -3,-2
guard.velocity = -8
airguard.velocity = -3,-2
air.type = High
air.velocity = -5,-2
air.hittime = 9
palfx.time = 12
palfx.sinadd = 140,50,-40,7
palfx.add = 50,-40,-130
getpower = 40,40
sprpriority = 1
fall.recover = 0
p2facing = 1
yaccel = .45
fall.yvelocity = -4

[State 200]
type = Explod
trigger1 = ProjHitTime(1000) = 1
trigger2 = ProjHitTime(1000) = 3
trigger3 = ProjHitTime(1000) = 5
trigger4 = ProjHitTime(1000) = 7
trigger5 = ProjHitTime(1000) = 9
trigger6 = ProjHitTime(1000) = 11
anim = 216
id = 216
postype = p2
scale = 1.5,1.5
accel = 0,-.17
random = 60,80
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = ProjHitTime(1001) = 1
trigger2 = ProjHitTime(1001) = 3
trigger3 = ProjHitTime(1001) = 5
trigger4 = ProjHitTime(1001) = 7
trigger5 = ProjHitTime(1001) = 9
trigger6 = ProjHitTime(1001) = 11
anim = 216
id = 216
postype = p2
scale = 1.5,1.5
accel = 0,-.17
random = 60,80
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = ProjHitTime(1002) = 1
trigger2 = ProjHitTime(1002) = 3
trigger3 = ProjHitTime(1002) = 5
trigger4 = ProjHitTime(1002) = 7
trigger5 = ProjHitTime(1002) = 9
trigger6 = ProjHitTime(1002) = 11
anim = 216
id = 216
postype = p2
scale = 1.5,1.5
accel = 0,-.17
random = 60,80
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = ProjGuardedTime(1000) = 1
trigger2 = ProjGuardedTime(1001) = 1
trigger3 = ProjGuardedTime(1002) = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -60
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 1000]
type = ChangeState
trigger1 = life = 0
value = 5150

[State 1000]
type = ChangeState
triggerall = var(32) = 0
trigger1 = var(21) = 0
trigger1 = Life <= lifemax / 2
trigger2 = var(21) = 1
trigger2 = Life = lifemax
value = 2500

[State 200, 7]
type = ChangeState
triggerall = command = "holdup"
trigger1 = AnimElemtime(2) >= 3 && AnimElemtime(2) <= 6
value = 1200
ctrl = 1

[State 200, 7]
type = ChangeState
trigger1 = AnimElemtime(7) >= 0
trigger1 = AnimElemtime(7) <= 12
trigger1 = command = "x"
trigger1 = power >= 400
trigger2 = var(54) = 30
trigger2 = AnimElemtime(7) >= 0
trigger2 = AnimElemtime(7) <= 12
trigger2 = random <= 100
trigger2 = power >= 400
value = 1010

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
[Statedef 8030];攻撃を受けた場合に飛ばされるステート
type = U
movetype = H
physics = U
ctrl = 0
hitdefpersist	= 0
movehitpersist	= 0
hitcountpersist	= 0

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[State 1000]
type = ChangeState
triggerall = var(32) = 0
trigger1 = var(21) = 0
trigger1 = Life <= lifemax / 2
trigger2 = var(21) = 1
trigger2 = Life = lifemax
value = 2500

[State 2000, 1]
type = ChangeState
;trigger1 = HitShakeOver = 1
trigger1 = Time >= 1
value = 1000

[State 3]
type = posset
trigger1 = 1
y = 0

[State 2000, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ヘルファイアＦ(フォースブレイク？)
[Statedef 1010]
type = S
movetype = I
physics = S
velset = 0,0
poweradd = 12
ctrl = 0
hitdefpersist	= 0
movehitpersist	= 0
hitcountpersist	= 0

[State 3]
type = posset
trigger1 = 1
y = 0

[State var]
type = varset
trigger1 = time = 0
v = 17
value = 0

[state 200,hit]
type = hitoverride
trigger1 = (prevstateno != 8029)
trigger1 = var(50) = 0
time = -1
slot = 0
attr = sca, aa, ap
stateno = 8029

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[state 200,changeanim]
type = changeanim
trigger1 = (!time) && (anim != 400)
value = 400

[state 1300,power]
type = poweradd
trigger1 = AnimElemtime(1) = 0
value = -400

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(1) = 0
value = 4000,0

[State 200]
type = Explod
trigger1 = AnimElemtime(1) = 0
anim = 4300
id = 4300
postype = p1
scale = 2,2
removetime = 22
ownpal = 1
ontop = 1
pos = -23,-58
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = AnimElemtime(1) = 0
anim = 4310
id = 4310
postype = p1
scale = 1.5,1.5
removetime = -2
ownpal = 1
ontop = 1
pos = -23,-58
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[state 195,1]
type = varrandom
trigger1 = AnimElemtime(1) = 0
v = 9
range = 0,3

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(2) = 0
value = 300,var(9)
channel = 0

[State exp, *]
type = Explod
trigger1 = AnimElem = 2
trigger2 = AnimElem = 4
trigger3 = AnimElem = 6
anim = 210
ID = 1010
pos = -20,-58
postype = p1
scale = 1.5,1.5
sprpriority = 2
ownpal = 1
Persistent = 6
removetime = -2
ontop = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 5
helpertype = Normal
ID = 1015
name = "fire1" 
postype = p1
pos = -23,-58
stateno = 1011
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 3
trigger2 = AnimElem = 5
helpertype = Normal
ID = 1016
name = "fire2" 
postype = p1
pos = -23,-58
stateno = 1012
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 3
trigger2 = AnimElem = 5
helpertype = Normal
ID = 1017
name = "fire3" 
postype = p1
pos = -23,-58
stateno = 1013
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 3
trigger2 = AnimElem = 5
helpertype = Normal
ID = 1018
name = "fire4" 
postype = p1
pos = -23,-58
stateno = 1014
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 5
helpertype = Normal
ID = 1019
name = "fire5" 
postype = p1
pos = -23,-58
stateno = 1015
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 7
helpertype = Normal
ID = 1020
name = "fire6"
postype = p1
pos = -23,-58
stateno = 1016
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 7
helpertype = Normal
ID = 1021
name = "fire7"
postype = p1
pos = -23,-58
stateno = 1017
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 7
helpertype = Normal
ID = 1022
name = "fire8"
postype = p1
pos = -23,-58
stateno = 1018
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 7
helpertype = Normal
ID = 1023
name = "fire9"
postype = p1
pos = -23,-58
stateno = 1019
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1000]
type = ChangeState
trigger1 = life = 0
value = 5150

[State 1000]
type = ChangeState
triggerall = var(32) = 0
trigger1 = var(21) = 0
trigger1 = Life <= lifemax / 2
trigger2 = var(21) = 1
trigger2 = Life = lifemax
value = 2500

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------
;ヘルファイアＦ（一番上）
[Statedef 1011]
type    = A
movetype= A
physics = N
juggle  = 6
anim = 215
ctrl = 0
sprpriority = 2

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SP
damage = 39, 5
animtype = back
guardflag = MA
hitflag = MAFP
fall = 1
air.fall = 1
priority = 3
pausetime = 0, 11
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = s1000,0
guardsound = s1010,0
ground.type = low
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -2,-4.3
airguard.velocity = -1.5,-1
guard.slidetime = 7
guard.hittime = 7
air.type = High
air.velocity = -2,-3.9
air.hittime = 9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 8,0
palfx.time = 12
palfx.sinadd = 140,50,-40,7
palfx.add = 50,-40,-130
getpower = 50,50
guard.kill = 0
fall.recovertime = 8
p2facing = 1
yaccel = .45
fall.yvelocity = -4

[State 7004]
type = Velset
trigger1 = time = 0
x = 3.2
y = -2.8

[State 7004]
type = Velset
trigger1 = time = 20
x = 4.5
y = 0

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 1100, 1]
type = Helper
trigger1 = MoveContact = 1
helpertype = Normal
ID = 1211
name = "firekieru" 
postype = p2
pos = 0,0
stateno = 1211
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 7001, 3]
type = DestroySelf
trigger1 = MoveContact
trigger2 = FrontEdgeBodyDist <= -35

;---------------------------------------------------------------
;ヘルファイアＦ（上から２番目）
[Statedef 1012]
type    = A
movetype= A
physics = N
juggle  = 6
anim = 215
ctrl = 0
sprpriority = 2

[State snd]
type = PlaySnd
trigger1 = time = 0
value = 1020,0

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SP
damage = 39, 5
animtype = back
guardflag = MA
hitflag = MAFP
fall = 1
air.fall = 1
priority = 3
pausetime = 0, 11
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = s1000,0
guardsound = s1010,0
ground.type = low
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -2,-4.3
airguard.velocity = -1.5,-1
guard.slidetime = 7
guard.hittime = 7
air.type = High
air.velocity = -2,-3.9
air.hittime = 9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 8,0
palfx.time = 12
palfx.sinadd = 140,50,-40,7
palfx.add = 50,-40,-130
getpower = 50,50
guard.kill = 0
fall.recovertime = 8
p2facing = 1
yaccel = .45
fall.yvelocity = -4

[State 7004]
type = Velset
trigger1 = time = 0
x = 3.2
y = -1.4

[State 7004]
type = Velset
trigger1 = time = 20
x = 4.5
y = 0

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 1100, 1]
type = Helper
trigger1 = MoveContact = 1
helpertype = Normal
ID = 1211
name = "firekieru" 
postype = p2
pos = 0,0
stateno = 1211
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 7001, 3]
type = DestroySelf
trigger1 = MoveContact
trigger2 = FrontEdgeBodyDist <= -35

;---------------------------------------------------------------
;ヘルファイアＦ（ど真ん中）
[Statedef 1013]
type    = A
movetype= A
physics = N
juggle  = 6
anim = 215
ctrl = 0
sprpriority = 2

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SP
damage = 39, 5
animtype = back
guardflag = MA
hitflag = MAFP
fall = 1
air.fall = 1
priority = 3
pausetime = 0, 11
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = s1000,0
guardsound = s1010,0
ground.type = low
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -2,-4.3
airguard.velocity = -1.5,-1
guard.slidetime = 7
guard.hittime = 7
air.type = High
air.velocity = -2,-3.9
air.hittime = 9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 8,0
palfx.time = 12
palfx.sinadd = 140,50,-40,7
palfx.add = 50,-40,-130
getpower = 50,50
guard.kill = 0
fall.recovertime = 8
p2facing = 1
yaccel = .45
fall.yvelocity = -4

[State 7004]
type = Velset
trigger1 = time = 0
x = 3.2

[State 7004]
type = Velset
trigger1 = time = 20
x = 4.5

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 1100, 1]
type = Helper
trigger1 = MoveContact = 1
helpertype = Normal
ID = 1211
name = "firekieru" 
postype = p2
pos = 0,0
stateno = 1211
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 7001, 3]
type = DestroySelf
trigger1 = MoveContact
trigger2 = FrontEdgeBodyDist <= -35

;---------------------------------------------------------------
;ヘルファイアＦ（下から２番目）
[Statedef 1014]
type    = A
movetype= A
physics = N
juggle  = 6
anim = 215
ctrl = 0
sprpriority = 2

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SP
damage = 39, 5
animtype = back
guardflag = MA
hitflag = MAFP
fall = 1
air.fall = 1
priority = 3
pausetime = 0, 11
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = s1000,0
guardsound = s1010,0
ground.type = low
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -2,-4.3
airguard.velocity = -1.5,-1
guard.slidetime = 7
guard.hittime = 7
air.type = High
air.velocity = -2,-3.9
air.hittime = 9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 8,0
palfx.time = 12
palfx.sinadd = 140,50,-40,7
palfx.add = 50,-40,-130
getpower = 50,50
guard.kill = 0
fall.recovertime = 8
p2facing = 1
yaccel = .45
fall.yvelocity = -4

[State 7004]
type = Velset
trigger1 = time = 0
x = 3.2
y = 1.4

[State 7004]
type = Velset
trigger1 = time = 20
x = 4.5
y = 0

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 1100, 1]
type = Helper
trigger1 = MoveContact = 1
helpertype = Normal
ID = 1211
name = "firekieru" 
postype = p2
pos = 0,0
stateno = 1211
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 7001, 3]
type = DestroySelf
trigger1 = MoveContact
trigger2 = FrontEdgeBodyDist <= -35

;---------------------------------------------------------------
;ヘルファイアＦ（一番下）
[Statedef 1015]
type    = A
movetype= A
physics = N
juggle  = 6
anim = 215
ctrl = 0
sprpriority = 2

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SP
damage = 39, 5
animtype = back
guardflag = MA
hitflag = MAFP
fall = 1
air.fall = 1
priority = 3
pausetime = 0, 11
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = s1000,0
guardsound = s1010,0
ground.type = low
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -2,-4.3
airguard.velocity = -1.5,-1
guard.slidetime = 7
guard.hittime = 7
air.type = High
air.velocity = -2,-3.9
air.hittime = 9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 8,0
palfx.time = 12
palfx.sinadd = 140,50,-40,7
palfx.add = 50,-40,-130
getpower = 50,50
guard.kill = 0
fall.recovertime = 8
p2facing = 1
yaccel = .45
fall.yvelocity = -4

[State 7004]
type = Velset
trigger1 = time = 0
x = 3.2
y = 2.8

[State 7004]
type = Velset
trigger1 = time = 20
x = 4.5
y = 0

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 1100, 1]
type = Helper
trigger1 = MoveContact = 1
helpertype = Normal
ID = 1211
name = "firekieru" 
postype = p2
pos = 0,0
stateno = 1211
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 7001, 3]
type = DestroySelf
trigger1 = MoveContact
trigger2 = FrontEdgeBodyDist <= -35

;---------------------------------------------------------------
;ヘルファイアＦ（最後の４発一番上）
[Statedef 1016]
type    = A
movetype= A
physics = N
juggle  = 6
anim = 215
ctrl = 0
sprpriority = 2

[State snd]
type = PlaySnd
trigger1 = time = 0
value = 1020,0

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SP
damage = 39, 5
animtype = back
guardflag = MA
hitflag = MAFP
fall = 1
air.fall = 1
priority = 3
pausetime = 0, 11
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = s1000,0
guardsound = s1010,0
ground.type = low
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -2,-4.3
airguard.velocity = -1.5,-1
guard.slidetime = 7
guard.hittime = 7
air.type = High
air.velocity = -2,-3.9
air.hittime = 9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 8,0
palfx.time = 12
palfx.sinadd = 140,50,-40,7
palfx.add = 50,-40,-130
getpower = 50,50
guard.kill = 0
fall.recovertime = 8
p2facing = 1
yaccel = .45
fall.yvelocity = -4

[State 7004]
type = Velset
trigger1 = time = 0
x = 2.4
y = 1.8

[State 7004]
type = Velset
trigger1 = time = 20
x = 4.5
y = 0

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 1100, 1]
type = Helper
trigger1 = MoveContact = 1
helpertype = Normal
ID = 1211
name = "firekieru" 
postype = p2
pos = 0,0
stateno = 1211
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 7001, 3]
type = DestroySelf
trigger1 = MoveContact
trigger2 = FrontEdgeBodyDist <= -35

;---------------------------------------------------------------
;ヘルファイアＦ（最後の４発上から２番目）
[Statedef 1017]
type    = A
movetype= A
physics = N
juggle  = 6
anim = 215
ctrl = 0
sprpriority = 2

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SP
damage = 39, 5
animtype = back
guardflag = MA
hitflag = MAFP
fall = 1
air.fall = 1
priority = 3
pausetime = 0, 11
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = s1000,0
guardsound = s1010,0
ground.type = low
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -2,-4.3
airguard.velocity = -1.5,-1
guard.slidetime = 7
guard.hittime = 7
air.type = High
air.velocity = -2,-3.9
air.hittime = 9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 8,0
palfx.time = 12
palfx.sinadd = 140,50,-40,7
palfx.add = 50,-40,-130
getpower = 50,50
guard.kill = 0
fall.recovertime = 8
p2facing = 1
yaccel = .45
fall.yvelocity = -4

[State 7004]
type = Velset
trigger1 = time = 0
x = 3.2
y = .6

[State 7004]
type = Velset
trigger1 = time = 20
x = 4.5
y = 0

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 1100, 1]
type = Helper
trigger1 = MoveContact = 1
helpertype = Normal
ID = 1211
name = "firekieru" 
postype = p2
pos = 0,0
stateno = 1211
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 7001, 3]
type = DestroySelf
trigger1 = MoveContact
trigger2 = FrontEdgeBodyDist <= -35

;---------------------------------------------------------------
;ヘルファイアＦ（最後の４発上から３番目）
[Statedef 1018]
type    = A
movetype= A
physics = N
juggle  = 6
anim = 215
ctrl = 0
sprpriority = 2

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SP
damage = 39, 5
animtype = back
guardflag = MA
hitflag = MAFP
fall = 1
air.fall = 1
priority = 3
pausetime = 0, 11
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = s1000,0
guardsound = s1010,0
ground.type = low
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -2,-4.3
airguard.velocity = -1.5,-1
guard.slidetime = 7
guard.hittime = 7
air.type = High
air.velocity = -2,-3.9
air.hittime = 9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 8,0
palfx.time = 12
palfx.sinadd = 140,50,-40,7
palfx.add = 50,-40,-130
getpower = 50,50
guard.kill = 0
fall.recovertime = 8
p2facing = 1
yaccel = .45
fall.yvelocity = -4

[State 7004]
type = Velset
trigger1 = time = 0
x = 3.2
y = -.6

[State 7004]
type = Velset
trigger1 = time = 20
x = 4.5
y = 0

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 1100, 1]
type = Helper
trigger1 = MoveContact = 1
helpertype = Normal
ID = 1211
name = "firekieru" 
postype = p2
pos = 0,0
stateno = 1211
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 7001, 3]
type = DestroySelf
trigger1 = MoveContact
trigger2 = FrontEdgeBodyDist <= -35

;---------------------------------------------------------------
;ヘルファイアＦ（最後の４発一番下）
[Statedef 1019]
type    = A
movetype= A
physics = N
juggle  = 6
anim = 215
ctrl = 0
sprpriority = 2

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SP
damage = 39, 5
animtype = back
guardflag = MA
hitflag = MAFP
fall = 1
air.fall = 1
priority = 3
pausetime = 0, 11
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = s1000,0
guardsound = s1010,0
ground.type = low
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -2,-4.3
airguard.velocity = -1.5,-1
guard.slidetime = 7
guard.hittime = 7
air.type = High
air.velocity = -2,-3.9
air.hittime = 9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 8,0
palfx.time = 12
palfx.sinadd = 140,50,-40,7
palfx.add = 50,-40,-130
getpower = 50,50
guard.kill = 0
fall.recovertime = 8
p2facing = 1
yaccel = .45
fall.yvelocity = -4

[State 7004]
type = Velset
trigger1 = time = 0
x = 2.4
y = -1.8

[State 7004]
type = Velset
trigger1 = time = 20
x = 4.5
y = 0

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 1100, 1]
type = Helper
trigger1 = MoveContact = 1
helpertype = Normal
ID = 1211
name = "firekieru" 
postype = p2
pos = 0,0
stateno = 1211
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 7001, 3]
type = DestroySelf
trigger1 = MoveContact
trigger2 = FrontEdgeBodyDist <= -35

;---------------------------------------------------------------------------
[Statedef 8029];攻撃を受けた場合に飛ばされるステート
type = U
movetype = H
physics = U
ctrl = 0
hitdefpersist	= 0
movehitpersist	= 0
hitcountpersist	= 0

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[State 1000]
type = ChangeState
triggerall = var(32) = 0
trigger1 = var(21) = 0
trigger1 = Life <= lifemax / 2
trigger2 = var(21) = 1
trigger2 = Life = lifemax
value = 2500

[state 1300,power]
type = poweradd
trigger1 = AnimElemtime(1) = 0
value = -400

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(1) = 0
value = 4000,0

[State 200]
type = Explod
trigger1 = AnimElemtime(1) = 0
anim = 4300
id = 4300
postype = p1
scale = 2,2
removetime = 22
ownpal = 1
ontop = 1
pos = -23,-58
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = AnimElemtime(1) = 0
anim = 4310
id = 4310
postype = p1
scale = 1.5,1.5
removetime = -2
ownpal = 1
ontop = 1
pos = -23,-58
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[state 195,1]
type = varrandom
trigger1 = AnimElemtime(1) = 0
v = 9
range = 0,3

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(2) = 0
value = 300,var(9)
channel = 0

[State exp, *]
type = Explod
trigger1 = AnimElemtime(2) = 0
trigger2 = AnimElemtime(4) = 0
trigger3 = AnimElemtime(6) = 0
anim = 210
ID = 1010
pos = -20,-58
postype = p1
scale = 1.5,1.5
sprpriority = 2
ownpal = 1
Persistent = 6
removetime = -2
ontop = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(5) = 0
helpertype = Normal
ID = 1015
name = "fire1" 
postype = p1
pos = -23,-58
stateno = 1011
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(3) = 0
trigger2 = AnimElemtime(5) = 0
trigger3 = AnimElemtime(7) = 0
helpertype = Normal
ID = 1016
name = "fire2" 
postype = p1
pos = -23,-58
stateno = 1012
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(3) = 0
trigger2 = AnimElemtime(5) = 0
trigger3 = AnimElemtime(7) = 0
helpertype = Normal
ID = 1017
name = "fire3" 
postype = p1
pos = -23,-58
stateno = 1013
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(3) = 0
trigger2 = AnimElemtime(5) = 0
trigger3 = AnimElemtime(7) = 0
helpertype = Normal
ID = 1018
name = "fire4" 
postype = p1
pos = -23,-58
stateno = 1014
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(5) = 0
helpertype = Normal
ID = 1019
name = "fire5" 
postype = p1
pos = -23,-58
stateno = 1015
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 2000, 1]
type = ChangeState
;trigger1 = HitShakeOver = 1
trigger1 = Time >= 1
value = 1010

[State 3]
type = posset
trigger1 = 1
y = 0

[State 2000, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------
;これが真祖の力よ
[Statedef 1100]
type = S
movetype = I
physics = S
;anim = 220
velset = 0,0
ctrl = 0
poweradd = 11

[State 3]
type = posset
trigger1 = 1
y = 0

[State var]
type = varset
trigger1 = time = 0
v = 17
value = 0

[state 200,hit]
type = hitoverride
trigger1 = (prevstateno != 8031)
trigger1 = var(50) = 0
time = -1
slot = 0
attr = sca, aa, ap
stateno = 8031

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[state 200,changeanim]
type = changeanim
trigger1 = (!time) && (anim != 220)
value = 220

[State snd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1100,0

[State snd]
type = PlaySnd
trigger1 = AnimElem = 8
value = 1020,0

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 8
helpertype = Normal
ID = 1100
name = "fire" 
postype = p1
pos = 22,-66
stateno = 1110
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 11
helpertype = Normal
ID = 1100
name = "fire" 
postype = p1
pos = 22,-30
stateno = 1110
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State exp, *]
type = Explod
trigger1 = AnimElem = 7
anim = 226
ID = 1100
pos = 22,-66
postype = p1
scale = 1.5,1.5
sprpriority = 2
ownpal = 1
Persistent = 6
removetime = -2
ontop = 1

[State exp, *]
type = Explod
trigger1 = AnimElem = 10
anim = 226
ID = 1100
pos = 22,-30
postype = p1
scale = 1.5,1.5
sprpriority = 2
ownpal = 1
Persistent = 6
removetime = -2
ontop = 1

[State 1000]
type = ChangeState
trigger1 = life = 0
value = 5150

[State 1000]
type = ChangeState
triggerall = var(32) = 0
trigger1 = var(21) = 0
trigger1 = Life <= lifemax / 2
trigger2 = var(21) = 1
trigger2 = Life = lifemax
value = 2500

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------
;これが真祖の力よ（発射）
[Statedef 1110]
type    = A
movetype= A
physics = N
juggle  = 6
anim = 225
ctrl = 0
sprpriority = 2

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 15
trigger2 = AnimElem = 23
attr = S, SP
damage = 74, 12
animtype = back
guardflag = MA
hitflag = MAF
fall = 1
priority = 3
pausetime = 0, 14
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = s1000,0
guardsound = s1010,0
ground.type = low 
ground.slidetime = 3
ground.hittime  = 8
ground.velocity = -5,0
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -5,-3
air.hittime = 8
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 8,0
palfx.time = 26
palfx.sinadd = 140,50,-40,8
palfx.add = 50,-40,-130
guard.kill = 0

[State 7004]
type = Veladd
trigger1 = time = [36,57]
x = 0.5

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 7300, 0]
type = Explod
trigger1 = time = [23,25]
trigger2 = time = [29,31]
trigger3 = time = [35,37]
trigger4 = time = [41,43]
trigger5 = time = [47,49]
trigger6 = time = [53,55]
trigger7 = time = [59,61]
trigger8 = time = [65,67]
trigger9 = time = [71,73]
trigger10 = time = [77,79]
trigger11 = time = [83,85]
trigger12 = time = [89,91]
trigger13 = time = [95,97]
trigger14 = time = [101,105]
trigger15 = time = [109,111]
trigger16 = time = [115,117]
trigger17 = time = [121,123]
anim = 227
ID = 227
pos = 10,-20
postype = p1
;vel = 2,0
accel = 0,-.13
random = 23,60
removetime = -2
scale = 1.5,1.5
sprpriority = 1
ontop = 1
shadow = 40,40,40
ownpal = 1

[State 200]
type = Explod
trigger1 = MoveHit = 1
trigger2 = MoveHit = 3
trigger3 = MoveHit = 5
trigger4 = MoveHit = 7
trigger5 = MoveHit = 9
trigger6 = MoveHit = 11
anim = 216
id = 216
postype = p2
scale = 1.5,1.5
accel = 0,-.17
random = 60,80
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 7001, 3]
type = DestroySelf
trigger1 = FrontEdgeBodyDist <= -50

;---------------------------------------------------------------------------
[Statedef 8031];攻撃を受けた場合に飛ばされるステート
type = U
movetype = H
physics = U
ctrl = 0
hitdefpersist	= 0
movehitpersist	= 0
hitcountpersist	= 0

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[State 1000]
type = ChangeState
triggerall = var(32) = 0
trigger1 = var(21) = 0
trigger1 = Life <= lifemax / 2
trigger2 = var(21) = 1
trigger2 = Life = lifemax
value = 2500

[State 2000, 1]
type = ChangeState
;trigger1 = HitShakeOver = 1
trigger1 = Time >= 1
value = 1100

[State 3]
type = posset
trigger1 = 1
y = 0

[State 2000, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------
;ダークインフェルノ
[Statedef 1150]
type = S
movetype = I
physics = S
velset = 0,0
ctrl = 0
poweradd = 49

[state 200,hit]
type = hitoverride
trigger1 = (prevstateno != 8024)
trigger1 = var(50) = 0
time = -1
slot = 0
attr = sca, aa, ap
stateno = 8024

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[state 200,changeanim]
type = changeanim
trigger1 = (!time) && (anim != 250)
value = 250

[state 1300,power]
type = poweradd
trigger1 = var(43) = 0
trigger1 = AnimElemtime(1) = 0
value = -500

[state 1300,power]
type = poweradd
trigger1 = var(43) != 0
trigger1 = AnimElemtime(1) = 0
value = -1000

[State 3]
type = posset
trigger1 = 1
y = 0

[State var]
type = varset
trigger1 = time = 0
v = 17
value = 0

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(4) = 0
value = 1150,0

[State snd]
type = PlaySnd
trigger1 = var(43) != 0
trigger1 = AnimElemtime(6) = 0
value = 4000,0

[State 7015, 1]
type = SuperPause
trigger1 = var(43) != 0
trigger1 = AnimElemtime(6) = 0
anim = -1

[State 200]
type = Explod
trigger1 = var(43) != 0
trigger1 = AnimElemtime(6) = 0
anim = 4300
id = 4300
postype = p1
scale = 2,2
removetime = 22
ownpal = 1
ontop = 1
pos = -23,-58
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = var(43) != 0
trigger1 = AnimElemtime(6) = 0
anim = 4310
id = 4310
postype = p1
scale = 1.5,1.5
removetime = -2
ownpal = 1
ontop = 1
pos = -23,-58
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(6) = 10
trigger2 = AnimElemtime(6) = 70
trigger3 = AnimElemtime(6) = 130
trigger4 = AnimElemtime(6) = 190
helpertype = Normal
ID = 1155
name = "fire"
postype = p1
pos = -22,-72
stateno = 1155
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(6) = 40
trigger2 = AnimElemtime(6) = 100
trigger3 = AnimElemtime(6) = 160
trigger4 = AnimElemtime(6) = 220
helpertype = Normal
ID = 1156
name = "fire"
postype = p1
pos = -22,-30
stateno = 1155
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State exp, *]
type = Explod
trigger1 = AnimElemtime(6) = 10
trigger2 = AnimElemtime(6) = 70
trigger3 = AnimElemtime(6) = 130
trigger4 = AnimElemtime(6) = 190
anim = 226
ID = 226
pos = -22,-72
postype = p1
scale = 1.5,1.5
sprpriority = 5
ownpal = 1
Persistent = 6
removetime = -2
ontop = 1

[State exp, *]
type = Explod
trigger1 = AnimElemtime(6) = 40
trigger2 = AnimElemtime(6) = 100
trigger3 = AnimElemtime(6) = 160
trigger4 = AnimElemtime(6) = 220
anim = 226
ID = 226
pos = -22,-30
postype = p1
scale = 1.5,1.5
sprpriority = 5
ownpal = 1
Persistent = 6
removetime = -2
ontop = 1

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(6) = 10
trigger2 = AnimElemtime(6) = 40
trigger3 = AnimElemtime(6) = 70
trigger4 = AnimElemtime(6) = 100
trigger5 = AnimElemtime(6) = 130
trigger6 = AnimElemtime(6) = 160
trigger7 = AnimElemtime(6) = 190
trigger8 = AnimElemtime(6) = 220
value = 1155,0
channel = 1

[State 200, 7]
type = ChangeState
triggerall = AnimElemtime(6) <= 270
trigger1 = Win
trigger2 = lose
value = 1160

[State 200, 7]
type = ChangeState
triggerall = AnimElemtime(6) >= 129
trigger1 = var(43) = 0
value = 1160

[State 1000]
type = ChangeState
trigger1 = life = 0
value = 5150

[State 1000]
type = ChangeState
triggerall = var(32) = 0
trigger1 = var(21) = 0
trigger1 = Life <= lifemax / 2
trigger2 = var(21) = 1
trigger2 = Life = lifemax
value = 2500

[State 200, 7]
type = ChangeState
triggerall = var(43) != 0
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------
;ダークインフェルノ(発射)
[Statedef 1155]
type    = A
movetype= A
physics = N
juggle  = 6
anim = 255
ctrl = 0
sprpriority = 3

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 11
helpertype = Normal
ID = 1157
name = "effect"
postype = p1
pos = 0,0
stateno = 1156
size.xscale = 1.7
size.yscale = 1.7
ownpal = 1

[State 7001, 2]
type = HitDef
triggerall = root,var(43) = 0
trigger1 = AnimElem = 11
trigger2 = AnimElem = 21
attr = S, SP
damage = ceil(ifelse(P2MoveType = H,46,78)),5
animtype = back
guardflag = MA
hitflag = MAF
fall = 1
air.fall = 1
priority = 3
pausetime = 0, 13
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = s1000,0
guardsound = s1010,0
ground.type = low 
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -4.7,-2.5
airguard.velocity = -2.0,-.5
air.type = High
air.velocity = -4.7,-1.9
air.hittime = 12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 24,0
palfx.time = 26
palfx.sinadd = 140,50,-40,8
palfx.add = 50,-40,-130

[State 7001, 2]
type = HitDef
triggerall = root,var(43) != 0
trigger1 = AnimElem = 11
trigger2 = AnimElem = 21
attr = S, SP
damage = ceil(ifelse(P2MoveType = H,27,64)),5
animtype = back
guardflag = MA
hitflag = MAF
fall = 1
air.fall = 1
priority = 3
pausetime = 0, 13
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = s1000,0
guardsound = s1010,0
ground.type = low 
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -5.2,-1.1
airguard.velocity = -2.2,-.5
air.type = High
air.velocity = -5.2,-1.1
air.hittime = 12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 24,0
palfx.time = 26
palfx.sinadd = 140,50,-40,8
palfx.add = 50,-40,-130

[State 7004]
type = Veladd
trigger1 = time = [28,105]
x = 0.09

[State 7004]
type = Veladd
trigger1 = time = [32,110]
trigger1 = root,var(54) != 30
trigger1 = root,command = "holdup"
trigger2 = time >= 32
trigger2 = root,var(54) = 30
trigger2 = p2dist y <= -20
y = -0.06

[State 7004]
type = Veladd
trigger1 = time = [32,110]
trigger1 = root,var(54) != 30
trigger1 = root,command = "holddown"
trigger2 = time >= 32
trigger2 = root,var(54) = 30
trigger2 = p2dist y >= 20
trigger2 = p2statetype = C
trigger3 = time >= 32
trigger3 = root,var(54) = 30
trigger3 = p2dist y >= 20
trigger3 = p2statetype = A
y = 0.06

[State 7004]
type = Velset
trigger1 = pos y >= -20 && vel y > 0
y = 0

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 7300, 0]
type = Explod
trigger1 = time >= 24
trigger1 = time%3 = 0
anim = 227
ID = 227
pos = 10,0
postype = p1
accel = 0,-.09
random = 23,60
removetime = -2
scale = 1.5,1.5
sprpriority = 5
ontop = 1
shadow = 40,40,40
ownpal = 1

[State 200]
type = Explod
trigger1 = MoveHit = 1
trigger2 = MoveHit = 3
trigger3 = MoveHit = 5
trigger4 = MoveHit = 7
trigger5 = MoveHit = 9
trigger6 = MoveHit = 11
anim = 216
id = 216
postype = p2
scale = 1.5,1.5
accel = 0,-.17
random = 60,80
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 7001, 3]
type = DestroySelf
trigger1 = FrontEdgeBodyDist <= -50

;---------------------------------------------------------------
;ダークインフェルノ(エフェクト)
[Statedef 1156]
type    = A
movetype= A
physics = N
juggle  = 6
anim = 256
ctrl = 0
sprpriority = 2

[State 1000, 3]
type = BindToParent
trigger1 = 1
time = -1
facing = 1
pos = 0,0

[State afimage]
type = AfterImage
trigger1 = time = 0
time = -1
trans = add
length   = 9
timegap  = 1
framegap = 1
PalBright = 50 , 50 , 20
PalContrast = 90 , 90 , 70
PalAdd = 0 , 0 , 0
;PalMul = 1.2 , 1.2 , 1.0
IgnoreHitPause = 1
Persistent = 1

[State 7001, 3]
type = DestroySelf
trigger1 = FrontEdgeBodyDist <= -50

;---------------------------------------------------------------------------
[Statedef 8024];攻撃を受けた場合に飛ばされるステート
type = U
movetype = H
physics = U
ctrl = 0
hitdefpersist	= 0
movehitpersist	= 0
hitcountpersist	= 0

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[State 1000]
type = ChangeState
triggerall = var(32) = 0
trigger1 = var(21) = 0
trigger1 = Life <= lifemax / 2
trigger2 = var(21) = 1
trigger2 = Life = lifemax
value = 2500

[state 1300,power]
type = poweradd
trigger1 = var(43) = 0
trigger1 = AnimElemtime(1) = 0
value = -500

[state 1300,power]
type = poweradd
trigger1 = var(43) != 0
trigger1 = AnimElemtime(1) = 0
value = -1000

[State 3]
type = posset
trigger1 = 1
y = 0

[State var]
type = varset
trigger1 = time = 0
v = 17
value = 0

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(4) = 0
value = 1150,0
channel = 0

[State snd]
type = PlaySnd
trigger1 = var(43) != 0
trigger1 = AnimElemtime(6) = 0
value = 4000,0

[State 7015, 1]
type = SuperPause
trigger1 = var(43) != 0
trigger1 = AnimElemtime(6) = 0
anim = -1

[State 200]
type = Explod
trigger1 = var(43) != 0
trigger1 = AnimElemtime(6) = 0
anim = 4300
id = 4300
postype = p1
scale = 2,2
removetime = 22
ownpal = 1
ontop = 1
pos = -23,-58
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = var(43) != 0
trigger1 = AnimElemtime(6) = 0
anim = 4310
id = 4310
postype = p1
scale = 1.5,1.5
removetime = -2
ownpal = 1
ontop = 1
pos = -23,-58
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(6) = 10
trigger2 = AnimElemtime(6) = 70
trigger3 = AnimElemtime(6) = 130
trigger4 = AnimElemtime(6) = 190
helpertype = Normal
ID = 1155
name = "fire"
postype = p1
pos = -22,-72
stateno = 1155
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(6) = 40
trigger2 = AnimElemtime(6) = 100
trigger3 = AnimElemtime(6) = 160
trigger4 = AnimElemtime(6) = 220
helpertype = Normal
ID = 1156
name = "fire"
postype = p1
pos = -22,-30
stateno = 1155
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State exp, *]
type = Explod
trigger1 = AnimElemtime(6) = 10
trigger2 = AnimElemtime(6) = 70
trigger3 = AnimElemtime(6) = 130
trigger4 = AnimElemtime(6) = 190
anim = 226
ID = 226
pos = -22,-72
postype = p1
scale = 1.5,1.5
sprpriority = 5
ownpal = 1
Persistent = 6
removetime = -2
ontop = 1

[State exp, *]
type = Explod
trigger1 = AnimElemtime(6) = 40
trigger2 = AnimElemtime(6) = 100
trigger3 = AnimElemtime(6) = 160
trigger4 = AnimElemtime(6) = 220
anim = 226
ID = 226
pos = -22,-30
postype = p1
scale = 1.5,1.5
sprpriority = 5
ownpal = 1
Persistent = 6
removetime = -2
ontop = 1

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(6) = 10
trigger2 = AnimElemtime(6) = 40
trigger3 = AnimElemtime(6) = 70
trigger4 = AnimElemtime(6) = 100
trigger5 = AnimElemtime(6) = 130
trigger6 = AnimElemtime(6) = 160
trigger7 = AnimElemtime(6) = 190
trigger8 = AnimElemtime(6) = 220
value = 1155,0
channel = 1

[State 200, 7]
type = ChangeState
triggerall = AnimElemtime(6) <= 270
trigger1 = Win
trigger2 = lose
value = 1160

[State 200, 7]
type = ChangeState
triggerall = AnimElemtime(6) >= 129
trigger1 = var(43) = 0
value = 1160

[State 2000, 1]
type = ChangeState
;trigger1 = HitShakeOver = 1
trigger1 = Time >= 1
value = 1150

[State 3]
type = posset
trigger1 = 1
y = 0

[State 2000, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------
;ダークインフェルノ(Win&Lose時強制終了)
[Statedef 1160]
type = S
movetype = I
physics = S
velset = 0,0
ctrl = 0

[state 200,changeanim]
type = changeanim
trigger1 = (!time) && (anim != 257)
value = 257

[State 1000]
type = ChangeState
trigger1 = life = 0
value = 5150

[State 1000]
type = ChangeState
triggerall = var(32) = 0
trigger1 = var(21) = 0
trigger1 = Life <= lifemax / 2
trigger2 = var(21) = 1
trigger2 = Life = lifemax
value = 2500

[State 2000, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ヘルファイア対空
[Statedef 1200]
type = S
movetype = I
physics = S
;anim = 200
velset = 0,0
ctrl = 0
poweradd = 6
hitdefpersist	= 0
movehitpersist	= 0
hitcountpersist	= 0

[State 3]
type = posset
trigger1 = 1
y = 0

[State var]
type = varset
trigger1 = time = 0
v = 17
value = 0

[state 200,hit]
type = hitoverride
trigger1 = (prevstateno != 8032)
trigger1 = var(50) = 0
time = -1
slot = 0
attr = sca, aa, ap
stateno = 8032

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[state 200,changeanim]
type = changeanim
trigger1 = (!time) && (anim != 200)
value = 200

[State exp, *]
type = Explod
trigger1 = AnimElemtime(1) = 13
anim = 210
ID = 1000
pos = -20,-58
postype = p1
scale = 1.5,1.5
sprpriority = 2
ownpal = 1
Persistent = 6
removetime = -2
ontop = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(1) = 23
helpertype = Normal
ID = 1210
name = "fire" 
postype = p1
pos = -23,-58
stateno = 1210
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(1) = 23
helpertype = Normal
ID = 1212
name = "fire" 
postype = p1
pos = -23,-58
stateno = 1212
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(1) = 23
helpertype = Normal
ID = 1213
name = "fire" 
postype = p1
pos = -23,-58
stateno = 1213
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1000]
type = ChangeState
trigger1 = life = 0
value = 5150

[State 1000]
type = ChangeState
triggerall = var(32) = 0
trigger1 = var(21) = 0
trigger1 = Life <= lifemax / 2
trigger2 = var(21) = 1
trigger2 = Life = lifemax
value = 2500

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------
;ヘルファイア対空（１発目発射）
[Statedef 1210]
type    = A
movetype= A
physics = N
juggle  = 6
anim = 215
ctrl = 0
sprpriority = 2

[State 1210]
type = AngleDraw
trigger1 = 1

[State 1210]
type = AngleSet
trigger1 = time = 0
value = 50

[State snd]
type = PlaySnd
trigger1 = time = 0
value = 1030,0

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SP
damage = 65, 8
animtype = back
guardflag = MA
hitflag = MAFP
fall = 1
air.fall = 1
priority = 3
pausetime = 0, 11
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = s1000,0
guardsound = s1010,0
ground.type = low
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -2,-4.3
airguard.velocity = -1.5,-1
guard.slidetime = 7
guard.hittime = 7
air.type = High
air.velocity = -2,-3.9
air.hittime = 9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 8,0
palfx.time = 12
palfx.sinadd = 140,50,-40,7
palfx.add = 50,-40,-130
getpower = 50,50
guard.kill = 0
fall.recovertime = 8
p2facing = 1
yaccel = .45
fall.yvelocity = -4

[State 7004]
type = Velset
trigger1 = time = 0
x = 2.2
y = -3.6

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 1100, 1]
type = Helper
trigger1 = MoveContact = 1
helpertype = Normal
ID = 1211
name = "firekieru" 
postype = p2
pos = 0,0
stateno = 1211
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 7001, 3]
type = DestroySelf
trigger1 = MoveContact
trigger2 = time = 100

;---------------------------------------------------------------
;ヘルファイア対空（２発目発射）
[Statedef 1212]
type    = A
movetype= A
physics = N
juggle  = 6
anim = 215
ctrl = 0
sprpriority = 2

[State 1210]
type = AngleDraw
trigger1 = 1

[State 1210]
type = AngleSet
trigger1 = time = 0
value = 50

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SP
damage = 65, 8
animtype = back
guardflag = MA
hitflag = MAFP
fall = 1
air.fall = 1
priority = 3
pausetime = 0, 11
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = s1000,0
guardsound = s1010,0
ground.type = low
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -2,-4.3
airguard.velocity = -1.5,-1
guard.slidetime = 7
guard.hittime = 7
air.type = High
air.velocity = -2,-3.9
air.hittime = 9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 8,0
palfx.time = 12
palfx.sinadd = 140,50,-40,7
palfx.add = 50,-40,-130
getpower = 50,50
guard.kill = 0
fall.recovertime = 8
p2facing = 1
yaccel = .45
fall.yvelocity = -4

[State 7004]
type = Velset
trigger1 = time = 0
x = 3.4
y = -3.4

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 1100, 1]
type = Helper
trigger1 = MoveContact = 1
helpertype = Normal
ID = 1211
name = "firekieru" 
postype = p2
pos = 0,0
stateno = 1211
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 7001, 3]
type = DestroySelf
trigger1 = MoveContact
trigger2 = time = 100

;---------------------------------------------------------------
;ヘルファイア対空（３発目発射）
[Statedef 1213]
type    = A
movetype= A
physics = N
juggle  = 6
anim = 215
ctrl = 0
sprpriority = 2

[State 1210]
type = AngleDraw
trigger1 = 1

[State 1210]
type = AngleSet
trigger1 = time = 0
value = 50

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SP
damage = 65, 8
animtype = back
guardflag = MA
hitflag = MAFP
fall = 1
air.fall = 1
priority = 3
pausetime = 0, 11
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = s1000,0
guardsound = s1010,0
ground.type = low
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -2,-4.3
airguard.velocity = -1.5,-1
guard.slidetime = 7
guard.hittime = 7
air.type = High
air.velocity = -2,-3.9
air.hittime = 9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 8,0
palfx.time = 12
palfx.sinadd = 140,50,-40,7
palfx.add = 50,-40,-130
getpower = 50,50
guard.kill = 0
fall.recovertime = 8
p2facing = 1
yaccel = .45
fall.yvelocity = -4

[State 7004]
type = Velset
trigger1 = time = 0
x = 1.0
y = -3.8

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 1100, 1]
type = Helper
trigger1 = MoveContact = 1
helpertype = Normal
ID = 1211
name = "firekieru" 
postype = p2
pos = 0,0
stateno = 1211
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 7001, 3]
type = DestroySelf
trigger1 = MoveContact
trigger2 = time = 100

;---------------------------------------------------------------------------
;ファイア当たると消滅
[Statedef 1211]
type = S
movetype = I
physics = S
anim = 3510;216
velset = 0,0
ctrl = 0

[State 200]
type = Explod
trigger1 = time = 1
trigger2 = time = 3
trigger3 = time = 5
trigger4 = time = 7
trigger5 = time = 9
trigger6 = time = 11
anim = 216
id = 216
postype = p2
scale = 1.5,1.5
accel = 0,-.17
random = 60,80
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 7001, 3]
type = DestroySelf
trigger1 = time = 12

;---------------------------------------------------------------------------
[Statedef 8032];攻撃を受けた場合に飛ばされるステート
type = U
movetype = H
physics = U
ctrl = 0
hitdefpersist	= 0
movehitpersist	= 0
hitcountpersist	= 0

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[State 1000]
type = ChangeState
triggerall = var(32) = 0
trigger1 = var(21) = 0
trigger1 = Life <= lifemax / 2
trigger2 = var(21) = 1
trigger2 = Life = lifemax
value = 2500

[State 2000, 1]
type = ChangeState
;trigger1 = HitShakeOver = 1
trigger1 = Time >= 1
value = 1200

[State 3]
type = posset
trigger1 = 1
y = 0

[State 2000, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------
;スプレッド・バット
[Statedef 1300]
type = S
movetype = I
physics = S
velset = 0,0
ctrl = 0
poweradd = 1

[State 3]
type = posset
trigger1 = 1
y = 0

[State var]
type = varset
trigger1 = time = 0
v = 17
value = 0

[state 1300,power]
type = poweradd
trigger1 = AnimElemtime(1) = 1
value = -1000

[state 200,hit]
type = hitoverride
trigger1 = (prevstateno != 8034)
trigger1 = var(50) = 0
time = -1
slot = 0
attr = sca, aa, ap
stateno = 8034

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[state 200,changeanim]
type = changeanim
trigger1 = (!time) && (anim != 1700)
value = 1700

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(1) = 0
value = 1300,0

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(1) = 25
value = 4000,0

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(1) = 26
value = 1300,1

[State 7015, 1]
type = SuperPause
trigger1 = AnimElemtime(1) = 25
anim = -1

[State 200]
type = Explod
trigger1 = AnimElemtime(1) = 25
anim = 4300
id = 4300
postype = p1
scale = 2,2
removetime = 22
ownpal = 1
ontop = 1
pos = -23,-58
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = AnimElemtime(1) = 25
anim = 4310
id = 4310
postype = p1
scale = 1.5,1.5
removetime = -2
ownpal = 1
ontop = 1
pos = -23,-58
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 1100, 1]
type = Helper
triggerall = var(43) = 0
trigger1 = AnimElemtime(1) = 26
trigger2 = AnimElemtime(1) = 38
trigger3 = AnimElemtime(1) = 50
trigger4 = AnimElemtime(1) = 62
trigger5 = AnimElemtime(1) = 74
trigger6 = AnimElemtime(1) = 86
trigger7 = AnimElemtime(1) = 98
trigger8 = AnimElemtime(1) = 110
helpertype = Normal
ID = 1310
name = "bat1" 
postype = p1
pos = -23,-72
stateno = 1310
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
triggerall = var(43) = 0
trigger1 = AnimElemtime(1) = 30
trigger2 = AnimElemtime(1) = 42
trigger3 = AnimElemtime(1) = 54
trigger4 = AnimElemtime(1) = 66
trigger5 = AnimElemtime(1) = 78
trigger6 = AnimElemtime(1) = 90
trigger7 = AnimElemtime(1) = 102
trigger8 = AnimElemtime(1) = 114
helpertype = Normal
ID = 1310
name = "bat2" 
postype = p1
pos = -23,-58
stateno = 1310
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
triggerall = var(43) = 0
trigger1 = AnimElemtime(1) = 34
trigger2 = AnimElemtime(1) = 46
trigger3 = AnimElemtime(1) = 58
trigger4 = AnimElemtime(1) = 70
trigger5 = AnimElemtime(1) = 82
trigger6 = AnimElemtime(1) = 94
trigger7 = AnimElemtime(1) = 106
trigger8 = AnimElemtime(1) = 118
helpertype = Normal
ID = 1310
name = "bat3" 
postype = p1
pos = -23,-44
stateno = 1310
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
triggerall = var(43) != 0
trigger1 = AnimElemtime(1) >= 26
trigger1 = AnimElemtime(1) <= 110
helpertype = Normal
ID = 1320
name = "bat1" 
postype = p1
pos = -23,-72
stateno = 1320
size.xscale = 1.5
size.yscale = 1.5
IgnoreHitPause = 1
Persistent = 5
ownpal = 1

[State 1100, 1]
type = Helper
triggerall = var(43) != 0
trigger1 = AnimElemtime(1) >= 30
trigger1 = AnimElemtime(1) <= 114
helpertype = Normal
ID = 1321
name = "bat2" 
facing = -1
postype = p1
pos = -18,-58
stateno = 1321
size.xscale = 1.5
size.yscale = 1.5
IgnoreHitPause = 1
Persistent = 5
ownpal = 1

[State 1100, 1]
type = Helper
triggerall = var(43) != 0
trigger1 = AnimElemtime(1) >= 34
trigger1 = AnimElemtime(1) <= 118
helpertype = Normal
ID = 1322
name = "bat3" 
postype = p1
pos = -28,-44
stateno = 1322
size.xscale = 1.5
size.yscale = 1.5
IgnoreHitPause = 1
Persistent = 5
ownpal = 1

[State 1000]
type = ChangeState
trigger1 = life = 0
value = 5150

[State 1000]
type = ChangeState
triggerall = var(32) = 0
trigger1 = var(21) = 0
trigger1 = Life <= lifemax / 2
trigger2 = var(21) = 1
trigger2 = Life = lifemax
value = 2500

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------
;コウモリ（発射）
[Statedef 1310]
type    = A
movetype= A
physics = N
juggle  = 6
anim = 1710
ctrl = 0
sprpriority = 2

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SP
damage = 17, 1
animtype = back
guardflag = MA
hitflag = MAF
fall = 1
air.fall = 1
priority = 3
pausetime = 0, 19
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = s1000,0
guardsound = s1010,0
ground.type = low 
ground.slidetime = 1
ground.hittime  = 8
ground.velocity = -1,-1
airguard.velocity = -1,-1.2
air.type = High
air.velocity = -1,-1
air.hittime = 8
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
palfx.time = 10
palfx.sinadd = 70,40,0,7
palfx.add = 120,-80,-80
guard.kill = 0

[state 195,1]
type = varrandom
trigger1 = time = 0
v = 35
range = -3,0

[State 7004]
type = Velset
trigger1 = time = 0
x = 5.5

[State 7004]
type = Velset
trigger1 = time = 0
y = 0.7+var(35)

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 1100, 1]
type = Helper
trigger1 = MoveHit = 1
helpertype = Normal
ID = 1311
name = "batkieru" 
postype = p1
pos = 0,0
stateno = 1311
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 3000]
type = HitOverride
trigger1 = time = 0
attr = SCA,AA,AP
slot = 0
stateno = 1311
time = -1

[State 7001, 3]
type = DestroySelf
trigger1 = time = 120
trigger2 = MoveHit = 1

;---------------------------------------------------------------------------
;コウモリヒットすると消滅
[Statedef 1311]
type = S
movetype = I
physics = N
velset = 0,0
anim = 4000
ctrl = 0

[State snd]
type = PlaySnd
trigger1 = time = 0
value = 1310,0

[State 7004]
type = Veladd
trigger1 = time >= 0
y = -0.08

[State 7001, 3]
type = DestroySelf
trigger1 = Animtime = 0

;---------------------------------------------------------------
;コウモリ（発射上方向）
[Statedef 1320]
type    = A
movetype= A
physics = N
juggle  = 6
anim = 1710
ctrl = 0
sprpriority = 2

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SP
damage = ceil(ifelse(P2Life <= 100,4,ifelse(P2Life <= 300,7,ifelse(P2Life <= 500,9,ifelse(P2Life <= 700,11,ifelse(P2Life <= 900,14,17)))))),1
animtype = back
guardflag = MA
hitflag = MAF
fall = 1
air.fall = 1
priority = 3
pausetime = 0, 19
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = s1000,0
guardsound = s1010,0
ground.type = low 
ground.slidetime = 1
ground.hittime  = 8
ground.velocity = -1,-1
airguard.velocity = -1,-1.2
air.type = High
air.velocity = -1,-1
air.hittime = 8
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
palfx.time = 10
palfx.sinadd = 70,40,0,7
palfx.add = 120,-80,-80
guard.kill = 0

[State 1210]
type = AngleDraw
trigger1 = 1

[State 1210]
type = AngleSet
trigger1 = time = 0
value = 90

[state 195,1]
type = varrandom
trigger1 = time = 0
v = 35
range = -4,4

[State 7004]
type = Velset
trigger1 = time = 0
x = 0.0+var(35)

[State 7004]
type = Velset
trigger1 = time = 0
y = -5.5

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 1100, 1]
type = Helper
trigger1 = MoveHit = 1
helpertype = Normal
ID = 1311
name = "batkieru" 
postype = p1
pos = 0,0
stateno = 1311
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 3000]
type = HitOverride
trigger1 = time = 0
attr = SCA,AA,AP
slot = 0
stateno = 1311
time = -1

[State 7001, 3]
type = DestroySelf
trigger1 = time = 120
trigger2 = MoveHit = 1

;---------------------------------------------------------------
;コウモリ（発射左方向）
[Statedef 1321]
type    = A
movetype= A
physics = N
juggle  = 6
anim = 1710
ctrl = 0
sprpriority = 2

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SP
damage = ceil(ifelse(P2Life <= 100,4,ifelse(P2Life <= 300,7,ifelse(P2Life <= 500,9,ifelse(P2Life <= 700,11,ifelse(P2Life <= 900,14,17)))))),1
animtype = back
guardflag = MA
hitflag = MAF
fall = 1
air.fall = 1
priority = 3
pausetime = 0, 19
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = s1000,0
guardsound = s1010,0
ground.type = low 
ground.slidetime = 1
ground.hittime  = 8
ground.velocity = -1,-1
airguard.velocity = -1,-1.2
air.type = High
air.velocity = -1,-1
air.hittime = 8
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
palfx.time = 10
palfx.sinadd = 70,40,0,7
palfx.add = 120,-80,-80
guard.kill = 0

[state 195,1]
type = varrandom
trigger1 = time = 0
v = 35
range = -3,0

[State 7004]
type = Velset
trigger1 = time = 0
x = 5.5

[State 7004]
type = Velset
trigger1 = time = 0
y = 0.7+var(35)

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 1100, 1]
type = Helper
trigger1 = MoveHit = 1
helpertype = Normal
ID = 1311
name = "batkieru" 
postype = p1
pos = 0,0
stateno = 1311
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 3000]
type = HitOverride
trigger1 = time = 0
attr = SCA,AA,AP
slot = 0
stateno = 1311
time = -1

[State 7001, 3]
type = DestroySelf
trigger1 = time = 120
trigger2 = MoveHit = 1

;---------------------------------------------------------------
;コウモリ（発射右方向）
[Statedef 1322]
type    = A
movetype= A
physics = N
juggle  = 6
anim = 1710
ctrl = 0
sprpriority = 2

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SP
damage = ceil(ifelse(P2Life <= 100,4,ifelse(P2Life <= 300,7,ifelse(P2Life <= 500,9,ifelse(P2Life <= 700,11,ifelse(P2Life <= 900,14,17)))))),1
animtype = back
guardflag = MA
hitflag = MAF
fall = 1
air.fall = 1
priority = 3
pausetime = 0, 19
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = s1000,0
guardsound = s1010,0
ground.type = low 
ground.slidetime = 1
ground.hittime  = 8
ground.velocity = -1,-1
airguard.velocity = -1,-1.2
air.type = High
air.velocity = -1,-1
air.hittime = 8
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
palfx.time = 10
palfx.sinadd = 70,40,0,7
palfx.add = 120,-80,-80
guard.kill = 0

[state 195,1]
type = varrandom
trigger1 = time = 0
v = 35
range = -3,0

[State 7004]
type = Velset
trigger1 = time = 0
x = 5.5

[State 7004]
type = Velset
trigger1 = time = 0
y = 0.7+var(35)

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 1100, 1]
type = Helper
trigger1 = MoveHit = 1
helpertype = Normal
ID = 1311
name = "batkieru" 
postype = p1
pos = 0,0
stateno = 1311
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 3000]
type = HitOverride
trigger1 = time = 0
attr = SCA,AA,AP
slot = 0
stateno = 1311
time = -1

[State 7001, 3]
type = DestroySelf
trigger1 = time = 120
trigger2 = MoveHit = 1

;---------------------------------------------------------------------------
[Statedef 8034];攻撃を受けた場合に飛ばされるステート
type = U
movetype = H
physics = U
ctrl = 0
hitdefpersist	= 0
movehitpersist	= 0
hitcountpersist	= 0

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[State 1100, 1]
type = Helper
triggerall = var(43) = 0
trigger1 = AnimElemtime(1) = 26
trigger2 = AnimElemtime(1) = 38
trigger3 = AnimElemtime(1) = 50
trigger4 = AnimElemtime(1) = 62
trigger5 = AnimElemtime(1) = 74
trigger6 = AnimElemtime(1) = 86
trigger7 = AnimElemtime(1) = 98
trigger8 = AnimElemtime(1) = 110
helpertype = Normal
ID = 1310
name = "bat1" 
postype = p1
pos = -23,-72
stateno = 1310
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
triggerall = var(43) = 0
trigger1 = AnimElemtime(1) = 30
trigger2 = AnimElemtime(1) = 42
trigger3 = AnimElemtime(1) = 54
trigger4 = AnimElemtime(1) = 66
trigger5 = AnimElemtime(1) = 78
trigger6 = AnimElemtime(1) = 90
trigger7 = AnimElemtime(1) = 102
trigger8 = AnimElemtime(1) = 114
helpertype = Normal
ID = 1310
name = "bat2" 
postype = p1
pos = -23,-58
stateno = 1310
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
triggerall = var(43) = 0
trigger1 = AnimElemtime(1) = 34
trigger2 = AnimElemtime(1) = 46
trigger3 = AnimElemtime(1) = 58
trigger4 = AnimElemtime(1) = 70
trigger5 = AnimElemtime(1) = 82
trigger6 = AnimElemtime(1) = 94
trigger7 = AnimElemtime(1) = 106
trigger8 = AnimElemtime(1) = 118
helpertype = Normal
ID = 1310
name = "bat3" 
postype = p1
pos = -23,-44
stateno = 1310
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
triggerall = var(43) != 0
trigger1 = AnimElemtime(1) >= 26
trigger1 = AnimElemtime(1) <= 110
helpertype = Normal
ID = 1320
name = "bat1" 
postype = p1
pos = -23,-72
stateno = 1320
size.xscale = 1.5
size.yscale = 1.5
IgnoreHitPause = 1
Persistent = 8
ownpal = 1

[State 1100, 1]
type = Helper
triggerall = var(43) != 0
trigger1 = AnimElemtime(1) >= 30
trigger1 = AnimElemtime(1) <= 114
helpertype = Normal
ID = 1321
name = "bat2" 
facing = -1
postype = p1
pos = -18,-58
stateno = 1321
size.xscale = 1.5
size.yscale = 1.5
IgnoreHitPause = 1
Persistent = 8
ownpal = 1

[State 1100, 1]
type = Helper
triggerall = var(43) != 0
trigger1 = AnimElemtime(1) >= 34
trigger1 = AnimElemtime(1) <= 118
helpertype = Normal
ID = 1322
name = "bat3" 
postype = p1
pos = -28,-44
stateno = 1322
size.xscale = 1.5
size.yscale = 1.5
IgnoreHitPause = 1
Persistent = 8
ownpal = 1

[State 1000]
type = ChangeState
triggerall = var(32) = 0
trigger1 = var(21) = 0
trigger1 = Life <= lifemax / 2
trigger2 = var(21) = 1
trigger2 = Life = lifemax
value = 2500

[State 2000, 1]
type = ChangeState
;trigger1 = HitShakeOver = 1
trigger1 = Time >= 1
value = 1300

[State 3]
type = posset
trigger1 = 1
y = 0

[State 2000, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------
;火柱
[Statedef 1400]
type = S
movetype = I
physics = S
velset = 0,0
ctrl = 0
poweradd = 18

[State 3]
type = posset
trigger1 = 1
y = 0

[State var]
type = varset
trigger1 = time = 0
v = 17
value = 0

[state 200,hit]
type = hitoverride
trigger1 = (prevstateno != 8035)
trigger1 = var(50) = 0
time = -1
slot = 0
attr = sca, aa, ap
stateno = 8035

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[state 200,changeanim]
type = changeanim
trigger1 = (!time) && (anim != 1950)
value = 1950

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(1) = 0
value = 1400,0

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(1) = 35
trigger2 = var(43) != 0
trigger2 = AnimElemtime(1) = 40
trigger3 = var(43) != 0
trigger3 = AnimElemtime(1) = 45
value = 3250,0
channel = 2

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(1) = 35
trigger2 = var(43) != 0
trigger2 = AnimElemtime(1) = 40
trigger3 = var(43) != 0
trigger3 = AnimElemtime(1) = 45
value = 1020,0
channel = 3

[State 1100, 1]
type = Helper
trigger1 = var(43) != 0
trigger1 = AnimElemtime(1) = 25
helpertype = Normal
ID = 1412
name = "dummyflame"
postype = p2
pos = 0,0
stateno = 1412
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = var(43) = 0
trigger1 = AnimElemtime(1) = 25
helpertype = Normal
ID = 1400
name = "fire" 
postype = p2
pos = -62,0
stateno = 1410
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = var(43) = 0
trigger1 = AnimElemtime(1) = 25
helpertype = Normal
ID = 1401
name = "fire2" 
postype = p2
pos = 62,0
stateno = 1410
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1000]
type = ChangeState
trigger1 = life = 0
value = 5150

[State 1000]
type = ChangeState
triggerall = var(32) = 0
trigger1 = var(21) = 0
trigger1 = Life <= lifemax / 2
trigger2 = var(21) = 1
trigger2 = Life = lifemax
value = 2500

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

[State 200, 7]
type = ChangeState
triggerall = numhelper(1460) = 0
triggerall = power >= 500
trigger1 = AnimElemtime(1) >= 82
trigger1 = command = "b"
value = 1450
ctrl = 1

;---------------------------------------------------------------
;火柱（ダミー）
[Statedef 1412]
type    = S
movetype= I
physics = S
anim = 560
ctrl = 0
sprpriority = 0

[State 1100, 1]
type = Helper
trigger1 = time = 0
helpertype = Normal
ID = 1400
name = "fire" 
postype = p1
pos = -62,0
stateno = 1410
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = time = 5
helpertype = Normal
ID = 1402
name = "fire3" 
postype = p1
pos = -77,0
stateno = 1410
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = time = 10
helpertype = Normal
ID = 1404
name = "fire5" 
postype = p1
pos = -92,0
stateno = 1410
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = time = 0
helpertype = Normal
ID = 1401
name = "fire2" 
postype = p1
pos = 62,0
stateno = 1410
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = time = 5
helpertype = Normal
ID = 1403
name = "fire4" 
postype = p1
pos = 77,0
stateno = 1410
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = time = 10
helpertype = Normal
ID = 1405
name = "fire6" 
postype = p1
pos = 92,0
stateno = 1410
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 7001, 3]
type = DestroySelf
trigger1 = root,anim != 1950

;---------------------------------------------------------------
;火柱（放出）
[Statedef 1410]
type    = A
movetype= A
physics = N
juggle  = 60
anim = 1900
ctrl = 0
sprpriority = 2

[State 191, 2]
type = posset
trigger1 = time = 0
y = 0

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SP
;damage = 86, 8
damage = ceil(ifelse(root,var(43) = 0,86,53))
animtype = back
guardflag = HA
hitflag = MAFD
fall = 1
air.fall = 1
priority = 3
pausetime = 0, 5
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,-50
hitsound = s1000,0
guardsound = s1010,0
ground.type = low 
ground.slidetime = 3
ground.hittime  = 10
ground.velocity = -3.6,-4.8
airguard.velocity = -1.1,-2.9
air.type = High
air.velocity = -3.4,-4.5
air.hittime = 10
down.velocity = 8,-0.6
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
palfx.time = 12
palfx.sinadd = 140,50,-40,7
palfx.add = 50,-40,-130
getpower = 47,47
;guard.kill = 0

[State 200]
type = Explod
trigger1 = time = 10
anim = 4000
id = 4000
postype = p1
scale = 1.5,1.5
accel = 0,-.17
removetime = -2
ownpal = 1
pos = 0, 0
sprpriority = 5
ontop = 1

[State 200]
type = Explod
trigger1 = time = 20
trigger2 = time = 23
trigger3 = time = 26
trigger4 = time = 29
trigger5 = time = 32
trigger6 = time = 35
trigger7 = time = 38
trigger8 = time = 41
trigger9 = time = 44
trigger10 = time = 47
trigger11 = time = 50
trigger12 = time = 53
anim = 227
id = 227
postype = p1
scale = 1.5,1.5
accel = 0,-.17
removetime = -2
ownpal = 1
pos = 0, -40
random = 24, 73
sprpriority = 5
ontop = 1

[State 200]
type = Explod
trigger1 = MoveHit = 1
trigger2 = MoveHit = 3
trigger3 = MoveHit = 5
trigger4 = MoveHit = 7
trigger5 = MoveHit = 9
trigger6 = MoveHit = 12
trigger7 = MoveHit = 15
trigger8 = MoveHit = 18
trigger9 = MoveHit = 21
trigger10 = MoveHit = 25
anim = 216
id = 216
postype = p2
scale = 1.5,1.5
accel = 0,-.17
random = 60,80
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 2000, 1]
type = ChangeState
trigger1 = Time = 56
value = 1411

;---------------------------------------------------------------------------
;火柱消える
[Statedef 1411]
type = S
movetype = I
physics = N
velset = 0,0
anim = 1901
ctrl = 0

[State 7001, 3]
type = DestroySelf
trigger1 = Animtime = 0

;---------------------------------------------------------------------------
[Statedef 8035];攻撃を受けた場合に飛ばされるステート
type = U
movetype = H
physics = U
ctrl = 0
hitdefpersist	= 0
movehitpersist	= 0
hitcountpersist	= 0

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(1) = 0
value = 1400,0

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(1) = 35
trigger2 = var(43) != 0
trigger2 = AnimElemtime(1) = 40
trigger3 = var(43) != 0
trigger3 = AnimElemtime(1) = 45
value = 3250,0
channel = 2

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(1) = 35
trigger2 = var(43) != 0
trigger2 = AnimElemtime(1) = 40
trigger3 = var(43) != 0
trigger3 = AnimElemtime(1) = 45
value = 1020,0
channel = 3

[State 1100, 1]
type = Helper
trigger1 = var(43) != 0
trigger1 = AnimElemtime(1) = 25
helpertype = Normal
ID = 1412
name = "dummyflame"
postype = p2
pos = 0,0
stateno = 1412
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = var(43) = 0
trigger1 = AnimElemtime(1) = 25
helpertype = Normal
ID = 1400
name = "fire" 
postype = p2
pos = -62,0
stateno = 1410
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = var(43) = 0
trigger1 = AnimElemtime(1) = 25
helpertype = Normal
ID = 1401
name = "fire2" 
postype = p2
pos = 62,0
stateno = 1410
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1000]
type = ChangeState
triggerall = var(32) = 0
trigger1 = var(21) = 0
trigger1 = Life <= lifemax / 2
trigger2 = var(21) = 1
trigger2 = Life = lifemax
value = 2500

[State 2000, 1]
type = ChangeState
;trigger1 = HitShakeOver = 1
trigger1 = Time >= 1
value = 1400

[State 3]
type = posset
trigger1 = 1
y = 0

[State 2000, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------
;大火柱（フォースブレイク？ｗ）
[Statedef 1450]
type = S
movetype = I
physics = S
velset = 0,0
ctrl = 0
poweradd = 8

[State 3]
type = posset
trigger1 = 1
y = 0

[State var]
type = varset
trigger1 = time = 0
v = 17
value = 0

[state 1300,power]
type = poweradd
trigger1 = AnimElemtime(1) = 1
value = -500

[state 200,hit]
type = hitoverride
trigger1 = (prevstateno != 8036)
trigger1 = var(50) = 0
time = -1
slot = 0
attr = sca, aa, ap
stateno = 8036

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[state 200,changeanim]
type = changeanim
trigger1 = (!time) && (anim != 1951)
value = 1951

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(1) = 0
value = 4000,0

[State 200]
type = Explod
trigger1 = AnimElemtime(1) = 0
anim = 4300
id = 4300
postype = p1
scale = 2,2
removetime = 18
ownpal = 1
ontop = 1
pos = 0,-70
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = AnimElemtime(1) = 0
anim = 4310
id = 4310
postype = p1
scale = 1.5,1.5
removetime = -2
ownpal = 1
ontop = 1
pos = 0,-70
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(1) = 20
value = 1400,1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(1) = 20
helpertype = Normal
ID = 1460
name = "fire" 
postype = p2
pos = 0,0
stateno = 1460
size.xscale = 2
size.yscale = 1.8
ownpal = 1

[State 1000]
type = ChangeState
trigger1 = life = 0
value = 5150

[State 1000]
type = ChangeState
triggerall = var(32) = 0
trigger1 = var(21) = 0
trigger1 = Life <= lifemax / 2
trigger2 = var(21) = 1
trigger2 = Life = lifemax
value = 2500

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------
;大火柱（放出）
[Statedef 1460]
type    = A
movetype= A
physics = N
juggle  = 60
anim = 1910
ctrl = 0
sprpriority = 2

[State snd]
type = PlaySnd
trigger1 = time = 10
value = 5150,1

[State snd]
type = PlaySnd
trigger1 = time = 10
value = 1020,0

[State snd]
type = PlaySnd
trigger1 = time = 10
value = 1410,0

[State 191, 2]
type = posset
trigger1 = time = 0
y = 0

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
trigger2 = AnimElem = 8
attr = S, SP
damage = 154, 18
animtype = back
guardflag = HA
hitflag = MAFD-
fall = 1
air.fall = 1
priority = 3
pausetime = 0, 14
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,-50
hitsound = s1000,0
guardsound = s1010,0
ground.type = low 
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -5.8,-8.5
airguard.velocity = -2.6,-3.4
air.type = High
air.velocity = -5.2,-8
air.hittime = 12
down.velocity = 10,-0.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
palfx.time = 28
palfx.sinadd = 140,50,-40,7
palfx.add = 50,-40,-130
getpower = 11,11
guard.kill = 0

[State 200]
type = Explod
trigger1 = time = 10
trigger2 = time = 11
trigger3 = time = 12
trigger4 = time = 13
anim = 4000
id = 4000
postype = p1
scale = 1.5,1.5
accel = 0,-.17
removetime = -2
ownpal = 1
pos = 0, 0
random = 24,12
sprpriority = 5
ontop = 1

[State 200]
type = Explod
trigger1 = time = 20
trigger2 = time = 23
trigger3 = time = 26
trigger4 = time = 29
trigger5 = time = 32
trigger6 = time = 35
trigger7 = time = 38
trigger8 = time = 41
trigger9 = time = 44
trigger10 = time = 47
trigger11 = time = 50
trigger12 = time = 53
trigger13 = time = 56
trigger14 = time = 59
trigger15 = time = 62
trigger16 = time = 65
trigger17 = time = 68
trigger18 = time = 71
trigger19 = time = 74
trigger20 = time = 77
trigger21 = time = 80
trigger22 = time = 83
trigger23 = time = 86
trigger24 = time = 89
anim = 227
id = 227
postype = p1
scale = 1.5,1.5
accel = 0,-.17
removetime = -2
ownpal = 1
pos = 0, -70
random = 40, 178
sprpriority = 5
ontop = 1

[State 200]
type = Explod
trigger1 = MoveHit = 1
trigger2 = MoveHit = 3
trigger3 = MoveHit = 5
trigger4 = MoveHit = 7
trigger5 = MoveHit = 9
trigger6 = MoveHit = 12
trigger7 = MoveHit = 15
trigger8 = MoveHit = 18
trigger9 = MoveHit = 21
trigger10 = MoveHit = 25
anim = 216
id = 216
postype = p2
scale = 1.5,1.5
accel = 0,-.17
random = 60,80
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 2000, 1]
type = ChangeState
trigger1 = root,var(43) = 0
trigger1 = Time = 100
trigger2 = root,var(43) != 0
trigger2 = Time = 160
value = 1461

;---------------------------------------------------------------------------
;大火柱消える
[Statedef 1461]
type = S
movetype = I
physics = N
velset = 0,0
anim = 1911
ctrl = 0

[State 7001, 3]
type = DestroySelf
trigger1 = Animtime = 0

;---------------------------------------------------------------------------
[Statedef 8036];攻撃を受けた場合に飛ばされるステート
type = U
movetype = H
physics = U
ctrl = 0
hitdefpersist	= 0
movehitpersist	= 0
hitcountpersist	= 0

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(1) = 0
value = 4000,0

[State 200]
type = Explod
trigger1 = AnimElemtime(1) = 0
anim = 4300
id = 4300
postype = p1
scale = 2,2
removetime = 18
ownpal = 1
ontop = 1
pos = 0,-70
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = AnimElemtime(1) = 0
anim = 4310
id = 4310
postype = p1
scale = 1.5,1.5
removetime = -2
ownpal = 1
ontop = 1
pos = 0,-70
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(1) = 20
value = 1400,1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(1) = 20
helpertype = Normal
ID = 1460
name = "fire" 
postype = p2
pos = 0,0
stateno = 1460
size.xscale = 2
size.yscale = 1.8
ownpal = 1

[State 1000]
type = ChangeState
triggerall = var(32) = 0
trigger1 = var(21) = 0
trigger1 = Life <= lifemax / 2
trigger2 = var(21) = 1
trigger2 = Life = lifemax
value = 2500

[State 2000, 1]
type = ChangeState
;trigger1 = HitShakeOver = 1
trigger1 = Time >= 1
value = 1450

[State 3]
type = posset
trigger1 = 1
y = 0

[State 2000, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------
;火走り
[Statedef 1500]
type = S
movetype = I
physics = S
velset = 0,0
ctrl = 0

[State 3]
type = posset
trigger1 = 1
y = 0

[State var]
type = varset
trigger1 = time = 0
v = 17
value = 0

[state 1300,power]
type = poweradd
trigger1 = AnimElemtime(1) = 1
value = -1000

[state 200,hit]
type = hitoverride
trigger1 = (prevstateno != 8037)
trigger1 = var(50) = 0
time = -1
slot = 0
attr = sca, aa, ap
stateno = 8037

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[state 200,changeanim]
type = changeanim
trigger1 = (!time) && (anim != 2200)
value = 2200

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(1) = 26
value = 4000,0

[State 7015, 1]
type = SuperPause
trigger1 = AnimElemtime(1) = 26
time = 30
movetime = 30
anim = -1
darken = 1

[State 200]
type = Explod
trigger1 = AnimElemtime(1) = 26
anim = 4300
id = 4300
postype = p1
scale = 2,2
removetime = 18
ownpal = 1
ontop = 1
pos = 0,-70
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = AnimElemtime(1) = 26
anim = 4310
id = 4310
postype = p1
scale = 1.5,1.5
removetime = -2
ownpal = 1
ontop = 1
pos = 0,-70
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(1) = 0
value = 1300,0

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(1) = 48
value = 191,0

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(1) = 48
helpertype = Normal
ID = 1500
name = "fire"
postype = p1
pos = 24,0
stateno = 1510
size.xscale = 1.5
size.yscale = 1.5
supermovetime = 999999999
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(1) = 51
helpertype = Normal
ID = 1500
name = "fire"
postype = p1
pos = 36,0
stateno = 1510
size.xscale = 1.5
size.yscale = 1.6
supermovetime = 999999999
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(1) = 54
helpertype = Normal
ID = 1500
name = "fire"
postype = p1
pos = 48,0
stateno = 1510
size.xscale = 1.5
size.yscale = 1.7
supermovetime = 999999999
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(1) = 57
helpertype = Normal
ID = 1500
name = "fire"
postype = p1
pos = 60,0
stateno = 1510
size.xscale = 1.5
size.yscale = 1.8
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(1) = 60
helpertype = Normal
ID = 1500
name = "fire"
postype = p1
pos = 72,0
stateno = 1510
size.xscale = 1.5
size.yscale = 1.9
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(1) = 63
helpertype = Normal
ID = 1500
name = "fire"
postype = p1
pos = 84,0
stateno = 1510
size.xscale = 1.5
size.yscale = 2.0
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(1) = 66
helpertype = Normal
ID = 1500
name = "fire"
postype = p1
pos = 96,0
stateno = 1510
size.xscale = 1.5
size.yscale = 2.1
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(1) = 69
helpertype = Normal
ID = 1500
name = "fire"
postype = p1
pos = 108,0
stateno = 1510
size.xscale = 1.5
size.yscale = 2.2
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(1) = 72
helpertype = Normal
ID = 1500
name = "fire"
postype = p1
pos = 120,0
stateno = 1510
size.xscale = 1.5
size.yscale = 2.3
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(1) = 75
helpertype = Normal
ID = 1500
name = "fire"
postype = p1
pos = 132,0
stateno = 1510
size.xscale = 1.5
size.yscale = 2.4
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(1) = 78
helpertype = Normal
ID = 1500
name = "fire"
postype = p1
pos = 144,0
stateno = 1510
size.xscale = 1.5
size.yscale = 2.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(1) = 81
helpertype = Normal
ID = 1500
name = "fire"
postype = p1
pos = 156,0
stateno = 1510
size.xscale = 1.5
size.yscale = 2.6
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(1) = 84
helpertype = Normal
ID = 1500
name = "fire"
postype = p1
pos = 168,0
stateno = 1510
size.xscale = 1.5
size.yscale = 2.7
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(1) = 87
helpertype = Normal
ID = 1500
name = "fire"
postype = p1
pos = 180,0
stateno = 1510
size.xscale = 1.5
size.yscale = 2.8
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(1) = 90
helpertype = Normal
ID = 1500
name = "fire"
postype = p1
pos = 192,0
stateno = 1510
size.xscale = 1.5
size.yscale = 2.9
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(1) = 93
helpertype = Normal
ID = 1500
name = "fire"
postype = p1
pos = 204,0
stateno = 1510
size.xscale = 1.5
size.yscale = 3.0
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(1) = 96
helpertype = Normal
ID = 1500
name = "fire"
postype = p1
pos = 216,0
stateno = 1510
size.xscale = 1.5
size.yscale = 3.1
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(1) = 99
helpertype = Normal
ID = 1500
name = "fire"
postype = p1
pos = 228,0
stateno = 1510
size.xscale = 1.5
size.yscale = 3.2
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(1) = 102
helpertype = Normal
ID = 1500
name = "fire"
postype = p1
pos = 240,0
stateno = 1510
size.xscale = 1.5
size.yscale = 3.3
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(1) = 105
helpertype = Normal
ID = 1500
name = "fire"
postype = p1
pos = 252,0
stateno = 1510
size.xscale = 1.5
size.yscale = 3.4
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(1) = 108
helpertype = Normal
ID = 1500
name = "fire"
postype = p1
pos = 264,0
stateno = 1510
size.xscale = 1.5
size.yscale = 3.5
ownpal = 1

[State 1000]
type = ChangeState
trigger1 = life = 0
value = 5150

[State 1000]
type = ChangeState
triggerall = var(32) = 0
trigger1 = var(21) = 0
trigger1 = Life <= lifemax / 2
trigger2 = var(21) = 1
trigger2 = Life = lifemax
value = 2500

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------
;火柱（放出）
[Statedef 1510]
type    = S
movetype= A
physics = N
juggle  = 60
anim = 2210
ctrl = 0
sprpriority = 2

[State snd]
type = PlaySnd
trigger1 = time = 2
value = 5150,1
channel = 0

[State snd]
type = PlaySnd
trigger1 = time = 4
value = 1020,0
channel = 0

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
attr = S, HP
damage = 19, 6
animtype = back
guardflag = HA
hitflag = MAF
fall = 1
air.fall = 1
priority = 3
pausetime = 0, 2
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,-50
hitsound = s1000,0
guardsound = s1010,0
ground.type = low 
ground.slidetime = 6
ground.hittime  = 8
ground.velocity = -7.8,-4.4
airguard.velocity = -1.0,-0.8
air.type = High
air.velocity = -7.8,-4.4
air.hittime = 8
down.velocity = 12,-0.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
palfx.time = 24
palfx.sinadd = 140,50,-40,7
palfx.add = 50,-40,-130
getpower = 11,11

[State 200]
type = Explod
trigger1 = time = 2
trigger2 = time = 3
trigger3 = time = 4
trigger4 = time = 5
anim = 4000
id = 4000
postype = p1
scale = 1.5,1.5
accel = 0,-.17
removetime = -2
ownpal = 1
pos = 0, 0
random = 24,12
sprpriority = 5
ontop = 1

[State 200]
type = Explod
trigger1 = time = 7
trigger2 = time = 10
trigger3 = time = 12
trigger4 = time = 14
trigger5 = time = 16
trigger6 = time = 18
anim = 227
id = 227
postype = p1
scale = 1.5,1.5
accel = 0,-.17
removetime = -2
ownpal = 1
pos = 0, -50
random = 24, 88
sprpriority = 5
ontop = 1

[State 200]
type = Explod
trigger1 = MoveHit = 1
trigger2 = MoveHit = 3
trigger3 = MoveHit = 5
trigger4 = MoveHit = 7
trigger5 = MoveHit = 9
trigger6 = MoveHit = 12
trigger7 = MoveHit = 15
trigger8 = MoveHit = 18
trigger9 = MoveHit = 21
trigger10 = MoveHit = 25
anim = 216
id = 216
postype = p2
scale = 1.5,1.5
accel = 0,-.17
random = 60,80
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 2000, 1]
type = ChangeState
trigger1 = Time = 18
value = 1511

;---------------------------------------------------------------------------
;火柱消える
[Statedef 1511]
type = S
movetype = I
physics = N
velset = 0,0
anim = 2211
ctrl = 0

[State 7001, 3]
type = DestroySelf
trigger1 = Animtime = 0

;---------------------------------------------------------------------------
[Statedef 8037];攻撃を受けた場合に飛ばされるステート
type = U
movetype = H
physics = U
ctrl = 0
hitdefpersist	= 0
movehitpersist	= 0
hitcountpersist	= 0

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[State 1000]
type = ChangeState
triggerall = var(32) = 0
trigger1 = var(21) = 0
trigger1 = Life <= lifemax / 2
trigger2 = var(21) = 1
trigger2 = Life = lifemax
value = 2500

[State 2000, 1]
type = ChangeState
;trigger1 = HitShakeOver = 1
trigger1 = Time >= 1
value = 1500

[State 3]
type = posset
trigger1 = 1
y = 0

[State 2000, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------
;ソウルスティール
[Statedef 1600]
type = S
movetype = I
physics = N
velset = 0,0
ctrl = 0
poweradd = 20

[state 200,changeanim]
type = changeanim
trigger1 = (!time) && (anim != 1601)
value = 1601

[state 1300,power]
type = poweradd
trigger1 = var(54) != 30
trigger1 = AnimElemtime(1) = 0
value = -2000

[state 1300,power]
type = poweradd
trigger1 = var(54) = 30
trigger1 = AnimElemtime(1) = 0
value = -1000

[State 3]
type = posset
trigger1 = 1
y = 0

[State var]
type = varset
trigger1 = time = 0
v = 17
value = 0

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(1) = 1
value = 605,0
volume = -80

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(1) = 1
value = 1600,4
volume = -130

[State 1,ex]
type = Explod
trigger1 = time = [1,39]
trigger1 = time%7 = 0
anim = 605
id = 605
postype = p1
scale = 2,2
vel = 0.5,-1.9
facing = -1
removetime = -2
ownpal = 1
ontop = 1
pos = 5,-75
random = 30,60
sprpriority = 10

[State 1,ex]
type = Explod
trigger1 = time = [1,37]
trigger1 = time%4 = 0
anim = 606
id = 606
postype = p1
scale = 2,2
vel = -0.3,-2.1
facing = 1
removetime = -2
ownpal = 1
ontop = 1
pos = -6,-75
random = 36,70
sprpriority = 10

[State 1,ex]
type = Explod
trigger1 = time = [1,35]
trigger1 = time%8 = 0
anim = 607
id = 607
postype = p1
scale = 1.5,1.5
vel = 0.3,-2.3
facing = 1
removetime = -2
ownpal = 1
ontop = 1
pos = 8,-55
random = 26,50
sprpriority = 10

[State 1,ex]
type = Explod
trigger1 = time = [1,32]
trigger1 = time%5 = 0
anim = 605
id = 605
postype = p1
scale = 2,2
vel = -0.5,-2.4
facing = 1
removetime = -2
ownpal = 1
ontop = 1
pos = -4,-20
random = 27,38
sprpriority = 10

[State 1,ex]
type = Explod
trigger1 = time = [1,34]
trigger1 = time%6 = 0
anim = 606
id = 606
postype = p1
scale = 2,2
vel = 0.4,-1.9
facing = -1
removetime = -2
ownpal = 1
ontop = 1
pos = 4,-32
random = 34,45
sprpriority = 10

[state 195,1]
type = varrandom
trigger1 = 1
v = 26
range = 0,17

[state 195,1]
type = varrandom
trigger1 = 1
v = 27
range = -14,-110

[state 195,1]
type = varrandom
trigger1 = 1
v = 28
range = -17,0

[State 1100, 1]
type = Helper
trigger1 = time = [10,46]
trigger1 = time%2 = 0
helpertype = Normal
ID = 1610
name = "bat1"
postype = p1
pos = 0+var(26),-7+var(27)
stateno = 1610
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = time = [10,46]
trigger1 = time%2 = 0
helpertype = Normal
ID = 1611
name = "bat2"
postype = p1
pos = 0+var(28),-7+var(27)
stateno = 1611
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = time = 10
helpertype = Normal
ID = 1615
name = "batsoul"
postype = p1
pos = 0,-60
stateno = 1615
size.xscale = 2
size.yscale = 2
ownpal = 1

[State 1615, sts]
type = StateTypeSet
trigger1 = time = 72
movetype = A

[State 1615, sts]
type = StateTypeSet
trigger1 = time = 102
movetype = I

[State 200, 1]
type = HitDef
trigger1 = var(43) = 0
trigger1 = AnimElem = 1
attr = S, HT
damage = 10,1
animtype = Light
hitflag = MAFD
priority = 87, miss
pausetime = 0,15
sparkno = S1500
guard.sparkno = S1500
sparkxy = -10,-60
hitsound = s610,0
guardsound = s1010,0
ground.type = light
ground.slidetime = 5
ground.hittime  = 1
ground.velocity = 0,0
airguard.velocity = 0,0
air.type = light
air.velocity = 0,0
air.hittime = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
hitonce = 1
getpower = 0,0
palfx.time = 10
palfx.sinadd = 70,40,0,7
palfx.add = 120,-80,-80
fall.recover = 0
p1facing = 1
p2facing = 1
p1stateno = 1620
p2stateno = 1670
ID = 1670
sprpriority = -1
fall = 1
air.fall = 1
kill = 0
guard.kill = 0

[State 200, 1]
type = HitDef
trigger1 = var(43) != 0
trigger1 = AnimElem = 1
attr = S, HT
damage = 10,1
animtype = Light
hitflag = MAFD
priority = 87, miss
pausetime = 0,15
sparkno = S1500
guard.sparkno = S1500
sparkxy = -10,-60
hitsound = s610,0
guardsound = s1010,0
ground.type = light
ground.slidetime = 5
ground.hittime  = 1
ground.velocity = 0,0
airguard.velocity = 0,0
air.type = light
air.velocity = 0,0
air.hittime = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
hitonce = 1
getpower = 0,0
palfx.time = 10
palfx.sinadd = 70,40,0,7
palfx.add = 120,-80,-80
fall.recover = 0
p1facing = 1
p2facing = 1
p1stateno = 1620
p2stateno = 1671
ID = 1670
sprpriority = -1
fall = 1
air.fall = 1
kill = 0
guard.kill = 0

[State velset]
type = veladd
trigger1 = vel x <= 13
trigger1 = AnimElemtime(13) >= 48
trigger1 = AnimElemtime(13) < 60
x = 2

[State velset]
type = velset
trigger1 = AnimElemtime(13) = 60
x = 0

[State turn]
type = turn
triggerall = roundstate = 2
triggerall = P2Dist x <= 0
trigger1 = var(43) = 0
trigger1 = AnimElemtime(13) >= 59
trigger2 = var(43) != 0
trigger2 = AnimElemtime(13) <= 59

[State pal]
type = PalFX
trigger1 = AnimElemtime(1) = 1
palcolor = 1
add = 0,0,0
sinadd = -256,-256,-256,400
time = 150

[State 200, 7]
type = ChangeState
trigger1 = AnimElemtime(13) = 76
value = 1601
ctrl = 1

;---------------------------------------------------------------
;ソウルスティール(蝙蝠飛び散りヘルパー)
[Statedef 1610]
type = A
movetype = I
physics = N
Anim = 1610
sprpriority = 2

[state 195,1]
type = varrandom
trigger1 = time = 0
v = 24
range = 1,5

[state 195,1]
type = varrandom
trigger1 = time = 0
v = 25
range = 0,-7

[State 2]
type = velset
trigger1 = time = 10
x = var(24)
y = var(25)

[State 7001, 3]
type = DestroySelf
trigger1 = animtime = 0

;---------------------------------------------------------------
;ソウルスティール(蝙蝠飛び散りヘルパー)
[Statedef 1611]
type = A
movetype = I
physics = N
Anim = 1611
sprpriority = 2

[state 195,1]
type = varrandom
trigger1 = time = 0
v = 24
range = -1,-5

[state 195,1]
type = varrandom
trigger1 = time = 0
v = 25
range = 0,-7

[State 2]
type = velset
trigger1 = time = 10
x = var(24)
y = var(25)

[State 7001, 3]
type = DestroySelf
trigger1 = animtime = 0

;---------------------------------------------------------------
;ソウルスティール(攻撃判定ヘルパー)
[Statedef 1615]
type = A
movetype = I
physics = N
Anim = 1615
sprpriority = 1

[State 1615, vars]
type = varset
trigger1 = time <= 54
fvar(25) = rootdist x

[State 1615, vars]
type = varset
trigger1 = time >= 55
fvar(25) = rootdist x

[State 1615, vels]
type = velset
trigger1 = 1
x = fvar(25)

[State turn]
type = turn
trigger1 = roundstate = 2
trigger1 = P2Dist x <= 0
trigger1 = time >= 54

[State pal]
type = PalFX
trigger1 = time = 97
palcolor = 1
add = 0,0,0
sinadd = -256,-256,-256,200
time = 150

[State 200, 7]
type = ChangeState
trigger1 = movehit = 1
value = 1616

[State 3000, 7]
type = ChangeState
trigger1 = root,stateno = 1620
value = 1616

[State 7001, 3]
type = DestroySelf
trigger1 = time = 120

;---------------------------------------------------------------
;ソウルスティール(蝙蝠相手にヒット)
[Statedef 1616]
type = A
movetype = I
physics = N
Anim = 1616
velset = 0,0
sprpriority = 1

[State velset]
type = velset
trigger1 = time = 0
x = 2

[State velset]
type = velset
trigger1 = time = 4
x = 0

[State pal]
type = PalFX
trigger1 = time = 0
palcolor = 1
add = 0,0,0
sinadd = -256,-256,-256,400
time = 150

[State 7001, 3]
type = DestroySelf
trigger1 = time = 45

;---------------------------------------------------------------
;ソウルスティール(本体移動ストップ)
[Statedef 1620]
type = S
movetype = I
physics = N
velset = 0,0
ctrl = 0

[state 200,changeanim]
type = changeanim
trigger1 = (!time) && (anim != 601)
value = 601

[State 3]
type = posset
trigger1 = 1
y = 0

[State tb, 1]
type = TargetBind
trigger1 = 1
pos = 36, 0
ID = 1670

[State pal]
type = PalFX
trigger1 = AnimElemtime(2) = 0
palcolor = 1
add = -256,-256,-256
sinadd = 256,256,256,250
time = 66

[State snd]
type = PlaySnd
trigger1 = time = 30
value = 1600,0

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(1) = 0
value = 605,1

[state 195,1]
type = varrandom
trigger1 = 1
v = 26
range = 0,-180

[state 195,1]
type = varrandom
trigger1 = 1
v = 27
range = -150,-20

[state 195,1]
type = varrandom
trigger1 = 1
v = 28
range = 0,180

[State 1100, 1]
type = Helper
trigger1 = time = [0,20]
trigger1 = time%2 = 0
helpertype = Normal
ID = 1630
name = "bat1"
postype = p1
pos = 0+var(26),0+var(27)
stateno = 1630
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = time = [0,20]
trigger1 = time%2 = 0
helpertype = Normal
ID = 1631
name = "bat2"
postype = p1
pos = 0+var(28),0+var(27)
stateno = 1631
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1,ex]
type = Explod
trigger1 = time = [0,39]
trigger1 = time%7 = 0
anim = 605
id = 605
postype = p1
scale = 2,2
vel = -0.5,1.9
facing = -1
removetime = -2
ownpal = 1
ontop = 1
pos = 24,-145
random = 19,40
sprpriority = 10

[State 1,ex]
type = Explod
trigger1 = time = [0,37]
trigger1 = time%4 = 0
anim = 606
id = 606
postype = p1
scale = 2,2
vel = 0.3,2.1
facing = 1
removetime = -2
ownpal = 1
ontop = 1
pos = -23,-137
random = 18,45
sprpriority = 10

[State 1,ex]
type = Explod
trigger1 = time = [0,35]
trigger1 = time%8 = 0
anim = 607
id = 607
postype = p1
scale = 1.5,1.5
vel = -0.3,2.3
facing = 1
removetime = -2
ownpal = 1
ontop = 1
pos = 22,-150
random = 17,36
sprpriority = 10

[State 1,ex]
type = Explod
trigger1 = time = [0,32]
trigger1 = time%5 = 0
anim = 605
id = 605
postype = p1
scale = 2,2
vel = 0.5,2.4
facing = 1
removetime = -2
ownpal = 1
ontop = 1
pos = -20,-90
random = 18,37
sprpriority = 10

[State 1,ex]
type = Explod
trigger1 = time = [0,34]
trigger1 = time%6 = 0
anim = 606
id = 606
postype = p1
scale = 2,2
vel = -0.4,1.9
facing = -1
removetime = -2
ownpal = 1
ontop = 1
pos = 18,-80
random = 14,33
sprpriority = 10

[State turn]
type = turn
trigger1 = roundstate = 2
trigger1 = P2Dist x <= 0
trigger1 = AnimElemtime(1) >= 0

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 1650
ctrl = 0

;---------------------------------------------------------------
;ソウルスティール(本体その命絞り取る)
[Statedef 1650]
type = S
movetype = I
physics = N
velset = 0,0
ctrl = 0

[state 200,changeanim]
type = changeanim
trigger1 = var(43) = 0
trigger1 = (!time) && (anim != 1650)
value = 1650

[state 200,changeanim]
type = changeanim
trigger1 = var(43) != 0
trigger1 = (!time) && (anim != 1651)
value = 1651

[State snd]
type = PlaySnd
trigger1 = time = 50
value = 1600,1

[State snd]
type = PlaySnd
trigger1 = time = 170
trigger2 = time = 205
trigger3 = time = 240
trigger4 = var(43) != 0
trigger4 = time = 275
value = 1600,2
channel = 1

[State snd]
type = PlaySnd
trigger1 = var(43) = 0
trigger1 = time = 288
trigger2 = var(43) != 0
trigger2 = time = 318
value = 1600,3

[State width]
type = width
trigger1 = time = 0
edge = 37,45

[State tb, 1]
type = TargetBind
trigger1 = AnimElem = 2
pos = 36, -84
ID = 1670

[State tb, 1]
type = TargetBind
trigger1 = AnimElem = 3
pos = 40, -104
ID = 1670

[State tb, 1]
type = TargetBind
trigger1 = AnimElem = 4
pos = 36, -124
ID = 1670

[State tb, 1]
type = TargetBind
trigger1 = AnimElem = 5
pos = 31, -20
ID = 1670

[State tb, 1]
type = null;TargetBind
trigger1 = AnimElem = 2
pos = 36, -15
ID = 1670

[State tb, 1]
type = null;TargetBind
trigger1 = AnimElem = 3
pos = 38, -24
ID = 1670

[State tb, 1]
type = null;TargetBind
trigger1 = AnimElem = 4
pos = 29, -44
ID = 1670

[State hitadd]
type = hitadd
trigger1 = time = 205
trigger2 = time = 240
trigger3 = var(43) != 0
trigger3 = time = 275
value = 1

[State tlifeadd, 1]
type = TargetLifeAdd
trigger1 = time = 170
trigger2 = time = 205
trigger3 = time = 240
trigger4 = var(43) != 0
trigger4 = time = 275
value = (-80 * Const(data.attack) / 100); - (ifelse(var(43) = 0,0,20))
ID = 1670
kill = 1
absolute = 1

[State lifeadd, 1]
type = lifeadd
triggerall = p2life >= 1
trigger1 = time = 171
trigger2 = time = 206
trigger3 = time = 241
trigger4 = var(43) != 0
trigger4 = time = 276
value = (80 * Const(data.attack) / 100); + (ifelse(var(43) = 1,0,20))

[State poweradd, 1]
type = poweradd
triggerall = p2life >= 1
trigger1 = time = 171
trigger2 = time = 206
trigger3 = time = 241
trigger4 = var(43) != 0
trigger4 = time = 276
value = (80 * Const(data.attack) / 100); + (ifelse(var(43) = 1,0,20))

[State 1,ex]
type = Explod
trigger1 = time = 170
trigger2 = time = 172
trigger3 = time = 205
trigger4 = time = 207
trigger5 = time = 240
trigger6 = time = 242
trigger7 = var(43) != 0
trigger7 = time = 275
trigger8 = var(43) != 0
trigger8 = time = 277
anim = 1550
id = 1550
postype = p1
scale = 0.7,0.7
facing = 1
removetime = -2
ownpal = 1
ontop = 1
pos = 39,-113
random = 11,13
sprpriority = 20

[State 1,ex]
type = Explod
trigger1 = time = 170
trigger2 = time = 172
trigger3 = time = 205
trigger4 = time = 207
trigger5 = time = 240
trigger6 = time = 242
trigger7 = var(43) != 0
trigger7 = time = 275
trigger8 = var(43) != 0
trigger8 = time = 277
anim = 1550
id = 1550
postype = p1
scale = 0.7,0.7
facing = -1
removetime = -2
ownpal = 1
ontop = 1
pos = 33,-113
random = 11,13
sprpriority = 20

[State cs]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------
;ソウルスティール(相手ヒット)
[Statedef 1670]
type = A
movetype = H
physics = N
velset = 0,0
ctrl = 0

[State ca2]
type = ChangeAnim2
Trigger1 = time = 0
value = 1670

[State ca2]
type = ChangeAnim2
Trigger1 = time = 63
Trigger2 = time = 237
Trigger3 = time = 272
Trigger4 = time = 307
value = 1671

[State ca2]
type = ChangeAnim2
Trigger1 = time = 232
Trigger2 = time = 267
Trigger3 = time = 302
value = 1672

[State -3]
type = PalFX
Trigger1 = time = 232
Trigger2 = time = 267
Trigger3 = time = 302
time = 8
add = 150,-80,-80
sinadd = 90,40,0,3

[State poweradd, 1]
type = poweradd
triggerall = life >= 1
Trigger1 = time = 233
Trigger2 = time = 268
Trigger3 = time = 303
value = -80

[State ca2]
type = posset
Trigger1 = time = 0
y = 0

[State hfs, *]
type = HitFallSet
trigger1 = 1
value = 1

[State nhb]
type = NotHitBy
trigger1 = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP

[State pp]
type = PlayerPush
trigger1 = 1
value = 0

[State sb]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State snd]
type = playsnd
triggerall = life <= 0
Trigger1 = time = 232
Trigger2 = time = 267
Trigger3 = time = 302
value = 11,0
channel = 0

[State cs]
type = ChangeState
trigger1 = alive = 1
trigger1 = time = 350
value = 1680
ctrl = 0

[State cs]
type = SelfState
trigger1 = alive = 0
trigger1 = time = 350
value = 5030
ctrl = 0

;---------------------------------------------------------------
;ソウルスティール(相手ヒット ハード)
[Statedef 1671]
type = A
movetype = H
physics = N
velset = 0,0
ctrl = 0

[State ca2]
type = ChangeAnim2
Trigger1 = time = 0
value = 1670

[State ca2]
type = ChangeAnim2
Trigger1 = time = 63
Trigger2 = time = 237
Trigger3 = time = 272
Trigger4 = time = 307
Trigger5 = time = 342
value = 1671

[State ca2]
type = ChangeAnim2
Trigger1 = time = 232
Trigger2 = time = 267
Trigger3 = time = 302
Trigger4 = time = 337
value = 1672

[State -3]
type = PalFX
Trigger1 = time = 232
Trigger2 = time = 267
Trigger3 = time = 302
Trigger4 = time = 337
time = 8
add = 150,-80,-80
sinadd = 90,40,0,3

[State poweradd, 1]
type = poweradd
triggerall = life >= 1
Trigger1 = time = 233
Trigger2 = time = 268
Trigger3 = time = 303
Trigger4 = time = 338
value = -80

[State ca2]
type = posset
Trigger1 = time = 0
y = 0

[State hfs, *]
type = HitFallSet
trigger1 = 1
value = 1

[State nhb]
type = NotHitBy
trigger1 = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP

[State pp]
type = PlayerPush
trigger1 = 1
value = 0

[State sb]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State snd]
type = playsnd
triggerall = life <= 0
Trigger1 = time = 232
Trigger2 = time = 267
Trigger3 = time = 302
Trigger4 = time = 337
value = 11,0
channel = 0

[State cs]
type = ChangeState
trigger1 = alive = 1
trigger1 = time = 380
value = 1680
ctrl = 0

[State cs]
type = SelfState
trigger1 = alive = 0
trigger1 = time = 380
value = 5030
ctrl = 0

;---------------------------------------------------------------
;ソウルスティール(相手空中落下中)
[Statedef 1680]
type = A
movetype = H
physics = N
velset = 0,0
ctrl = 0

[state 1680,gravity]
type = gravity
trigger1 = 1

[State ca2]
type = ChangeAnim2
Trigger1 = time = 0
value = 1680

[State 200, 1]
type = ChangeState
trigger1 = pos y >= 0 && vel y > 0
value = 1681

;---------------------------------------------------------------
;ソウルスティール(相手着地倒れ)
[Statedef 1681]
type = L
movetype = H
physics = N
velset = 0,0
ctrl = 0

[State ca2]
type = ChangeAnim2
Trigger1 = time = 0
value = 1681

[State 3]
type = posset
trigger1 = 1
y = 0

[State 3]
type = velset
trigger1 = 1
y = 0

[State cs]
type = SelfState
trigger1 = Animtime = 0
value = 5120
ctrl = 0

;---------------------------------------------------------------
;ソウルスティール(移動完了)
[Statedef 1601]
type = S
movetype = I
physics = S
velset = 0,0
ctrl = 0
poweradd = 10

[state 200,changeanim]
type = changeanim
trigger1 = (!time) && (anim != 601)
value = 601

[State pal]
type = PalFX
trigger1 = AnimElemtime(2) = 0
palcolor = 1
add = -256,-256,-256
sinadd = 256,256,256,250
time = 66

[State 3]
type = posset
trigger1 = 1
y = 0

[State var]
type = varset
trigger1 = time = 0
v = 17
value = 0

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(1) = 0
value = 605,1
;volume = -100

[state 195,1]
type = varrandom
trigger1 = 1
v = 26
range = 0,-180

[state 195,1]
type = varrandom
trigger1 = 1
v = 27
range = -150,-20

[state 195,1]
type = varrandom
trigger1 = 1
v = 28
range = 0,180

[State 1100, 1]
type = Helper
trigger1 = time = [0,20]
trigger1 = time%2 = 0
helpertype = Normal
ID = 1630
name = "bat1"
postype = p1
pos = 0+var(26),0+var(27)
stateno = 1630
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = time = [0,20]
trigger1 = time%2 = 0
helpertype = Normal
ID = 1631
name = "bat2"
postype = p1
pos = 0+var(28),0+var(27)
stateno = 1631
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1,ex]
type = Explod
trigger1 = time = [0,39]
trigger1 = time%7 = 0
anim = 605
id = 605
postype = p1
scale = 2,2
vel = -0.5,1.9
facing = -1
removetime = -2
ownpal = 1
ontop = 1
pos = 24,-145
random = 19,40
sprpriority = 10

[State 1,ex]
type = Explod
trigger1 = time = [0,37]
trigger1 = time%4 = 0
anim = 606
id = 606
postype = p1
scale = 2,2
vel = 0.3,2.1
facing = 1
removetime = -2
ownpal = 1
ontop = 1
pos = -23,-137
random = 18,45
sprpriority = 10

[State 1,ex]
type = Explod
trigger1 = time = [0,35]
trigger1 = time%8 = 0
anim = 607
id = 607
postype = p1
scale = 1.5,1.5
vel = -0.3,2.3
facing = 1
removetime = -2
ownpal = 1
ontop = 1
pos = 22,-150
random = 17,36
sprpriority = 10

[State 1,ex]
type = Explod
trigger1 = time = [0,32]
trigger1 = time%5 = 0
anim = 605
id = 605
postype = p1
scale = 2,2
vel = 0.5,2.4
facing = 1
removetime = -2
ownpal = 1
ontop = 1
pos = -20,-90
random = 18,37
sprpriority = 10

[State 1,ex]
type = Explod
trigger1 = time = [0,34]
trigger1 = time%6 = 0
anim = 606
id = 606
postype = p1
scale = 2,2
vel = -0.4,1.9
facing = -1
removetime = -2
ownpal = 1
ontop = 1
pos = 18,-80
random = 14,33
sprpriority = 10

[State turn]
type = turn
trigger1 = roundstate = 2
trigger1 = P2Dist x <= 0
trigger1 = AnimElemtime(1) >= 0

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ソウルスティール(蝙蝠集まる)
[Statedef 1630]
type = A
physics = N
anim = 1610
sprpriority = 0

[state 195,1]
type = varrandom
trigger1 = time = 0
v = 27
range = -34,-110

[state 195,1]
type = varrandom
trigger1 = time = 0
v = 28
range = 26,-26

[State end]
type = veladd
trigger1 = time >= 4
trigger1 = vel x < 6 && ParentDist x >= 3
x = 1

[State end]
type = velset
trigger1 = time >= 4
trigger1 = ParentDist x = [var(28),-var(28)]
x = 0

[State end]
type = veladd
trigger1 = time >= 4
trigger1 = vel x > -6 && ParentDist x <= -3
x = -1

[State end]
type = veladd
trigger1 = time >= 4
trigger1 = vel y < 3 && ParentDist y >= 10
y = 1

[State end]
type = velset
trigger1 = time >= 4
trigger1 = ParentDist y = [var(27),-var(27)]
y = 0

[State end]
type = veladd
trigger1 = time >= 4
trigger1 = vel y > -3 && ParentDist y <= -10
y = -1

[State 1010, 11]
type = DestroySelf
trigger1 = time >= 30
trigger2 = root,alive = 0
trigger3 = lose

;---------------------------------------------------------------------------
;ソウルスティール(蝙蝠集まる)
[Statedef 1631]
type = A
physics = N
anim = 1611
sprpriority = 0

[state 195,1]
type = varrandom
trigger1 = time = 0
v = 27
range = -30,-90

[state 195,1]
type = varrandom
trigger1 = time = 0
v = 28
range = 26,-26

[State end]
type = veladd
trigger1 = time >= 4
trigger1 = vel x < 6 && ParentDist x >= 3
x = 1

[State end]
type = velset
trigger1 = time >= 4
trigger1 = ParentDist x = [var(28),-var(28)]
x = 0

[State end]
type = veladd
trigger1 = time >= 4
trigger1 = vel x > -6 && ParentDist x <= -3
x = -1

[State end]
type = veladd
trigger1 = time >= 4
trigger1 = vel y < 3 && ParentDist y >= 10
y = 1

[State end]
type = velset
trigger1 = time >= 4
trigger1 = ParentDist y = [var(27),-var(27)]
y = 0

[State end]
type = veladd
trigger1 = time >= 4
trigger1 = vel y > -3 && ParentDist y <= -10
y = -1

[State 1010, 11]
type = DestroySelf
trigger1 = time >= 30
trigger2 = root,alive = 0
trigger3 = lose

;---------------------------------------------------------------------------
;フレイムピラー(超必)
[Statedef 1700]
type = S
movetype = I
physics = S
velset = 0,0
poweradd = 10
ctrl = 0
hitdefpersist	= 0
movehitpersist	= 0
hitcountpersist	= 0

[state 200,changeanim]
type = changeanim
trigger1 = (!time) && (anim != 2300)
value = 2300

[State 3]
type = posset
trigger1 = 1
y = 0

[State var]
type = varset
trigger1 = time = 0
v = 17
value = 0

[state 200,hit]
type = hitoverride
trigger1 = (prevstateno != 8026)
trigger1 = var(50) = 0
time = -1
slot = 0
attr = sca, aa, ap
stateno = 8026

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[state 1300,power]
type = poweradd
trigger1 = AnimElemtime(1) = 0
value = -1000

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(6) = 0
value = 330,0
channel = 0

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(5) = 0
value = 520,0

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(5) = 0
value = 4000,0

[State 7015, 1]
type = SuperPause
trigger1 = AnimElemtime(5) = 0
anim = -1

[State 200]
type = Explod
trigger1 = AnimElemtime(5) = 0
anim = 4300
id = 4300
postype = p1
scale = 2,2
removetime = 22
ownpal = 1
ontop = 1
pos = 44,-104
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = AnimElemtime(5) = 0
anim = 4310
id = 4310
postype = p1
scale = 1.5,1.5
removetime = -2
ownpal = 1
ontop = 1
pos = 44,-104
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(6) = 0
helpertype = Normal
ID = 1710
name = "flamepira1"
postype = p1
pos = 40,0
stateno = 1710
size.xscale = 1.5
size.yscale = 1.2
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(6) = 4
helpertype = Normal
ID = 1711
name = "flamepira2"
postype = p1
pos = 71,0
stateno = 1710
size.xscale = 1.5
size.yscale = 1.2
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(6) = 8
helpertype = Normal
ID = 1712
name = "flamepira3"
postype = p1
pos = 102,0
stateno = 1710
size.xscale = 1.5
size.yscale = 1.2
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(6) = 12
helpertype = Normal
ID = 1713
name = "flamepira4"
postype = p1
pos = 133,0
stateno = 1710
size.xscale = 1.5
size.yscale = 1.2
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(6) = 16
helpertype = Normal
ID = 1714
name = "flamepira5"
postype = p1
pos = 164,0
stateno = 1710
size.xscale = 1.5
size.yscale = 1.2
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(6) = 20
helpertype = Normal
ID = 1715
name = "flamepira6"
postype = p1
pos = 195,0
stateno = 1710
size.xscale = 1.5
size.yscale = 1.2
ownpal = 1

[State 1100, 1]
type = null;Helper
trigger1 = AnimElemtime(6) = 24
helpertype = Normal
ID = 1716
name = "flamepira7"
postype = p1
pos = 226,0
stateno = 1710
size.xscale = 1.5
size.yscale = 1.2
ownpal = 1

[State 1100, 1]
type = null;Helper
trigger1 = AnimElemtime(6) = 28
helpertype = Normal
ID = 1717
name = "flamepira8"
postype = p1
pos = 257,0
stateno = 1710
size.xscale = 1.5
size.yscale = 1.2
ownpal = 1

[State 1100, 1]
type = null;Helper
trigger1 = AnimElemtime(6) = 32
helpertype = Normal
ID = 1718
name = "flamepira9"
postype = p1
pos = 288,0
stateno = 1710
size.xscale = 1.5
size.yscale = 1.2
ownpal = 1

[State 1000]
type = ChangeState
trigger1 = life = 0
value = 5150

[State 1000]
type = ChangeState
triggerall = var(32) = 0
trigger1 = var(21) = 0
trigger1 = Life <= lifemax / 2
trigger2 = var(21) = 1
trigger2 = Life = lifemax
value = 2500

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------
;フレイムピラー(当たり判定)
[Statedef 1710]
type    = A
movetype= A
physics = N
juggle  = 2
anim = 2310
ctrl = 0
sprpriority = 14

[State 3]
type = posset
trigger1 = 1
y = 0

[State snd]
type = PlaySnd
trigger1 = time = 0
value = 5150,1

[State snd]
type = PlaySnd
trigger1 = time = 4
value = 335,0

[State afimage]
type = AfterImage
trigger1 = time = 0
time = -1
trans = add
length   = 7
timegap  = 1
framegap = 3
PalBright = 120 , 120 , 120
PalContrast = 80 , 80 , 80
PalAdd = 0 , 0 , 0
;PalMul = 1.1 , 1.0 , 1.2
IgnoreHitPause = 1
Persistent = 1

[State Var]
type = Varset
trigger1 = time = 0
ignorehitpause = 1
fvar(19) = 0

[State Var]
type = Varadd
trigger1 = time >= 7
ignorehitpause = 1
fvar(19) = 0.015

[State Angle]
type = AngleDraw
trigger1 = time >= 7
scale = 1.0,1.0+fvar(19)

[State trans]
type = Trans
trigger1 = 1
trans = add

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SP
damage = 45, 4
animtype = back
guardflag = MA
hitflag = MAF
fall = 1
air.fall = 1
priority = 3
pausetime = 0,3
sparkno = S1500
guard.sparkno = S1500
sparkxy = -10,-57
hitsound = s335,0
guardsound = s1010,0
ground.type = low
ground.slidetime = 6
ground.hittime  = 43
ground.velocity = -7.7,-5.6
airguard.velocity = -0.8,-.7
air.type = High
air.velocity = -7.4,-4.3
air.hittime = 43
down.velocity = -4, -.7
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.recovertime = 43
getpower = 33,0
palfx.time = 32
palfx.sinadd = 40,20,100,6
palfx.add = 70,-20,220
guard.kill = 0

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200 ,exp]
type = Explod
trigger1 = time%6 = 0
trigger1 = MoveHit
anim = 321
id = 321
postype = p2
scale = 1.0,1.0
accel = 0,-.1
random = 60,80
bindtime = 6
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200 ,exp]
type = Explod
trigger1 = time%4 = 0
trigger1 = MoveHit
anim = 321
id = 321
postype = p2
scale = 0.7,0.7
accel = 0,-.1
random = 60,80
bindtime = 5
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 7001, 3]
type = DestroySelf
trigger1 = Animtime = 0

;---------------------------------------------------------------------------
[Statedef 8026];攻撃を受けた場合に飛ばされるステート
type = U
movetype = H
physics = U
ctrl = 0
hitdefpersist	= 0
movehitpersist	= 0
hitcountpersist	= 0

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[State 1000]
type = ChangeState
triggerall = var(32) = 0
trigger1 = var(21) = 0
trigger1 = Life <= lifemax / 2
trigger2 = var(21) = 1
trigger2 = Life = lifemax
value = 2500

[state 1300,power]
type = poweradd
trigger1 = AnimElemtime(1) = 0
value = -1000

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(6) = 0
value = 330,0
channel = 0

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(5) = 0
value = 4000,0

[State 7015, 1]
type = SuperPause
trigger1 = AnimElemtime(5) = 0
anim = -1

[State 200]
type = Explod
trigger1 = AnimElemtime(5) = 0
anim = 4300
id = 4300
postype = p1
scale = 2,2
removetime = 22
ownpal = 1
ontop = 1
pos = 44,-104
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = AnimElemtime(5) = 0
anim = 4310
id = 4310
postype = p1
scale = 1.5,1.5
removetime = -2
ownpal = 1
ontop = 1
pos = 44,-104
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(6) = 0
helpertype = Normal
ID = 1710
name = "flamepira1"
postype = p1
pos = 40,0
stateno = 1710
size.xscale = 1.5
size.yscale = 1.2
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(6) = 4
helpertype = Normal
ID = 1711
name = "flamepira2"
postype = p1
pos = 71,0
stateno = 1710
size.xscale = 1.5
size.yscale = 1.2
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(6) = 8
helpertype = Normal
ID = 1712
name = "flamepira3"
postype = p1
pos = 102,0
stateno = 1710
size.xscale = 1.5
size.yscale = 1.2
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(6) = 12
helpertype = Normal
ID = 1713
name = "flamepira4"
postype = p1
pos = 133,0
stateno = 1710
size.xscale = 1.5
size.yscale = 1.2
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(6) = 16
helpertype = Normal
ID = 1714
name = "flamepira5"
postype = p1
pos = 164,0
stateno = 1710
size.xscale = 1.5
size.yscale = 1.2
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(6) = 20
helpertype = Normal
ID = 1715
name = "flamepira6"
postype = p1
pos = 195,0
stateno = 1710
size.xscale = 1.5
size.yscale = 1.2
ownpal = 1

[State 1100, 1]
type = null;Helper
trigger1 = AnimElemtime(6) = 24
helpertype = Normal
ID = 1716
name = "flamepira7"
postype = p1
pos = 216,0
stateno = 1710
size.xscale = 1.5
size.yscale = 1.2
ownpal = 1

[State 1100, 1]
type = null;Helper
trigger1 = AnimElemtime(6) = 28
helpertype = Normal
ID = 1717
name = "flamepira8"
postype = p1
pos = 247,0
stateno = 1710
size.xscale = 1.5
size.yscale = 1.2
ownpal = 1

[State 1100, 1]
type = null;Helper
trigger1 = AnimElemtime(6) = 32
helpertype = Normal
ID = 1718
name = "flamepira9"
postype = p1
pos = 278,0
stateno = 1710
size.xscale = 1.5
size.yscale = 1.2
ownpal = 1

[State 2000, 1]
type = ChangeState
trigger1 = Time >= 1
value = 1700

[State 3]
type = posset
trigger1 = 1
y = 0

[State 2000, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ワープ
[Statedef 2200]
type = S
movetype = I
physics = S
anim = 1850
velset = 0,0
ctrl = 0

[State var]
type = varrandom
trigger1 = time = [0,20]
v = 38
range = 0,9

[State var]
type = varset
trigger1 = time = 1
v = 16
value = 1

[State var]
type = varset
trigger1 = time = 1
v = 17
value = 1

[State pos]
type = posset
trigger1 = time = 0
y = 0

[State snd]
type = PlaySnd
trigger1 = time = 45
value = 1800,0

[State snd]
type = PlaySnd
trigger1 = time = 90
value = 1810,0

[State exp, *]
type = Explod
trigger1 = time = 0
anim = 1800
ID = 1800
pos = 0,-250
postype = p1
scale = 0,0
sprpriority = 2
ownpal = 1
Persistent = 6
bindtime = 9999999
ontop = 1

[State exp, *]
type = Explod
trigger1 = time = 31
anim = 1800
ID = 1810
pos = 0,0
postype = p1
scale = 0,0
sprpriority = 2
ownpal = 1
Persistent = 6
bindtime = 9999999
ontop = 1

[State exp, *]
type = Explod
trigger1 = time = 60
anim = 1810
ID = 1820
pos = 0,0
postype = p1
scale = 0,0
sprpriority = 2
ownpal = 1
Persistent = 6
bindtime = 9999999

[State var, *]
type = varset
trigger1 = time = 0
fvar(20) = 0

[State var, *]
type = varadd
trigger1 = time = [0,8]
fvar(20) = 0.0023

[State var, *]
type = varadd
trigger1 = time = [35,60]
fvar(20) = 0.0160

[State var, *]
type = varset
trigger1 = time = 0
fvar(21) = 0

[State var, *]
type = varadd
trigger1 = time = [0,34]
fvar(21) = -0.0118

[State exp, *]
type = modifyexplod
trigger1 = 1
ID = 1800
scale = 0.0+fvar(20),0.1+fvar(21)

[State var, *]
type = varset
trigger1 = time = 0
fvar(22) = 0

[State var, *]
type = varadd
trigger1 = time = [31,72]
fvar(22) = 0.0106

[State var, *]
type = varset
trigger1 = time = 0
fvar(23) = 0

[State var, *]
type = varadd
trigger1 = time = [31,80]
fvar(23) = 0.0138

[State exp, *]
type = modifyexplod
trigger1 = 1
ID = 1810
scale = 0.1+fvar(22),0.1+fvar(23)

[State var, *]
type = varset
trigger1 = time = 0
fvar(24) = 0

[State var, *]
type = varadd
trigger1 = time = [60,91]
fvar(24) = 0.0106

[State var, *]
type = varset
trigger1 = time = 0
fvar(25) = 0

[State var, *]
type = varadd
trigger1 = time = [60,109]
fvar(25) = 0.0138

[State var, *]
type = varadd
trigger1 = time = [130,165]
fvar(24) = -0.0106

[State var, *]
type = varadd
trigger1 = time = [130,160]
fvar(25) = -0.0138

[State exp, *]
type = modifyexplod
trigger1 = 1
ID = 1820
scale = 0.0+fvar(24),0.0+fvar(25)

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 2251
ctrl = 0

;---------------------------------------------------------------------------
; 消えてる途中に移動
[Statedef 2251]
type    = S
movetype = I
physics = S
anim = 1851
sprpriority = 0
ctrl = 0

[state 7800,1]
type = varrandom
triggerall = time <= 45
trigger1 = var(54) = 30
trigger2 = var(54) != 30
trigger2 = var(43) != 0
v = 37
range = -150,150

[State 191, 2]
type = posset
trigger1 = var(54) = 30
trigger1 = var(43) = 0
trigger1 = time = 54
trigger2 = var(43) != 0
trigger2 = time = 9
x = var(37)

[State 20, 1]
type = VelSet
trigger1 = var(43) = 0
trigger1 = var(54) != 30
trigger1 = command = "holdfwd"
x = 9.6

[State 20, 2]
type = VelSet
trigger1 = var(43) = 0
trigger1 = var(54) != 30
trigger1 = command = "holdback"
x = -9.6

[State 200, 7]
type = ChangeState
trigger1 = var(43) = 0
trigger1 = time = 55
trigger2 = var(43) != 0
trigger2 = time = 10
trigger3 = Win
value = 2252
ctrl = 0

;---------------------------------------------------------------------------
;現る
[Statedef 2252]
type = S
movetype = I
physics = S
anim = 1853
velset = 0,0
ctrl = 0

[State var]
type = varset
trigger1 = time = 140
v = 16
value = 0

[State pos]
type = posset
trigger1 = time = 0
y = 0

[State snd]
type = PlaySnd
trigger1 = time = 45
value = 1800,0

[State snd]
type = PlaySnd
trigger1 = time = 120
value = 1810,1

[State exp, *]
type = Explod
trigger1 = time = 0
anim = 1800
ID = 1800
pos = 0,-250
postype = p1
scale = 0,0
sprpriority = 2
ownpal = 1
Persistent = 6
bindtime = 9999999
ontop = 1

[State exp, *]
type = Explod
trigger1 = time = 31
anim = 1800
ID = 1810
pos = 0,0
postype = p1
scale = 0,0
sprpriority = 2
ownpal = 1
Persistent = 6
bindtime = 9999999
ontop = 1

[State exp, *]
type = Explod
trigger1 = time = 60
anim = 1810
ID = 1820
pos = 0,0
postype = p1
scale = 0,0
sprpriority = 2
ownpal = 1
Persistent = 6
bindtime = 9999999

[State var, *]
type = varset
trigger1 = time = 0
fvar(20) = 0

[State var, *]
type = varadd
trigger1 = time = [0,8]
fvar(20) = 0.0023

[State var, *]
type = varadd
trigger1 = time = [35,60]
fvar(20) = 0.0160

[State var, *]
type = varset
trigger1 = time = 0
fvar(21) = 0

[State var, *]
type = varadd
trigger1 = time = [0,34]
fvar(21) = -0.0118

[State exp, *]
type = modifyexplod
trigger1 = 1
ID = 1800
scale = 0.0+fvar(20),0.1+fvar(21)

[State var, *]
type = varset
trigger1 = time = 0
fvar(22) = 0

[State var, *]
type = varadd
trigger1 = time = [31,72]
fvar(22) = 0.0106

[State var, *]
type = varset
trigger1 = time = 0
fvar(23) = 0

[State var, *]
type = varadd
trigger1 = time = [31,80]
fvar(23) = 0.0138

[State exp, *]
type = modifyexplod
trigger1 = 1
ID = 1810
scale = 0.1+fvar(22),0.1+fvar(23)

[State var, *]
type = varset
trigger1 = time = 0
fvar(24) = 0

[State var, *]
type = varadd
trigger1 = time = [60,91]
fvar(24) = 0.0106

[State var, *]
type = varset
trigger1 = time = 0
fvar(25) = 0

[State var, *]
type = varadd
trigger1 = time = [60,109]
fvar(25) = 0.0138

[State var, *]
type = varadd
trigger1 = time = [130,165]
fvar(24) = -0.0106

[State var, *]
type = varadd
trigger1 = time = [130,160]
fvar(25) = -0.0138

[State exp, *]
type = modifyexplod
trigger1 = 1
ID = 1820
scale = 0.0+fvar(24),0.0+fvar(25)

[State turn, *]
type = turn
trigger1 = roundstate = 2
trigger1 = P2Dist x <= 0

[State -2]
type = HitOverride
attr = SCA ,NA ,SA ,HA ,NP ,SP ,HP
trigger1 = 1
trigger1 = var(50) = 0
stateno = 5000

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------
;遊びは終わりだ！我に力をー……
[Statedef 2500]
type = S
movetype = I
physics = S
anim = 2500
velset = 0,0
ctrl = 0
sprpriority = -1

[State 3]
type = posset
trigger1 = 1
y = 0

[State var]
type = varset
trigger1 = time = 0
v = 20
value = 0

[State var]
type = varset
trigger1 = time = 5
v = 32
value = 1

[state 2500,powers]
type = powerset
trigger1 = time = 0
value = 99999999

[State snd]
type = PlaySnd
trigger1 = time = 1
value = 2500,0

[State snd]
type = PlaySnd
trigger1 = time = 100
value = 2500,1

[State snd]
type = PlaySnd
trigger1 = time = 300
value = 2500,2

[State 2500]
type = envshake
trigger1 = AnimElem = 5
time = 7
freq = 18

[State 2500]
type = PalFX
trigger1 = AnimElemtime(6) = 105
time = 300
add = 255,255,255

[State 2500]
type = PalFX
trigger1 = AnimElemtime(6) = 307
time = 60
add = 255,255,255
sinadd = 255,255,255,100

[State exp, *]
type = Explod
trigger1 = time = 0
anim = 2510
ID = 2510
pos = 0,100
postype = p1
scale = 0,0
sprpriority = 2
ownpal = 1
Persistent = 6
bindtime = 9999999
ontop = 1

[State exp, *]
type = Explod
trigger1 = time = 0
anim = 2510
ID = 2510
pos = 0,100
postype = p1
scale = 0,0
sprpriority = 2
ownpal = 1
Persistent = 6
bindtime = 9999999
ontop = 1

[State var, *]
type = varset
trigger1 = time = 0
fvar(26) = 0

[State var, *]
type = varadd
trigger1 = time = [95,130]
fvar(26) = 0.0127

[State var, *]
type = varadd
trigger1 = time = [130,400]
fvar(26) = 0.0480

[State var, *]
type = varset
trigger1 = time = 0
fvar(27) = 0

[State var, *]
type = varadd
trigger1 = time = [70,400]
fvar(27) = -0.0105

[State exp, *]
type = modifyexplod
trigger1 = 1
ID = 2510
scale = 0.0+fvar(26),4.0+fvar(27)

[State exp, *]
type = Explod
trigger1 = time = 268
anim = 2530
ID = 2530
pos = 0,0
postype = p1
scale = 1.5,1.5
sprpriority = 3
ownpal = 1
Persistent = 5
bindtime = 9999999
removetime = -2
ontop = 0

[State exp, *]
type = Explod
trigger1 = time = 300
anim = 2520
ID = 2520
pos = 0,0
postype = p1
scale = 0,0
sprpriority = 4
ownpal = 1
Persistent = 6
bindtime = 9999999
removetime = 40
ontop = 1

[State var, *]
type = varset
trigger1 = time = 0
fvar(28) = 0

[State var, *]
type = varadd
trigger1 = time = [300,326]
fvar(28) = -0.0550

[State var, *]
type = varadd
trigger1 = time = [300,326]
fvar(29) = -0.0550

[State var, *]
type = varset
trigger1 = time = 0
fvar(29) = 0

[State exp, *]
type = modifyexplod
trigger1 = 1
ID = 2520
scale = 3.0+fvar(28),3.0+fvar(29)

[State exp, *]
type = modifyexplod
trigger1 = time >= 330
ID = 2520
scale = 1.5,1.5

[State 1000]
type = ChangeState
trigger1 = life = 0
value = 5150

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------
;変身後ファイア
[Statedef 3200]
type = S
movetype = I
physics = S
;anim = 3200
velset = 0,0
ctrl = 0
sprpriority = 1
poweradd = 23

[State 3]
type = posset
trigger1 = 1
y = 0

[State varset]
type = varset
trigger1 = 1
v = 7
value = 0

[state 200,hit]
type = hitoverride
trigger1 = (prevstateno != 8200)
trigger1 = var(50) = 0
time = -1
slot = 0
attr = sca, aa, ap
stateno = 8200

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[state 200,changeanim]
type = changeanim
trigger1 = (!time) && (anim != 3200)
value = 3200

[State snd]
type = PlaySnd
trigger1 = AnimElem = 5
value = 3200,0

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 6
helpertype = Normal
ID = 3250
name = "fire" 
postype = p1
pos = 64,-115
stateno = 3250
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = var(43) != 0
trigger1 = AnimElemtime(6) = 24
helpertype = Normal
ID = 3255
name = "fire" 
postype = p1
pos = 64,-115
stateno = 3255
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 7
helpertype = Normal
ID = 3260
name = "fire" 
postype = p1
pos = 64,-115
stateno = 3260
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = var(43) != 0
trigger1 = AnimElemtime(7) = 24
helpertype = Normal
ID = 3265
name = "fire" 
postype = p1
pos = 64,-115
stateno = 3265
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 8
helpertype = Normal
ID = 3270
name = "fire" 
postype = p1
pos = 64,-115
stateno = 3270
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State exp, *]
type = Explod
trigger1 = AnimElem = 5
anim = 3216
ID = 3216
pos = 64,-115
postype = p1
scale = 1.5,1.5
sprpriority = 2
ownpal = 1
Persistent = 1
removetime = 40

[State exp, *]
type = Explod
trigger1 = AnimElem = 5
anim = 3217
ID = 3217
pos = 64,-115
postype = p1
scale = 0.7,0.7
sprpriority = 4
ownpal = 1
Persistent = 1
removetime = -2
ontop = 1

[State exp, *]
type = null;Explod
trigger1 = AnimElem = 5
anim = 3210
ID = 3210
pos = 64,-115
postype = p1
scale = 1.5,1.5
sprpriority = 2
ownpal = 1
Persistent = 1
removetime = 18
ontop = 0

[State exp, *]
type = null;Explod
trigger1 = AnimElemtime(5) = 18
anim = 3215
ID = 3215
pos = 64,-115
postype = p1
scale = 1.5,1.5
sprpriority = 2
ownpal = 1
Persistent = 1
removetime = 22
ontop = 0

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 1000]
type = ChangeState
trigger1 = life = 0
value = 5150

[State 200, 7]
type = ChangeState
trigger1 = var(54) != 30
trigger1 = command = "hold_x"
trigger1 = AnimElemtime(2) >= 2 && AnimElemtime(2) <= 4
trigger2 = var(54) = 30
trigger2 = AnimElemtime(2) >= 2 && AnimElemtime(2) <= 4
trigger2 = random <= 130
value = 3280
ctrl = 1

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------
;変身後ファイア（発射一発目）
[Statedef 3250]
type    = A
movetype= A
physics = N
juggle  = 6
anim = 3220
ctrl = 0
sprpriority = 2

[State afimage]
type = AfterImage
trigger1 = time = 0
time = -1
trans = add
length   = 50
timegap  = 1
framegap = 1
PalBright = 90 , 30 , 30
PalContrast = 120 , 50 , 50
PalAdd = 0 , 0 , 0
;PalMul = 1.1 , 1.0 , 1.2
IgnoreHitPause = 1
Persistent = 1

[State trans]
type = Trans
trigger1 = 1
trans = add

[State snd]
type = PlaySnd
trigger1 = time = 1
value = 1020,0

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
trigger2 = AnimElem = 8
attr = S, SP
;damage = 148, 23
damage = ceil(ifelse(root,var(43) = 0,148,65)),23
animtype = back
guardflag = MA
hitflag = MAFD
fall = 1
air.fall = 1
priority = 3
pausetime = 0, 18
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = s1000,0
guardsound = s1010,0
ground.type = low
ground.slidetime = 5
ground.hittime  = 10
ground.velocity = -7,-2
airguard.velocity = -2,-1.2
air.type = High
air.velocity = -7,-2
air.hittime = 10
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 8,0
palfx.time = 37
palfx.sinadd = 140,50,-40,8
palfx.add = 50,-40,-130
guard.kill = ceil(ifelse(root,var(43) = 0,0,1))

[State 7004]
type = Veladd
trigger1 = time = 0
x = 6.8
y = 3.8

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 1100, 1]
type = Helper
trigger1 = pos y >= 0 && vel y > 0
helpertype = Normal
ID = 3251
name = "firetiru" 
postype = p1
pos = 0,0
stateno = 3251
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 200]
type = Explod
trigger1 = MoveHit = 1
trigger2 = MoveHit = 5
trigger3 = MoveHit = 9
trigger4 = MoveHit = 13
anim = 216
id = 216
postype = p2
scale = 1.5,1.5
accel = 0,-.17
random = 60,80
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = MoveHit = 3
trigger2 = MoveHit = 7
trigger3 = MoveHit = 11
trigger4 = MoveHit = 15
anim = 227
id = 227
postype = p2
scale = 1.5,1.5
accel = 0,-.17
random = 60,80
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200, 1]
type = DestroySelf
trigger1 = pos y >= 0 && vel y > 0

;---------------------------------------------------------------------------
;ファイア燃え散る
[Statedef 3251]
type = A
movetype = I
physics = N
;velset = 0,-1
;anim = 4000
ctrl = 0
sprpriority = 1

[state 200,changeanim]
type = changeanim
trigger1 = root,var(43) = 0
trigger1 = time = 0
value = 4000

[state 200,changeanim]
type = changeanim
trigger1 = root,var(43) != 0
trigger1 = time = 0
value = 4001

[State vel]
type = velset
trigger1 = root,var(43) = 0
trigger1 = time = 0
y = -1

[State vel]
type = velset
trigger1 = root,var(43) != 0
trigger1 = time = 0
x = 0
y = 0

[State pos]
type = posset
trigger1 = 1
y = 0

[State snd]
type = PlaySnd
trigger1 = time = 0
value = 3250,0

[State 5150, 0]
type = Explod
triggerall = root,var(43) = 0
trigger1 = time = 0
trigger2 = time = 3
trigger3 = time = 6
trigger4 = time = 9
anim = 4000
ID = 4000
pos = 0,0
random = 50,35
postype = p1
accel = 0,-.17
removetime = -2
scale = 1.5,1.5
sprpriority = 1
ontop = 1
shadow = 40,40,40
ownpal = 1

[State 5150, 0]
type = Explod
triggerall = root,var(43) != 0
trigger1 = time = 0
trigger2 = time = 2
trigger3 = time = 4
anim = 4000
ID = 4000
pos = 0,0
random = 50,15
postype = p1
accel = 0,-.17
removetime = -2
scale = 1.0,1.0
sprpriority = 8
ontop = 1
shadow = 40,40,40
ownpal = 1

[State 5150, 0]
type = Helper
triggerall = root,var(43) != 0
trigger1 = time = 0
stateno = 3252
ID = 3252
name = "flame1"
pos = 0,0
postype = p1
size.xscale = 0.8
size.yscale = 0.8
shadow = 40,40,40
ownpal = 1

[State 5150, 0]
type = Helper
triggerall = root,var(43) != 0
trigger1 = time = 4
stateno = 3252
ID = 3252
name = "flame2"
pos = 10,0
postype = p1
size.xscale = 0.8
size.yscale = 0.8
shadow = 40,40,40
ownpal = 1

[State 5150, 0]
type = Helper
triggerall = root,var(43) != 0
trigger1 = time = 8
stateno = 3252
ID = 3252
name = "flame3"
pos = 20,0
postype = p1
size.xscale = 0.8
size.yscale = 0.8
shadow = 40,40,40
ownpal = 1

[State 5150, 0]
type = Helper
triggerall = root,var(43) != 0
trigger1 = time = 12
stateno = 3252
ID = 3252
name = "flame4"
pos = 30,0
postype = p1
size.xscale = 0.8
size.yscale = 0.8
shadow = 40,40,40
ownpal = 1

[State 5150, 0]
type = Helper
triggerall = root,var(43) != 0
trigger1 = time = 16
stateno = 3252
ID = 3252
name = "flame5"
pos = 40,0
postype = p1
size.xscale = 0.8
size.yscale = 0.8
shadow = 40,40,40
ownpal = 1

[State 5150, 0]
type = Helper
triggerall = root,var(43) != 0
trigger1 = time = 20
stateno = 3252
ID = 3252
name = "flame6"
pos = 50,0
postype = p1
size.xscale = 0.8
size.yscale = 0.8
shadow = 40,40,40
ownpal = 1

[State 200, 1]
type = DestroySelf
trigger1 = Animtime = 0

;---------------------------------------------------------------
;変身後ファイア（炎ハード当たり判定）
[Statedef 3252]
type    = A
movetype= A
physics = N
juggle  = 6
anim = 3330
ctrl = 0
sprpriority = 2

[State afimage]
type = AfterImage
trigger1 = time = 0
time = -1
trans = add
length   = 50
timegap  = 1
framegap = 1
PalBright = 90 , 30 , 30
PalContrast = 120 , 50 , 50
PalAdd = 0 , 0 , 0
;PalMul = 1.1 , 1.0 , 1.2
IgnoreHitPause = 1
Persistent = 1

[State snd]
type = PlaySnd
trigger1 = time = 0
value = 510,3
volume = -200

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SP
damage = ceil(ifelse(p2movetype = H,9,18)),1
animtype = back
guardflag = MA
hitflag = MAFD
fall = 1
air.fall = 1
priority = 3
pausetime = 0, 15
guard.pausetime = 0, 5
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = s1000,0
guardsound = s1010,0
ground.type = low
ground.slidetime = 5
ground.hittime  = 20
ground.velocity = -5,-3
airguard.velocity = -2,-2.3
air.type = High
air.velocity = -5,-3
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 15,0
palfx.time = 37
palfx.sinadd = 140,50,-40,8
palfx.add = 50,-40,-130
guard.kill = 0

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = MoveHit = 1
trigger2 = MoveHit = 5
trigger3 = MoveHit = 9
trigger4 = MoveHit = 13
anim = 216
id = 216
postype = p2
scale = 1.5,1.5
accel = 0,-.17
random = 60,80
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = MoveHit = 3
trigger2 = MoveHit = 7
trigger3 = MoveHit = 11
trigger4 = MoveHit = 15
anim = 227
id = 227
postype = p2
scale = 1.5,1.5
accel = 0,-.17
random = 60,80
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200, 1]
type = DestroySelf
trigger1 = Animtime = 0

;---------------------------------------------------------------
;変身後ファイア（発射ハード二発目）
[Statedef 3255]
type    = A
movetype= A
physics = N
juggle  = 6
anim = 3220
ctrl = 0
sprpriority = 2

[State afimage]
type = AfterImage
trigger1 = time = 0
time = -1
trans = add
length   = 50
timegap  = 1
framegap = 1
PalBright = 90 , 30 , 30
PalContrast = 120 , 50 , 50
PalAdd = 0 , 0 , 0
;PalMul = 1.1 , 1.0 , 1.2
IgnoreHitPause = 1
Persistent = 1

[State trans]
type = Trans
trigger1 = 1
trans = add

[State snd]
type = PlaySnd
trigger1 = time = 1
value = 1020,0

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
trigger2 = AnimElem = 8
attr = S, SP
damage = ceil(ifelse(root,var(43) = 0,148,85)),23
animtype = back
guardflag = MA
hitflag = MAFD
fall = 1
air.fall = 1
priority = 3
pausetime = 0, 18
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = s1000,0
guardsound = s1010,0
ground.type = low
ground.slidetime = 5
ground.hittime  = 10
ground.velocity = -7,-2
airguard.velocity = -2,-1.2
air.type = High
air.velocity = -7,-2
air.hittime = 10
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 8,0
palfx.time = 37
palfx.sinadd = 140,50,-40,8
palfx.add = 50,-40,-130
guard.kill = ceil(ifelse(root,var(43) = 0,0,1))

[State 1210]
type = AngleDraw
trigger1 = 1

[State 1210]
type = AngleSet
trigger1 = time = 0
value = -20

[State 7004]
type = Veladd
trigger1 = time = 0
x = 5.5
y = 5.7

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 1100, 1]
type = Helper
trigger1 = pos y >= 0 && vel y > 0
helpertype = Normal
ID = 3251
name = "firetiru" 
postype = p1
pos = 0,0
stateno = 3251
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 200]
type = Explod
trigger1 = MoveHit = 1
trigger2 = MoveHit = 5
trigger3 = MoveHit = 9
trigger4 = MoveHit = 13
anim = 216
id = 216
postype = p2
scale = 1.5,1.5
accel = 0,-.17
random = 60,80
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = MoveHit = 3
trigger2 = MoveHit = 7
trigger3 = MoveHit = 11
trigger4 = MoveHit = 15
anim = 227
id = 227
postype = p2
scale = 1.5,1.5
accel = 0,-.17
random = 60,80
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200, 1]
type = DestroySelf
trigger1 = pos y >= 0 && vel y > 0

;---------------------------------------------------------------
;変身後ファイア（発射二発目）
[Statedef 3260]
type    = A
movetype= A
physics = N
juggle  = 6
anim = 3221
ctrl = 0
sprpriority = 2

[State afimage]
type = AfterImage
trigger1 = time = 0
time = -1
trans = add
length   = 50
timegap  = 1
framegap = 1
PalBright = 90 , 30 , 30
PalContrast = 120 , 50 , 50
PalAdd = 0 , 0 , 0
;PalMul = 1.1 , 1.0 , 1.2
IgnoreHitPause = 1
Persistent = 1

[State trans]
type = Trans
trigger1 = 1
trans = add

[State snd]
type = PlaySnd
trigger1 = time = 0
value = 1020,0

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
trigger2 = AnimElem = 8
attr = S, SP
damage = ceil(ifelse(root,var(43) = 0,148,85)),23
animtype = back
guardflag = MA
hitflag = MAFD
fall = 1
air.fall = 1
priority = 3
pausetime = 0, 18
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = s1000,0
guardsound = s1010,0
ground.type = low
ground.slidetime = 5
ground.hittime  = 10
ground.velocity = -7,-2
airguard.velocity = -2,-1.2
air.type = High
air.velocity = -7,-2
air.hittime = 10
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 8,0
palfx.time = 37
palfx.sinadd = 140,50,-40,8
palfx.add = 50,-40,-130
guard.kill = ceil(ifelse(root,var(43) = 0,0,1))

[State 7004]
type = Veladd
trigger1 = time = 0
x = 4.2
y = 7.5

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 1100, 1]
type = Helper
trigger1 = pos y >= 0 && vel y > 0
helpertype = Normal
ID = 3251
name = "firetiru" 
postype = p1
pos = 0,0
stateno = 3251
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 200]
type = Explod
trigger1 = MoveHit = 1
trigger2 = MoveHit = 5
trigger3 = MoveHit = 9
trigger4 = MoveHit = 13
anim = 216
id = 216
postype = p2
scale = 1.5,1.5
accel = 0,-.17
random = 60,80
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = MoveHit = 3
trigger2 = MoveHit = 7
trigger3 = MoveHit = 11
trigger4 = MoveHit = 15
anim = 227
id = 227
postype = p2
scale = 1.5,1.5
accel = 0,-.17
random = 60,80
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200, 1]
type = DestroySelf
trigger1 = pos y >= 0 && vel y > 0

;---------------------------------------------------------------
;変身後ファイア（発射ハード四発目）
[Statedef 3265]
type    = A
movetype= A
physics = N
juggle  = 6
anim = 3220
ctrl = 0
sprpriority = 2

[State afimage]
type = AfterImage
trigger1 = time = 0
time = -1
trans = add
length   = 50
timegap  = 1
framegap = 1
PalBright = 90 , 30 , 30
PalContrast = 120 , 50 , 50
PalAdd = 0 , 0 , 0
;PalMul = 1.1 , 1.0 , 1.2
IgnoreHitPause = 1
Persistent = 1

[State trans]
type = Trans
trigger1 = 1
trans = add

[State snd]
type = PlaySnd
trigger1 = time = 1
value = 1020,0

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
trigger2 = AnimElem = 8
attr = S, SP
damage = ceil(ifelse(root,var(43) = 0,148,85)),23
animtype = back
guardflag = MA
hitflag = MAFD
fall = 1
air.fall = 1
priority = 3
pausetime = 0, 18
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = s1000,0
guardsound = s1010,0
ground.type = low
ground.slidetime = 5
ground.hittime  = 10
ground.velocity = -7,-2
airguard.velocity = -2,-1.2
air.type = High
air.velocity = -7,-2
air.hittime = 10
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 8,0
palfx.time = 37
palfx.sinadd = 140,50,-40,8
palfx.add = 50,-40,-130
guard.kill = ceil(ifelse(root,var(43) = 0,0,1))

[State 1210]
type = AngleDraw
trigger1 = 1

[State 1210]
type = AngleSet
trigger1 = time = 0
value = -20

[State 7004]
type = Veladd
trigger1 = time = 0
x = 5.5
y = 5.7

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 1100, 1]
type = Helper
trigger1 = pos y >= 0 && vel y > 0
helpertype = Normal
ID = 3251
name = "firetiru" 
postype = p1
pos = 0,0
stateno = 3251
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 200]
type = Explod
trigger1 = MoveHit = 1
trigger2 = MoveHit = 5
trigger3 = MoveHit = 9
trigger4 = MoveHit = 13
anim = 216
id = 216
postype = p2
scale = 1.5,1.5
accel = 0,-.17
random = 60,80
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = MoveHit = 3
trigger2 = MoveHit = 7
trigger3 = MoveHit = 11
trigger4 = MoveHit = 15
anim = 227
id = 227
postype = p2
scale = 1.5,1.5
accel = 0,-.17
random = 60,80
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200, 1]
type = DestroySelf
trigger1 = pos y >= 0 && vel y > 0

;---------------------------------------------------------------
;変身後ファイア（発射三発目）
[Statedef 3270]
type    = A
movetype= A
physics = N
juggle  = 6
anim = 3222
ctrl = 0
sprpriority = 2

[State afimage]
type = AfterImage
trigger1 = time = 0
time = -1
trans = add
length   = 50
timegap  = 1
framegap = 1
PalBright = 90 , 30 , 30
PalContrast = 120 , 50 , 50
PalAdd = 0 , 0 , 0
;PalMul = 1.1 , 1.0 , 1.2
IgnoreHitPause = 1
Persistent = 1

[State trans]
type = Trans
trigger1 = 1
trans = add

[State snd]
type = PlaySnd
trigger1 = time = 0
value = 1020,0

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
trigger2 = AnimElem = 8
attr = S, SP
damage = ceil(ifelse(root,var(43) = 0,148,85)),23
animtype = back
guardflag = MA
hitflag = MAFD
fall = 1
air.fall = 1
priority = 3
pausetime = 0, 18
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = s1000,0
guardsound = s1010,0
ground.type = low
ground.slidetime = 5
ground.hittime  = 10
ground.velocity = -7,-2
airguard.velocity = -2,-1.2
air.type = High
air.velocity = -7,-2
air.hittime = 10
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 8,0
palfx.time = 37
palfx.sinadd = 140,50,-40,8
palfx.add = 50,-40,-130
guard.kill = ceil(ifelse(root,var(43) = 0,0,1))

[State 7004]
type = Veladd
trigger1 = time = 0
x = 6.2
y = 4.4

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 1100, 1]
type = Helper
trigger1 = pos y >= 0 && vel y > 0
helpertype = Normal
ID = 3251
name = "firetiru" 
postype = p1
pos = 0,0
stateno = 3251
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 200]
type = Explod
trigger1 = MoveHit = 1
trigger2 = MoveHit = 5
trigger3 = MoveHit = 9
trigger4 = MoveHit = 13
anim = 216
id = 216
postype = p2
scale = 1.5,1.5
accel = 0,-.17
random = 60,80
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = MoveHit = 3
trigger2 = MoveHit = 7
trigger3 = MoveHit = 11
trigger4 = MoveHit = 15
anim = 227
id = 227
postype = p2
scale = 1.5,1.5
accel = 0,-.17
random = 60,80
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200, 1]
type = DestroySelf
trigger1 = pos y >= 0 && vel y > 0

;---------------------------------------------------------------------------
[Statedef 8200];攻撃を受けた場合に飛ばされるステート
type = U
movetype = H
physics = U
ctrl = 0
hitdefpersist	= 0
movehitpersist	= 0
hitcountpersist	= 0

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[State 3]
type = posset
trigger1 = 1
y = 0

[State varset]
type = varset
trigger1 = 1
v = 7
value = 0

[State snd]
type = PlaySnd
trigger1 = AnimElem = 5
value = 3200,0

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 6
helpertype = Normal
ID = 3250
name = "fire" 
postype = p1
pos = 64,-115
stateno = 3250
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = var(43) != 0
trigger1 = AnimElemtime(6) = 24
helpertype = Normal
ID = 3255
name = "fire" 
postype = p1
pos = 64,-115
stateno = 3255
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 7
helpertype = Normal
ID = 3260
name = "fire" 
postype = p1
pos = 64,-115
stateno = 3260
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = var(43) != 0
trigger1 = AnimElemtime(7) = 24
helpertype = Normal
ID = 3265
name = "fire" 
postype = p1
pos = 64,-115
stateno = 3265
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 8
helpertype = Normal
ID = 3270
name = "fire" 
postype = p1
pos = 64,-115
stateno = 3270
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State exp, *]
type = Explod
trigger1 = AnimElem = 5
anim = 3216
ID = 3216
pos = 64,-115
postype = p1
scale = 1.5,1.5
sprpriority = 2
ownpal = 1
Persistent = 1
removetime = 40

[State exp, *]
type = Explod
trigger1 = AnimElem = 5
anim = 3217
ID = 3217
pos = 64,-115
postype = p1
scale = 0.7,0.7
sprpriority = 4
ownpal = 1
Persistent = 1
removetime = -2
ontop = 1

[State 2000, 1]
type = ChangeState
;trigger1 = HitShakeOver = 1
trigger1 = Time >= 1
value = 3200

[State 2000, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------
;ファイア連発
[Statedef 3280]
type = S
movetype = I
physics = S
velset = 0,0
ctrl = 0
sprpriority = 1
poweradd = 15

[State 3]
type = posset
trigger1 = 1
y = 0

[State varset]
type = varset
trigger1 = 1
v = 7
value = 0

[state 200,hit]
type = hitoverride
trigger1 = (prevstateno != 8320)
trigger1 = var(50) = 0
time = -1
slot = 0
attr = sca, aa, ap
stateno = 8320

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[state 200,changeanim]
type = changeanim
trigger1 = (!time) && (anim != 3200)
value = 3200

[State snd]
type = PlaySnd
trigger1 = AnimElem = 5
value = 3200,0

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(1) = 77
trigger2 = AnimElemtime(1) = 80
trigger3 = AnimElemtime(1) = 83
trigger4 = AnimElemtime(1) = 86
trigger5 = AnimElemtime(1) = 89
trigger6 = AnimElemtime(1) = 92
trigger7 = AnimElemtime(1) = 95
trigger8 = AnimElemtime(1) = 98
trigger9 = AnimElemtime(1) = 101
trigger10 = AnimElemtime(1) = 104
trigger11 = AnimElemtime(1) = 107
trigger12 = AnimElemtime(1) = 110
trigger13 = AnimElemtime(1) = 113
trigger14 = AnimElemtime(1) = 116
trigger15 = AnimElemtime(1) = 119
trigger16 = AnimElemtime(1) = 122
trigger17 = AnimElemtime(1) = 125
trigger18 = AnimElemtime(1) = 128
trigger19 = AnimElemtime(1) = 131
trigger20 = AnimElemtime(1) = 134
trigger21 = AnimElemtime(1) = 137
trigger22 = AnimElemtime(1) = 140
trigger23 = AnimElemtime(1) = 143
trigger24 = AnimElemtime(1) = 146
trigger25 = AnimElemtime(1) = 149
trigger26 = AnimElemtime(1) = 152
trigger27 = AnimElemtime(1) = 155
trigger28 = AnimElemtime(1) = 158
helpertype = Normal
ID = 3281
name = "fire" 
postype = p1
pos = 64,-115
stateno = 3281
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State exp, *]
type = Explod
trigger1 = AnimElem = 5
anim = 3216
ID = 3216
pos = 64,-115
postype = p1
scale = 1.5,1.5
sprpriority = 2
ownpal = 1
Persistent = 1
removetime = 40

[State exp, *]
type = Explod
trigger1 = AnimElem = 5
anim = 3217
ID = 3217
pos = 64,-115
postype = p1
scale = 0.7,0.7
sprpriority = 4
ownpal = 1
Persistent = 1
removetime = -2
ontop = 1

[State exp, *]
type = null;Explod
trigger1 = AnimElem = 5
anim = 3210
ID = 3210
pos = 64,-115
postype = p1
scale = 1.5,1.5
sprpriority = 2
ownpal = 1
Persistent = -1
removetime = 18
ontop = 0

[State exp, *]
type = null;Explod
trigger1 = AnimElemtime(5) = 18
anim = 3215
ID = 3215
pos = 64,-115
postype = p1
scale = 1.5,1.5
sprpriority = 2
ownpal = 1
Persistent = -1
removetime = 22
ontop = 0

[State 200]
type = Explod
trigger1 = AnimElemtime(1) = 60
trigger2 = AnimElemtime(1) = 62
trigger3 = AnimElemtime(1) = 64
trigger4 = AnimElemtime(1) = 66
trigger5 = AnimElemtime(1) = 68
trigger6 = AnimElemtime(1) = 70
trigger7 = AnimElemtime(1) = 72
trigger8 = AnimElemtime(1) = 74
trigger9 = AnimElemtime(1) = 76
trigger10 = AnimElemtime(1) = 78
trigger11 = AnimElemtime(1) = 80
trigger12 = AnimElemtime(1) = 82
trigger13 = AnimElemtime(1) = 84
trigger14 = AnimElemtime(1) = 86
trigger15 = AnimElemtime(1) = 88
trigger16 = AnimElemtime(1) = 90
trigger17 = AnimElemtime(1) = 92
trigger18 = AnimElemtime(1) = 94
trigger19 = AnimElemtime(1) = 96
trigger20 = AnimElemtime(1) = 98
trigger21 = AnimElemtime(1) = 100
trigger22 = AnimElemtime(1) = 102
trigger23 = AnimElemtime(1) = 104
trigger24 = AnimElemtime(1) = 106
trigger25 = AnimElemtime(1) = 108
trigger26 = AnimElemtime(1) = 110
trigger27 = AnimElemtime(1) = 112
trigger28 = AnimElemtime(1) = 114
trigger29 = AnimElemtime(1) = 116
trigger30 = AnimElemtime(1) = 118
trigger31 = AnimElemtime(1) = 120
trigger32 = AnimElemtime(1) = 122
trigger33 = AnimElemtime(1) = 124
trigger34 = AnimElemtime(1) = 126
trigger35 = AnimElemtime(1) = 128
trigger36 = AnimElemtime(1) = 130
trigger37 = AnimElemtime(1) = 132
trigger38 = AnimElemtime(1) = 134
trigger39 = AnimElemtime(1) = 136
trigger40 = AnimElemtime(1) = 138
trigger41 = AnimElemtime(1) = 140
trigger42 = AnimElemtime(1) = 142
trigger43 = AnimElemtime(1) = 144
trigger44 = AnimElemtime(1) = 146
trigger45 = AnimElemtime(1) = 148
trigger46 = AnimElemtime(1) = 150
trigger47 = AnimElemtime(1) = 152
trigger48 = AnimElemtime(1) = 154
trigger49 = AnimElemtime(1) = 156
trigger50 = AnimElemtime(1) = 158
trigger51 = AnimElemtime(1) = 160
anim = 216
id = 216
postype = p1
scale = 1.5,1.5
accel = 0,-.17
random = 40,40
removetime = -2
ownpal = 1
pos = 64,-115
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 1000]
type = ChangeState
trigger1 = life = 0
value = 5150

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------
;ファイア連発（発射）
[Statedef 3281]
type    = A
movetype= A
physics = N
juggle  = 6
anim = 215
ctrl = 0
sprpriority = 2

[state 195,1]
type = varrandom
trigger1 = time = 0
v = 36
range = 0,7

[State 1210]
type = AngleDraw
trigger1 = 1

[State 1210]
type = AngleSet
trigger1 = time = 0
value = -4 - var(36)

[State snd]
type = PlaySnd
trigger1 = time = 0
value = 3280,0

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SP
damage = 11, 3
animtype = back
guardflag = MA
hitflag = MAFP
fall = 1
air.fall = 1
priority = 3
pausetime = 0, 6
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = s1000,0
guardsound = s1010,0
ground.type = low
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -2.4,-4.8
airguard.velocity = -1.7,-1
guard.slidetime = 7
guard.hittime = 7
air.type = High
air.velocity = -2.2,-4.1
air.hittime = 9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 8,0
palfx.time = 12
palfx.sinadd = 140,50,-40,7
palfx.add = 50,-40,-130
getpower = 50,50
guard.kill = 0
fall.recovertime = 8
p2facing = 1
yaccel = .45
fall.yvelocity = -4

[State 7004]
type = Velset
trigger1 = time = 0
x = 7.2
y = 0 + var(36)

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 1100, 1]
type = Helper
trigger1 = MoveContact = 1
helpertype = Normal
ID = 1211
name = "firekieru" 
postype = p2
pos = 0,0
stateno = 1211
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 7001, 3]
type = DestroySelf
trigger1 = MoveContact = 1
trigger2 = time = 100

[State 2000, 1]
type = ChangeState
trigger1 = pos y >= 0 && vel y > 0
value = 3282

;---------------------------------------------------------------------------
[Statedef 8320];攻撃を受けた場合に飛ばされるステート
type = U
movetype = H
physics = U
ctrl = 0
hitdefpersist	= 0
movehitpersist	= 0
hitcountpersist	= 0

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[State 3]
type = posset
trigger1 = 1
y = 0

[State varset]
type = varset
trigger1 = 1
v = 7
value = 0

[State snd]
type = PlaySnd
trigger1 = AnimElem = 5
value = 3200,0

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(1) = 77
trigger2 = AnimElemtime(1) = 80
trigger3 = AnimElemtime(1) = 83
trigger4 = AnimElemtime(1) = 86
trigger5 = AnimElemtime(1) = 89
trigger6 = AnimElemtime(1) = 92
trigger7 = AnimElemtime(1) = 95
trigger8 = AnimElemtime(1) = 98
trigger9 = AnimElemtime(1) = 101
trigger10 = AnimElemtime(1) = 104
trigger11 = AnimElemtime(1) = 107
trigger12 = AnimElemtime(1) = 110
trigger13 = AnimElemtime(1) = 113
trigger14 = AnimElemtime(1) = 116
trigger15 = AnimElemtime(1) = 119
trigger16 = AnimElemtime(1) = 122
trigger17 = AnimElemtime(1) = 125
trigger18 = AnimElemtime(1) = 128
trigger19 = AnimElemtime(1) = 131
trigger20 = AnimElemtime(1) = 134
trigger21 = AnimElemtime(1) = 137
trigger22 = AnimElemtime(1) = 140
trigger23 = AnimElemtime(1) = 143
trigger24 = AnimElemtime(1) = 146
trigger25 = AnimElemtime(1) = 149
trigger26 = AnimElemtime(1) = 152
trigger27 = AnimElemtime(1) = 155
trigger28 = AnimElemtime(1) = 158
helpertype = Normal
ID = 3281
name = "fire" 
postype = p1
pos = 64,-115
stateno = 3281
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State exp, *]
type = Explod
trigger1 = AnimElem = 5
anim = 3216
ID = 3216
pos = 64,-115
postype = p1
scale = 1.5,1.5
sprpriority = 2
ownpal = 1
Persistent = 1
removetime = 40

[State exp, *]
type = Explod
trigger1 = AnimElem = 5
anim = 3217
ID = 3217
pos = 64,-115
postype = p1
scale = 0.7,0.7
sprpriority = 4
ownpal = 1
Persistent = 1
removetime = -2
ontop = 1

[State 200]
type = Explod
trigger1 = AnimElemtime(1) = 60
trigger2 = AnimElemtime(1) = 62
trigger3 = AnimElemtime(1) = 64
trigger4 = AnimElemtime(1) = 66
trigger5 = AnimElemtime(1) = 68
trigger6 = AnimElemtime(1) = 70
trigger7 = AnimElemtime(1) = 72
trigger8 = AnimElemtime(1) = 74
trigger9 = AnimElemtime(1) = 76
trigger10 = AnimElemtime(1) = 78
trigger11 = AnimElemtime(1) = 80
trigger12 = AnimElemtime(1) = 82
trigger13 = AnimElemtime(1) = 84
trigger14 = AnimElemtime(1) = 86
trigger15 = AnimElemtime(1) = 88
trigger16 = AnimElemtime(1) = 90
trigger17 = AnimElemtime(1) = 92
trigger18 = AnimElemtime(1) = 94
trigger19 = AnimElemtime(1) = 96
trigger20 = AnimElemtime(1) = 98
trigger21 = AnimElemtime(1) = 100
trigger22 = AnimElemtime(1) = 102
trigger23 = AnimElemtime(1) = 104
trigger24 = AnimElemtime(1) = 106
trigger25 = AnimElemtime(1) = 108
trigger26 = AnimElemtime(1) = 110
trigger27 = AnimElemtime(1) = 112
trigger28 = AnimElemtime(1) = 114
trigger29 = AnimElemtime(1) = 116
trigger30 = AnimElemtime(1) = 118
trigger31 = AnimElemtime(1) = 120
trigger32 = AnimElemtime(1) = 122
trigger33 = AnimElemtime(1) = 124
trigger34 = AnimElemtime(1) = 126
trigger35 = AnimElemtime(1) = 128
trigger36 = AnimElemtime(1) = 130
trigger37 = AnimElemtime(1) = 132
trigger38 = AnimElemtime(1) = 134
trigger39 = AnimElemtime(1) = 136
trigger40 = AnimElemtime(1) = 138
trigger41 = AnimElemtime(1) = 140
trigger42 = AnimElemtime(1) = 142
trigger43 = AnimElemtime(1) = 144
trigger44 = AnimElemtime(1) = 146
trigger45 = AnimElemtime(1) = 148
trigger46 = AnimElemtime(1) = 150
trigger47 = AnimElemtime(1) = 152
trigger48 = AnimElemtime(1) = 154
trigger49 = AnimElemtime(1) = 156
trigger50 = AnimElemtime(1) = 158
trigger51 = AnimElemtime(1) = 160
anim = 216
id = 216
postype = p1
scale = 1.5,1.5
accel = 0,-.17
random = 40,40
removetime = -2
ownpal = 1
pos = 64,-115
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 2000, 1]
type = ChangeState
;trigger1 = HitShakeOver = 1
trigger1 = Time >= 1
value = 3280

[State 2000, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ファイア当たると消滅
[Statedef 3282]
type = S
movetype = I
physics = S
anim = 3510;216
velset = 0,0
ctrl = 0

[State 200]
type = Explod
trigger1 = time = 1
trigger2 = time = 3
trigger3 = time = 5
anim = 216
id = 216
postype = p1
scale = 1.5,1.5
accel = 0,-.17
random = 25,25
removetime = -2
ownpal = 1
pos = 0, 0
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 7001, 3]
type = DestroySelf
trigger1 = time = 12

;---------------------------------------------------------------
;変身後液
[Statedef 3300]
type = S
movetype = I
physics = S
;velset = 0,0
ctrl = 0
poweradd = 17

[State varset]
type = varset
trigger1 = 1
v = 7
value = 0

[state 200,hit]
type = hitoverride
trigger1 = (prevstateno != 8300)
trigger1 = var(50) = 0
time = -1
slot = 0
attr = sca, aa, ap
stateno = 8300

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[state 200,changeanim]
type = changeanim
trigger1 = (!time) && (anim != 3300)
value = 3300

[State 200, 7]
type = ChangeState
trigger1 = AnimElemtime(4) >= 4
value = 3310
ctrl = 0

;---------------------------------------------------------------------------
[Statedef 8300];攻撃を受けた場合に飛ばされるステート
type = U
movetype = H
physics = U
ctrl = 0
hitdefpersist	= 0
movehitpersist	= 0
hitcountpersist	= 0

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[State varset]
type = varset
trigger1 = 1
v = 7
value = 0

[State 2000, 1]
type = ChangeState
;trigger1 = HitShakeOver = 1
trigger1 = Time >= 1
value = 3300

[State 200, 7]
type = ChangeState
trigger1 = AnimElemtime(4) >= 4
value = 3310
ctrl = 0

;---------------------------------------------------------------
;変身後液(ジャンプ)
[Statedef 3310]
type = A
movetype = I
physics = N
ctrl = 0
poweradd = 10

[state 7800,1]
type = varrandom
trigger1 = 1
v = 18
range = -50,50

[State varset]
type = varset
trigger1 = 1
v = 7
value = 0

[State 40, 4]
type = VarSet
trigger1 = time = 1
v = 34
value = 1

[State 40, 4]
type = VelSet
triggerall = var(34) = 0
trigger1 = time = 0
y = -6.4

[state 1,gravity]
type = gravity
trigger1 = AnimElemtime(2) >= 10

[State snd]
type = PlaySnd
triggerall = var(34) = 0
trigger1 = time = 0
value = 3200,0

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(2) = 0
trigger2 = AnimElemtime(2) = 6
trigger3 = AnimElemtime(2) = 12
trigger4 = AnimElemtime(2) = 18
trigger5 = AnimElemtime(2) = 24
trigger6 = AnimElemtime(2) = 30
trigger7 = var(43) != 0
trigger7 = AnimElemtime(2) = 36
trigger8 = var(43) != 0
trigger8 = AnimElemtime(2) = 42
trigger9 = var(43) != 0
trigger9 = AnimElemtime(2) = 48
trigger10 = var(43) != 0
trigger10 = AnimElemtime(2) = 54
value = 3300,0
channel = 0

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(2) = 0
trigger2 = AnimElemtime(2) = 6
trigger3 = AnimElemtime(2) = 12
trigger4 = AnimElemtime(2) = 18
trigger5 = AnimElemtime(2) = 24
trigger6 = AnimElemtime(2) = 30
trigger7 = var(43) != 0
trigger7 = AnimElemtime(2) = 36
trigger8 = var(43) != 0
trigger8 = AnimElemtime(2) = 42
trigger9 = var(43) != 0
trigger9 = AnimElemtime(2) = 48
trigger10 = var(43) != 0
trigger10 = AnimElemtime(2) = 54
helpertype = Normal
ID = 3305
name = "eki" 
postype = p1
pos = 10+var(18),-80+var(18)
stateno = 3305
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[state 200,hit]
type = hitoverride
trigger1 = (prevstateno != 8310)
trigger1 = var(50) = 0
time = -1
slot = 0
attr = sca, aa, ap
stateno = 8310

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[state 200,changeanim]
type = changeanim
trigger1 = (!time) && (anim != 3301)
value = 3301

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200, 7]
type = ChangeState
trigger1 = pos y >= 0 && vel y > 0
value = 52
ctrl = 0

;---------------------------------------------------------------------------
[Statedef 8310];攻撃を受けた場合に飛ばされるステート
type = U
movetype = H
physics = U
ctrl = 0
hitdefpersist	= 0
movehitpersist	= 0
hitcountpersist	= 0

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[State varset]
type = varset
trigger1 = 1
v = 7
value = 0

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(2) = 0
trigger2 = AnimElemtime(2) = 6
trigger3 = AnimElemtime(2) = 12
trigger4 = AnimElemtime(2) = 18
trigger5 = AnimElemtime(2) = 24
trigger6 = AnimElemtime(2) = 30
trigger7 = var(43) != 0
trigger7 = AnimElemtime(2) = 36
trigger8 = var(43) != 0
trigger8 = AnimElemtime(2) = 42
trigger9 = var(43) != 0
trigger9 = AnimElemtime(2) = 48
trigger10 = var(43) != 0
trigger10 = AnimElemtime(2) = 54
value = 3300,0
channel = 0

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(2) = 0
trigger2 = AnimElemtime(2) = 6
trigger3 = AnimElemtime(2) = 12
trigger4 = AnimElemtime(2) = 18
trigger5 = AnimElemtime(2) = 24
trigger6 = AnimElemtime(2) = 30
trigger7 = var(43) != 0
trigger7 = AnimElemtime(2) = 36
trigger8 = var(43) != 0
trigger8 = AnimElemtime(2) = 42
trigger9 = var(43) != 0
trigger9 = AnimElemtime(2) = 48
trigger10 = var(43) != 0
trigger10 = AnimElemtime(2) = 54
helpertype = Normal
ID = 3305
name = "eki" 
postype = p1
pos = 10+var(18),-80+var(18)
stateno = 3305
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 2000, 1]
type = ChangeState
;trigger1 = HitShakeOver = 1
trigger1 = Time >= 1
value = 3310

[State 2000, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------
;変身後液（発射）
[Statedef 3305]
type    = A
movetype= A
physics = N
juggle  = 6
anim = 3305
ctrl = 0
sprpriority = 2

;[State snd]
;type = PlaySnd
;trigger1 = time = 0
;value = 3300,0
;channel = 0

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
trigger2 = AnimElem = 3
attr = S, SP
;damage = 58, 0
damage = ceil(ifelse(root,var(43) = 0,58,42)),0
animtype = back
;guardflag = MA
hitflag = HAF
fall = 1
priority = 3
pausetime = 0, 8
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = s1000,0
guardsound = s1010,0
ground.type = low
ground.slidetime = 5
ground.hittime  = 6
ground.velocity = -2,-6
airguard.velocity = -1,-1.5
air.type = High
air.velocity = -2,-6
air.hittime = 6
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 40,0
palfx.time = 20
palfx.sinadd = -20,80,50,8
palfx.add = -30,120,60
guard.kill = 0

[State 7004]
type = Velset
trigger1 = root,var(43) = 0
trigger1 = time = 0
y = 5.1

[State 7004]
type = Velset
trigger1 = root,var(43) != 0
trigger1 = time = 0
y = 7.5

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 1100, 1]
type = Helper
trigger1 = pos y >= 0 && vel y > 0
helpertype = Normal
ID = 3307
name = "tiru" 
postype = p1
pos = 0,0
stateno = 3307
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = pos y >= 0 && vel y > 0
helpertype = Normal
ID = 3308
name = "tiru" 
postype = p1
pos = 0,0
stateno = 3307
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = pos y >= 0 && vel y > 0
helpertype = Normal
ID = 3309
name = "tiru" 
postype = p1
pos = 0,0
stateno = 3307
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = pos y >= 0 && vel y > 0
helpertype = Normal
ID = 3310
name = "tiru" 
postype = p1
pos = 0,0
stateno = 3307
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = pos y >= 0 && vel y > 0
helpertype = Normal
ID = 3311
name = "tiru" 
postype = p1
pos = 0,0
stateno = 3307
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 200, 7]
type = ChangeState
trigger1 = pos y >= 0 && vel y > 0
value = 3306
ctrl = 0

;---------------------------------------------------------------
;変身後液（一発目消える）
[Statedef 3306]
type    = S
movetype= A
physics = N
juggle  = 6
velset = 0,0
anim = 3310
ctrl = 0
sprpriority = 2

[State posset]
type = posset
trigger1 = 1
y = 0

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SP
damage = 10, 10
animtype = back
;guardflag = MA
hitflag = HAF
fall = 1
priority = 3
pausetime = 0, 2
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = s1000,0
guardsound = s1010,0
ground.type = low
ground.slidetime = 2
ground.hittime  = 2
ground.velocity = -9,-1
airguard.velocity = -3,-1.0
air.type = High
air.velocity = -9,-1
air.hittime = 2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 28,0
palfx.time = 20
palfx.sinadd = -20,80,50,8
palfx.add = -30,120,60
guard.kill = 0

[State 7004]
type = Velset
trigger1 = time = 0
y = 0

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 7001, 3]
type = DestroySelf
trigger1 = Animtime = 0

;---------------------------------------------------------------------------
;液散る
[Statedef 3307]
type = A
movetype = I
physics = N
velset = 0,-1
anim = 3315
ctrl = 0
sprpriority = 1

[state 7800,1]
type = veladd
trigger1 = time = [1,999]
y = 0.2

[state 7800,1]
type = varrandom
trigger1 = time = 0
v = 19
range = -2,2

[state 7800,1]
type = varrandom
trigger1 = time = 0
v = 20
range = -3,0

[State 7011,2]
type = Veladd
trigger1 = time = 0
x = 0 + var(19)
y = -1 + var(20)

[State 200, 1]
type = DestroySelf
trigger1 = pos y >= 0 && vel y > 0
trigger2 = animtime = 0

;---------------------------------------------------------------
;デモニックメギド
[Statedef 3400]
type = S
movetype = I
physics = S
velset = 0,0
ctrl = 0

[State 3]
type = posset
trigger1 = 1
y = 0

[State varset]
type = varset
trigger1 = 1
v = 7
value = 0

[state 1300,power]
type = poweradd
trigger1 = AnimElemtime(1) = 1
value = -1000

[state 200,hit]
type = hitoverride
trigger1 = (prevstateno != 8311)
trigger1 = var(50) = 0
time = -1
slot = 0
attr = sca, aa, ap
stateno = 8311

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[state 200,changeanim]
type = changeanim
trigger1 = (!time) && (anim != 3400)
value = 3400

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(1) = 0
value = 3400,1

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(1) = 42
value = 4000,0

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(1) = 43
value = 3400,0

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(1) = 45
trigger2 = AnimElemtime(1) = 55
trigger3 = AnimElemtime(1) = 65
value = 3400,2

[State snd]
type = null;PlaySnd
trigger1 = AnimElemtime(1) = 60
value = 1020,0

[State 7015, 1]
type = SuperPause
trigger1 = AnimElemtime(1) = 42
anim = -1

[State 200]
type = Explod
trigger1 = AnimElemtime(1) = 42
anim = 4300
id = 4300
postype = p1
scale = 2,2
removetime = 22
ownpal = 1
ontop = 1
pos = 35,-91
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = AnimElemtime(1) = 42
anim = 4310
id = 4310
postype = p1
scale = 1.5,1.5
removetime = -2
ownpal = 1
ontop = 1
pos = 35,-91
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State exp, *]
type = Explod
trigger1 = AnimElemtime(1) = 55
trigger2 = AnimElemtime(1) = 68
trigger3 = AnimElemtime(1) = 80
trigger4 = AnimElemtime(1) = 95
anim = 226
ID = 3440
pos = 40,-95
postype = p1
scale = 4.0,4.0
sprpriority = 2
ownpal = 1
Persistent = 6
removetime = -2
ontop = 1

[State 7300, 0]
type = Explod
trigger1 = AnimElemtime(1) = 45
anim = 3425
ID = 3425
pos = 40,-95
postype = p1
scale = 1.5,1.5
sprpriority = 5
ontop = 1
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(1) = 85
helpertype = Normal
ID = 3400
name = "fire"
postype = p1
pos = 40,-95
stateno = 3410
size.xscale = 1.5 ;5.0
size.yscale = 1.5 ;5.0
ownpal = 1

[State 1000]
type = ChangeState
trigger1 = life = 0
value = 5150

[State -2]
type = RemoveExplod
trigger1 = Animtime = 0
id = 3410

[State -2]
type = RemoveExplod
trigger1 = Animtime = 0
id = 3411

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------
;デモニックメギド弾（発射）
[Statedef 3410]
type    = A
movetype= A
physics = N
juggle  = 10
anim = 3420 ;3415
ctrl = 0
sprpriority = 2

[State as]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State -2]
type = NotHitBy
trigger1 = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[State snd]
type = PlaySnd
trigger1 = time = 35
value = 3400,3

[State 7300, 0]
type = Explod
trigger1 = time = 38
anim = 3421
ID = 3421
pos = 0,0
postype = p1
accel = .13,0
scale = 1.4,1.4
sprpriority = 1
shadow = 0,0,0
ownpal = 1

[State 7300, 0]
type = Explod
trigger1 = time = 41
anim = 3422
ID = 3422
pos = 0,0
postype = p1
accel = .13,0
scale = 1.3,1.3
sprpriority = 1
shadow = 0,0,0
ownpal = 1

[State 7300, 0]
type = Explod
trigger1 = time = 44
anim = 3423
ID = 3423
pos = 0,0
postype = p1
accel = .13,0
scale = 1.2,1.2
sprpriority = 1
shadow = 0,0,0
ownpal = 1

[State 7001, 2]
type = HitDef
;trigger1 = AnimElem = 1
;trigger2 = AnimElem = 3
trigger1 = time%9 = 0
attr = S, HP
damage = 49, 8
animtype = back
guardflag = MA
hitflag = MAFP
fall = 1
air.fall = 1
priority = 7
pausetime = 0, 1
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = s1000,0
guardsound = s1010,0
ground.type = low 
ground.slidetime = 1
ground.hittime  = 12
ground.velocity = -2,-6
airguard.velocity = -1,-1.8
air.type = High
air.velocity = -2,-2
air.hittime = 12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
palfx.time = 30
palfx.sinadd = 140,50,-40,7
palfx.add = 50,-40,-130
guard.kill = 0

[State 7011,2]
type = Veladd
trigger1 = time > 35
x = 0.13

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 7300, 0]
type = Explod
trigger1 = time = [23,25]
trigger2 = time = [29,31]
trigger3 = time = [35,37]
trigger4 = time = [41,43]
trigger5 = time = [47,49]
trigger6 = time = [53,55]
trigger7 = time = [59,61]
trigger8 = time = [65,67]
trigger9 = time = [71,73]
trigger10 = time = [77,79]
trigger11 = time = [83,85]
trigger12 = time = [89,91]
trigger13 = time = [95,97]
trigger14 = time = [101,105]
trigger15 = time = [109,111]
trigger16 = time = [115,117]
trigger17 = time = [121,123]
anim = 4000
ID = 4000
pos = 10,0
postype = p1
;vel = 2,0
accel = 0,-.13
random = 83,140
removetime = -2
scale = 1.5,1.5
sprpriority = 1
ontop = 1
shadow = 40,40,40
ownpal = 1

[State 200]
type = Explod
trigger1 = MoveHit = 1
trigger2 = MoveHit = 3
trigger3 = MoveHit = 5
trigger4 = MoveHit = 7
trigger5 = MoveHit = 9
trigger6 = MoveHit = 11
anim = 216
id = 216
postype = p2
scale = 1.5,1.5
accel = 0,-.17
random = 60,80
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State -2]
type = RemoveExplod
trigger1 = FrontEdgeBodyDist < -200
ID = 3421

[State -2]
type = RemoveExplod
trigger1 = FrontEdgeBodyDist < -200
ID = 3422

[State -2]
type = RemoveExplod
trigger1 = FrontEdgeBodyDist < -200
ID = 3423

[State 7001, 3]
type = DestroySelf
trigger1 = FrontEdgeBodyDist < -200
;trigger1 = time = 120

;---------------------------------------------------------------------------
[Statedef 8311];攻撃を受けた場合に飛ばされるステート
type = U
movetype = H
physics = U
ctrl = 0
hitdefpersist	= 0
movehitpersist	= 0
hitcountpersist	= 0

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[State 3]
type = posset
trigger1 = 1
y = 0

[State varset]
type = varset
trigger1 = 1
v = 7
value = 0

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(1) = 0
value = 3400,1

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(1) = 42
value = 4000,0

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(1) = 43
value = 3400,0

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(1) = 45
trigger2 = AnimElemtime(1) = 55
trigger3 = AnimElemtime(1) = 65
value = 3400,2

[State snd]
type = null;PlaySnd
trigger1 = AnimElemtime(1) = 60
value = 1020,0

[State 7015, 1]
type = SuperPause
trigger1 = AnimElemtime(1) = 42
anim = -1

[State 200]
type = Explod
trigger1 = AnimElemtime(1) = 42
anim = 4300
id = 4300
postype = p1
scale = 2,2
removetime = 22
ownpal = 1
ontop = 1
pos = 35,-91
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = AnimElemtime(1) = 42
anim = 4310
id = 4310
postype = p1
scale = 1.5,1.5
removetime = -2
ownpal = 1
ontop = 1
pos = 35,-91
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State exp, *]
type = Explod
trigger1 = AnimElemtime(1) = 55
trigger2 = AnimElemtime(1) = 68
trigger3 = AnimElemtime(1) = 80
trigger4 = AnimElemtime(1) = 95
anim = 226
ID = 3440
pos = 40,-95
postype = p1
scale = 4.0,4.0
sprpriority = 2
ownpal = 1
Persistent = 6
removetime = -2
ontop = 1

[State 7300, 0]
type = Explod
trigger1 = AnimElemtime(1) = 45
anim = 3425
ID = 3425
pos = 40,-95
postype = p1
scale = 1.5,1.5
sprpriority = 5
ontop = 1
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(1) = 85
trigger1 = numhelper(3400) = 0
helpertype = Normal
ID = 3400
name = "fire"
postype = p1
pos = 40,-95
stateno = 3410
size.xscale = 1.5 ;5.0
size.yscale = 1.5 ;5.0
ownpal = 1

[State 1000]
type = ChangeState
trigger1 = life = 0
value = 5150

[State -2]
type = RemoveExplod
trigger1 = Animtime = 0
id = 3425

[State -2]
type = RemoveExplod
trigger1 = Animtime = 0
id = 3440

[State 2000, 1]
type = ChangeState
;trigger1 = HitShakeOver = 1
trigger1 = Time >= 1
value = 3400

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------
;フレイムバースト
[Statedef 3500]
type = S
movetype = I
physics = S
velset = 0,0
ctrl = 0

[State 3]
type = posset
trigger1 = 1
y = 0

[State varset]
type = varset
trigger1 = 1
v = 7
value = 0

[state 1300,power]
type = poweradd
trigger1 = AnimElemtime(1) = 1
value = -1000

[state 200,hit]
type = hitoverride
trigger1 = (prevstateno != 8312)
trigger1 = var(50) = 0
time = -1
slot = 0
attr = sca, aa, ap
stateno = 8312

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[state 200,changeanim]
type = changeanim
trigger1 = (!time) && (anim != 3500)
value = 3500

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(1) = 0
value = 3400,1

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(1) = 42
value = 4000,0

[State 7015, 1]
type = SuperPause
trigger1 = AnimElemtime(1) = 42
anim = -1

[State 200]
type = Explod
trigger1 = AnimElemtime(1) = 42
anim = 4300
id = 4300
postype = p1
scale = 2,2
removetime = 22
ownpal = 1
ontop = 1
pos = 35,-91
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = AnimElemtime(1) = 42
anim = 4310
id = 4310
postype = p1
scale = 1.5,1.5
removetime = -2
ownpal = 1
ontop = 1
pos = 35,-91
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(1) = 45
helpertype = Normal
ID = 3510
name = "fire" 
postype = p1
pos = 73,0
stateno = 3510
size.xscale = 1
size.yscale = 1
ownpal = 1

[State 1000]
type = ChangeState
trigger1 = life = 0
value = 5150

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------
;大火柱（ダミー）
[Statedef 3510]
type    = S
movetype= I
physics = N
juggle  = 60
anim = 3510
ctrl = 0
sprpriority = 2

[State 1100, 1]
type = Helper
trigger1 = time = 1
helpertype = Normal
ID = 3520
name = "fire2" 
postype = p1
pos = 0,0
stateno = 3520
size.xscale = 2
size.yscale = 1.8
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = time = 30
helpertype = Normal
ID = 3520
name = "fire2" 
postype = p1
pos = 40,0
stateno = 3520
size.xscale = 2
size.yscale = 1.8
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = time = 60
helpertype = Normal
ID = 3520
name = "fire2" 
postype = p1
pos = 80,0
stateno = 3520
size.xscale = 2
size.yscale = 1.8
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = time = 90
helpertype = Normal
ID = 3520
name = "fire2" 
postype = p1
pos = 120,0
stateno = 3520
size.xscale = 2
size.yscale = 1.8
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = time = 120
helpertype = Normal
ID = 3520
name = "fire2" 
postype = p1
pos = 160,0
stateno = 3520
size.xscale = 2
size.yscale = 1.8
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = time = 150
helpertype = Normal
ID = 3520
name = "fire2" 
postype = p1
pos = 200,0
stateno = 3520
size.xscale = 2
size.yscale = 1.8
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = time = 180
helpertype = Normal
ID = 3520
name = "fire2" 
postype = p1
pos = 240,0
stateno = 3520
size.xscale = 2
size.yscale = 1.8
ownpal = 1

[State 7001, 3]
type = DestroySelf
trigger1 = time = 180

;---------------------------------------------------------------
;大火柱（放出）
[Statedef 3520]
type    = S
movetype= A
physics = N
juggle  = 60
anim = 1910
ctrl = 0
sprpriority = 2

[State snd]
type = PlaySnd
trigger1 = time = 10
value = 5150,1

[State snd]
type = PlaySnd
trigger1 = time = 10
value = 1020,0

[State snd]
type = PlaySnd
trigger1 = time = 10
value = 3500,0

[State 191, 2]
type = posset
trigger1 = time = 0
y = 0

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SP
damage = 96, 9
animtype = back
guardflag = HA
hitflag = MAFD
fall = 1
air.fall = 1
priority = 3
pausetime = 0, 16
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,-50
hitsound = s1000,0
guardsound = s1010,0
ground.type = low 
ground.slidetime = 5
ground.hittime  = 30
ground.velocity = -2.1,-3.9
airguard.velocity = -1.0,-2.0
air.type = High
air.velocity = -2.1,-3.3
air.hittime = 30
down.velocity = -10,-0.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
palfx.time = 28
palfx.sinadd = 140,50,-40,7
palfx.add = 50,-40,-130
guard.kill = 0

[State 200]
type = Explod
trigger1 = time = 10
trigger2 = time = 11
trigger3 = time = 12
trigger4 = time = 13
anim = 4000
id = 4000
postype = p1
scale = 1.5,1.5
accel = 0,-.17
removetime = -2
ownpal = 1
pos = 0, 0
random = 24,12
sprpriority = 5
ontop = 1

[State 200]
type = Explod
trigger1 = time = 20
trigger2 = time = 23
trigger3 = time = 26
trigger4 = time = 29
trigger5 = time = 32
trigger6 = time = 35
trigger7 = time = 38
trigger8 = time = 41
trigger9 = time = 44
anim = 227
id = 227
postype = p1
scale = 1.5,1.5
accel = 0,-.17
removetime = -2
ownpal = 1
pos = 0, -70
random = 40, 178
sprpriority = 5
ontop = 1

[State 200]
type = Explod
trigger1 = MoveHit = 1
trigger2 = MoveHit = 3
trigger3 = MoveHit = 5
trigger4 = MoveHit = 7
trigger5 = MoveHit = 9
trigger6 = MoveHit = 12
trigger7 = MoveHit = 15
trigger8 = MoveHit = 18
trigger9 = MoveHit = 21
trigger10 = MoveHit = 25
anim = 216
id = 216
postype = p2
scale = 1.5,1.5
accel = 0,-.17
random = 60,80
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 2000, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 1461

;---------------------------------------------------------------------------
;大火柱消える
[Statedef 1461]
type = S
movetype = I
physics = N
velset = 0,0
anim = 1911
ctrl = 0

[State 7001, 3]
type = DestroySelf
trigger1 = Animtime = 0

;---------------------------------------------------------------------------
[Statedef 8312];攻撃を受けた場合に飛ばされるステート
type = U
movetype = H
physics = U
ctrl = 0
hitdefpersist	= 0
movehitpersist	= 0
hitcountpersist	= 0

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[State 3]
type = posset
trigger1 = 1
y = 0

[State varset]
type = varset
trigger1 = 1
v = 7
value = 0

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(1) = 0
value = 3400,1

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(1) = 42
value = 4000,0

[State 7015, 1]
type = SuperPause
trigger1 = AnimElemtime(1) = 42
anim = -1

[State 200]
type = Explod
trigger1 = AnimElemtime(1) = 42
anim = 4300
id = 4300
postype = p1
scale = 2,2
removetime = 22
ownpal = 1
ontop = 1
pos = 35,-91
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = AnimElemtime(1) = 42
anim = 4310
id = 4310
postype = p1
scale = 1.5,1.5
removetime = -2
ownpal = 1
ontop = 1
pos = 35,-91
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(1) = 45
helpertype = Normal
ID = 3510
name = "fire" 
postype = p1
pos = 40,0
stateno = 3510
size.xscale = 1
size.yscale = 1
ownpal = 1

[State 1000]
type = ChangeState
trigger1 = life = 0
value = 5150

[State 2000, 1]
type = ChangeState
;trigger1 = HitShakeOver = 1
trigger1 = Time >= 1
value = 3500

[State 2000, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------
;ライトニングアタック(ジャンプ開始)
[Statedef 3600]
type = S
movetype = I
physics = S
velset = 0,0
ctrl = 0

[State 3]
type = posset
trigger1 = 1
y = 0

[State 3600,varset]
type = varset
trigger1 = 1
v = 7
value = 1

[state 200,hit]
type = hitoverride
trigger1 = (prevstateno != 8313)
trigger1 = var(50) = 0
time = -1
slot = 0
attr = sca, aa, ap
stateno = 8313

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[state 200,changeanim]
type = changeanim
trigger1 = (!time) && (anim != 3600)
value = 3600

[State 1000]
type = ChangeState
trigger1 = life = 0
value = 5150

[State 200, 7]
type = ChangeState
trigger1 = AnimElemtime(5) >= 3
value = 3601
ctrl = 0

;---------------------------------------------------------------------------
[Statedef 8313];攻撃を受けた場合に飛ばされるステート
type = U
movetype = H
physics = U
ctrl = 0
hitdefpersist	= 0
movehitpersist	= 0
hitcountpersist	= 0

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[State 3]
type = posset
trigger1 = 1
y = 0

[State 3600,varset]
type = varset
trigger1 = 1
v = 7
value = 1

[State 1000]
type = ChangeState
trigger1 = life = 0
value = 5150

[State 2000, 1]
type = ChangeState
;trigger1 = HitShakeOver = 1
trigger1 = Time >= 1
value = 3600

[State 2000, 1]
type = ChangeState
trigger1 = AnimElemtime(5) >= 3
value = 3601
ctrl = 0

;---------------------------------------------------------------------------
;ライトニングアタック(ジャンプ中)
[Statedef 3601]
type    = A
movetype = I
physics = N
hitdefpersist	= 0
movehitpersist	= 0
hitcountpersist	= 0

[state 200,hit]
type = hitoverride
trigger1 = (prevstateno != 8314)
trigger1 = var(50) = 0
time = -1
slot = 0
attr = sca, aa, ap
stateno = 8314

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[state 200,changeanim]
type = changeanim
trigger1 = (!time) && (anim != 3601)
value = 3601

[State 40, 4]
type = Velset
trigger1 = AnimElemtime(1) = 0
x = -3.2
y = const(velocity.jump.y)/1.3

[State 40, 4]
type = Veladd
trigger1 = AnimElemtime(1) >= 0
trigger1 = vel y < 5
y = 0.1

[State cs]
type = ChangeState
trigger1 = pos y >= 0 && vel y > 0
value = 3602
ctrl = 1

;---------------------------------------------------------------------------
[Statedef 8314];攻撃を受けた場合に飛ばされるステート
type = U
movetype = H
physics = U
ctrl = 0
hitdefpersist	= 0
movehitpersist	= 0
hitcountpersist	= 0

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[State 40, 4]
type = Velset
trigger1 = AnimElemtime(1) = 0
x = -3.2
y = const(velocity.jump.y)/1.3

[State 40, 4]
type = Veladd
trigger1 = AnimElemtime(1) >= 0
trigger1 = vel y < 5
y = 0.1

[State 2000, 1]
type = ChangeState
;trigger1 = HitShakeOver = 1
trigger1 = Time >= 1
value = 3601

[State cs]
type = ChangeState
trigger1 = pos y >= 0 && vel y > 0
value = 3602
ctrl = 1

;---------------------------------------------------------------------------
;ライトニングアタック(着地)
[Statedef 3602]
type    = S
movetype = I
physics = S
ctrl = 0

[state 200,hit]
type = hitoverride
trigger1 = (prevstateno != 8315)
trigger1 = var(50) = 0
time = -1
slot = 0
attr = sca, aa, ap
stateno = 8315

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[state 200,changeanim]
type = changeanim
trigger1 = (!time) && (anim != 3602)
value = 3602

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(1) = 0
value = 3047,0

[State 52, 1]
type = VelSet
trigger1 = AnimElemtime(1) = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = 1
y = 0

[State 2500]
type = envshake
trigger1 = AnimElemtime(1) = 0
time = 14
freq = 4
phase = 10

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 3603
ctrl = 1

;---------------------------------------------------------------------------
[Statedef 8315];攻撃を受けた場合に飛ばされるステート
type = U
movetype = H
physics = U
ctrl = 0
hitdefpersist	= 0
movehitpersist	= 0
hitcountpersist	= 0

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[State 52, 2]
type = PosSet
trigger1 = 1
y = 0

[State 2000, 1]
type = ChangeState
;trigger1 = HitShakeOver = 1
trigger1 = Time >= 1
value = 3602

[State 2000, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 3603
ctrl = 1

;---------------------------------------------------------------
;ライトニングアタック(溜め)
[Statedef 3603]
type = S
movetype = I
physics = S
velset = 0,0
ctrl = 0
poweradd = 45

[State 3]
type = posset
trigger1 = 1
y = 0

[State 3600,varset]
type = varset
trigger1 = 1
v = 7
value = 1

[State 1000]
type = ChangeState
trigger1 = life = 0
value = 5150

[State var]
type = varset
trigger1 = time = 0
v = 17
value = 0

[state 200,hit]
type = hitoverride
trigger1 = (prevstateno != 8316)
trigger1 = var(50) = 0
time = -1
slot = 0
attr = sca, aa, ap
stateno = 8316

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[state 200,changeanim]
type = changeanim
trigger1 = (!time) && (anim != 3603)
value = 3603

[state 3603,turn]
type = turn
trigger1 = roundstate = 2
trigger1 = AnimElemtime(1) = 0
trigger1 = P2Dist x <= 0

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(3) = 6
value = 3600,0

[State 1000, 0]
type = AllPalFX
trigger1 = AnimElemtime(3) = 6
trigger2 = AnimElemtime(3) = 17
trigger3 = AnimElemtime(3) = 24
trigger4 = AnimElemtime(3) = 30
trigger5 = AnimElemtime(3) = 39
trigger6 = AnimElemtime(3) = 46
time = 4
add = 120,120,200
mul = 120,120,200
sinadd = 20,20,50,2
invertall = 0
color = 256

[State 3603, hel]
type = Helper
trigger1 = AnimElemtime(4) = 51
helpertype = Normal
ID = 3615
name = "light" 
postype = p1
pos = 90,-112
stateno = 3615
size.xscale = 2
size.yscale = 2
ownpal = 1

[State exp, *]
type = Explod
trigger1 = AnimElemtime(4) = 0
anim = 3610
ID = 3610
pos = 0,0
postype = p1
scale = 1.5,1.5
sprpriority = 2
ownpal = 1
Persistent = 6
removetime = -2
ontop = 1

[State exp, *]
type = Explod
trigger1 = AnimElemtime(4) = 0
anim = 3611
ID = 3611
pos = 0,0
postype = p1
scale = 1.5,1.5
sprpriority = 2
ownpal = 1
Persistent = 6
removetime = -2
ontop = 1

[State exp, *]
type = Explod
trigger1 = AnimElemtime(4) = 21
anim = 3612
ID = 3612
pos = 0,0
postype = p1
scale = 1.5,1.5
sprpriority = 2
ownpal = 1
Persistent = 6
removetime = -2
ontop = 1

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------
;ライトニングアタック(発射)
[Statedef 3615]
type    = A
movetype= A
physics = N
juggle  = 6
anim = 3615
ctrl = 0
sprpriority = 2

[State 1000, 0]
type = AllPalFX
trigger1 = time = 0
time = 20
add = 170,170,230
mul = 170,170,230
sinadd = 50,50,90,10
invertall = 0
color = 256

[State afimage]
type = AfterImage
trigger1 = time = 0
time = -1
trans = add
length   = 33
timegap  = 1
framegap = 1
PalBright = 140 , 140 , 220
PalContrast = 180 , 180 , 250
PalAdd = 0 , 0 , 0
;PalMul = 1.0 , 1.0 , 1.2
IgnoreHitPause = 1
Persistent = 1

[State snd]
type = PlaySnd
trigger1 = time = 0
value = 3600,1

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SP
damage = 105, 25
animtype = back
;guardflag = MA
hitflag = MAF
fall = 1
priority = 3
pausetime = 0, 23
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = s305,1
guardsound = s1010,0
ground.type = low
ground.slidetime = 14
ground.hittime  = 27
ground.velocity = -7.2,-5.5
airguard.velocity = -.7,-1.3
air.type = High
air.velocity = -7.2,-5.5
air.hittime = 24
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 34,0
fall.recover = 0
palfx.Time = 32
palfx.add = -100,0,256
palfx.sinadd = 110,100,200,15
palfx.color = 256
guard.kill = 0

[State 7004]
type = Velset
trigger1 = time = 0
x = 0.2

[State 7004]
type = Veladd
trigger1 = time >= 10
trigger1 = vel x <= 10
x = 0.3

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 7300, 0]
type = Explod
trigger1 = time%3 = 0
anim = 3616
ID = 3616
pos = 10,-10
postype = p1
vel = -.8,0
random = 30,130
removetime = -2
scale = 2,2
sprpriority = 1
ontop = 1
shadow = 40,40,40
ownpal = 1

[State 7300, 0]
type = Explod
trigger1 = time%6 = 0
anim = 3616
ID = 3616
pos = 7,-5
postype = p1
vel = -.8,0
random = 30,110
removetime = -2
scale = 2,2
sprpriority = 1
ontop = 1
shadow = 40,40,40
ownpal = 1

[State 200]
type = Explod
trigger1 = MoveHit = 1
trigger2 = MoveHit = 6
anim = 226
id = 226
postype = p2
scale = 3,3
removetime = -2
ownpal = 1
bindtime = -1
pos = 0,-60
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 7001, 3]
type = DestroySelf
trigger1 = FrontEdgeBodyDist <= -50

;---------------------------------------------------------------------------
[Statedef 8316];攻撃を受けた場合に飛ばされるステート
type = U
movetype = H
physics = U
ctrl = 0
hitdefpersist	= 0
movehitpersist	= 0
hitcountpersist	= 0

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[State 3]
type = posset
trigger1 = 1
y = 0

[State 3600,varset]
type = varset
trigger1 = 1
v = 7
value = 1

[State 1000]
type = ChangeState
trigger1 = life = 0
value = 5150

[State var]
type = varset
trigger1 = time = 0
v = 17
value = 0

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(3) = 6
value = 3600,0

[State 1000, 0]
type = AllPalFX
trigger1 = AnimElemtime(3) = 6
trigger2 = AnimElemtime(3) = 12
trigger3 = AnimElemtime(3) = 18
trigger4 = AnimElemtime(3) = 22
trigger5 = AnimElemtime(3) = 28
trigger6 = AnimElemtime(3) = 33
trigger7 = AnimElemtime(3) = 37
trigger8 = AnimElemtime(3) = 41
trigger9 = AnimElemtime(3) = 49
time = 2
add = 130,130,210
mul = 130,130,210
sinadd = 20,20,50,1
invertall = 0
color = 256

[State 3603, hel]
type = Helper
trigger1 = AnimElemtime(4) = 51
helpertype = Normal
ID = 3615
name = "light" 
postype = p1
pos = 70,-104
stateno = 3615
size.xscale = 2
size.yscale = 2
ownpal = 1

[State exp, *]
type = Explod
trigger1 = AnimElemtime(4) = 0
anim = 3610
ID = 3610
pos = 0,0
postype = p1
scale = 1.5,1.5
sprpriority = 2
ownpal = 1
Persistent = 6
removetime = -2
ontop = 1

[State exp, *]
type = Explod
trigger1 = AnimElemtime(4) = 0
anim = 3611
ID = 3611
pos = 0,0
postype = p1
scale = 1.5,1.5
sprpriority = 2
ownpal = 1
Persistent = 6
removetime = -2
ontop = 1

[State exp, *]
type = Explod
trigger1 = AnimElemtime(4) = 21
anim = 3612
ID = 3612
pos = 0,0
postype = p1
scale = 1.5,1.5
sprpriority = 2
ownpal = 1
Persistent = 6
removetime = -2
ontop = 1

[State 2000, 1]
type = ChangeState
;trigger1 = HitShakeOver = 1
trigger1 = Time >= 1
value = 3603

[State 2000, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------
;レジェンドビーム
[Statedef 3700]
type = S
movetype = I
physics = S
velset = 0,0
ctrl = 0
poweradd = 40

[state 200,hit]
type = hitoverride
trigger1 = (prevstateno != 8317)
trigger1 = var(50) = 0
time = -1
slot = 0
attr = sca, aa, ap
stateno = 8317

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[state 200,changeanim]
type = changeanim
trigger1 = (!time) && (anim != 3700)
value = 3700

[state 3700,power]
type = poweradd
trigger1 = var(54) != 30
trigger1 = AnimElemtime(1) = 0
value = -250

[State 3]
type = posset
trigger1 = 1
y = 0

[State varset]
type = varset
trigger1 = 1
v = 7
value = 0

[State 1000]
type = ChangeState
trigger1 = life = 0
value = 5150

[state 3603,turn]
type = turn
trigger1 = roundstate = 2
trigger1 = AnimElemtime(1) = 0
trigger1 = P2Dist x <= 0

[State 3603, hel]
type = Helper
triggerall = var(43) = 0
trigger1 = AnimElemtime(3) = 16
helpertype = Normal
ID = 3715
name = "light" 
postype = p1
pos = 58,-134
stateno = 3715
size.xscale = 2
size.yscale = 2
ownpal = 1

[State 3603, hel]
type = Helper
triggerall = var(43) = 0
trigger1 = AnimElemtime(3) = 56
helpertype = Normal
ID = 3716
name = "light" 
postype = p1
pos = -72,-168
stateno = 3715
size.xscale = 2
size.yscale = 2
ownpal = 1

[State 3603, hel]
type = Helper
triggerall = var(43) = 0
trigger1 = AnimElemtime(3) = 96
helpertype = Normal
ID = 3717
name = "light" 
postype = p1
pos = 86,-177
stateno = 3715
size.xscale = 2
size.yscale = 2
ownpal = 1

[State 3603, hel]
type = Helper
triggerall = var(43) != 0
trigger1 = AnimElemtime(3) = 16
trigger2 = AnimElemtime(3) = 96
helpertype = Normal
ID = 3715
name = "light" 
postype = p1
pos = 58,-134
stateno = 3716
size.xscale = 2
size.yscale = 2
ownpal = 1

[State 3603, hel]
type = Helper
triggerall = var(43) != 0
trigger1 = AnimElemtime(3) = 16
trigger2 = AnimElemtime(3) = 96
helpertype = Normal
ID = 3716
name = "light" 
postype = p1
pos = -72,-168
stateno = 3716
size.xscale = 2
size.yscale = 2
ownpal = 1

[State 3603, hel]
type = Helper
triggerall = var(43) != 0
trigger1 = AnimElemtime(3) = 16
trigger2 = AnimElemtime(3) = 96
helpertype = Normal
ID = 3717
name = "light" 
postype = p1
pos = 86,-177
stateno = 3716
size.xscale = 2
size.yscale = 2
ownpal = 1

[State exp, *]
type = Explod
triggerall = var(43) = 0
trigger1 = AnimElemtime(3) = 6
anim = 3712
ID = 3712
pos = 0,0
postype = p1
scale = 1.5,1.5
sprpriority = 2
bindtime = -1
ownpal = 1
Persistent = 6
removetime = -2
ontop = 1

[State exp, *]
type = Explod
triggerall = var(43) = 0
trigger1 = AnimElemtime(3) = 46
anim = 3711
ID = 3711
pos = 0,0
postype = p1
scale = 1.5,1.5
sprpriority = 2
bindtime = -1
ownpal = 1
Persistent = 6
removetime = -2
ontop = 1

[State exp, *]
type = Explod
triggerall = var(43) = 0
trigger1 = AnimElemtime(3) = 86
anim = 3710
ID = 3710
pos = 0,0
postype = p1
scale = 1.5,1.5
sprpriority = 2
bindtime = -1
ownpal = 1
Persistent = 6
removetime = -2
ontop = 1

[State exp, *]
type = Explod
triggerall = var(43) != 0
trigger1 = AnimElemtime(3) = 6
trigger2 = AnimElemtime(3) = 86
anim = 3712
ID = 3712
pos = 0,0
postype = p1
scale = 1.5,1.5
sprpriority = 2
bindtime = -1
ownpal = 1
Persistent = 6
removetime = -2
ontop = 1

[State exp, *]
type = Explod
triggerall = var(43) != 0
trigger1 = AnimElemtime(3) = 6
trigger2 = AnimElemtime(3) = 86
anim = 3711
ID = 3711
pos = 0,0
postype = p1
scale = 1.5,1.5
sprpriority = 2
bindtime = -1
ownpal = 1
Persistent = 6
removetime = -2
ontop = 1

[State exp, *]
type = Explod
triggerall = var(43) != 0
trigger1 = AnimElemtime(3) = 6
trigger2 = AnimElemtime(3) = 86
anim = 3710
ID = 3710
pos = 0,0
postype = p1
scale = 1.5,1.5
sprpriority = 2
bindtime = -1
ownpal = 1
Persistent = 6
removetime = -2
ontop = 1

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------
;レジェンドビーム(ノーマル発射)
[Statedef 3715]
type    = A
movetype= A
physics = N
juggle  = 3
anim = 3715
ctrl = 0
sprpriority = 3

[state 3715,turn]
type = turn
trigger1 = roundstate = 2
trigger1 = time = 0
trigger1 = P2Dist x <= -10

[State afimage]
type = AfterImage
trigger1 = time = 0
time = -1
trans = add
length   = 10
timegap  = 1
framegap = 1
PalBright = 30 , 30 , 80
PalContrast = 60 , 60 , 110
PalAdd = 0 , 0 , 0
;PalMul = 1.0 , 1.0 , 1.2
IgnoreHitPause = 1
Persistent = 1

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(2) = 0
value = 3700,0

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
trigger2 = AnimElem = 2
attr = S, SP
damage = ceil(ifelse(P2statetype = L,28,85)),14
animtype = back
guardflag = MA
hitflag = MAFD
fall = 1
priority = 3
pausetime = 0, 16
sparkno = S1500
guard.sparkno = S1500
sparkxy = -18,26
hitsound = s305,1
guardsound = s1010,0
ground.type = low
ground.slidetime = 9
ground.hittime  = 38
ground.velocity = -3.7,-3.5
airguard.velocity = -.4,-1.1
air.type = High
air.velocity = -3.7,-3.5
air.hittime = 38
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 23,0
palfx.Time = 32
palfx.add = -20,-20,256
palfx.sinadd = 150,150,200,15
palfx.color = 256
guard.kill = 1

[State 3715,Velset]
type = Velset
trigger1 = AnimElemtime(2) = 0
trigger1 = p2dist y < 0
x = 3.5

[State 3715,Velset]
type = Velset
trigger1 = AnimElemtime(2) = 0
trigger1 = p2dist x >= 100
trigger1 = p2dist y >= 0
x = p2dist x / 100 +2

[State 3715,Velset]
type = Velset
trigger1 = AnimElemtime(2) = 0
trigger1 = p2dist x <= 99
trigger1 = p2dist x >= 50
trigger1 = p2dist y >= 0
x = p2dist x / 100 +.8

[State 3715,Velset]
type = Velset
trigger1 = AnimElemtime(2) = 0
trigger1 = p2dist x <= 49
trigger1 = p2dist y >= 0
x = p2dist x / 100

[State 3715,Velset]
type = Velset
trigger1 = AnimElemtime(2) = 0
trigger1 = p2dist x >= 100
trigger1 = p2dist y >= 0
y = p2dist y / 100 -.2

[State 3715,Velset]
type = Velset
trigger1 = AnimElemtime(2) = 0
trigger1 = p2dist x <= 99
trigger1 = p2dist y >= 0
y = p2dist y / 100 +.8

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = MoveHit = 1
trigger2 = MoveHit = 6
anim = 226
id = 226
postype = p2
scale = 2.5,2.5
removetime = -2
ownpal = 1
bindtime = -1
pos = 0,-60
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 7001, 3]
type = DestroySelf
trigger1 = pos y >= -22
trigger2 = FrontEdgeBodyDist <= -50

;---------------------------------------------------------------
;レジェンドビーム(ハード発射)
[Statedef 3716]
type    = A
movetype= A
physics = N
juggle  = 3
anim = 3715
ctrl = 0
sprpriority = 3

[state 3715,turn]
type = turn
trigger1 = roundstate = 2
trigger1 = time = 0
trigger1 = P2Dist x <= -10

[State afimage]
type = AfterImage
trigger1 = time = 0
time = -1
trans = add
length   = 10
timegap  = 1
framegap = 1
PalBright = 30 , 30 , 80
PalContrast = 60 , 60 , 110
PalAdd = 0 , 0 , 0
;PalMul = 1.0 , 1.0 , 1.2
IgnoreHitPause = 1
Persistent = 1

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(2) = 0
value = 3700,0
volume = -200

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
trigger2 = AnimElem = 2
attr = S, SP
damage = ceil(ifelse(P2statetype = L,20,40)),2
animtype = back
guardflag = MA
hitflag = MAFD
fall = 1
priority = 3
pausetime = 0, 16
sparkno = S1500
guard.sparkno = S1500
sparkxy = -18,26
hitsound = s305,1
guardsound = s1010,0
ground.type = low
ground.slidetime = 9
ground.hittime  = 38
ground.velocity = -3.7,-3.5
airguard.velocity = -.4,-1.1
air.type = High
air.velocity = -3.7,-3.5
air.hittime = 38
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 23,0
palfx.Time = 32
palfx.add = -20,-20,256
palfx.sinadd = 150,150,200,15
palfx.color = 256
guard.kill = 1

[State 3715,Velset]
type = Velset
trigger1 = AnimElemtime(2) = 0
trigger1 = p2dist y < 0
x = 3.5

[State 3715,Velset]
type = Velset
trigger1 = AnimElemtime(2) = 0
trigger1 = p2dist x >= 100
trigger1 = p2dist y >= 0
x = p2dist x / 100 +2

[State 3715,Velset]
type = Velset
trigger1 = AnimElemtime(2) = 0
trigger1 = p2dist x <= 99
trigger1 = p2dist x >= 50
trigger1 = p2dist y >= 0
x = p2dist x / 100 +.8

[State 3715,Velset]
type = Velset
trigger1 = AnimElemtime(2) = 0
trigger1 = p2dist x <= 49
trigger1 = p2dist y >= 0
x = p2dist x / 100

[State 3715,Velset]
type = Velset
trigger1 = AnimElemtime(2) = 0
trigger1 = p2dist x >= 100
trigger1 = p2dist y >= 0
y = p2dist y / 100 -.2

[State 3715,Velset]
type = Velset
trigger1 = AnimElemtime(2) = 0
trigger1 = p2dist x <= 99
trigger1 = p2dist y >= 0
y = p2dist y / 100 +.8

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = MoveHit = 1
trigger2 = MoveHit = 6
anim = 226
id = 226
postype = p2
scale = 2.5,2.5
removetime = -2
ownpal = 1
bindtime = -1
pos = 0,-60
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 7001, 3]
type = DestroySelf
trigger1 = pos y >= -22
trigger2 = FrontEdgeBodyDist <= -50

;---------------------------------------------------------------------------
[Statedef 8317];攻撃を受けた場合に飛ばされるステート
type = U
movetype = H
physics = U
ctrl = 0
hitdefpersist	= 0
movehitpersist	= 0
hitcountpersist	= 0

[State -2]
type = NotHitBy
trigger1 = 1
trigger1 = var(50) = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[State 3]
type = posset
trigger1 = 1
y = 0

[State varset]
type = varset
trigger1 = 1
v = 7
value = 0

[state 3700,power]
type = poweradd
trigger1 = AnimElemtime(1) = 0
value = -250

[State 1000]
type = ChangeState
trigger1 = life = 0
value = 5150

[state 3603,turn]
type = turn
trigger1 = roundstate = 2
trigger1 = AnimElemtime(1) = 0
trigger1 = P2Dist x <= 0

[State 3603, hel]
type = Helper
triggerall = var(43) = 0
trigger1 = AnimElemtime(3) = 16
helpertype = Normal
ID = 3715
name = "light" 
postype = p1
pos = 58,-134
stateno = 3715
size.xscale = 2
size.yscale = 2
ownpal = 1

[State 3603, hel]
type = Helper
triggerall = var(43) = 0
trigger1 = AnimElemtime(3) = 56
helpertype = Normal
ID = 3716
name = "light" 
postype = p1
pos = -72,-168
stateno = 3715
size.xscale = 2
size.yscale = 2
ownpal = 1

[State 3603, hel]
type = Helper
triggerall = var(43) = 0
trigger1 = AnimElemtime(3) = 96
helpertype = Normal
ID = 3717
name = "light" 
postype = p1
pos = 86,-177
stateno = 3715
size.xscale = 2
size.yscale = 2
ownpal = 1

[State 3603, hel]
type = Helper
triggerall = var(43) != 0
trigger1 = AnimElemtime(3) = 16
trigger2 = AnimElemtime(3) = 96
helpertype = Normal
ID = 3715
name = "light" 
postype = p1
pos = 58,-134
stateno = 3716
size.xscale = 2
size.yscale = 2
ownpal = 1

[State 3603, hel]
type = Helper
triggerall = var(43) != 0
trigger1 = AnimElemtime(3) = 16
trigger2 = AnimElemtime(3) = 96
helpertype = Normal
ID = 3716
name = "light" 
postype = p1
pos = -72,-168
stateno = 3716
size.xscale = 2
size.yscale = 2
ownpal = 1

[State 3603, hel]
type = Helper
triggerall = var(43) != 0
trigger1 = AnimElemtime(3) = 16
trigger2 = AnimElemtime(3) = 96
helpertype = Normal
ID = 3717
name = "light" 
postype = p1
pos = 86,-177
stateno = 3716
size.xscale = 2
size.yscale = 2
ownpal = 1

[State exp, *]
type = Explod
triggerall = var(43) = 0
trigger1 = AnimElemtime(3) = 6
anim = 3712
ID = 3712
pos = 0,0
postype = p1
scale = 1.5,1.5
sprpriority = 2
bindtime = -1
ownpal = 1
Persistent = 6
removetime = -2
ontop = 1

[State exp, *]
type = Explod
triggerall = var(43) = 0
trigger1 = AnimElemtime(3) = 46
anim = 3711
ID = 3711
pos = 0,0
postype = p1
scale = 1.5,1.5
sprpriority = 2
bindtime = -1
ownpal = 1
Persistent = 6
removetime = -2
ontop = 1

[State exp, *]
type = Explod
triggerall = var(43) = 0
trigger1 = AnimElemtime(3) = 86
anim = 3710
ID = 3710
pos = 0,0
postype = p1
scale = 1.5,1.5
sprpriority = 2
bindtime = -1
ownpal = 1
Persistent = 6
removetime = -2
ontop = 1

[State exp, *]
type = Explod
triggerall = var(43) != 0
trigger1 = AnimElemtime(3) = 6
trigger2 = AnimElemtime(3) = 86
anim = 3712
ID = 3712
pos = 0,0
postype = p1
scale = 1.5,1.5
sprpriority = 2
bindtime = -1
ownpal = 1
Persistent = 6
removetime = -2
ontop = 1

[State exp, *]
type = Explod
triggerall = var(43) != 0
trigger1 = AnimElemtime(3) = 6
trigger2 = AnimElemtime(3) = 86
anim = 3711
ID = 3711
pos = 0,0
postype = p1
scale = 1.5,1.5
sprpriority = 2
bindtime = -1
ownpal = 1
Persistent = 6
removetime = -2
ontop = 1

[State exp, *]
type = Explod
triggerall = var(43) != 0
trigger1 = AnimElemtime(3) = 6
trigger2 = AnimElemtime(3) = 86
anim = 3710
ID = 3710
pos = 0,0
postype = p1
scale = 1.5,1.5
sprpriority = 2
bindtime = -1
ownpal = 1
Persistent = 6
removetime = -2
ontop = 1

[State 2000, 1]
type = ChangeState
;trigger1 = HitShakeOver = 1
trigger1 = Time >= 1
value = 3700

[State 2000, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


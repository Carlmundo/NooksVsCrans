; サンプルキャラクター『カンフーマン』のコンスタンツとステートのファイルです。
;===========================================================================
; コンスタンツ（定数）
;===========================================================================
;---------------------------------------------------------------------------
; ここがキャラの心臓部とも言うべき場所。
; １キャラ単位のライフや大きさなど、標準のステータスを予め決めておく部分。
; このコーナー自体省略出来ません。
;---------------------------------------------------------------------------
; 基本データ
;---------------------------------------------------------------------------
[Data]
life              = 1000   ;ライフ（体力ゲージ）最大値
power             = 3000   ;パワーゲージ最大値（オプション・デフォルトは3000=Lv.3）
attack            = 100    ;攻撃力（デフォルトは１００％）
defence           = 100    ;防御力（デフォルトは１００％）
fall.defence_up   = 50     ;横に倒れている時に一時的に加える防御力（％）
liedown.time      = 60     ;横に倒れている時間（フレーム）
airjuggle         = 15     ;ジャグルポイント限界値（「小ネタ.txt」参照）
sparkno           = 2      ;デフォルトのヒットスパーク（fightfxから）
guard.sparkno     = 40     ;デフォルトのガードスパーク（fightfxから）
KO.echo           = 0      ;ＫＯ時の音声（11,0）にエコーを掛けるか否か（0=掛けない,1=掛ける）
volume            = 0      ;キャラの標準の音量（最小-255・最大255）
IntPersistIndex   = 60     ;次のラウンドへ持ち越せる「Var」のアドレスの範囲を決める（※１）
FloatPersistIndex = 40     ;次のラウンドへ持ち越せる「FVar」のアドレスの範囲を決める（※１）

;---------------------------------------------------------------------------
; ※１：変数のラウンド持ち越し方法
;
; 　変数を次のラウンドへ持ち越したい場合は、↑の
; 　「IntPersistIndex」と「FloatPersistIndex」を使う。
; 　そのやり方はM.U.G.E.Nの説明書にすら載ってないので、ここで例を元に解説。
;
; 　①IntPersistIndex = 23　（Var(23)～Var(59)までを全て次のラウンドへ持ち越せる）
; 　②FloatPersistIndex = 18（FVar(18)～FVar(39)までを全て次のラウンドへ持ち越せる）
;
; 　つまり「Var(**)（Fvar(**)）以降全ての変数を持ち越す」という命令になる。
; 　それ以前のアドレスの変数は全て持ち越さなくなる。
;
; 　全ての変数を持ち越さない場合は、
; 　IntPersistIndexは60以上、FloatPersistIndexは40以上にしておこう。
;
; 　×これはダメ×
; 　　①IntPersistIndex = 10,15,20,25　（15,20,25の部分は意味無し）
; 　　②FloatPersistIndex = 4,16 　　　（16の部分は意味無し）
; 　　これらは最初の数字以外全て無効。
; 
;---------------------------------------------------------------------------
; 改訂前の和訳ＫＦＭではPersistIndexの解釈が無茶苦茶間違ってました。
; 大変失礼致しました。(人・ω・｀)ごめんなさい
; 今回はちゃんと調べて正確な情報を載せてるんで安心してください（苦笑
;---------------------------------------------------------------------------
; サイズ
;---------------------------------------------------------------------------
[Size]
xscale           = 0.5;1       ;キャラの横の大きさ（絶対値・float）
yscale           = 0.5;1       ;キャラの縦の大きさ（絶対値・float）
ground.back      = 15      ;地上にいる時の「後方の物理的な幅」
ground.front     = 16      ;地上にいる時の「前方の物理的な幅」
air.back         = 12      ;空中にいる時の「後方の物理的な幅」
air.front        = 12      ;空中にいる時の「前方の物理的な幅」
height           = 60      ;キャラの物理的な高さ（高いほど相手は飛び越しにくくなる）
attack.dist      = 160     ;相手がガード態勢に入る最低の距離
proj.attack.dist = 90      ;自分の「Projectile」に対して相手がガード態勢に入る最低の距離
proj.doscale     = 0       ;xscaleとyscaleを「Projectile」にも影響させるか否か（0=させない・1=させる）
head.pos         = 3,-111;-5,-90  ;キャラの標準の頭の座標（Bind系で適用される）
mid.pos          = 5,-80;-5,-60  ;キャラの標準の体中心の座標（Bind系で適用される）
shadowoffset     = 0       ;影のＹ軸方向の位置座標
draw.offset      = 0,0     ;キャラの表示座標（Ｘ軸,Ｙ軸）

;---------------------------------------------------------------------------
; 移動速度
;---------------------------------------------------------------------------
[Velocity]
walk.fwd     = 2.4         ;前進速度（Ｘ軸・[Statedef 20]に適用される）
walk.back    = -2.2        ;後退速度（Ｘ軸・[Statedef 20]に適用される）
run.fwd      = 4.5,0;4.6,0       ;前方に走る速度（Ｘ軸,Ｙ軸・[Statedef 100]に適用される）
run.back     = -4.5,-3.8   ;後方に走る速度（Ｘ軸,Ｙ軸・[Statedef 105]に適用される）
jump.neu     = 0,-10.4;0,-8.4      ;垂直ジャンプの速度（Ｘ軸,Ｙ軸・[Statedef 40]に適用される）
jump.back    = -2.85;-2.55       ;後方ジャンプの速度（Ｘ軸・[Statedef 40]に適用される）
jump.fwd     = 2.85;2.5         ;前方ジャンプの速度（Ｘ軸・[Statedef 40]に適用される）
runjump.back = -2.55,-8.1  ;後方に走ってからのジャンプ速度（Ｘ軸,Ｙ軸・[Statedef 40]に適用される）
runjump.fwd  = 4,-8.1      ;前方に走ってからのジャンプ速度（Ｘ軸,Ｙ軸・[Statedef 40]に適用される）
airjump.neu  = 0,-8.1      ;空中垂直ジャンプ速度（Ｘ軸,Ｙ軸・[Statedef 45]に適用される）
airjump.back = -2.55       ;空中後方ジャンプ速度（Ｘ軸・[Statedef 45]に適用される）
airjump.fwd  = 2.5         ;空中前方ジャンプ速度（Ｘ軸・[Statedef 45]に適用される）

;---------------------------------------------------------------------------
; 運動関係
;---------------------------------------------------------------------------
[Movement]
airjump.num     = 0;1        ;空中ジャンプが出来る回数
airjump.height  = 35       ;空中ジャンプが出来る最低の高度（Ｙ軸）
yaccel          = .65;.44      ;Ｙ軸加速度（重力）
stand.friction  = .85      ;立っている時の摩擦係数（ステートのPhysicsが「S」の時）
crouch.friction = .82      ;しゃがんでいる時の摩擦係数（ステートのPhysicsが「C」の時）

;===========================================================================
; ステート
;===========================================================================
;---------------------------------------------------------------------------
; ここからはキャラのそれぞれの行動（ステート）を設定する。
; 番号（ステートナンバー）に気を付ければ良いだけで、
; 行動の決め方もステートの数も作りたいキャラによって自由。
;
; 本来ステートは別のファイルとして扱っているものだけど、
; このようにコンスタンツファイルと一緒にまとめる事も可能。
;
; ステートの基本的な設定はおまけフォルダの「テンプレート.txt」を参照。
;===========================================================================
; 基本行動
;===========================================================================
;---------------------------------------------------------------------------
;タイムオーバー（負けた時）
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, 無敵]
type = NotHitBy
trigger1 = 1 ;トリガーを何も書かず「1」にする事により、『無条件で常に実行させる命令』になる。
value = SCA
time = 1

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;勝利ポーズ分岐（common1.cnsには無いけど、これもコモンステート）
[Statedef 180]
type = S

[State 180, ステート変更]
type = ChangeState
trigger1 = Time = 0
value = 181

;---------------------------------------------------------------------------
;勝利ポーズ（礼をする）
[Statedef 181]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;イントロ（試合開始前の登場演出アクション）
[Statedef 191]
type = S
ctrl = 0
anim = 0;190
velset = 0,0

[State 191, アニメ変更];バトル画面に切り替わった瞬間のフェードインの時、アニメを固定している
type = ChangeAnim
trigger1 = RoundState = 0
value = 0;190

[State 191, 特殊効果];試合が開始するまではこのコントローラを使おう（※２）
type = AssertSpecial
trigger1 = 1
flag = Intro ;イントロの状態

[State 191, ステート変更];アニメーションが終われば「通常立ち」のステートに変更する
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;これがカンフーマンが蹴る板。カンフーマンのステートをあなたのキャラに使うなら、
;下にある二つの「Explod」のステートコントローラを消してお使いください。

;[State 191, エフェクト];飛んで来る板
;type = Explod
;trigger1 = RoundState != 0
;anim = 191
;postype = p1
;pos = 260, -90
;velocity = -4.2, -7
;accel = 0, .32
;removetime = 48
8;persistent = 0

;[State 191, エフェクト];蹴られて板壊れる
;type = Explod
;trigger1 = AnimElemTime(7) = 1
;anim = 192
;postype = p1
;pos = 60, -70
;velocity = 2, -4
;accel = 0, .32
;removetime = 35

;カンフーマンのファイルを使ってあなた自身のキャラを作っているなら、
;同じく下にある二つの「PlaySnd」のステートコントローラを消してお使いください。
;この二つは板を蹴る時の音声を再生します。

;[State 191, 音を鳴らす];蹴った瞬間の音
;type = PlaySnd
;trigger1 = AnimElem = 7
;value = F5,2
;volume = -40

;[State 191, 音を鳴らす];蹴った直後の音
;type = PlaySnd
;trigger1 = AnimElemTime(7) = 3
;value = F5,3
;volume = -80

;---------------------------------------------------------------------------
; ※２：AssertSpecial
;
; 　他のコントローラでは設定出来ない『特殊な効果』を指定する命令。
; 　設定したトリガーが有効になってる間だけ一時的に適用される。
;
; 　適用出来るパラメータはこのコントローラを一つ設置する場合、最大３つまで。
; 　書式としては「flag」「flag2」「flag3」を順に加えていく形。
; 　flag2とflag3はオプション。ではその特殊効果を全て紹介。
;
; 　Intro          = イントロ（試合開始前の登場演出アクション）の状態になる。イントロステート専用。
; 　Invisible      = 自分の姿を消す。しかし残像（AfterImage）は消せない。
; 　RoundNotOver   = 現在のラウンドを過ぎない。勝利ポーズ専用。
; 　NoBarDisplay   = ライフバーを非表示にする。
; 　NoBG           = ステージの奥の画像を非表示にし、「真っ黒の背景」にする。
; 　NoFG           = ステージの手前の画像を非表示にする。
; 　NoStandGuard   = 立ちガードが出来なくなる。
; 　NoCrouchGuard  = しゃがみガードが出来なくなる。
; 　NoAirGuard     = 空中ガードが出来なくなる。
; 　NoAutoTurn     = 自動で振り向かない。
; 　NoJuggleCheck  = ジャグルをチェックしない。（ジャグルポイントが減らなくなる）
; 　NoKOSnd        = ＫＯ時の音声（11,0）を鳴らさないようにする。画面中に存在する全員に有効なので注意。
; 　NoKOSlow       = ＫＯ時のスローモーションを無効にする。（ＫＯ直前に有効にしないといけない）
; 　NoShadow       = 自分の影を消す。
; 　GlobalNoShadow = 画面中に存在する全てのプレイヤー（ヘルパーとProjectileも含む）の影を消す。
; 　NoMusic        = 演奏しているＢＧＭを止める。（プラグインによってはＢＧＭがバグるので要注意）
; 　NoWalk         = 歩かない。（前か後ろのキーを入力中コントロールが可能の時に勝手に[Statedef 20]にならない）
; 　TimerFreeze    = タイムカウント（制限時間）を停止する。
; 　UnGuardable    = 自分の全ての攻撃が『ガード不可』になる。
;
;---------------------------------------------------------------------------
;挑発
[Statedef 195]
type = S
movetype = I
physics = S
ctrl = 0
anim = 195
velset = 0,0
sprpriority = 2

[State 700, パワーゲージ増減]
type = PowerAdd
trigger1 = 1
value = 6

[State 700, 押し判定]
type = PlayerPush
trigger1 = 1
value = 0 ;相手を押さず、すり抜ける事が出来る。

[State 195, コントロール]
type = CtrlSet
trigger1 = Time = 150;40 ;このステートが４０フレームになったら
value = 1            ;キーコントロールが可能になる。

[State 195, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;===========================================================================
; 通常攻撃技
;===========================================================================
;---------------------------------------------------------------------------
; 通常技はそんなに難しいテクニックは使ってないから、
; テンプレートを見ながら確認すれば覚えやすいと思う。
; 基本忘るべからず。
;
; ステートナンバーは、立ち技が２００～２９９、しゃがみ技が４００～４９９、
; ジャンプ技が６００～６９９の間で決めて作るのが一般的。
; しかし強制じゃないので自由に作っちゃってＯＫ。
;---------------------------------------------------------------------------
;立ち弱パンチ
[Statedef 200]
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 200
poweradd = 20
sprpriority = 2
facep2 = 1

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA ;立ち通常打撃（Standing, Normal Attack）
damage = 23, 0
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 8, 8
sparkno = 0
sparkxy = -10, -76
hitsound = 5, 0
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 10
ground.velocity = -4
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -1.4,-3
air.hittime = 12

[State 200, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 下の「立ち強パンチ」のステートを見てみましょ。
;
;「Width」のコントローラは相手や画面端を押すための『物理的な幅』を
; 一時的に伸ばしたり縮ませたりする命令。
; キャラの幅はバトル中に「Ctrl+C」を押して「判定ボックス」を表示させてる時に
; 一緒に確認出来る。「軸位置から伸びる黄緑色の線」がその幅。
;
; 後は「ChangeAnim」を使って５枚目で攻撃を当てたらすぐに６枚目に
; コマを進ませる命令をしてたり、
;『画像表示優先度』で「振りかぶる時は奥」「振り切った直後から手前」に
; モーション表示の操作をしてるくらいで、難しくない処理。
;
; これは余談だけど、Widthの読み方は「ウィッズ」。
; この解説文書いた時に初めて読み方知ったよ！　｡ﾟ(ﾟつД`ﾟ)ﾟ｡
;---------------------------------------------------------------------------
;銃撃
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 1;4
poweradd= 20;65
ctrl = 0
velset = 0,0
anim = 210
sprpriority = -1

[State 210, アニメ変更]
type = ChangeAnim
trigger1 = AnimElemTime(6) > 0 && AnimElemTime(7) <= 0
trigger1 = movecontact
value = 210
elem = 7
ignorehitpause = 1
persistent = 0

[State 210, 画像表示優先度]
type = SprPriority
trigger1 = AnimElem = 6;2
value = 2

[State 210, tama]
type=VarAdd
trigger1=Animelem = 6
var(6)=1

[State 210, tama]
type=VarSet
trigger1=Animelem >= 10
var(6)=0

[State 210, 物理的なキャラの幅]
type = Width
trigger1 = (AnimElemTime (6) >= 0) && (AnimElemTime (9) < 0)
value = 15,0  ;この場合キャラの幅を一時的に前に１５ピクセル伸ばす事になる。
              ;値の意味は「前方のピクセル増減量,後方のピクセル増減量」

[State 210, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 6;trigger1 = Time = 15;2
value = 0, 4
volume = -70

[State 210, ヒット定義]
type = HitDef
trigger1 = AnimElem = 6
attr = S, NA
animtype  = Light;Medium
damage    = 8,1;9;57
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 3,3;7,7;12,12
sparkno = s30020;-1;s30000;1
sparkxy = -10,-70
hitsound   = 5,2
guardsound = 6,0
ground.type = High
ground.slidetime = 8;12
ground.hittime  = 10;13
ground.velocity = -4;-5.5
air.velocity = -1.4,-3;-2.5,-4

[State 400, エフェクト]
type = Explod
trigger1 = movehit
anim = -1;30000
facing = 1
postype = p2
pos = 5,-95-ceil(P2BodyDist Y)
random = 20,10
sprpriority = 3
ownpal = 1
scale = .6,.6
pausemovetime = 73640
supermovetime = 73640
supermove = 1
bindtime = 1
persistent = 0
ignorehitpause = 1

[State 210, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;追撃
[Statedef 211]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd= 20
ctrl = 0
velset = 0,0
anim = 211
sprpriority = -1

[State 210, アニメ変更]
type = ChangeAnim
trigger1 = AnimElemTime(2) > 0 && AnimElemTime(3) <= 0
trigger1 = movecontact
value = 211
elem = 3
ignorehitpause = 1
persistent = 0

[State 210, tama]
type=VarAdd
trigger1=Animelem = 2
var(6)=1

[State 210, tama]
type=VarSet
trigger1=Animelem >= 6
var(6)=0

[State 210, 画像表示優先度]
type = SprPriority
trigger1 = AnimElem = 2
value = 2

[State 210, 物理的なキャラの幅]
type = Width
trigger1 = (AnimElemTime (2) >= 0) && (AnimElemTime (5) < 0)
value = 15,0  ;この場合キャラの幅を一時的に前に１５ピクセル伸ばす事になる。
              ;値の意味は「前方のピクセル増減量,後方のピクセル増減量」

[State 210, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2;trigger1 = Time = 2
value = 0, 4
volume = -70

[State 210, ヒット定義]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
animtype  = Light
damage    = 8,1
guardflag = MA
pausetime = 3,3;7,7;12,12
sparkno = s30020;-1;s30000;1
sparkxy = -10,-70
hitsound   = 5,2
guardsound = 6,0
ground.type = High
ground.slidetime = 8;12
ground.hittime  = 10;13
ground.velocity = -4
air.velocity = -1.4,-3

[State 400, エフェクト]
type = Explod
trigger1 = movehit
anim = -1;30000
facing = 1
postype = p2
pos = 5,-95-ceil(P2BodyDist Y)
random = 20,10
sprpriority = 3
ownpal = 1
scale = .6,.6
pausemovetime = 73640
supermovetime = 73640
supermove = 1
bindtime = 1
persistent = 0
ignorehitpause = 1

[State 210, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;立ち弱キック
[Statedef 230]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 22
ctrl = 0
velset = 0,0
anim = 230
sprpriority = 2

[State 230, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[State 230, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Light;Medium
damage    = 57
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 7,7;12,12
sparkno = s30010;-1;s30000;1
sparkxy = -10,-70
hitsound   = s4,0;5,2
guardsound = 6,0
ground.type = High
ground.slidetime = 8;12
ground.hittime  = 10;13
ground.velocity = -4;-5.5
air.velocity = -1.4,-3;-2.5,-4

[State 400, エフェクト]
type = Explod
trigger1 = movehit
anim = -1;30000
facing = 1
postype = p2
pos = 5,-25-ceil(P2BodyDist Y)
sprpriority = 3
ownpal = 1
scale = .5,.5
pausemovetime = 73640
supermovetime = 73640
supermove = 1
bindtime = 1
persistent = 0
ignorehitpause = 1

[State 230, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;立ち強キック
[Statedef 240]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 65
ctrl = 0
velset = 0,0
anim = 240
sprpriority = 2

[State 240, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 7
x = 12 ;Ｘ軸を前方に１２ピクセル移動させる

[State 240, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[State 240, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Medium
damage    = 63
guardflag = MA
pausetime = 12,12
sparkno = s30020;-1;s30000;1
sparkxy = -10,-60
hitsound   = s4,1;5,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -6
air.velocity = -2.2,-3.2

[State 400, エフェクト]
type = Explod
trigger1 = movehit
anim = 30000
facing = 1
postype = p2
pos = 5,-60-ceil(P2BodyDist Y)
sprpriority = 3
ownpal = 1
scale = .7,.7
pausemovetime = 73640
supermovetime = 73640
supermove = 1
bindtime = 1
persistent = 0
ignorehitpause = 1

[State 240, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;===========================================================================
;---------------------------------------------------------------------------
; ２Ｄ格ゲーでのしゃがみ通常攻撃は空中ガードが不可な作品が結構多い。
; カンフーマンも例外ではなかったみたい。
; ↓のしゃがみ弱パンチのguardflagが「L」のみになってるのに注目。
; 意味は「Low」。相手はこのしゃがみ弱パンチをガードする場合、
; 「しゃがみガードだけしか出来ない」という事になる。
;
; それ以外は簡単。
;---------------------------------------------------------------------------
;しゃがみ弱パンチ
[Statedef 400]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 15
ctrl = 0
anim = 400
sprpriority = 2
facep2 = 1

[State 400, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 400, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = C, NA ;しゃがみ通常打撃（Crouching, Normal Attack）
damage    = 23
priority  = 3
animtype  = Light
hitflag = MAF
guardflag = L
pausetime = 10,11
sparkno = 0
sparkxy = -10,-42
hitsound   = 5,0
guardsound = 6,0
ground.type = Low
ground.slidetime = 4
ground.hittime  = 10
ground.velocity = -4
air.velocity = -1.5,-3

[State 400, コントロール]
type = CtrlSet
trigger1 = Time = 5
value = 1

[State 400, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11 ;しゃがむステートへ（コモンステート）

;---------------------------------------------------------------------------
; 効果の違う攻撃を連続でヒットさせる場合は、複数のHitDefが必要。
; ↓のしゃがみ強パンチのguardflagの効果がそれぞれ別々（MとMA）なように、
; パラメータが数値じゃなければ特に。こればかりはどうしようもない。
;---------------------------------------------------------------------------
;しゃがみ強パンチ
[Statedef 410]
type    = C
movetype= A
physics = C
juggle  = 6
poweradd= 50
ctrl = 0
anim = 410
sprpriority = 2

[State 410, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 410, 一発目のヒット定義]
type = HitDef
trigger1 = AnimElem = 3
attr = C, NA
damage    = 37
animtype  = Medium
hitflag = MAF
guardflag = M
pausetime = 12,12
sparkno = 1
sparkxy = -10,-55
hitsound   = 5,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -4
air.velocity = -3,-4

[State 410, 二発目のヒット定義]
type = HitDef
trigger1 = AnimElem = 4
attr = C, NA
damage    = 36
animtype  = Medium
hitflag = MAF
guardflag = MA
pausetime = 12,12
sparkxy = -10,-83
hitsound   = 5,2
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -7
air.velocity = -3,-4

[State 410, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;しゃがみ弱キック
[Statedef 430]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 22
ctrl = 0
anim = 430
sprpriority = 2

[State 430, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 430, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 28
animtype  = Light
hitflag = MAFD
guardflag = L
pausetime = 12,12
sparkno = s30010;-1;s30000;0
sparkxy = -10,-8
hitsound   = s4,0;5,1
guardsound = 6,0
ground.type = Low
ground.slidetime = 6
ground.hittime  = 10
ground.velocity = -5
air.velocity = -2,-3
down.velocity = -5,0
down.hittime = 20

[State 400, エフェクト]
type = Explod
trigger1 = movehit
anim = -1;30000
facing = 1
postype = p2
pos = 5,0;+ceil(P2BodyDist Y)
sprpriority = 3
ownpal = 1
scale = .5,.5
pausemovetime = 73640
supermovetime = 73640
supermove = 1
bindtime = 1
persistent = 0
ignorehitpause = 1

[State 430, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; 誰もが攻撃手段としてお世話になる「足払い」はダウン属性の攻撃。
; 実際に足払いの効果にするにはground.typeを「Trip」に、
; fallを「1」にする必要がある。もちろん当たればジャグルポイントも消費。
;
; ここで一つ補足。ground.typeが「Trip」になっている場合、
; 攻撃力や防御力に関係無く転ばした後に続く攻撃（「コンボ」など）が
;『全て無条件でダメージに補正が掛かる』。
; 必ず通常の半分のダメージ量に下がるので注意。
;---------------------------------------------------------------------------
;しゃがみ強キック（足払い攻撃）
[Statedef 440]
type    = C
movetype= A
physics = C
juggle  = 7
poweradd= 70
ctrl = 0
anim = 440
sprpriority = 2

[State 440, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 2
value = 0, 2

[State 440, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 72
hitflag = MAFD
guardflag = L
pausetime = 12,12
sparkno = s30020;-1;s30000;1
sparkxy = -5,-10
hitsound   = s4,1;5,2
guardsound = 6,0
ground.type = Trip ;この攻撃を食らうと相手は吹っ飛べば「転ぶアニメ」になる
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = -1.5,-2
air.velocity = -1.2,-3
guard.velocity = -5
fall = 1

[State 400, エフェクト]
type = Explod
trigger1 = movehit
anim = -1;30000
facing = 1
postype = p2
pos = 5,0;+ceil(P2BodyDist Y)
sprpriority = 3
ownpal = 1
scale = .7,.7
pausemovetime = 73640
supermovetime = 73640
supermove = 1
bindtime = 1
persistent = 0
ignorehitpause = 1

[State 440, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;===========================================================================
;---------------------------------------------------------------------------
; ジャンプ通常攻撃にChangeStateのコントローラが無いのは、
; Physicsを「A」にしているから。
; おまけフォルダの「小ネタ.txt」を参照。（Physicsの仕組み）
;
; しゃがみ通常技とは逆に、ジャンプ通常技は基本的に「中段属性」の攻撃。
; しゃがみガードが出来ないのが普通なので、guardflagを「HA」にしておくのが定石。
;「立ちガードの需要性」と「空対地のガードの揺さぶりによる駆け引き」を
; プレイヤーに楽しんでもらうための先人達の知恵だね。
;---------------------------------------------------------------------------
;ジャンプ弱パンチ
[Statedef 600]
type    = A
movetype= A
physics = A
juggle  = 2
poweradd= 11
ctrl = 0
anim = 600
sprpriority = 2

[State 600, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 600, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = A, NA ;空中通常打撃（Air, Normal Attack）
damage    = 20
guardflag = HA ;相手はしゃがみガードが出来ない
priority = 3
pausetime = 7,8
sparkno = 0
sparkxy = -10,-58
hitsound   = 5,0
guardsound = 6,0
ground.type = High
ground.slidetime = 5
ground.hittime  = 5
ground.velocity = -4
air.velocity = -1.3,-3

[State 600, コントロール]
type = CtrlSet
trigger1 = Time = 17
value = 1

;---------------------------------------------------------------------------
;ジャンプ強パンチ
[Statedef 610]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 65
ctrl = 0
anim = 610
sprpriority = 2

[State 610, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[State 610, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 72
guardflag = HA
priority = 4
pausetime = 12,12
sparkno = 1
sparkxy = -10,-55
hitsound   = 5,3
guardsound = 6,0
animtype = Med
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -5
air.velocity = -3,-4

;---------------------------------------------------------------------------
;ジャンプ弱キック
[Statedef 630]
type    = A
movetype= A
physics = A
juggle  = 3
poweradd= 20
ctrl = 0
anim = 630
sprpriority = 2

[State 630, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 630, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 26
guardflag = HA
priority = 3
pausetime = 8,8
sparkno = s30010;-1;s30000;1
sparkxy = -5,-35
hitsound   = s4,0;5,0
guardsound = 6,0
ground.type = High
ground.slidetime = 6
ground.hittime  = 6
ground.velocity = -4
air.velocity = -2,-3

[State 400, エフェクト]
type = Explod
trigger1 = movehit
anim = -1;30000
facing = 1
postype = p2
pos = 5,-30-ceil(P2BodyDist Y)
sprpriority = 3
ownpal = 1
scale = .5,.5
pausemovetime = 73640
supermovetime = 73640
supermove = 1
bindtime = 1
persistent = 0
ignorehitpause = 1

;---------------------------------------------------------------------------
;ジャンプ強キック
[Statedef 640]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 65
ctrl = 0
anim = 640
sprpriority = 2

[State 640, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[State 640, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 70
guardflag = HA
priority = 4
pausetime = 12,12
sparkno = s30020;-1;s30000;1
sparkxy = -10,-40
hitsound   = s4,1;5,3
guardsound = 6,0
animtype = Med
ground.type = High
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -5
air.velocity = -3,-4

[State 400, エフェクト]
type = Explod
trigger1 = movehit
anim = -1;30000
facing = 1
postype = p2
pos = 5,-30-ceil(P2BodyDist Y)
sprpriority = 3
ownpal = 1
scale = .7,.7
pausemovetime = 73640
supermovetime = 73640
supermove = 1
bindtime = 1
persistent = 0
ignorehitpause = 1

;===========================================================================
; 投げ技
;===========================================================================
;---------------------------------------------------------------------------
; エレクバイトが「作るのが退屈と感じる時もあるよ」って言ってるけど、
; 作り出したら意外とハマって楽しくなる投げ技。
; 投げる相手の正確な座標取りは面倒臭いけどね（コラ
; 投げ用のHitDefはテンプレートと見比べて確認すればわかるはず。
;---------------------------------------------------------------------------
;カンフースルー：掴み
[Statedef 800]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 800
sprpriority = 2

[State 800, ヒット定義（投げ用）]
type = HitDef
trigger1 = Time = 0
attr = S, NT ;立ち通常投げ（Standing, Normal Throw）
hitflag = M-  ;マイナスが付加されてるので相手が食らい中の時は掴めない
priority = 1, Miss
sparkno = -1  ;-1だからヒットスパークは表示しない
p1sprpriority = 1
p1facing = 1
p2facing = 1
p1stateno = 810
p2stateno = 820
guard.dist = 0 ;相手のガード態勢に入る距離を０にしてるので、ガード不可
fall = 1

[State 800, ステート変更]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;カンフースルー：成功（放り投げる）
[Statedef 810]
type    = S
movetype= A
physics = N
anim = 810
poweradd = 60

[State 810, 変数];「holdfwd」のコマンドが入力されているかどうかを判断する
type = VarSet
trigger1 = Time = 0
var(2) = command = "holdfwd"

[State 810, 音を鳴らす];掴み用
type = PlaySnd
trigger1 = AnimElem = 2
value = 1, 1

[State 810, 音を鳴らす];放り投げ用
type = PlaySnd
trigger1 = AnimElem = 7
value = 800, 0

[State 810, 掴んだ相手の位置１];TargetBindで相手を一時的に拘束
type = TargetBind
trigger1 = AnimElemTime(2) < 0
pos = 28, 0  ;自分の軸位置から相手の軸をX=28・Y=0の位置にする

[State 810, 物理的なキャラの幅]
type = Width
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(12) < 0
edge = 60,0 ;画面端を押す幅を変える（オレンジの線）

[State 810, 掴んだ相手の位置２]
type = TargetBind
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(5) < 0
pos = 58, 0

[State 810, 掴んだ相手の位置３]
type = TargetBind
trigger1 = AnimElemTime(5) >= 0 && AnimElemTime(6) < 0
pos = 47, 0

[State 810, 振り返る];Var(2)が有効な時
type = Turn
trigger1 = var(2)
trigger1 = AnimElem = 6

[State 810, 軸位置移動];Var(2)が有効な時
type = PosAdd
trigger1 = var(2)
trigger1 = AnimElem = 6
x = -37

[State 810, 掴んだ相手の向き];Var(2)が有効な時
type = TargetFacing
trigger1 = var(2)
trigger1 = AnimElem = 6
value = -1

[State 810, 掴んだ相手の位置４]
type = TargetBind
trigger1 = AnimElemTime(6) >= 0 && AnimElemTime(7) < 0
pos = 41, -60

[State 810, 掴んだ相手の位置５]
type = TargetBind
trigger1 = AnimElemTime(7) >= 0 && AnimElemTime(8) < 0
pos = 25, -75

[State 810, 掴んだ相手の位置６]
type = TargetBind
trigger1 = AnimElemTime(8) >= 0 && AnimElemTime(9) < 0
pos = 15, -90

[State 810, 掴んだ相手の位置７]
type = TargetBind
trigger1 = AnimElemTime(9) >= 0 && AnimElemTime(10) < 0
pos = -5, -96

[State 810, 掴んだ相手の位置８]
type = TargetBind
trigger1 = AnimElemTime(10) >= 0 && AnimElemTime(11) < 0
pos = -14, -90

[State 810, 掴んだ相手の位置９]
type = TargetBind
trigger1 = AnimElem = 11
pos = -50, -50

;相手が食らい状態の時のみ機能するTarget系コントローラ
[State 810, 掴んだ相手のライフ増減]
type = TargetLifeAdd
trigger1 = AnimElem = 11
value = -78

[State 810, 掴んだ相手のステート変更]
type = TargetState
trigger1 = AnimElem = 11
value = 821

[State 810, 振り返る]
type = Turn
trigger1 = AnimElem = 12

[State 810, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 15
x = -10

[State 810, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; こっちは制御を奪った相手の食らいステート。
; 相手の制御を解く場合、「ChangeState」のコントローラにしてしまうと
;「相手が制御を奪われた状態のままになるバグ」が発生してしまう。
; なので必ず『SelfState』で相手のステートに戻し、制御を解除しないといけない。
; そこさえ注意しておけば、自由に相手の食らいモーションを設定出来る。
;
; デバッグ表示中に相手の情報の一部の文字が黄色になったら、それが
; P2StateNoやTargetStateで制御を奪われた状態の証。
; 投げが成功したらCtrl+Dで相手側の情報を確認だ！m9っ｀Д´)
;---------------------------------------------------------------------------
;カンフースルー：相手側１（掴まれて放り投げられるまで）
[Statedef 820]
type    = A
movetype= H
physics = N
velset = 0,0

[State 820, 相手のアニメ変更]
type = ChangeAnim2
trigger1 = Time = 0
value = 820

[State 820, 相手ステートに戻す]
type = SelfState
trigger1 = !GetHitVar(IsBound) ;（※３）
value = 5050

;---------------------------------------------------------------------------
; ※３：GetHitVar
;
; 　食らってしまった『相手の攻撃の効果』を
; 　自分側が「特殊な変数」に変換して判断するトリガー。
;　「GetHitVar(**)」の『**』に該当する、予め決められているパラメータを全て紹介。
;
; 　大概「相手のHitDefとProjectileのパラメータ」から引き出すので、かなり多い（苦笑
;
;
; 　XVelAdd             = 自分が負けて吹っ飛んだ時の「Ｘ軸方向の加速度(float)」を計測する
; 　YVelAdd             = 自分が負けて吹っ飛んだ時の「Ｙ軸方向の加速度(float)」を計測する
; 　Type                = 自分の「食らいアニメの種類」。（0=None・1=High・2=Low・3=Trip）
; 　AnimType            = 相手のHitDefに設定されている「animtype」を判断する
;                        （0=Light・1=Medium・2=Hard・3=Back・4=Up・5=DiagUp）
; 　GroundType          = 相手のHitDefに設定されている「ground.type」を判断する
; 　AirType             = 相手のHitDefに設定されている「air.type」を判断する
;
; 　Damage              = 相手から食らってしまった「ダメージ量」を計測する
; 　HitCount            = 相手の「現在のヒット数」を計測する
; 　FallCount           = 自分が「地面に激突した回数」を判断する
; 　HitShakeTime        = 自分の「ヒット硬直時間」を計測する
; 　HitTime             = 自分の「食らい時間」を計測する
; 　SlideTime           = 相手のHitDefに設定されている「slidetime」を判断する
; 　CtrlTime            = 相手のHitDefに設定されている「(air)guard.ctrltime」を判断する
; 　RecoverTime         = 横に倒れている時の「起き上がるまでの時間」を判断する
;
; 　XOff                = 相手のHitDefに設定されている「"snap"のＸ軸」を判断する（非推奨）
; 　YOff                = 相手のHitDefに設定されている「"snap"のＹ軸」を判断する（非推奨）
; 　ZOff                = 相手のHitDefに設定されている「"snap"のＺ軸」を判断する？（存在しないので無意味）
;
; 　XVel                = 相手のHitDefに設定されている「Ｘ軸の食らい状態の移動速度」を判断する
; 　YVel                = 相手のHitDefに設定されている「Ｙ軸の食らい状態の移動速度」を判断する
; 　YAccel              = 相手のHitDefに設定されている「yaccel」を判断する
; 　chainID             = 相手のHitDefに設定されている「chainID」を判断する
; 　Guarded             =「相手のコンボでの最後の攻撃をガードした場合」を判断する
; 　IsBound             =「TargetBindで掴まれてる状態」を判断する
;
; 　Fall                = 相手のHitDefに設定されている「fall」を判断する
; 　Fall.Damage         = 相手のHitDefに設定されている「fall.damage」を判断する
; 　Fall.XVel           = 相手のHitDefに設定されている「fall.xvelocity」を判断する
; 　Fall.YVel           = 相手のHitDefに設定されている「fall.yvelocity」を判断する
; 　Fall.Recover        = 相手のHitDefに設定されている「fall.recover」を判断する
; 　Fall.RecoverTime    = 相手のHitDefに設定されている「fall.recovertime」を判断する
; 　Fall.Kill           = 相手のHitDefに設定されている「fall.kill」を判断する
; 　Fall.EnvShake.Time  = 相手のHitDefに設定されている「fall.envshake.time」を判断する
; 　Fall.EnvShake.Freq  = 相手のHitDefに設定されている「fall.envshake.freq」を判断する
; 　Fall.EnvShake.Ampl  = 相手のHitDefに設定されている「fall.envshake.ampl」を判断する
; 　Fall.EnvShake.Phase = 相手のHitDefに設定されている「fall.envshake.phase」を判断する
;
;---------------------------------------------------------------------------
;カンフースルー：相手側２（放り投げられた）
[Statedef 821]
type    = A
movetype= H
physics = N
velset = 2.8,-7
poweradd = 40

[State 821, 速度加算];重力
type = VelAdd
trigger1 = 1
y = .4 ;現在のＹ軸方向の移動速度を「0.4ポイント」ずつ増やしていく

[State 821, ステート変更]
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive      ;生きている時
triggerall = CanRecover ;空中受け身が可能な時
trigger1 = Command = "recovery"
value = 5200

[State 821, 相手ステートに戻す]
type = SelfState
triggerall = Vel Y > 0
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210

[State 821, 相手ステートに戻す]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100


;---------------------------------------------------------------------------
; 膝蹴り投げ
;---------------------------------------------------------------------------
[Statedef 910]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 800
velset = 0,0
juggle  = 9                      

[State 910, HitDef]
type = HitDef
trigger1 = AnimElem = 1
attr = S, NT
animtype = Light
damage = 0
hitflag = M-
pausetime = 6,6
sparkno = -1
ground.type = Hight
guard.slidetime = 0
ground.hittime  = 15
ground.velocity = 0,0
hitsound = 9,7
p1stateno = 911
p2stateno = 915
snap = 40,0
numhits = 0

[State 810, 掴んだ相手の位置４]
type = TargetBind
trigger1 = movecontact
pos = 30, -110

[State 910, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
[Statedef 911]
type = S
movetype = A
velset = 0, 0
anim = 810
PowerAdd = 70

[State 911, 3]
type = PlaySnd
trigger1 = Time = 0
value = 9,7

[State 810, 掴んだ相手の位置４]
type = TargetBind
trigger1 = time = 0;AnimElem = 1
pos = 30, -120;-110

[State 911, Explod]
type = Explod
trigger1 = Time = 13
Anim = 1
pos = -10, -60
postype = p2
sprpriority = 4
ownpal = 1
bindtime = 1
pausemovetime = -1
supermove = 1
ID = 1

[State 911, Explod]
type = Explod
trigger1 = Time = 42
Anim = 1
pos = -10, -80
postype = p2
sprpriority = 4
ownpal = 1
bindtime = 1
pausemovetime = -1
supermove = 1
ID = 1

[State -2,ダウンエフェクト]
type = Explod
trigger1 = AnimElem = 5||AnimElem = 10
anim = 30010;30000
id = 30010;30000
pos = ceil(-30*const(size.xscale)),ceil(60*const(size.yscale))
postype = P2
sprpriority = 4
bindtime = 1
ownpal = 1
;scale = 0.4,0.4

[State -2,ダウンエフェクト]
type = Explod
trigger1 = AnimElem = 15
anim = 30020;30000
id = 30020;30000
pos = ceil(-30*const(size.xscale)),ceil(60*const(size.yscale))
postype = P2
sprpriority = 4
bindtime = 1
ownpal = 1

[State 1000, 3]
type = EnvShake
trigger1 = AnimElem = 5||AnimElem = 10
time = 10
freq = 60
ampl = -5
phase = 60

[State 1000, 3]
type = EnvShake
trigger1 = AnimElem = 15
time = 20
freq = 120
ampl = -10
phase = 180

[State 911, HitAdd]
type = HitAdd
trigger1 = AnimElem = 5 || AnimElem = 10 || AnimElem = 15
persistent = 1
ignorehitpause = 1
value = 1

[State 640, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 5 || AnimElem = 10 
value = 4, 0

[State 640, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 15
value = 4, 1

[State 911, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
[Statedef 915]
type = S
movetype = H
physics = N
velset = 0,0
facep2 = 1

[State 911, 3]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 915, PosSet]
type = PosAdd
trigger1 = Time = 0
x = 10
y = -100

;[State 915, PosSet]
;type = PosAdd
;trigger1 = Time >= 1
;trigger1 = Time < 5
;y = -7

[State 915, PosSet]
type = PosAdd
trigger1 = Time = 5
x = 5

[State 915, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 820;915

[State 915, 1]
type = LifeAdd
trigger1 = Animelem = 4;Time = 26
value = -50

[State 915, 2]
type = LifeAdd
trigger1 = Animelem = 8;Time = 43
value = -50

[State 915, 2]
type = LifeAdd
trigger1 = Animelem = 12;Time = 62
value = -50

[State 915, PosSet]
type = Posset
trigger1 = AnimTime = 0
y = 0

[State 915, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 916

;---------------------------------------------------------------------------
[Statedef 916]
type = A
movetype = H
physics = N
anim = 5030

[State 916, ChangeState]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 917

;---------------------------------------------------------------------------
[Statedef 917]
type = A
movetype = H
physics = N
anim = 5030  

[State 917, VelSet]
type = VelSet
trigger1 = Time = 0
x = -3.5
y = -2;-7

[State 917, VelAdd]
type = VelAdd
trigger1 = Time > 0
y = .4

[State 917, SelfState]
type = SelfState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 5100


;===========================================================================
; 必殺技
;===========================================================================
;---------------------------------------------------------------------------
; カンフーマンを代表する必殺技『カンフー突き手』。
; 最初に公開されたM.U.G.E.N（1999/1/1当時のMS-DOS版）では
; この技と超必殺技の『三烈カンフー突き手』しか持ってなかった。
;
;「P2BodyDist」は「自分から相手までの距離」を測るトリガー。
; Bodyの記述が無い「P2Dist」の場合は、
;「自分の軸位置から相手の軸位置との距離」を測る。
;---------------------------------------------------------------------------
;カンフー突き手（弱）
[Statedef 1000]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 110
velset = 0,0
anim = 1000
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 8
value = 0, 3

[State 1000, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 2
x = 20

[State 1000, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 13
x = 10

[State 1000, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 5
x = 5

[State 1000, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 9
x = -5

[State 1000, ヒット定義];相手に近い場合
type = HitDef
trigger1 = AnimElem = 5
trigger1 = p2bodydist X < 40 ;相手とのＸ軸の距離が４０ピクセル未満の時
attr = S, SA ;立ち必殺技（Standing, Special Attack）
animtype  = Hard
damage    = 90, 4
priority  = 5
guardflag = MA
pausetime = 15,15
sparkxy = -10,-60
hitsound   = 5,4
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -4,-3.5
air.velocity = -4,-3
fall = 1

[State 1000, ヒット定義];相手よりも遠い場合
type = HitDef
trigger1 = AnimElem = 5
trigger1 = p2bodydist X >= 40 ;相手とのＸ軸の距離が４０ピクセル以上の時
attr = S, SA
animtype  = Hard
damage    = 85, 4
priority  = 4
guardflag = MA
pausetime = 15,15
sparkxy = -10,-60
hitsound   = 5,4
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -7
air.velocity = -4,-2.5

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;カンフー突き手（強）
[Statedef 1010]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 120
velset = 0,0
anim = 1010
ctrl = 0
sprpriority = 2

[State 1010, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 9
value = 0, 3

[State 1010, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 2
x = 20

[State 1010, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 13
x = 10

[State 1010, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 5
x = 5

[State 1010, 移動速度]
type = VelSet
trigger1 = AnimElem = 5
x = 4

[State 1010, ヒット定義]
type = HitDef
trigger1 = AnimElem = 5
trigger1 = p2bodydist X < 40
attr = S, SA
animtype  = Hard
damage    = 90, 4
priority  = 5
guardflag = MA
pausetime = 15,15
sparkxy = -10,-60
hitsound   = 5,4
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -4,-3.5
air.velocity = -4,-3
fall = 1

[State 1010, ヒット定義]
type = HitDef
trigger1 = AnimElem = 5
trigger1 = p2bodydist X >= 40
attr = S, SA
animtype  = Hard
damage    = 85, 4
priority  = 4
guardflag = MA
pausetime = 15,15
sparkxy = -10,-60
hitsound   = 5,4
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -7
air.velocity = -4,-2.5

[State 1010, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; ↓のステートでは少し難しい設定をいくつか実行してます。
;
; 投げ技の応用で、攻撃が当たれば相手を「特殊な吹っ飛び状態」にする事が出来る。
; HitDefと[Statedef 1025]辺りを見てね。
;---------------------------------------------------------------------------
;速いカンフー突き手
[Statedef 1020]
type    = S
movetype= A
physics = N
juggle  = 6
poweradd= -330 ;パワーゲージを３３０ポイント消費
velset = 0,0
anim = 1020
ctrl = 0
sprpriority = 2

[State 1020, 速度乗算]
type = VelMul
trigger1 = 1
x = .85 * ifelse(AnimElemTime(6) < 0, 1, .8) ;（※４）
;Ｘ軸の速度を毎フレーム「0.15ポイントにIfElse文の中身を掛けた数値分ずつ」遅くしていく事になる。

[State 1020, 残像]
type = AfterImage
trigger1 = Time = 0
time = 2                   ;残像が出ている時間（フレーム）
PalBright   =  30, 30,  0  ;残像の色の明るさ（赤,緑,青・ＲＧＢ）
PalContrast =  70, 70, 20  ;残像の色合い　　（赤,緑,青・ＲＧＢ）
PalAdd      = -10,-10,-10  ;残像の色の加算値（赤,緑,青・ＲＧＢ）
PalMul      = .85,.85,.50  ;残像の色の乗算値（赤,緑,青・ＲＧＢ・float）
Trans = Add                ;残像の透過処理（Add,Add1,Sub,None,AddAlpha）
TimeGap  = 1               ;残像の表示をスキップする間隔（デフォルトは1）
FrameGap = 2               ;残像の形を変化させる間隔（デフォルトは4）
length = 13                ;残像の表示する長さ（最大60・デフォルト20）

[State 1020, 残像表示時間]
type = AfterImageTime
trigger1 = AnimElemTime(8) < 0
time = 2

[State 1020, 画像の色]
type = PalFX
trigger1 = Time = 0
time = 20           ;画像の色を変化させる時間（フレーム）
add = 32,16,0       ;画像の色合い（赤,緑,青・ＲＧＢ）
sinadd = 64,32,5,3  ;振幅赤,振幅緑,振幅青,周期

[State 1020, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 2
value = 0, 3

[State 1020, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 2
x = 20

[State 1020, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 12
x = 10

[State 1020, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 4
x = 5

[State 1020, 移動速度]
type = VelSet
trigger1 = AnimElem = 4
x = 13

[State 1020, ヒット定義]
type = HitDef
trigger1 = AnimElem = 4
attr = S, SA
animtype  = Hard
damage    = 95, 5
getpower  = 0
priority  = 4
guardflag = MA
pausetime = 8,7
sparkxy = -10,-60
hitsound   = 5,4
guardsound = 6,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8,-7
guard.velocity = -7
air.velocity = -8,-7
airguard.velocity = -5, -4
fall = 1
p2stateno = 1025 ;この攻撃がヒットすれば相手は↓の[Statedef 1025]へ
p2facing = 1     ;相手の向きを指定

[State 1020, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; ※４：IfElse文
;
; 　条件を『分岐』させ、適用する値を細分化する命令。書式を見てみよう。
; 
; 　　IfElse(■,●,▲)
;
; 　　■ = 分岐させる条件（トリガーを使う）
; 　　● =「■」が『有効な時』に適用する値（真）
; 　　▲ =「■」が『有効ではない時』に適用する値（偽）
;
; 　つまり『もし■が実行されていたら●（真）、そうでない場合は▲（偽）』
; 　という処理の流れになる。
;
; 　M.U.G.E.NでのIfElse文は数式として分類されているので、
; 　●と▲には「数値（数値を適用するトリガー）」しか使えない。
;　（その中に更にIfElse文は何個も追加出来るけどね）
;
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;速いカンフー突き手：相手側１（ヒット硬直）
[Statedef 1025]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1025, 相手のアニメ変更]
type = ChangeAnim2
trigger1 = 1
value = 1025

[State 1025, ステート変更]
type = ChangeState
trigger1 = HitShakeOver = 1 ;ヒット硬直が解けたら
value = 1026

;---------------------------------------------------------------------------
;「FrontEdgeBodyDist」は『自分から前方の画面端までの距離』を、
;「BackEdgeBodyDist」は『自分から後方の画面端までの距離』を計測するトリガー。
; 使ってないけど、さらに「Body」を抜いた『FrontEdgeDist』及び『BackEdgeDist』は
; それぞれ『自分の「軸位置」から前か後ろの画面端までの距離』を計測する事になる。
; ちなみにこれはＸ軸方向のみ。Ｙ軸方向の計測方法は無いので気を付けてね。
;---------------------------------------------------------------------------
;速いカンフー突き手：相手側２（吹っ飛び）
[Statedef 1026]
type    = A
movetype= H
physics = N

[State 1026, 食らい中の速度]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 1026, 速度加算];重力
type = VelAdd
trigger1 = 1
y = .45

[State 1026, スクロール]
type = ScreenBound
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist < 65
trigger2 = FrontEdgeBodyDist < 65
value = 1         ;画面スクロールの影響を受けるか否か。0=受けない・1=受ける
movecamera = 0,1  ;カメラの動きをキャラに依存させるか否か。0=させない・1=させる（Ｘ軸,Ｙ軸）

[State 1026, ステート変更];壁に激突するステートへ
type = ChangeState
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 1027

[State 1026, 相手ステートに戻す]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;---------------------------------------------------------------------------
;「Pos」はＸ軸が画面中央から、Ｙ軸が地面からの座標を決めるのに対し、
;『ScreenPos』は『常にウィンドウの一番左上からの横と縦の座標』を取る。
;---------------------------------------------------------------------------
;速いカンフー突き手：相手側３（壁に激突）
[Statedef 1027]
type    = A
movetype= H
physics = N

[State 1027, 振り返る]
type = Turn
trigger1 = (Time = 0) && (FrontEdgeBodyDist <= 30)

[State 1027, 軸位置移動]
type = PosAdd
trigger1 = Time = 0
x = 15 - BackEdgeBodyDist

[State 1027, 位置固定]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[State 1027, スクロール]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 1027, エフェクト]
type = Explod
trigger1 = Time = 0
anim = F72
pos = 0, floor(screenpos y) - 50 ;（※５）
postype = back
sprpriority = 3

[State 1027, 相手のアニメ変更]
type = ChangeAnim2
trigger1 = Time = 0
value = 1027

[State 1027, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 0
value = F7,0

[State 1027, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 1028

;---------------------------------------------------------------------------
; ※５：端数処理（floorとか付いてる所）
;
; 　括弧で挟んで中の数値をどうするか？小数点以下の数値を
;　「四捨五入」したり「切り捨てたり」する命令。
; 　これはプログラミングでは『端数処理』と呼ばれているものの一部で、
;
; 　Ceil(**)  = 天井関数(Ceiling)
; 　　　　　　（正の値は小数点以下を四捨五入、負の値は小数点以下を切り捨てる）
;
; 　Floor(**) = 床関数
; 　　　　　　（正の値は小数点以下を切り捨て、負の値は小数点以下を四捨五入する）
;
; 　という処理を値に適用し、整数への補正を行う。
; 　もちろん「正の値」は『０よりも上の数値』、「負の値」は『０よりも下の数値』の事。
; 　例えば、正の値2.8・負の値-2.8があるとする。これにCeilかFloorを与えると、
;
; 　Ceil(2.8)   = 3
; 　Ceil(-2.8)  = -2
; 　Floor(2.8)  = 2
; 　Floor(-2.8) = -3
;
; 　となる。
;---------------------------------------------------------------------------
;速いカンフー突き手：相手側４（壁からのバウンド）
[Statedef 1028]
type    = A
movetype= H
physics = N

[State 1028, 相手の特定の攻撃属性無効];（※６）
type = NotHitBy
trigger1 = 1
value = , NA, NP

[State 1028, 移動速度]
type = VelSet
trigger1 = Time = 0
y = -6

[State 1028, 移動速度]
type = VelSet
trigger1 = Time = 0
x = 1.6

[State 1028, 振り返る]
type = Turn
trigger1 = (Time = 0) && (BackEdgeDist < 30)

[State 1028, 速度加算];重力
type = VelAdd
trigger1 = 1
y = .35

[State 1028, アニメ変更]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052) ;「!」が付いてるので、[Begin Action 5052]が無い場合
value = 5050

[State 1028, アニメ変更]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)  ;airファイルに[Begin Action 5052]が存在してれば
value = 5052

[State 1028, アニメ変更]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 1028, アニメ変更]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 1028, 相手ステートに戻す]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;---------------------------------------------------------------------------
; ※６：NotHitBy
;
; 　通常は「無敵状態」を設定するけど、本当は
;　『相手の「特定の属性を設定しているHitDef」を当たらなくする』コントローラ。
; 　特定の属性はHitDefの「attr」のパラメータが該当する。テンプレート参照。
; 　まぁvalueに与える値を見れば早い。
;
; 　value = (相手のattrの状態), (相手のattrの属性１)(相手のattrの属性２),・・・
;
; 　これが本来の記述方法。
;　「value2」を増やす事により、もう一つ無敵にしたい属性を指定出来る。
; 　(属性１)と(属性２)を省略して書けば
; 　相手の(状態)のみを判断して攻撃を当たらなくする事が出来る。（「SC」など）
; 　逆に(状態)に関係無く特定の(属性１)と(属性２)に対して無敵にしたい場合は、
;　『(状態)を省略して(属性１)と(属性２)を設定する』。
; 　というか全ての状態（SとCとA全部の場合）で属性を実行したい時、
; 　SCAを加えてしまうと(属性１)と(属性２)が機能しない（苦笑
;
; 　(例)　：　value = , AA,AP,AT
; 　もしくは　value = , NA,SA,HA,NP,SP,HP,NT,ST,HT
;
; 　実はSCAじゃなくても、この記述でも「無敵状態」になれる。
; 　例に挙げた見慣れない属性（AA・AP・AT）の意味は以下の通り。
;
; 　AA = 相手の「全ての打撃」が当たらなくなる　　　　（All Attack）
; 　AP = 相手の「全てのProjectile」が当たらなくなる　（All Projectile）
; 　AT = 相手の「全ての投げ」が当たらなくなる　　　　（All Throw）
;
; 　この３つは「HitBy」「ReversalDef」「HitOverRide」のコントローラと、
;　「HitDefAttr」のトリガーにも使える。
;===========================================================================
;---------------------------------------------------------------------------
; 膝蹴りの時にＡボタンかＢボタンを押すと
;「撥ね蹴り」が出る、飛び上がる連続入力攻撃技。
; ステートが「地上での開始→飛び膝蹴り（ボタンを押すと連続技）→着地」
; の３つに分かれている。
;---------------------------------------------------------------------------
;カンフーニー（弱）地上での開始
[Statedef 1050]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 110
velset = 0,0
anim = 1050
ctrl = 0
sprpriority = 2

[State 1050, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 0, 2

[State 1050, 何もしない];『Null』は何もしない命令。コントローラを機能させない時に使う。
type = null;PosAdd
trigger1 = AnimElem = 2
x = 15

[State 1050, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 4
x = 20

[State 1050, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = A, SA
animtype  = Medium
damage    = 80, 4
priority  = 5
guardflag = MA
pausetime = 12,12
sparkxy = -10,-70
hitsound   = 5,3
guardsound = 6,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -3.5,-7
guard.velocity = -7
air.velocity = -3.5,-7
fall = 1

[State 1050, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 1051

;---------------------------------------------------------------------------
; ここでＡかＢのボタンを押すと別のステートにも変更される。難しくない処理。
;
; Physicsが「N」になっているので、摩擦や重力の影響を受けない。
; なので地面に着いたら「特定の着地ステート」へ変える必要がある。
;
;「hitdefpersist」で直前のステートで設定したHitDefの効果が
; 持続してるのに気を付けて。攻撃判定ボックス（Clsn1）があれば
; そのまま攻撃が当たるようになる。
;---------------------------------------------------------------------------
;カンフーニー（弱）飛び膝蹴り
[Statedef 1051]
type    = A
movetype= A
physics = N
velset = 2,-6
anim = 1051
hitdefpersist = 1 ;直前のステートのHitDefを持続させる

[State 1051, 速度加算];重力
type = VelAdd
trigger1 = 1
y = .45

[State 1051, ステート変更];追加入力
type = ChangeState
trigger1 = Command = "a" || Command = "b"
trigger1 = Vel y < -1
value = 1055

[State 1051, ステート変更];特定の着地ステートへ
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 1052

;---------------------------------------------------------------------------
; 着地ステートでは必ず「Ｙ軸方向の軸位置を０」に、かつ「Ｙ軸の速度も０」に
; リセットする事。そうしないと地面にめり込むか、画面下へ消えてしまう（苦笑
;---------------------------------------------------------------------------
;カンフーニー：着地
[Statedef 1052]
type    = S
movetype= I
physics = S
anim = 1052
sprpriority = 1
velset = 0,0 ;ここで速度をリセットしている

[State 1052, 軸位置];地面に軸をリセットしている
type = PosSet
trigger1 = Time = 0
y = 0

[State 1052, 音を鳴らす];着地音
type = PlaySnd
trigger1 = Time = 0
value = 40, 0

[State 1052, コントロール]
type = CtrlSet
trigger1 = AnimElem = 3, -1
value = 1

[State 1052, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 4
x = -15

[State 1052, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;カンフーニー：追加入力攻撃
[Statedef 1055]
type    = A
movetype= A
physics = N
anim = 1055

[State 1055, 音を鳴らす];カンフーマンの声
type = PlaySnd
trigger1 = Time = 0
value = 100,0
channel = 0 ;「チャンネル０」に設定

[State 1055, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 0
value = 0, 1

[State 1055, 軸位置移動]
type = PosAdd
trigger1 = Time = 0
x = 10
y = -10

[State 1055, 速度加算];重力
type = VelAdd
trigger1 = 1
y = .45

[State 1055, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = A, SA
animtype  = Med
damage    = 35 + (prevstateno = 1061)*5, 2 ;（※７）
priority  = 4
guardflag = MA
pausetime = 12,12
sparkxy = 0,-90
hitsound   = 5,2
guardsound = 6,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 16
ground.velocity = -6
guard.velocity = -8
guard.ctrltime = 12
air.velocity = -4,-5
airguard.velocity = -4,-4.5
air.fall = 1

[State 1055, ステート変更];特定の着地ステートへ
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -5
value = 1056

;---------------------------------------------------------------------------
; ※７：トリガーの代入
;
; 　なんと！数値でないトリガーは『式に代入』する事も可能！(ﾟдﾟ)
; 　トリガー１個単位が有効になっていれば「１」、無効なら「０」として判断される。
;
; 　↑のステートに使ってるHitDefのDamageのパラメータを例にして仕組みを説明。
; 　この場合、
; 　「prevstateno = 1061」が有効なら「１」、無効なら「０」
; 　（「PrevStateNo」は直前のステートを判断するトリガー）
; 　という事になるので、
; 　Damageは「prevstateno = 1061」が有効なら「35+1*5」で「40」になり、
; 　逆に無効なら「35+0*5」で「35」になる。
;
;　「StateType」と「MoveType」はその仕様により「２以上」も存在する。
; 　デバッグ表示中にそれぞれ「Type」と「MoveType」の項目を確認してみよう。
; 　おまけフォルダの「デバッグ表示の見方.gif」も見てね♪
;---------------------------------------------------------------------------
;カンフーニー：追加入力攻撃後の着地
[Statedef 1056]
type    = S
movetype= I
physics = S
anim = 1056
sprpriority = 1
velset = 0,0

[State 1056, 軸位置]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1056, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 0
value = 40, 0

[State 1056, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;カンフーニー（強）
[Statedef 1060]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 120
velset = 0,0
anim = 1060
ctrl = 0
sprpriority = 2

[State 1060, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 0, 2

[State 1060, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 2
x = 6

[State 1060, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 4
x = 21

[State 1060, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = A, SA
animtype  = Medium
damage    = 90, 4
priority  = 5
guardflag = MA
pausetime = 12,12
sparkxy = -10,-70
hitsound   = 5,3
guardsound = 6,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -3.5,-7.5
guard.velocity = -7
air.velocity = -3.5,-7.5
fall = 1

[State 1060, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 1061

;---------------------------------------------------------------------------
;カンフーニー（強）飛び膝蹴り
[Statedef 1061]
type    = A
movetype= A
physics = N
velset = 2.5,-7.5
anim = 1061
hitdefpersist = 1

[State 1061, 速度加算]
type = VelAdd
trigger1 = 1
y = .45

[State 1061, ステート変更]
type = ChangeState
trigger1 = Command = "a" || Command = "b"
trigger1 = Vel y < -1
value = 1055

[State 1061, ステート変更]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 1052

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;速いカンフーニー
[Statedef 1070]
type    = S
movetype= A
physics = S
juggle  = 6
poweradd= -330
velset = 0,0
anim = 1070
ctrl = 0
sprpriority = 2

[State 1070, 残像]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 1070, 残像表示時間]
type = AfterImageTime
trigger1 = 1
time = 2

[State 1070, 画像の色]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 1070, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 0, 2

[State 1070, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 2
x = 6

[State 1070, 軸位置移動]
type = PosAdd
trigger1 = AnimElem = 4
x = 21

[State 1070, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = Medium
getpower  = 0
damage    = 35, 3
priority  = 5
hitflag   = MA
guardflag = MA
pausetime = 8,7
sparkxy = -10,-70
hitsound   = 5,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -2,-6
guard.velocity = -7
air.velocity = -2,-6
fall = 1
fall.animtype = Med
fall.recovertime = 30

[State 1070, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 1071

;---------------------------------------------------------------------------
;速いカンフーニー：飛び膝蹴り
[Statedef 1071]
type    = A
movetype= A
physics = N
velset = 2.5,-9
anim = 1071

[State 1071, 画像の色]
type = PalFX
trigger1 = Time = 0
time = 18
add = 32,16,0
sinadd = 64,32,5,3

[State 1071, 残像表示時間]
type = AfterImageTime
trigger1 = Vel Y < 0
time = 2

[State 1071, 速度加算]
type = VelAdd
trigger1 = 1
y = .5

[State 1071, 速度加算]
type = VelAdd
trigger1 = Vel Y >= -1
y = .2

[State 1071, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = A, SA
animtype  = Medium
getpower  = 0
damage    = 68, 4
priority  = 5
guardflag = MA
pausetime = 12,12
sparkxy = -10,-70
hitsound   = 5,3
guardsound = 6,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -3,-9.5
guard.velocity = -7
air.velocity = -3,-9.5
fall = 1
fall.recovertime = 30

[State 1071, ステート変更]
type = ChangeState
trigger1 = Command = "a" || Command = "b"
trigger1 = Vel y < -1
trigger1 = Time > 0
value = 1075

[State 1071, ステート変更]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 1052

;---------------------------------------------------------------------------
;速いカンフーニー：追加入力攻撃
[Statedef 1075]
type    = A
movetype= A
physics = N
anim = 1055

[State 1075, 残像表示時間]
type = AfterImageTime
trigger1 = 1
time = 2

[State 1075, 画像の色]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 1075, 音を鳴らす];カンフーマンの声
type = PlaySnd
trigger1 = Time = 0
value = 100,0
channel = 0

[State 1075, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 0
value = 0, 1

[State 1075, 軸位置移動]
type = PosAdd
trigger1 = Time = 0
x = 10
y = -10

[State 1075, 速度加算]
type = VelAdd
trigger1 = 1
y = .45

[State 1075, 速度加算]
type = VelAdd
trigger1 = Vel Y >= -1
y = .2

[State 1075, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = A, SA
animtype  = Med
damage    = 42, 2
getpower  = 0
priority  = 4
guardflag = MA
pausetime = 12,12
sparkxy = 0,-90
hitsound   = 5,2
guardsound = 6,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 18
ground.velocity = -6
guard.velocity = -6
air.velocity = -4,-6
airguard.velocity = -4,-4.5
air.fall = 1

[State 1075, ステート変更]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -5
value = 1056

;===========================================================================
;---------------------------------------------------------------------------
; ２ヒットする何の変哲も無い対空必殺技。これといって難しい処理は使ってない。
; カンフーニーとの併用で画面端でのコンボも上手く行けば出来る。
; 対空技に付き物な「無敵時間」が無いので、潰されやすいのが難点。
;---------------------------------------------------------------------------
;カンフーアッパー（弱）
[Statedef 1100]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 110
velset = 0,0
anim = 1100
ctrl = 0
sprpriority = 2

[State 1100, 物理的なキャラの幅]
type = Width
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(13) < 0
value = 5,0

[State 1100, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 2

[State 1100, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = Med
damage    = 52, 4
priority  = 5
guardflag = MA
pausetime = 4,8
sparkxy = 0,-48
hitsound   = 5,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 18
ground.velocity = -3
guard.velocity = -6
air.velocity = -2,-2
airguard.velocity = -4,-4.5
p2facing = 1
forcestand = 1 ;攻撃を当てた相手を強制的に「立ち状態」にする

[State 1100, ヒット定義]
type = HitDef
trigger1 = AnimElem = 7
attr = S, SA
animtype  = Up ;相手のアニメが『垂直吹っ飛び』になる（相手のairに[Begin Action 5051]がある場合）
damage    = 55, 4
priority  = 5
guardflag = MA
pausetime = 12,12
sparkxy = 0,-110
hitsound   = 5,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 18
ground.velocity = -1,-9.5
guard.velocity = -6
air.velocity = -1,-7.5
airguard.velocity = -4,-4.5
p2facing = 1
fall = 1               ;相手は「ダウン状態」に
fall.recovertime = 40  ;相手は「４０フレームの間空中受け身が出来ない」
yaccel = .4            ;相手のＹ軸方向の移動速度を「0.4ポイント」ずつ増やしていく

[State 1100, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;カンフーアッパー（強）
[Statedef 1110]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 120
velset = 0,0
anim = 1110
ctrl = 0
sprpriority = 2

[State 1110, 物理的なキャラの幅]
type = Width
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(14) < 0
value = 5,0

[State 1110, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 2

[State 1110, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = Med
damage    = 57, 4
priority  = 5
guardflag = MA
pausetime = 4,8
sparkxy = 0,-48
hitsound   = 5,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 18
ground.velocity = -3
guard.velocity = -6
air.velocity = -2,-2
airguard.velocity = -4,-4.5
p2facing = 1
forcestand = 1

[State 1110, ヒット定義]
type = HitDef
trigger1 = AnimElem = 7
attr = S, SA
animtype  = Up
damage    = 60, 4
priority  = 5
guardflag = MA
pausetime = 12,12
sparkxy = 0,-110
hitsound   = 5,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 18
ground.velocity = -1,-10.5
guard.velocity = -6
air.velocity = -1,-8.5
airguard.velocity = -4,-4.5
p2facing = 1
fall = 1
fall.recovertime = 50
yaccel = .4

[State 1110, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;速いカンフーアッパー
[Statedef 1120]
type    = S
movetype= A
physics = S
juggle  = 6
poweradd= -330
velset = 0,0
anim = 1120
ctrl = 0
sprpriority = 2

[State 1120, 物理的なキャラの幅]
type = Width
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(14) < 0
value = 5,0

[State 1120, 残像]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 1120, 残像表示時間]
type = AfterImageTime
trigger1 = AnimTime < -2
time = 2

[State 1120, 画像の色]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 1120, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 2

[State 1120, ヒット定義]
type = HitDef
trigger1 = Time = 0
trigger2 = AnimElem = 4
attr = S, SA
animtype  = Med
damage    = 30, 4
getpower  = 0
priority  = 5
guardflag = MA
pausetime = 6,10
sparkxy = 0, ifelse(Time = 0, -48, -55)
hitsound   = 5,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 21
ground.velocity = -3
guard.velocity = -6
air.velocity = -2,-2
airguard.velocity = -4,-4.5
p2facing = 1
forcestand = 1

[State 1120, ヒット定義]
type = HitDef
trigger1 = AnimElem = 7
attr = S, SA
animtype  = Up
damage    = 68, 4
getpower  = 0
priority  = 5
guardflag = MA
pausetime = 12,12
sparkxy = 0,-110
hitsound   = 5,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 21
ground.velocity = -1.2,-11
guard.velocity = -6
air.velocity = -1.2,-9
airguard.velocity = -4,-4.5
p2facing = 1
fall = 1
fall.recovertime = 60
yaccel = .4

[State 1120, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;===========================================================================
;---------------------------------------------------------------------------
; Win版カンフーマンの新必殺技、カンフーブロー。
; 要は崩拳で、両手に攻撃判定が有り、Simulにて挟み撃ちされた場合の
; 打開策用である。画面振動を起こすコントローラ（EnvShake）にも注目しよう。
;---------------------------------------------------------------------------
;カンフーブロー（弱）
[Statedef 1200]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 100
velset = 0,0
anim = 1200
ctrl = 0
sprpriority = 2

[State 1200, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 3

[State 1200, 物理的なキャラの幅]
type = Width
trigger1 = AnimElemTime(5) >= 0 && AnimElemTime(6) < 0
value = 10,0

[State 1200, 物理的なキャラの幅]
type = Width
trigger1 = AnimElemTime(6) >= 0 && AnimElemTime(9) < 0
value = 20,0

[State 1200, 画面振動];※縦揺れしか出来ません。横揺れ用は存在しません。
type = EnvShake
trigger1 = AnimElem = 6
time = 4    ;「画面が揺れる時間」を設定。
ampl = 2    ;「画面が揺れる縦の幅（範囲）」を設定。デフォルトは-4。
freq = 180  ;「画面が揺れる速度」を設定。デフォルトは60。
;phase = 90 ;「画面が揺れる最初の段階の強さ（規模）」を設定。デフォルトは90。
            ;ここで決めた段階から徐々に揺れが弱くなっていく。

[State 1200, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = Hard
damage    = 100, 6
priority  = 5
guardflag = MA
pausetime = 12,12
sparkxy = 0,-65
hitsound   = 5,3
guardsound = 6,0
ground.type = Low
ground.slidetime = 16
ground.hittime  = 18
ground.velocity = -10
ground.cornerpush.veloff = -12 ;相手が画面端の場合、自分に「ヒットバック」の速度を与える
guard.velocity = -7
air.velocity = -3.5,-4.5
airguard.velocity = -3.5,-4.5

[State 1200, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;カンフーブロー（強）
[Statedef 1210]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 120
velset = 0,0
anim = 1210
ctrl = 0
sprpriority = 2

[State 1210, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 3

[State 1210, 物理的なキャラの幅]
type = Width
trigger1 = AnimElemTime(5) >= 0 && AnimElemTime(6) < 0
value = 10,0

[State 1210, 物理的なキャラの幅]
type = Width
trigger1 = AnimElemTime(6) >= 0 && AnimElemTime(9) < 0
value = 20,0

[State 1210, 画面振動]
type = EnvShake
trigger1 = AnimElem = 6
time = 8
ampl = 2
freq = 170

[State 1210, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = Hard
damage    = 125, 9
priority  = 5
guardflag = MA
pausetime = 12,12
sparkxy = 0,-65
hitsound   = 5,3
guardsound = 6,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 20
ground.velocity = -10
ground.cornerpush.veloff = -15
guard.velocity = -8
air.velocity = -4,-4.5
airguard.velocity = -4,-4.5

[State 1210, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;速いカンフーブロー
[Statedef 1220]
type    = S
movetype= A
physics = S
juggle  = 6
poweradd= -330
velset = 0,0
anim = 1220
ctrl = 0
sprpriority = 2

[State 1220, 残像]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 1220, 残像表示時間]
type = AfterImageTime
trigger1 = AnimTime < -2
time = 2

[State 1220, 画像の色]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 1220, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 3

[State 1220, 物理的なキャラの幅]
type = Width
trigger1 = AnimElemTime(5) >= 0 && AnimElemTime(6) < 0
value = 10,0

[State 1220, 物理的なキャラの幅]
type = Width
trigger1 = AnimElemTime(6) >= 0 && AnimElemTime(9) < 0
value = 20,0

[State 1220, 画面振動]
type = EnvShake
trigger1 = AnimElem = 6
time = 8
ampl = 3
freq = 170

[State 1220, ヒット定義]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = Hard
damage    = 125, 9
getpower  = 0
priority  = 5
guardflag = MA
pausetime = 15,15
sparkxy = 0,-65
hitsound   = 5,4
guardsound = 6,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 30
ground.velocity = -15
ground.cornerpush.veloff = -20
guard.velocity = -9
air.velocity = -5,-5
airguard.velocity = -5,-5
air.fall = 1
fall.animtype = Hard
yaccel = .4

[State 1220, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;===========================================================================
; 超必殺技
;===========================================================================
;---------------------------------------------------------------------------
; 最初のM.U.G.E.Nから存在するカンフーマンの超必殺技。
; 超必なので攻撃を当ててもゲージを増やさないようにする事に気を付けるだけで、
; 後は結構簡単な処理にまとめられてる。
; 超必時の暗転用の処理（SuperPause）にも刮目せよ！m9っ｀Д´)
;---------------------------------------------------------------------------
;ライフル
[Statedef 3000]
type    = S
movetype= A
physics = N
velset = 0,0
anim = 3000
ctrl = 0
sprpriority = 2

[State 3000, varset]
type = varset
trigger1 = time = 0
var(16)=1
ignorehitpause = 1
persistent=0

[State 3000, varreset]
type = varset
trigger1 = time > 0
var(16)=0
ignorehitpause = 1

[State 3000, 物理的なキャラの幅]
type = Width
trigger1 = AnimElem = 2, >= 0
value = 15,0

[State 3000, 超必殺技暗転時間停止]
type = SuperPause
trigger1 = AnimElem = 4;, 3
anim = 100       ;超必エフェクトのアクションナンバー。通常は「fightfx.air」のアニメを使うが、
                 ;左に「s」を付ければ「自分のairファイル」のアクションナンバーが使える。
pos = 71, -93    ;超必エフェクトの座標（Ｘ軸,Ｙ軸）
sound = 20, 0    ;超必発動サウンド。通常は「common.snd」の音を使うが、
                 ;左に「s」を付ければ「自分のsndファイル」の音が使える。
poweradd = -1000 ;パワーゲージ増減量
;time = 50       ;ポーズする時間（フレーム）
;movetime = 0    ;ポーズ中に動ける時間。timeよりも多いとバグる（デフォルトは０）
;darken = 1      ;ポーズ中画面を暗転するか否か（0=しない・1=する）
                 ;暗転する色は「ownpal」の有無により「Explod」や「ヘルパー」にも影響するので注意。
;p2defmul = 1.0  ;直前のステートを「SuperPauseを設置したステート」でキャンセルした場合、
                 ;『相手に一時的に与える防御力乗算値(float)』。
                 ;デフォルトは０。（相手の防御力が上がり、ダメージ量に下方修正が掛かる）
                 ;１にすれば『ダメージ補正が掛からなくなる』事になる。
                 ;相手が食らい状態以外（相手のMoveTypeが「H」以外）になれば解除される。
;unhittable = 1  ;ポーズ中自分を無敵状態にするか否か（0=しない・1=する）
                 ;デフォルトは１。


[State 200 , 0];ライフル弾
type = Helper
triggerall = anim = 3000
trigger1 = animelem = 5 || animelem = 7 || animelem = 9 || animelem = 11 || animelem = 13
id = 10000
pos = 71,-93;30,-97
postype = P1
stateno = 10000
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 1

[State 640, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 5
value = 0, 5
volume = 200
channel = 2

[State 3000, 相手の特定の攻撃属性無効]
type = NotHitBy
trigger1 = AnimElem = 2
value = , NA, SA, AT
time = 11

[State 3000, 相手の特定の攻撃属性無効]
type = NotHitBy
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(14) < 0
value2 = C, NA
time = 1

[State 3000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ライフルしゃがみ
[Statedef 3001]
type    = C;S
movetype= A
physics = C;N
velset = 0,0
anim = 3001
ctrl = 0
sprpriority = 2

[State 3000, varset]
type = varset
trigger1 = time = 0
var(16)=2
ignorehitpause = 1
persistent=0

[State 3000, varreset]
type = varset
trigger1 = time > 0
var(16)=0
ignorehitpause = 1

[State 3000, 物理的なキャラの幅]
type = Width
trigger1 = AnimElem = 2, >= 0
value = 15,0

[State 3000, 超必殺技暗転時間停止]
type = SuperPause
trigger1 = AnimElem = 5;, 3
anim = 100       ;超必エフェクトのアクションナンバー。通常は「fightfx.air」のアニメを使うが、
                 ;左に「s」を付ければ「自分のairファイル」のアクションナンバーが使える。
pos = 71, -61    ;超必エフェクトの座標（Ｘ軸,Ｙ軸）
sound = 20, 0    ;超必発動サウンド。通常は「common.snd」の音を使うが、
                 ;左に「s」を付ければ「自分のsndファイル」の音が使える。
poweradd = -1000 ;パワーゲージ増減量
;time = 50       ;ポーズする時間（フレーム）
;movetime = 0    ;ポーズ中に動ける時間。timeよりも多いとバグる（デフォルトは０）
;darken = 1      ;ポーズ中画面を暗転するか否か（0=しない・1=する）
                 ;暗転する色は「ownpal」の有無により「Explod」や「ヘルパー」にも影響するので注意。
;p2defmul = 1.0  ;直前のステートを「SuperPauseを設置したステート」でキャンセルした場合、
                 ;『相手に一時的に与える防御力乗算値(float)』。
                 ;デフォルトは０。（相手の防御力が上がり、ダメージ量に下方修正が掛かる）
                 ;１にすれば『ダメージ補正が掛からなくなる』事になる。
                 ;相手が食らい状態以外（相手のMoveTypeが「H」以外）になれば解除される。
;unhittable = 1  ;ポーズ中自分を無敵状態にするか否か（0=しない・1=する）
                 ;デフォルトは１。


[State 200 , 0];ライフル弾
type = Helper
triggerall = anim = 3001
trigger1 = animelem = 6 || animelem = 8 || animelem = 10 || animelem = 12 || animelem = 14
id = 10000
pos = 71,-60;30,-97
postype = P1
stateno = 10000
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 1

[State 640, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 6
value = 0, 5
volume = 200
channel = 2

[State 3000, 相手の特定の攻撃属性無効]
type = NotHitBy
trigger1 = AnimElem = 2
value = , NA, SA, AT
time = 11

[State 3000, 相手の特定の攻撃属性無効]
type = NotHitBy
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(14) < 0
value2 = C, NA
time = 1

[State 3000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;以下ライフル弾ヘルパー
;---------------------------------------------------------------------------

[Statedef 10000]
type = A
movetype= A
physics = N
ctrl = 0
anim = 10000
sprpriority = 3

[State 441]
type = velset
trigger1 = time = 0
x = 8

[State 1201, 1]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 1201, 6]
type = hitdef
trigger1 = time >= 0
trigger1 = ishelper(10000)
damage    = 40,20
hitflag = MAF
guardflag = MA
attr = A, SP
animtype = h
ground.type = High
pausetime = 2,20
sparkno = s30010;-1
;guard.sparkno = -1
sparkxy = 0, -12
hitsound = 5,2
guardsound = 6,0
guard.slidetime = 20
guard.hittime = 20
guard.velocity = -6
ground.type = high
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -7
air.velocity = -3,-5
airguard.velocity = -3,-5
air.fall = 1
fall.recover = 1
fall.recovertime = 32
guard.dist = ceil(vel x*10)+30
id = 1000
yaccel = .52
getpower = 55, 55
givepower = 18, 18

[State 1201, 6]
type = hitdef
trigger1 = time >= 0
trigger1 = ishelper(10010)
damage    = 2,1
hitflag = MAF
guardflag = MA
attr = A, SP
animtype = h
ground.type = High
pausetime = 2,20
sparkno = -1
;guard.sparkno = -1
sparkxy = 0, -12
hitsound = 5,2
guardsound = 6,0
guard.slidetime = 20
guard.hittime = 20
guard.velocity = -6
ground.type = high
ground.slidetime = 20
ground.hittime = 20
ground.velocity = -7
air.velocity = -3,-5
airguard.velocity = -3,-5
air.fall = 1
fall.recover = 1
fall.recovertime = 32
guard.dist = ceil(vel x*10)+30
id = 1000
yaccel = .52
getpower = 5, 5
givepower = 1, 1

[State 400, エフェクト]
type = Explod
trigger1 = movehit
anim = -1;30000
facing = 1
postype = p2
pos = 5,-4-ceil(P2BodyDist Y)
random = 40,20
sprpriority = 3
ownpal = 1
scale = .5,.5
pausemovetime = 73640
supermovetime = 73640
supermove = 1
bindtime = 1
persistent = 0
ignorehitpause = 1

[State 1201,2]
Type = HitBy
Trigger1 = 1
value = SAC,NP,SP,HP
Time = 1
PauseMoveTime = 99999
SuperMoveTime = 99999
igNorehitPause = 1
SuperMove = 1

[State 1000, 1]
type = HitOverRide
trigger1 = 1
attr = SCA ,NP,SP,HP
stateno = 10110
slot = 0
time = -1

[State 1201, 9]
type = changestate
trigger1 = movecontact
value = 10110

[State 1201, 9]
type = Destroyself
trigger1 = time > 30
trigger1 = FrontEdgeDist <= -5
trigger2 = time = 200
trigger3 = root,movetype = H

[Statedef 10110]
type = A
movetype= I
physics = N
ctrl = 0
velset = 0,0
anim = 9999
SprPriority = 3

[State VarA,1]
type=Varset
trigger1 = time = 0
igNoreHitPause = 1
persistent = 1
v = 6
value = 0

[State 3660,]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 0

[State 1201, 1]
type = assertspecial
trigger1 = Animtime != 0
flag = noshadow

[State 1201, 2]
type = NotHitBy
trigger1 = AnimTime != 0
value = SAC, NT, ST, HT ,NA, SA, HA ,NP, SP, HP
time = 1

[State 1201, 9]
type = Destroyself
trigger1 = time = 15

;===========================================================================
;---------------------------------------------------------------------------
; カンフーアッパーの超必殺技版。
; 攻撃がヒットしたら別のステートへ変更する処理と、
; HitDefに特殊なパラメータを加えている程度。
; テンプレートと見比べたら理解出来るはず。
;---------------------------------------------------------------------------
;スマッシュカンフーアッパー
[Statedef 3050]
type    = S
movetype= A
physics = N;S
;juggle  = 4
velset = 0,0
anim = 6005;3050
ctrl = 0
sprpriority = 2

[State 3050, 物理的なキャラの幅]
type = Width
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(16) < 0
value = 5,0

[State 3050, 超必殺技暗転時間停止]
type = SuperPause
trigger1 = AnimElem = 2
pos = 30, -121
anim = 100
sound = 20, 0
poweradd = -1000

[State 3050, 残像]
type = AfterImage
trigger1 = AnimElem = 2
time = 2

[State 3050, 残像表示時間]
type = AfterImageTime
trigger1 = AnimElemTime(2) >= 0
time = 2

[State 3050, 相手の特定の攻撃属性無効]
type = NotHitBy
trigger1 = AnimElem = 2
value = , NA, SA, AT
time = 6

;[State 3050, 音を鳴らす]
;type = PlaySnd
;trigger1 = AnimElem = 4
;value = 0, 2

;[State 3050, ヒット定義]
;type = HitDef
;trigger1 = Time = 0
;attr = S, HA
;animtype  = Up
;damage    = 155, 12
;getpower  = 0
;priority  = 5
;guardflag = MA
;pausetime = 30,30
;sparkno = 3
;sparkxy = 0,-110
;hitsound   = 5,4
;guardsound = 6,0
;ground.type = Low
;ground.slidetime = 26
;ground.hittime  = 26
;ground.velocity = -1.3,-25
;guard.velocity = -11
;air.velocity = -1.3,-25
;airguard.velocity = -4.5,-5
;envshake.time = 25        ;攻撃を当てた場合の画面振動の処理
;envshake.ampl = 7
;envshake.freq = 176
;p2facing = 1
;fall = 1
;fall.recover = 0          ;相手は空中受け身が出来なくなる
;fall.damage = 70          ;相手が地面に激突した瞬間のダメージ量
;fall.envshake.ampl = 6    ;相手が地面に激突した瞬間の画面振動
;fall.envshake.freq = 178
;fall.envshake.time = 15
;mindist = 50,-100         ;攻撃を当てた相手の位置を補正する最小の座標
;maxdist = 100,-10         ;攻撃を当てた相手の位置を補正する最大の座標
;yaccel = .8

;[State 3050, ステート変更];攻撃がヒットした場合
;type = ChangeState
;trigger1 = MoveHit
;value = 3051

[State 3050, 変数ON]
type = Varset
trigger1 = Animelem = 6
var(11) = 1

[State 3050, helper]
type=helper
trigger1= Animelem = 6
helpertype=normal
stateno=3052
ID=3052
name="Suketto switch"
postype=p1
ownpal=0;1

[State 3050, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;スマッシュカンフーアッパー：ヒット後
[Statedef 3051]
type    = S
movetype= A
physics = S
anim = 3051

[State 3051, 残像表示時間]
type = AfterImageTime
trigger1 = AnimTime < -2
time = 2

[State 3051, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[Statedef 3052];スリーマンセルOff用ヘルパー
type=A
physics=N
movetype=H
anim=9999;0
velset=0,0
[State 1090, nothitby]
type=nothitby
trigger1= 1
value=SCA,AA,AP,AT
time=-1
ignorehitpause=1

[State 3052, 0]; 透明＋影消し
type = AssertSpecial
trigger1 = 1
flag = Invisible
flag2 = NoShadow

[State 3052, 0]; 不具合対策
type = ChangeState
trigger1 = !IsHelper
value = 0
ctrl = 1

[State 3052, ステート変更];本体var(11),スリーマンセルフラグOFF
type = parentvarset
trigger1 = Time = 600
v = 11
value = 0

[State 3052,destroy]
type=Destroyself
trigger1 = Time = 600
trigger2 = root,var(11) = 0

;===========================================================================
; ちょっとこ丸が追加したステート
;===========================================================================
;---------------------------------------------------------------------------
; ここから下の５つのステートは僕が修正前の和訳ＫＦＭに
; 追加パッチとして入れていたものです。修正と調整も済んでます。
; 本家のカンフーマンには存在しません。
; 見慣れないステートコントローラ・トリガーやテクニックがあるので
; キャラ作りのスキルを上げたい人は参考にしてください。
;
; ただし、作成者自身のスキルアップのためにわざと「不完全な状態」にしてます。
; 試行錯誤考えながら改善して、あなたが今作っているキャラに流用してください。
;===========================================================================
;---------------------------------------------------------------------------
; 単なるパワーゲージを溜めるためのステート。
; 攻撃用のステートじゃないので、movetypeは「I」にしてます。
;
; このステートで「hold_c」のコマンドを入力し続けてる間（押しっぱなし）は、
;「PowerAdd」にてパワーゲージが毎フレーム６ポイント増加するようになってる。
;
; エフェクト画像を消すための命令（RemoveExplod）を
;『常時監視ステート（－２）』にて設定しているので、そちらも参照してね。
;---------------------------------------------------------------------------
;パワー溜め（特殊行動）
[Statedef 700]
type     = S
movetype = I
physics  = S
ctrl     = 0
velset   = 0,0
anim     = 700
sprpriority = 1

[State 700, パワーゲージ増減]
type = PowerAdd
trigger1 = 1
value = 6

[State 700, 押し判定]
type = PlayerPush
trigger1 = 1
value = 0 ;相手を押さず、すり抜ける事が出来る。

[State 700, エフェクト];「テンプレート.txt」参照
type = Explod
trigger1 = NumExplod(130) = 0 ;ＩＤナンバー「130」のExplodが画面中に１枚も出ていない時
anim = f130
facing = -1
postype = p1
pos = -5,0
sprpriority = 3
ownpal = 1
removetime = -1 ;「-1」なのでアニメーションが終わらず常に繰り返す
ID = 130

[State 700, ステート変更]
type = ChangeState
trigger1 = command != "hold_c" ;「hold_c」のコマンドではない時（Ｃボタンが離されたら）
trigger2 = Power >= 3000       ;パワーゲージがレベル３まで溜まったら
value = 0
ctrl = 1

;===========================================================================
;---------------------------------------------------------------------------
; 同人格闘ゲーム『メルティブラッド』よりボタン１個で出せる、
; 相手の攻撃を受け流す防御システム。初代無印版に近い仕様にしてます。
; 複数のテクニックの組み合わせで再現出来る。
;
; これを応用して、ストリートファイターⅢの『ブロッキング』、
; 餓狼MOTWの『ジャストディフェンス（ＥＦＺのリコイルガード）』も再現出来る。
;---------------------------------------------------------------------------
;クローンを呼ぶ
[Statedef 701] 
type 	=	S 	;ﾀｲﾌﾟ:S 立ち,C しゃがみ,A 空中 , L liedown
movetype 	=	I 	;移動タイプ:A 攻撃,I 普通,H くらい
physics 	=	S 	;摩擦(重力):S 立ち,C しゃがみ,A 空中
velset 	=	0,0 	;移動距離 横,縦
ctrl 	=	0 	;コントロール可能
anim 	=	0 	;アニメーション番号
sprpriority 	=	2 	;レイヤー優先度

[State 702, ゲージ消費]
type 	= poweradd
trigger1 = time = 0
value 	= -500

;[State 960, ヘルパー出現]
;type 	=	Helper 			;ヘルパー出現
;trigger1 	=	time 	=	0 	;ﾀｲﾑが0の時
;name 	=	"clone" 			;ﾍﾙﾊﾟｰの名前
;ID 	=	701 			;IDﾅﾝﾊﾞｰ
;postype 	=	p1 			;自分の向きを基準位置に
;pos 	=	0, 0 			;位置
;stateno 	=	10960 			;ｽﾃｰﾄﾅﾝﾊﾞｰ
;ownpal 	=	0 			;独自パレット
;supermovetime 	=	0 			;SuperPause中行動時間
;pausemovetime 	=	0 			;Pause中行動時間

[State 960, ヘルパー出現]
type 	=	Helper 			;ヘルパー出現
trigger1 	=	time 	=	0 	;ﾀｲﾑが0の時
name 	=	"clone" 			;ﾍﾙﾊﾟｰの名前
ID 	=	702 			;IDﾅﾝﾊﾞｰ
postype 	=	front;p1 			;自分の向きを基準位置に
pos 	=	0,0;20, 0 			;位置
stateno 	=	10961			;ｽﾃｰﾄﾅﾝﾊﾞｰ
ownpal 	=	0 			;独自パレット
supermovetime 	=	0 			;SuperPause中行動時間
pausemovetime 	=	0 			;Pause中行動時間

;[State 960, ヘルパー出現]
;type 	=	Helper 			;ヘルパー出現
;trigger1 	=	time 	=	0 	;ﾀｲﾑが0の時
;name 	=	"clone" 			;ﾍﾙﾊﾟｰの名前
;ID 	=	702 			;IDﾅﾝﾊﾞｰ
;postype 	=	back;p1 			;自分の向きを基準位置に
;pos 	=	0,0;-20, 0 			;位置
;stateno 	=	10961;3			;ｽﾃｰﾄﾅﾝﾊﾞｰ
;ownpal 	=	0 			;独自パレット
;supermovetime 	=	0 			;SuperPause中行動時間
;pausemovetime 	=	0 			;Pause中行動時間

[State 960, ステート移動]
type 	=	ChangeState 			;ステート移動
trigger1 	=	time 	=	1 	;ﾀｲﾑが1の時
value 	=	6005;105 			;ﾊﾞｯｸｽﾃｯﾌﾟｽﾃｰﾄへ
ctrl 	=	0;1 			;コントロール可

;---------------------------------------------------------------------------
;クローンを呼ぶ後ろに
[Statedef 702] 
type 	=	S 	;ﾀｲﾌﾟ:S 立ち,C しゃがみ,A 空中 , L liedown
movetype 	=	I 	;移動タイプ:A 攻撃,I 普通,H くらい
physics 	=	S 	;摩擦(重力):S 立ち,C しゃがみ,A 空中
velset 	=	0,0 	;移動距離 横,縦
ctrl 	=	0 	;コントロール可能
anim 	=	0 	;アニメーション番号
sprpriority 	=	2 	;レイヤー優先度

[State 702, ゲージ消費]
type 	= poweradd
trigger1 = time = 0
value 	= -250

[State 960, ヘルパー出現]
type 	=	Helper 			;ヘルパー出現
trigger1 	=	time 	=	0 	;ﾀｲﾑが0の時
name 	=	"clone" 			;ﾍﾙﾊﾟｰの名前
ID 	=	702 			;IDﾅﾝﾊﾞｰ
postype 	=	back;p1 			;自分の向きを基準位置に
pos 	=	0,0;-20, 0 			;位置
stateno 	=	10961;3			;ｽﾃｰﾄﾅﾝﾊﾞｰ
ownpal 	=	0 			;独自パレット
supermovetime 	=	0 			;SuperPause中行動時間
pausemovetime 	=	0 			;Pause中行動時間

[State 960, ステート移動]
type 	=	ChangeState 			;ステート移動
trigger1 	=	time 	=	1 	;ﾀｲﾑが1の時
value 	=	6005;105 			;ﾊﾞｯｸｽﾃｯﾌﾟｽﾃｰﾄへ
ctrl 	=	0;1 			;コントロール可


;-----------------------------------------------
;分身-追加チェンジ

[Statedef 961]
type 	=	S 	;ﾀｲﾌﾟ:S 立ち,C しゃがみ,A 空中 , L liedown
movetype 	=	I 	;移動タイプ:A 攻撃,I 普通,H くらい
physics 	=	S 	;摩擦(重力):S 立ち,C しゃがみ,A 空中
velset 	=	0,0 	;移動距離 横,縦
ctrl 	=	0 	;コントロール可能
anim 	=	0 	;アニメーション番号
sprpriority 	=	2 	;レイヤー優先度

[State 961, 身代わりが受けたダメージ分ライフ減少];効いてるのは多分これだけ
type = LifeAdd
triggerall = palno != 12
trigger1 =time = 0;1
;trigger1 = Helper(701),GetHitVar(damage)
value = -GetHitVar(damage)
absolute = 1
ignorehitpause =1
persistent=0

[State 961, power]
type = PowerAdd
triggerall = palno = [1,10]
trigger1 = time = 0
value = -1000

[State 961, 判定消す]
type = PlayerPush
trigger1 = 1
value = 0

[State 961, 判定消す]
type = ScreenBound
trigger1 = 1
value = 0

[State 961, ヘルパー出現]
type 	=	Helper 			;ヘルパー出現
trigger1 	=	time 	=	0 	;ﾀｲﾑが0の時
name 	=	"clone" 			;ﾍﾙﾊﾟｰの名前
ID 	=	701 			;IDﾅﾝﾊﾞｰ
postype 	=	p1 			;自分の向きを基準位置に
pos 	=	0, 0 			;位置
stateno 	=	9999 			;ｽﾃｰﾄﾅﾝﾊﾞｰ
ownpal 	=	0 			;独自パレット
supermovetime 	=	0 			;SuperPause中行動時間
pausemovetime 	=	0 			;Pause中行動時間

[State 961, 瞬間移動]
type 	=	PosSet 			;位置を変更
trigger1 	=	time 	=	0 	;ﾀｲﾑが0の時
x 	=	(helper(702),Pos X) 			;ﾍﾙﾊﾟｰID960の横位置
y 	=	(helper(702),Pos Y) 			;ﾍﾙﾊﾟｰID960の縦位置

[State 961, 瞬間移動]
type = Turn
trigger1 = P2Dist X < 0

[State 961, 追加技チェンジ発動変数]
type 	=	VarSet 			;変数を変更
trigger1 	=	time 	=	0 	;ﾀｲﾑが0の時
var(8) 	=	1 			;var(8)を1増やす

[State 961, 瞬間移動]
type 	=	PosSet 			;位置を変更
trigger1 	=	time 	=	1 	;ﾀｲﾑが0の時
y 	=	0

[State 961, ステート移動]
type 	=	ChangeState 			;ステート移動
trigger1 	=	time 	=	10 	;ﾀｲﾑが10の時
value 	=	0 			;ｽﾃｰﾄ0へ
ctrl 	=	1 			;コントロール可 

;---------------------------------------------------------------------------
;デアエ、デアエー！
[Statedef 6005]
type = S
movetype = I
physics = S
ctrl = 0
anim = 6005
velset = 0,0
sprpriority = 2

[State 195, コントロール]
type = CtrlSet
trigger1 = Time = 35 ;このステートが４０フレームになったら
value = 1            ;キーコントロールが可能になる。

[State 195, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------------------------
;ヘルパー

[Statedef 10960, ヘルパー]
type 	=	S 	;ﾀｲﾌﾟ:S 立ち,C しゃがみ,A 空中 , L liedown
movetype 	=	I 	;移動タイプ:A 攻撃,I 普通,H くらい
physics 	=	S 	;摩擦(重力):S 立ち,C しゃがみ,A 空中
velset 	=	0,0 	;移動距離 横,縦
ctr 	=	0 	;コントロール可能
anim 	=	0 	;アニメーション番号
sprpriority 	=	2 	;レイヤー優先度

[state a]
type = Turn
trigger1 = ceil(p2dist x) < 0 ;一番近い相手が裏に居る時

[State 10960, 追従]
type 	=	ChangeState 			;ステート移動
trigger1 	= parent,stateno	=	210 	;
value 	=	10210 			;ステート9999へ
ctrl 	=	0 

[State 10960, 追従]
type 	=	ChangeState 			;ステート移動
trigger1 	= parent,stateno	=	211 	;
value 	=	10211 			;ステート9999へ
ctrl 	=	0 	

[State 10960, 追従]
type 	=	ChangeState 			;ステート移動
trigger1 	= parent,stateno	=	195 	;
value 	=	10195 			;ステート9999へ
ctrl 	=	0 

[State 10960, 追従]
type 	=	ChangeState 			;ステート移動
trigger1 	= parent,stateno	=	170 	;
value 	=	10170 			;ステート9999へ
ctrl 	=	0 

[State 10960, 追従]
type 	=	ChangeState 			;ステート移動
trigger1 	= parent,stateno	=	181 	;
value 	=	10181 			;ステート9999へ
ctrl 	=	0 

[State 10960, 画面内に追従]
type 	=	ChangeState 	
trigger1 = ScreenPos X != [10,310] ;画面外の時
value 	=	10961 			;ステート9999へ
ctrl 	=	0 

[State 10960, 敗北時追従]
type 	=	ChangeState 
triggerall = roundstate >= 3
trigger1 = parent,life = 0
;trigger2 = parent,!alive
trigger2 = parent,stateno = 5150
value 	=	9999 			;ステート9999へ
ctrl 	=	0 

[State 210, ステート変更]
type = ChangeState
trigger1 = parent,var(16) = 1
trigger1 = StateType != A
value = 13000
ctrl = 0

[State 210, ステート変更]
type = ChangeState
trigger1 = parent,var(16) = 2
trigger1 = StateType != A
value = 13001
ctrl = 0

[State 10960, ヘルパーやられ時消滅フラグ]
type 	=	HitOverRide 			
trigger1 	=	time 	=	0 	;ﾀｲﾑが0の時
attr 	=	SCA, AA, AT, AP 			;すべてやられ状態で
time 	=	-1 			;有効時間 上書きされるまで
stateno 	=	9999 			;ステート9999へ

[State 10960, 追加チェンジ発動時消滅フラグ]
type 	=	ChangeState 			;ステート移動
trigger1 	=	parent, var(8) 	= 	1 	;チェンジが発動した時
trigger1 	=	parent, pos x 	= 	[pos x - 1,pos x + 1] 	;親ﾌﾟﾚｲﾔ位置が分身位置と同じ時
value 	=	9994			;ステート9999へ
ctrl 	=	0;1 			;コントロール可


;[State 10960, 画面内で立ち止まる]
;type = ChangeState
;trigger1 = ScreenPos X = [10,310] ;画面内の時
;trigger1 = Random < 100
;value = 10962 			;ステート9999へ
;ctrl 	=	0;1 	

;[State 10960, 画面内で立ち止まる]
;type = ChangeState
;trigger1 = ScreenPos X = [10,310] ;画面内の時
;trigger1 = Random < 100
;value = 10963 			;ステート9999へ
;ctrl 	=	0;1 

;[State 10960, 時間経過で消滅フラグ]
;type 	=	ChangeState 			;ステート移動
;trigger1 	=	time 	=	200 	;ﾀｲﾑが200の時
;value 	=	9999 			;ステート9999へ
;ctrl 	=	1 			;コントロール可

;以下体力鍛錬

[State 1010, punk attack]
type=changestate
;trigger1= var(0)=0 || var(0)=1
trigger1 = root,var(12) = 1;フライング防止
trigger1= roundstate=2 && random<50
trigger1= p2bodydist x<=30 && p2movetype!=H
value= ifelse((p2statetype!=C && random<333), 12000, ifelse(random<500, 12100, 12200))

[State 1010, walk]
type=changestate
trigger1 = root,var(12) = 1;フライング防止
trigger1= roundstate=2 && random<50
trigger1= p2bodydist x>30
value=11500+(random<333)

[State 1010, backwalk]
type=changestate
trigger1 = root,var(12) = 1;フライング防止
trigger1= roundstate=2 && random<10
trigger1= p2bodydist x<=30 && BackEdgeBodyDist > 80 && RootDist X < -200
value=11409

;====================<WALKINGback>====================
[Statedef 11409]
type=S
physics=N
movetype=I
anim=6009
velset=0,0

[State 10960, 追加チェンジ発動時消滅フラグ]
type 	=	ChangeState 			;ステート移動
trigger1 	=	parent, var(8) 	= 	1 	;チェンジが発動した時
trigger1 	=	parent, pos x 	= 	[pos x - 1,pos x + 1] 	;親ﾌﾟﾚｲﾔ位置が分身位置と同じ時
value 	=	9994			;ステート9999へ
ctrl 	=	0;1 			;コントロール可

[State 1015, turn]
type=turn
trigger1= p2dist x<0

[State 1015, vel]
type=velset
trigger1= 1
x=-2.4;3

[State 210, ステート変更]
type = ChangeState
triggerall = StateType != A
trigger1 = parent,var(16) = 1
;trigger2 = parent,stateno = 3000
value = 13000
ctrl = 0

[State 210, ステート変更]
type = ChangeState
triggerall = StateType != A
trigger1 = parent,var(16) = 2
;trigger2 = parent,stateno = 3001
value = 13001
ctrl = 0

[State 1015, end]
type=changestate
trigger1= roundstate!=2
trigger2= BackEdgeBodyDist <= 80
value=10960

;====================<WALKING>====================
[Statedef 11500]
type=S
physics=N
movetype=I
anim=6010
velset=0,0

[State 10960, 追加チェンジ発動時消滅フラグ]
type 	=	ChangeState 			;ステート移動
trigger1 	=	parent, var(8) 	= 	1 	;チェンジが発動した時
trigger1 	=	parent, pos x 	= 	[pos x - 1,pos x + 1] 	;親ﾌﾟﾚｲﾔ位置が分身位置と同じ時
value 	=	9994			;ステート9999へ
ctrl 	=	0;1 			;コントロール可

[State 1015, turn]
type=turn
trigger1= p2dist x<0

[State 1015, vel]
type=velset
trigger1= 1
x=2.4;3

[State 210, ステート変更]
type = ChangeState
triggerall = StateType != A
trigger1 = parent,var(16) = 1
;trigger2 = parent,stateno = 3000
value = 13000
ctrl = 0

[State 210, ステート変更]
type = ChangeState
triggerall = StateType != A
trigger1 = parent,var(16) = 2
;trigger2 = parent,stateno = 3001
value = 13001
ctrl = 0

[State 1015, end]
type=changestate
trigger1= roundstate!=2
trigger2= p2bodydist x<=30
value=10960


;-----Run-----
[Statedef 11501]
type=S
physics=N
movetype=I
anim=6011
velset=0,0

[State 10960, 追加チェンジ発動時消滅フラグ]
type 	=	ChangeState 			;ステート移動
trigger1 	=	parent, var(8) 	= 	1 	;チェンジが発動した時
trigger1 	=	parent, pos x 	= 	[pos x - 1,pos x + 1] 	;親ﾌﾟﾚｲﾔ位置が分身位置と同じ時
value 	=	9994			;ステート9999へ
ctrl 	=	0;1 			;コントロール可

[State 1016, vel]
type=velset
trigger1= 1;var(0)=0 || var(0)=1
x=4.5;8.5

[State 210, ステート変更]
type = ChangeState
triggerall = StateType != A
trigger1 = parent,var(16) = 1
;trigger2 = parent,stateno = 3000
value = 13000
ctrl = 0

[State 210, ステート変更]
type = ChangeState
triggerall = StateType != A
trigger1 = parent,var(16) = 2
;trigger2 = parent,stateno = 3001
value = 13001
ctrl = 0

[State 1016, end]
type=changestate
trigger1= roundstate!=2
trigger2= time>=20 || p2dist x<0
value=10960


;====================<ATTACK>====================
;-----Punk Weak Punch-----
[Statedef 12000]
type=S
physics=S
movetype=A
anim=6015
velset=0,0
sprpriority=1
facep2=1

[State 10960, 追加チェンジ発動時消滅フラグ]
type 	=	ChangeState 			;ステート移動
trigger1 	=	parent, var(8) 	= 	1 	;チェンジが発動した時
trigger1 	=	parent, pos x 	= 	[pos x - 1,pos x + 1] 	;親ﾌﾟﾚｲﾔ位置が分身位置と同じ時
value 	=	9994			;ステート9999へ
ctrl 	=	0;1 			;コントロール可

[State 1020, hit]
type=hitdef
trigger1= animelem=3
attr=S,NA
hitflag=MAF
guardflag=MA
priority=2,Hit
damage= ifelse(Palno!=12,30+10*(1/Numhelper(702)),40);20;40;ceil(40*(root,fvar(2))), 0
getpower=0,0
givepower=50,50
pausetime=9,9
guard.pausetime=9,9
animtype=Light
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
ground.hittime=7
ground.slidetime=7
guard.hittime=9
air.hittime=0
airguard.ctrltime=16
ground.velocity=-8,0
guard.velocity=-12
air.velocity=-4.16,-9.7
airguard.velocity=-7.5,-1.5
ground.cornerpush.veloff=-12
guard.cornerpush.veloff=-17.2
air.cornerpush.veloff=0
yaccel=.5
fall=0
fall.recover=1
fall.recovertime=0
sparkno=s30010;-1;0
guard.sparkno=40
sparkxy=-10,-80
hitsound=s4,0;5,0
guardsound=6,0
kill=1

[State 400, エフェクト]
type = Explod
trigger1 = movehit
anim = -1;30000
facing = 1
postype = p2
pos = 5,-25-ceil(P2BodyDist Y)
sprpriority = 3
ownpal = 1
scale = .5,.5
pausemovetime = 73640
supermovetime = 73640
supermove = 1
bindtime = 1
persistent = 0
ignorehitpause = 1

[State 210, ステート変更]
type = ChangeState
triggerall = StateType != A
trigger1 = parent,var(16) = 1
trigger2 = parent,stateno = 3000
value = 13000
ctrl = 0

[State 210, ステート変更]
type = ChangeState
triggerall = StateType != A
trigger1 = parent,var(16) = 2
trigger2 = parent,stateno = 3001
value = 13001
ctrl = 0

[State 1020, sts]
type=statetypeset
trigger1= animelemtime(4)>=0
movetype=I
[State 1020, end]
type=changestate
trigger1= !animtime
value=10960


;-----Punk Strong Punch-----
[Statedef 12100]
type=S
physics=S
movetype=A
anim=6016
velset=0,0
sprpriority=1
facep2=1

[State 10960, 追加チェンジ発動時消滅フラグ]
type 	=	ChangeState 			;ステート移動
trigger1 	=	parent, var(8) 	= 	1 	;チェンジが発動した時
trigger1 	=	parent, pos x 	= 	[pos x - 1,pos x + 1] 	;親ﾌﾟﾚｲﾔ位置が分身位置と同じ時
value 	=	9994			;ステート9999へ
ctrl 	=	0;1 			;コントロール可

[State 1021, hit]
type=hitdef
trigger1= animelem=4
attr=S,NA
hitflag=MAF
guardflag=MA
priority=2,Hit
damage= ifelse(Palno!=12,40+10*(1/Numhelper(702)),50);30;50;ceil(40*(root,fvar(2))), 0
getpower=0,0
givepower=50,50
pausetime=14,14
guard.pausetime=14,14
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
ground.hittime=7
ground.slidetime=7
guard.hittime=9
air.hittime=0
airguard.ctrltime=16
ground.velocity=-8,0
guard.velocity=-12
air.velocity=-4.16,-9.7
airguard.velocity=-7.5,-1.5
ground.cornerpush.veloff=-12
guard.cornerpush.veloff=-17.2
air.cornerpush.veloff=0
yaccel=.5
fall=0
fall.recover=1
fall.recovertime=0
sparkno=s30020;-1;0
guard.sparkno=40
sparkxy=-10,-55
hitsound=s4,1;5,1
guardsound=6,0
kill=1

[State 400, エフェクト]
type = Explod
trigger1 = movehit
anim = -1;30000
facing = 1
postype = p2
pos = 5,-60-ceil(P2BodyDist Y)
sprpriority = 3
ownpal = 1
scale = .7,.7
pausemovetime = 73640
supermovetime = 73640
supermove = 1
bindtime = 1
persistent = 0
ignorehitpause = 1

[State 210, ステート変更]
type = ChangeState
triggerall = StateType != A
trigger1 = parent,var(16) = 1
trigger2 = parent,stateno = 3000
value = 13000
ctrl = 0

[State 210, ステート変更]
type = ChangeState
triggerall = StateType != A
trigger1 = parent,var(16) = 2
trigger2 = parent,stateno = 3001
value = 13001
ctrl = 0

[State 1021, sts]
type=statetypeset
trigger1= animelemtime(5)>=0
movetype=I
[State 1021, end]
type=changestate
trigger1= !animtime
value=10960


;-----Punk Kick-----
[Statedef 12200]
type=S
physics=S
movetype=A
anim=6020
velset=0,0
sprpriority=1
facep2=1

[State 10960, 追加チェンジ発動時消滅フラグ]
type 	=	ChangeState 			;ステート移動
trigger1 	=	parent, var(8) 	= 	1 	;チェンジが発動した時
trigger1 	=	parent, pos x 	= 	[pos x - 1,pos x + 1] 	;親ﾌﾟﾚｲﾔ位置が分身位置と同じ時
value 	=	9994			;ステート9999へ
ctrl 	=	0;1 			;コントロール可

[State 1022, hit]
type=hitdef
trigger1= animelem=6
attr=C,NA
hitflag=MAF
guardflag=L
priority=2,Hit
damage= ifelse(Palno!=12,35+10*(1/Numhelper(702)),45);25;45;ceil(30*(root,fvar(2))), 0
getpower=0,0
givepower=50,50
pausetime=14,14
guard.pausetime=14,14
animtype=Hard
air.animtype=Back
fall.animtype=Back
ground.type=Trip
air.type=Trip
ground.hittime=7
ground.slidetime=7
guard.hittime=9
air.hittime=0
airguard.ctrltime=16
ground.velocity=-3.33,-6
guard.velocity=-12
air.velocity=-3.33,-6
airguard.velocity=-7.5,-1.5
ground.cornerpush.veloff=-12
guard.cornerpush.veloff=-17.2
air.cornerpush.veloff=0
yaccel=.5
fall=1
fall.recover=0
sparkno=s30020;-1;0
guard.sparkno=40
sparkxy=-10,-8
hitsound=s4,1;5,1
guardsound=6,0
kill=1

[State 400, エフェクト]
type = Explod
;trigger1= animelem=6
trigger1 = movehit
anim = -1;30000
facing = 1
postype = p2
pos = 5,0;+ceil(P2BodyDist Y)
sprpriority = 3
ownpal = 1
scale = .5,.5
pausemovetime = 73640
supermovetime = 73640
supermove = 1
bindtime = 1
persistent = 0
ignorehitpause = 1

[State 210, ステート変更]
type = ChangeState
triggerall = StateType != A
trigger1 = parent,var(16) = 1
trigger2 = parent,stateno = 3000
value = 13000
ctrl = 0

[State 210, ステート変更]
type = ChangeState
triggerall = StateType != A
trigger1 = parent,var(16) = 2
trigger2 = parent,stateno = 3001
value = 13001
ctrl = 0

[State 1022, sts]
type=statetypeset
trigger1= animelemtime(7)>=0
movetype=I
[State 1022, end]
type=changestate
trigger1= !animtime
value=10960

;以上体力鍛錬

;-----------------------------------------------
;ヘルパー移動

[Statedef 10961, ヘルパー]
type 	=	S 	;ﾀｲﾌﾟ:S 立ち,C しゃがみ,A 空中 , L liedown
movetype 	=	I 	;移動タイプ:A 攻撃,I 普通,H くらい
physics 	=	S 	;摩擦(重力):S 立ち,C しゃがみ,A 空中
velset 	=	2.4,0;const(velocity.walk.fwd.x),0 	;移動距離 横,縦
ctr 	=	0 	;コントロール可能
anim 	=	20 	;アニメーション番号
sprpriority 	=	2 	;レイヤー優先度

[state a]
type = Turn
trigger1 = ceil(p2dist x) < 0 ;一番近い相手が裏に居る時

[State 20, 1]
type = VelSet
trigger1 = 1
x = 2.4

[State 10960, 追加チェンジ発動時消滅フラグ]
type 	=	ChangeState 			;ステート移動
trigger1 	=	parent, var(8) 	= 	1 	;チェンジが発動した時
trigger1 	=	parent, pos x 	= 	[pos x - 1,pos x + 1] 	;親ﾌﾟﾚｲﾔ位置が分身位置と同じ時
value 	=	9994			;ステート9999へ
ctrl 	=	0;1 			;コントロール可

[State 10960, 敗北時追従]
type 	=	ChangeState 
triggerall = roundstate >= 3
trigger1 = parent,life = 0
;trigger2 = parent,!alive
trigger2 = parent,stateno = 5150
value 	=	9999 			;ステート9999へ
ctrl 	=	0 

[State 10960, 画面内で立ち止まる]
type 	=	ChangeState 			;ステート移動
trigger1 = ScreenPos X = [10,310] 
;trigger1 	=	time 	=	20 	;ﾀｲﾑが200の時
value 	=	10960;2 			;ステート9999へ
ctrl 	=	0;1 	

;-----------------------------------------------
;ヘルパーうろうろ現在機能せず

[Statedef 10962, ヘルパー]
type 	=	S 	;ﾀｲﾌﾟ:S 立ち,C しゃがみ,A 空中 , L liedown
movetype 	=	I 	;移動タイプ:A 攻撃,I 普通,H くらい
physics 	=	S 	;摩擦(重力):S 立ち,C しゃがみ,A 空中
velset 	=	2.4,0;const(velocity.walk.fwd.x),0 	;移動距離 横,縦
ctr 	=	0 	;コントロール可能
anim 	=	20 	;アニメーション番号
sprpriority 	=	2 	;レイヤー優先度

[state a]
type = Turn
trigger1 = ceil(p2dist x) < 0 ;一番近い相手が裏に居る時

[State 20, 1]
type = VelSet
trigger1 = 1
x = 2.4

[State 10960, 画面内で立ち止まる]
type = ChangeState
trigger1 = time = 10; 分岐させる条件
trigger1 = Random < 800
value = 10960;2 			;ステート9999へ
ctrl 	=	0;1 	

[State 10960, 画面内で立ち止まる]
type = ChangeState
trigger1 = time = 10; 分岐させる条件
trigger1 = Random < 100
value = 10962;2 			;ステート9999へ
ctrl 	=	0;1

[State 10960, 画面内で立ち止まる]
type = ChangeState
trigger1 = time = 10; 分岐させる条件
trigger1 = Random < 100
value = 10963			;ステート9999へ
ctrl 	=	0;1

;-----------------------------------------------
;ヘルパーうろうろ2現在機能せず

[Statedef 10963, ヘルパー]
type 	=	S 	;ﾀｲﾌﾟ:S 立ち,C しゃがみ,A 空中 , L liedown
movetype 	=	I 	;移動タイプ:A 攻撃,I 普通,H くらい
physics 	=	S 	;摩擦(重力):S 立ち,C しゃがみ,A 空中
velset 	=	-2.4,0;const(velocity.walk.fwd.x),0 	;移動距離 横,縦
ctr 	=	0 	;コントロール可能
anim 	=	21 	;アニメーション番号
sprpriority 	=	2 	;レイヤー優先度

[state a]
type = Turn
trigger1 = ceil(p2dist x) < 0 ;一番近い相手が裏に居る時

[State 20, 1]
type = VelSet
trigger1 = 1
x = -2.4

[State 10960, 画面内で立ち止まる]
type = ChangeState
trigger1 = time = 10; 分岐させる条件
trigger1 = Random < 800
value = 10960;2 			;ステート9999へ
ctrl 	=	0;1 	

[State 10960, 画面内で立ち止まる]
type = ChangeState
trigger1 = time = 10; 分岐させる条件
trigger1 = Random < 100
value = 10962;2 			;ステート9999へ
ctrl 	=	0;1

[State 10960, 画面内で立ち止まる]
type = ChangeState
trigger1 = time = 10; 分岐させる条件
trigger1 = Random < 100
value = 10963			;ステート9999へ
ctrl 	=	0;1

;---------------------------------------------------------------------------
;クローンタイムオーバー（負けた時）
[Statedef 10170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, 無敵]
type = NotHitBy
trigger1 = 1 ;トリガーを何も書かず「1」にする事により、『無条件で常に実行させる命令』になる。
value = SCA
time = 1

;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
;クローン勝利ポーズ（礼をする）
[Statedef 10181]
type = S
ctrl = 0
anim = 181
velset = 0,0

[state a]
type = Turn
trigger1 = ceil(p2dist x) < 0 ;一番近い相手が裏に居る時

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
;クローン挑発
[Statedef 10195]
type = S
movetype = I
physics = S
ctrl = 0
anim = 195
velset = 0,0
sprpriority = 2

[state a]
type = Turn
trigger1 = ceil(p2dist x) < 0 ;一番近い相手が裏に居る時

;[State 195, コントロール]
;type = CtrlSet
;trigger1 = Time = 40 ;このステートが４０フレームになったら
;value = 1            ;キーコントロールが可能になる。

[State 10960, ヘルパーやられ時消滅フラグ]
type 	=	HitOverRide 			
trigger1 	=	time 	=	0 	;ﾀｲﾑが0の時
attr 	=	SCA, AA, AT, AP 			;すべてやられ状態で
time 	=	-1 			;有効時間 上書きされるまで
stateno 	=	9999 			;ステート9999へ

[State 210, ステート変更]
type = ChangeState
trigger1 = parent,var(16) = 1
trigger1 = StateType != A
value = 13000
ctrl = 0

[State 210, ステート変更]
type = ChangeState
trigger1 = parent,var(16) = 2
trigger1 = StateType != A
value = 13001
ctrl = 0

[State 195, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 10960
ctrl = 1

;---------------------------------------------------------------------------
;クローン銃撃
[Statedef 10210]
type    = S
movetype= A
physics = S
juggle  = 1;4
poweradd= 0;65
ctrl = 0
velset = 0,0
anim = 210
sprpriority = -1

[state a]
type = Turn
trigger1 = ceil(p2dist x) < 0 ;一番近い相手が裏に居る時

[State 210, アニメ変更]
type = ChangeAnim
trigger1 = AnimElemTime(6) > 0 && AnimElemTime(7) <= 0
trigger1 = movecontact
value = 210
elem = 7
ignorehitpause = 1
persistent = 0

[State 210, 画像表示優先度]
type = SprPriority
trigger1 = AnimElem = 6;2
value = 2

[State 210, 物理的なキャラの幅]
type = Width
trigger1 = (AnimElemTime (6) >= 0) && (AnimElemTime (9) < 0)
value = 15,0  ;この場合キャラの幅を一時的に前に１５ピクセル伸ばす事になる。
              ;値の意味は「前方のピクセル増減量,後方のピクセル増減量」

[State 210, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 6;trigger1 = Time = 15;2
value = 0, 4
volume = -70

[State 210, ヒット定義]
type = HitDef
trigger1 = AnimElem = 6
attr = S, NA
animtype  = Light;Medium
damage    = 2;1;57
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 3,3;7,7;12,12
sparkno = s30010;-1;1
sparkxy = -10,-70
hitsound   = 5,2
guardsound = 6,0
ground.type = High
ground.slidetime = 8;12
ground.hittime  = 10;13
ground.velocity = -4;-5.5
air.velocity = -1.4,-3;-2.5,-4

[State 400, エフェクト]
type = Explod
trigger1 = movehit
anim = -1;30000
facing = 1
postype = p2
pos = 5,-95-ceil(P2BodyDist Y)
random = 20,10
sprpriority = 3
ownpal = 1
scale = .6,.6
pausemovetime = 73640
supermovetime = 73640
supermove = 1
bindtime = 1
persistent = 0
ignorehitpause = 1

[State 10960, 追従]
type 	=	ChangeState 			;ステート移動
;trigger1 = command = "y"
trigger1 	= parent,stateno	=	211 	;
trigger1 = AnimElem = 10, < 0
value 	=	10211 			;ステート9999へ
ctrl 	=	0;1 	

[State 10960, ヘルパーやられ時消滅フラグ]
type 	=	HitOverRide 			
trigger1 	=	time 	=	0 	;ﾀｲﾑが0の時
attr 	=	SCA, AA, AT, AP 			;すべてやられ状態で
time 	=	-1 			;有効時間 上書きされるまで
stateno 	=	9999 			;ステート9999へ

[State 210, ステート変更]
type = ChangeState
trigger1 = parent,var(16) = 1
trigger1 = StateType != A
value = 13000
ctrl = 0

[State 210, ステート変更]
type = ChangeState
trigger1 = parent,var(16) = 2
trigger1 = StateType != A
value = 13001
ctrl = 0

[State 210, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 10960
ctrl = 1

;---------------------------------------------------------------------------
;クローン追撃
[Statedef 10211]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd= 0
ctrl = 0
velset = 0,0
anim = 211
sprpriority = -1

[state a]
type = Turn
trigger1 = ceil(p2dist x) < 0 ;一番近い相手が裏に居る時

[State 210, アニメ変更]
type = ChangeAnim
trigger1 = AnimElemTime(2) > 0 && AnimElemTime(3) <= 0
trigger1 = movecontact
value = 211
elem = 3
ignorehitpause = 1
persistent = 0

[State 210, 画像表示優先度]
type = SprPriority
trigger1 = AnimElem = 2
value = 2

[State 210, 物理的なキャラの幅]
type = Width
trigger1 = (AnimElemTime (2) >= 0) && (AnimElemTime (5) < 0)
value = 15,0  ;この場合キャラの幅を一時的に前に１５ピクセル伸ばす事になる。
              ;値の意味は「前方のピクセル増減量,後方のピクセル増減量」

[State 210, 音を鳴らす]
type = PlaySnd
trigger1 = anim = 211
trigger1 = AnimElem = 2;trigger1 = Time = 2
value = 0, 4
volume = -70

[State 210, ヒット定義]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
animtype  = Light
damage    = 2;1,0
guardflag = MA
pausetime = 3,3;7,7;12,12
sparkno = s30010;-1;1
sparkxy = -10,-70
hitsound   = 5,2
guardsound = 6,0
ground.type = High
ground.slidetime = 8;12
ground.hittime  = 10;13
ground.velocity = -4
air.velocity = -1.4,-3

[State 400, エフェクト]
type = Explod
trigger1 = movehit
anim = -1;30000
facing = 1
postype = p2
pos = 5,-95-ceil(P2BodyDist Y)
random = 20,10
sprpriority = 3
ownpal = 1
scale = .6,.6
pausemovetime = 73640
supermovetime = 73640
supermove = 1
bindtime = 1
persistent = 0
ignorehitpause = 1

[State 10960, 追従]
type 	=	ChangeState 			;ステート移動
;triggerall = command = "y"
;triggerall = command != "holddown"
;trigger1 = statetype = S
;trigger1 = ctrl
trigger1 = (parent,stateno = 210) && time > 15
trigger1 = (parent,stateno = 210) && time < 27
trigger2 = (parent,stateno = 211) && AnimElem = 5, >= 0;time = 4;> 3;3
;trigger2 = (parent,stateno = 211) && time < 13
value 	=	10211 			;ステート9999へ
ctrl 	=	1 	
persistent=0

[State 10960, 追従]
type 	=	Changeanim
trigger1 = (parent,stateno = 210) && parent,AnimElem = 10, >= 0
trigger2 = (parent,stateno = 211) && parent,AnimElem = 6, >= 0
value 	= 212
elem = 1

[State 10960, ヘルパーやられ時消滅フラグ]
type 	=	HitOverRide 			
trigger1 	=	time 	=	0 	;ﾀｲﾑが0の時
attr 	=	SCA, AA, AT, AP 			;すべてやられ状態で
time 	=	-1 			;有効時間 上書きされるまで
stateno 	=	9999 			;ステート9999へ

[State 210, ステート変更]
type = ChangeState
triggerall = parent,var(16) = 1
trigger1 = StateType != A
trigger2 = Anim = 212
value = 13000
ctrl = 0

[State 210, ステート変更]
type = ChangeState
triggerall = parent,var(16) = 2
trigger1 = StateType != A
trigger2 = Anim = 212
value = 13001
ctrl = 0

[State 210, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 10960
ctrl = 1

;---------------------------------------------------------------------------
;クローンライフル
[Statedef 13000]
type    = S
movetype= A
physics = N
velset = 0,0
anim = 13000
ctrl = 0
sprpriority = 2

[State 1015, turn]
type=turn
trigger1= p2dist x<0

[State 3000, varreset]
type = parentvarset
trigger1 = time > 0
var(16)=0
ignorehitpause = 1

[State 3000, 超必殺技暗転時間停止]
type = SuperPause
trigger1 = root,stateno = 3000
trigger1 = root,AnimElem = 4;, 3
anim = 9999;100       ;超必エフェクトのアクションナンバー。通常は「fightfx.air」のアニメを使うが、
                 ;左に「s」を付ければ「自分のairファイル」のアクションナンバーが使える。
pos = -9999, -9999    ;超必エフェクトの座標（Ｘ軸,Ｙ軸）
sound = -1;20, 0    ;超必発動サウンド。通常は「common.snd」の音を使うが、
                 ;左に「s」を付ければ「自分のsndファイル」の音が使える。
poweradd = 0;-1000 ;パワーゲージ増減量
;time = 50       ;ポーズする時間（フレーム）
;movetime = 0    ;ポーズ中に動ける時間。timeよりも多いとバグる（デフォルトは０）
;darken = 1      ;ポーズ中画面を暗転するか否か（0=しない・1=する）
                 ;暗転する色は「ownpal」の有無により「Explod」や「ヘルパー」にも影響するので注意。

[State 3000, 物理的なキャラの幅]
type = Width
trigger1 = AnimElem = 2, >= 0
value = 15,0

;[State 1000, Anim]
;type = ChangeAnim
;trigger1 = root,Anim = 3000
;trigger1 = root,AnimElem = 5
;value = 13001
;ignorehitpause=1

[State 200 , 0];ライフル弾
type = Helper
trigger1 = anim = 13000
trigger1 = animelem = 5 || animelem = 7 || animelem = 9 || animelem = 11 || animelem = 13
;trigger1 = anim = 13001
;trigger1 = animelem = 1 || animelem = 3 || animelem = 5 || animelem = 7 || animelem = 9
id = 10010
pos = 71,-93;30,-97
postype = P1
stateno = 10000
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 1

[State 3000, 相手の特定の攻撃属性無効]
type = NotHitBy
trigger1 = AnimElem = 2
value = , NA, SA, AT
time = 11

[State 3000, 相手の特定の攻撃属性無効]
type = NotHitBy
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(14) < 0
value2 = C, NA
time = 1

[State 10960, ヘルパーやられ時消滅フラグ]
type 	=	HitOverRide 			
trigger1 	=	time 	=	0 	;ﾀｲﾑが0の時
attr 	=	SCA, AA, AT, AP 			;すべてやられ状態で
time 	=	-1 			;有効時間 上書きされるまで
stateno 	=	9999 			;ステート9999へ

[State 210, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = root,movetype = H
value = 10960
ctrl = 1

;---------------------------------------------------------------------------
;クローンライフルしゃがみ
[Statedef 13001]
type    = C
movetype= A
physics = C
velset = 0,0
anim = 13001
ctrl = 0
sprpriority = 2

[State 3000, varreset]
type = parentvarset
trigger1 = time > 0
var(16)=0
ignorehitpause = 1

[State 1015, turn]
type=turn
trigger1= p2dist x<0

[State 3000, 超必殺技暗転時間停止]
type = SuperPause
trigger1 = root,stateno = 3001
trigger1 = root,AnimElem = 5;, 3
anim = 9999;100       ;超必エフェクトのアクションナンバー。通常は「fightfx.air」のアニメを使うが、
                 ;左に「s」を付ければ「自分のairファイル」のアクションナンバーが使える。
pos = -9999, -9999    ;超必エフェクトの座標（Ｘ軸,Ｙ軸）
sound = -1;20, 0    ;超必発動サウンド。通常は「common.snd」の音を使うが、
                 ;左に「s」を付ければ「自分のsndファイル」の音が使える。
poweradd = 0;-1000 ;パワーゲージ増減量
;time = 50       ;ポーズする時間（フレーム）
;movetime = 0    ;ポーズ中に動ける時間。timeよりも多いとバグる（デフォルトは０）
;darken = 1      ;ポーズ中画面を暗転するか否か（0=しない・1=する）
                 ;暗転する色は「ownpal」の有無により「Explod」や「ヘルパー」にも影響するので注意。

[State 3000, 物理的なキャラの幅]
type = Width
trigger1 = AnimElem = 2, >= 0
value = 15,0

[State 200 , 0];ライフル弾
type = Helper
trigger1 = anim = 13001
trigger1 = animelem = 6 || animelem = 8 || animelem = 10 || animelem = 12 || animelem = 14
id = 10010
pos = 71,-60;30,-97
postype = P1
stateno = 10000
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 1

[State 3000, 相手の特定の攻撃属性無効]
type = NotHitBy
trigger1 = AnimElem = 2
value = , NA, SA, AT
time = 11

[State 3000, 相手の特定の攻撃属性無効]
type = NotHitBy
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(14) < 0
value2 = C, NA
time = 1

[State 10960, ヘルパーやられ時消滅フラグ]
type 	=	HitOverRide 			
trigger1 	=	time 	=	0 	;ﾀｲﾑが0の時
attr 	=	SCA, AA, AT, AP 			;すべてやられ状態で
time 	=	-1 			;有効時間 上書きされるまで
stateno 	=	9999 			;ステート9999へ

[State 210, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = root,movetype = H
value = 10960
ctrl = 1

;-----Falling-----やられステート
[Statedef 9999]
type=A
physics=N
movetype=H
anim=9999;0
velset=0,0

;[State 1070, damaged]
;type=varadd
;trigger1= Ishelper(701)
;trigger1= gethitvar(damage)
;var(1)=gethitvar(damage);-gethitvar(damage)
;persistent=0
;[State 1070, life display]
;type=parentvarset
;trigger1= Ishelper(702);1)
;trigger1= time = 0;gethitvar(damage)
;var(10)=gethitvar(damage);var(1)
;persistent=0

[State 1080, nothitby]
type=nothitby
trigger1= 1
value=SCA,AA,AP,AT
time=-1
ignorehitpause=1

[State 1080, snd]
type=playsnd
trigger1= !time
value=0,1
channel=1

[State 1080, helper]
type=helper
trigger1= !time
helpertype=normal
stateno=9990;1090
ID=9990;1090
name="KO Thug"
postype=p1
ownpal=0;1

[State 1080, helper]
type=helper
trigger1= !time
helpertype=normal
stateno=9010;1090
ID=9010;1090
name="Nama Kubi"
postype=p1
pos= 0,-80
ownpal=0;1

[State 1080, end]
type=destroyself
trigger1= time


;-----Falling-----
[Statedef 9990]
type=A
physics=N
movetype=H
anim=9999;0
velset=0,0
[State 1090, nothitby]
type=nothitby
trigger1= 1
value=SCA,AA,AP,AT
time=-1
ignorehitpause=1

[State 1000,Explod]
type = Explod
trigger1 = Root,Var(15) = 0
trigger1 = time = 0;AnimElem = 1
anim = 8000
scale = 0.5,0.5
id = 8000
pos = -13,-110;0,0
postype = P1
sprpriority = 1
bindtime = -1;4;-1
ownpal = 1

[State 1070, modifyExplod]
type = modifyExplod
trigger1 = AnimElem = 2
Id = 8000
pos = -30,-105
postype = P1

[State 1070, modifyExplod]
type = modifyExplod
trigger1 = AnimElem = 3
Id = 8000
pos = -40,-176
postype = P1

[State 1070, modifyExplod]
type = modifyExplod
trigger1 = AnimElem = 4
Id = 8000
pos = -40,-36
postype = P1

[State 1070, modifyExplod]
type = modifyExplod
trigger1 = AnimElem = 5
Id = 8000
pos = -17,-22
postype = P1

[State 1070, life display]
type=parentvarset
trigger1= 1
var(10)=0
persistent=0

[State 1090, anim]
type=changeanim
trigger1= !time
value=9990 + Root,Var(15);1090

[State 1090, grav]
type=veladd
trigger1= 1
y=.6
[State 1090, vel]
type=velset
trigger1= !time
x=-1
y=-12

[State 1090, end]
type=changestate
trigger1= vel y>0
trigger1= pos y>=0
value=9991;1091


;-----Hit Ground-----
[Statedef 9991]
type=L
movetype=H
physics=N
anim=9993 + Root,Var(15)
velset=0,0
[State 1091, life]
type=lifeset
trigger1= 1
value=lifemax

[State 1091, pos]
type=posset
trigger1= !time
y=0

[State 1091, snd]
type=playsnd
trigger1= !time
value=f7,0
[State 1091, fx]
type=gamemakeanim
trigger1= !time
value=60
pos=0,0
under=1

[State 1091, vel]
type=veladd
trigger1= 1
y=.4
[State 1091, vel]
type=velset
trigger1= !time
x=-2.5
y=-5

[State 1091, end]
trigger1= vel y>0
trigger1= pos y>=0
type=changestate
value=9992;1092


;-----Dead-----
[Statedef 9992]
type=L
movetype=H
physics=N
anim=9995 + Root,Var(15)
velset=0,0
[State 1092, life]
type=lifeset
trigger1= 1
value=lifemax

[State 1092, pos]
type=posset
trigger1= !time
y=0

[State 1092, shake]
type=envshake
trigger1= !time
time=10
ampl=2

[State 1092, snd]
type=playsnd
trigger1= !time
value=f7,0
[State 1092, fx]
type=gamemakeanim
trigger1= !time
value=60
pos=0,0
under=1

[State 1092, fade]
type=changestate
trigger1= time>=120
trigger1= roundstate<3
value=9993


;-----Fade-----
[Statedef 9993]
type=L
movetype=H
physics=N
velset=0,0

[State 1093, fade]
type=trans
trigger1= 1
trans= addalpha
alpha= 256-ceil(8*time), ceil(8*time)
[State 1093, gone]
type=destroyself
trigger1= time>=32

;-----チェンジ時即消-----
[Statedef 9994]
[State 9999, 追加技が発動してない状態に]
type 	=	ParentVarSet 			;親ﾌﾟﾚｲﾔｰ変数を変更
trigger1 	=	time 	= 	0 	;ﾀｲﾑが0の時
trigger1 	=	IsHelper(702) 			;helperIDが960の時
var(8) 	=	0 			;var(8)を0にする 

[State 9999, ヘルパー消滅]
type 	=	DestroySelf 			;ヘルパーを消す
trigger1 	=	time 	=	0 	;ﾀｲﾑが0の時 


;以下孫ヘルパー

;---------------------------------------------------------------------------
; 
[Statedef 9010]
type    = S
movetype= A
velset = 1.2,0
anim = 9997 + Root,Var(15)

[State 1080, nothitby]
type=nothitby
trigger1= 1
value=SCA,AA,AP,AT
time=-1
ignorehitpause=1

[State 9010];表示優先度操作
type = SprPriority
trigger1 = 1
value = 2;5
ignorehitpause = 1

[State 1000,Explod]
type = Explod
trigger1 = Root,Var(15) = 0
trigger1 = time = 0;AnimElem = 1
anim = 8000
scale = 0.2,0.2;-0.2
id = 8001
pos = 0,-10;10;0,0
postype = P1
sprpriority = 1
bindtime = -1;4;-1
ownpal = 1

[State 2027, 4]
type = AngleSet
trigger1 = Time = 0
value = 0

[State 2027, 5]
type = AngleAdd
trigger1 = Time >= 0
value = -10

[State 20276 + (target, const(data.defence) / 7)]
type = AngleDraw
trigger1 = Time >= 0

[State 1010, 5]
type = Veladd
trigger1 = Pos Y < -10;-20
y = 0.2

[State 1010, 5]
type = playsnd
trigger1 = Pos Y >= -10;-20
trigger1 = time <= 230
value = 1000,1
volume = 150

[State 1010, 10]
type = VelSet
trigger1 = Pos Y >= -10;-20
trigger1 = Vel Y > 0
y = (Vel Y*-1)/1.5

;[State 1010, 10]
;type = HitOverride
;trigger1 = time = 0
;time = -1
;attr = SCA, AA, AT, AP, NA, SA, HA, NT, ST, HT, NP, SP, HP
;slot = 0
;stateno = 1020

;[State 1010, 30]
;type = ReversalDef
;triggerall = Pos Y < -10
;trigger1 = AnimElem = 1
;trigger2 = AnimElem = 2
;trigger3 = AnimElem = 3
;trigger4 = AnimElem = 4
;reversal.attr = SCA, AA, AT, AP, NA, SA, HA, NT, ST, HT, NP, SP, HP
;pausetime = 0,0
;p1stateno = 1030

[State 1092, fade]
type=changestate
trigger1= time>=300
trigger1= roundstate<3
value=9993

[State 1010, 10]
type = DestroySelf
trigger1 = FrontEdgeDist <= -30
trigger1 = Time >= 20
trigger2 = BackEdgeDist <= -30
trigger2 = Time >= 20
;以上孫ヘルパー

;[Statedef 999999 ヘルパー消滅]
;anim 	=	5000 	;消滅時のアニメ

;[state a]
;type = Turn
;trigger1 = ceil(p2dist x) < 0 ;一番近い相手が裏に居る時

;[State 9999, 消滅アニメ位置修正]
;type 	=	velset;PosSet 			
;trigger1 	=	anim 	=	5000;192 	;ｱﾆﾒが192の時
;y 	=	-10;-50 			;上に50あげる

;[State 9999, ヘルパー消滅]
;type 	=	DestroySelf 			;ヘルパーを消す
;trigger1 	=	animtime 	=	0 	;ｱﾆﾒが終了したとき
;以上書き換え

;---------------------------------------------------------------------------
; ※８：ReversalDef
;
; 　攻撃判定ボックス（Clsn1）の設置はHitDefを有効にするためだけでなく、
; 　相手の攻撃を受け止める判定を設ける『ReversalDef』にも使う。
;
; 　実際に攻撃を受け止めるには、「attr」の代わりに
;　「reversal.attr」のパラメータを使い、受け止める相手の攻撃属性を指定する。
; 　それ以外はHitDefと設定の仕方が一緒。
;
; 　ReversalDefの設置について二つ注意する事がある。
;
; 　まず、ReversalDefは『Projectileを受け止める事は出来ない』。
; 　あくまでもこのコントローラは「HitDefを受け止めるもの」であるため。
; 
; 　そしてそのHitDefに関係するもう一つの注意点。
;
;　「HitDefを使っている攻撃用ヘルパー」を受け止める場合、
; 　ReversalDefにP2StateNoを設置していたならば
;　『そのヘルパーがそのステートに変わり、相手キャラに分身してしまう』。
; 　波動拳の気弾などにClsn1のあるヘルパーが使われてる場合は明らかにバグになる。
;　「受け止める目標がヘルパーになってしまった場合に、分身するバグを回避する方法」
; 　を自分・相手両方共に駆使する必要がある。コンプリートゲームなら楽だけどね。
;
; 　ちなみに、『MoveReversed』というトリガーは
;　「相手のReversalDef」に「自分のHitDef」が受け止められた時間を計測するトリガー。
; 　逆に「自分のReversalDef」で相手の攻撃を受け止めた事を判断する場合は、
; 　なぜか「MoveHit」が使える。なんでか教えてよエレクバイト先生！（コラ
; 　まぁReversalDefも「攻撃判定を定義する」系統だからなんだろうけどね。
;
;---------------------------------------------------------------------------
; ※９：HitOverRide
;
; 　この命令はその名の如く、攻撃を食らった時
;　『食らい状態を任意のステートで上書きする事が出来る』命令。
; 　これの応用で『ブロッキング』なども作る事が出来る。
;
; 　しかし相手のHitDefに「P2StateNo」がある場合、自分がHitOverRideで
; 　食らい動作を上書き出来る状態なら、
;　『その攻撃を食らわなくなる（相手のHitDefが空振る）』ので注意。
;
;---------------------------------------------------------------------------
;シールド成功
[Statedef 707777];2]
type     = U
movetype = I
physics  = N
ctrl     = 0
velset   = 0,0
anim     = ifelse(StateType=A,706,ifelse(StateType=C,704,702))

[State 702, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 0
value = 1, 1

[State 702, 状態変更]
type = StateTypeSet
trigger1 = StateType = A
Physics = A
IgnoreHitPause = 1

[State 702, ライフ増減]
type = LifeAdd
trigger1 = Time = 0
value = 10 ;ライフが１０ポイント回復
IgnoreHitPause = 1

[State 702, 時間停止];自分も相手も制限時間も一時的に止める（ポーズ）
type = Pause
trigger1 = Time = 0
time = 13      ;ポーズする時間（フレーム）
movetime = 13  ;ポーズ中に動ける時間。timeよりも多いとバグる（デフォルトは０）
IgnoreHitPause = 1

[State 702, コントロール]
type = CtrlSet
trigger1 = Time = 14
value = 1

[State 702, 画面全体の色]
type = EnvColor
trigger1 = Time = 0
value = 255,255,255 ;画面全体を塗り潰す色合い（赤,緑,青）
time = 1

[State 702, 軸位置]
type = PosSet
trigger1 = StateType != A
y = 0

[State 702, 移動速度]
type = VelSet
triggerall = StateType = A
trigger1 = Time = [0,13]
x = 0
y = 0

[State 702, ステート変更]
type = ChangeState
trigger1 = (StateType != A) && (AnimTime = 0)
trigger2 = (StateType = A) && (Time > 19)
value = ifelse(StateType=A,51,ifelse(StateType=C,11,0))
ctrl = 1

;===========================================================================
;---------------------------------------------------------------------------
; 木の板を投げる飛び道具技。どこかで似たのを見た事があるのは気のせいだ（ﾏﾃｺﾗ
;
; 攻撃判定のあるオブジェクトを発射する命令である『Projectile』を使う。
; ただし、Win版ではキャラ本体がPalFXで色が変わると
;『Projectileも一緒に色が変わってしまう』というバグが発生する。
; ownpalを付けても無駄。
;
; ちなみに、なぜProjectileの発射物に食らい判定（Clsn2）も付いてるのか？
;「相手のProjectile」と「自分のProjectile」が衝突した場合、
;『相殺（互いに打ち消される事）』させるために付けている。
; 自分のや相手のに無ければ当然すり抜ける。
;
; 他に、変数の面白い使い方をしている。「トリガーの代入」を利用して、Var(5)の値が
;「０フレーム目の瞬間Ｂボタンが押されていたら１、それ以外なら０」になるように設定。
; このVar(5)を他のコントローラ・トリガー・パラメータで呼び出せば、
;『一つのステートだけで必殺技の強弱が付けられるようになる』という処理を実行出来る。
; 値が１になった場合に板投げ以外になれば、０にリセットする処理も
;『常時監視ステート（－２）』にて設定しているので、そっちも見忘れないでね。
;
; 一つのステートで強弱が付けられるテクニック、これ悪咲さん方式（爆
;---------------------------------------------------------------------------
;板投げ（必殺技）
[Statedef 1300]
type    = S
movetype= A
physics = S
poweradd= 100
velset = 0,0
anim = 1300
ctrl = 0
sprpriority = 2

[State 1300, 変数];Ｂボタンが押されたら１、それ以外なら０
type = VarSet
trigger1 = Time = 0
v = 5                   ;変数用パラメータの記述方法その２
value = (command = "b") ;（その１はコマンドファイルにて）

[State 1300, 物理的なキャラの幅]
type = Width
trigger1 = (AnimElemTime(2) >= 0) && (AnimElemTime(10) < 0)
player = 30,0 ;相手を押す幅を変える（黄緑の線）
edge = 48,0   ;画面端を押す幅を変える（オレンジの線）

[State 1300, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 4
value = 800, 0

[State 1300, ヘルパーを出す];放り投げるまでの板（※１０）
type = Helper
trigger1 = AnimElemTime(2) = 0
Persistent = 0
name = "Wood-Board"
stateno = 1301
pos = -5,-60
postype = p1
keyctrl = 0
ownpal = 1
size.xscale = 2
size.yscale = 2
ID = 1300

[State 1300, 飛び道具];HitDefに飛び道具専用のパラメータを加えたようなものが「Projectile」
type = Projectile
trigger1 = AnimElem = 7
attr = S, SP ;立ち必殺飛び道具（Standing, Special Projectile）
damage = ceil(70+var(5)*10),7 ;Var(5)をここなどに代入すれば活かされる
getpower = 30,10
animtype = Hard
pausetime = 0,12
;-----------------------------------Projectile専用のパラメータ
offset = 75,-77                ;飛び道具を発射する位置（Ｘ軸,Ｙ軸）
velocity = ceil(4+var(5)*2),-3 ;飛び道具の移動速度（Ｘ軸,Ｙ軸）
accel = 0,0.4                  ;飛び道具の加速度(float)（Ｘ軸,Ｙ軸）
projID = 1302                  ;飛び道具のＩＤナンバー（NumProjIDなどで判断）
projanim = 1302                ;飛び道具のアニメ（アクションナンバー）
projhitanim = 1303             ;飛び道具がヒットした時のアニメ（アクションナンバー）
projremanim = 1303             ;飛び道具が消える時のアニメ（アクションナンバー）
projscale = 2,2                ;飛び道具の大きさ（Ｘ軸,Ｙ軸）※現在２倍
projshadow = 0,0,0             ;飛び道具の影の色合い（赤,緑,青）※現在影無し
projhits = 1                   ;飛び道具のヒット数（２以上なら多段ヒットになる）
projmisstime = 1               ;飛び道具の連続でヒットしない間隔　※projhitsが２以上の時のみ
projpriority = 3               ;飛び道具の攻撃優先度・相手のProjectileよりも高いと消しながら進む
projremovetime = -1            ;飛び道具の消えるまでの時間（フレーム）※-1なら当たるか画面外に出るまで消えない
;-----------------------------------これ以外にまだまだある。docsフォルダ参照。
guardflag = MA
priority = 3
sparkno = 2
sparkxy = 0,0
guard.sparkno = 40
hitsound = 5,3
guardsound = 6,0
ground.type = High
ground.slidetime = 14
ground.hittime = 16
ground.velocity = -6,0
air.velocity = -3,-4
air.juggle = 4 ;Projectileの場合はここで設定しないとヒットした時ジャグルが消費しない
envshake.time = 8
envshake.ampl = 6
envshake.freq = 100

[State 1300, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; ※１０：ヘルパーオブジェクト（Helper）
;
; 　その名の通り本来は『支援キャラクター』を呼び出すコントローラ。
; 　多目的にオブジェクトを画面中に出現させる事が出来る。
;
;　「ヘルパー専用のステートを作る」「用途によっては目的を済ませたら消す」の
; 　二点さえ気を付ければ、後は支援キャラ・エフェクトなどを自由に作れる。
;
; 　で、肝心なHelper用パラメータの説明を。
;
;
; [State 1000, ヘルパーを出す]
; type = Helper
; trigger1 = Time = 0
;
; helpertype = normal    ;ヘルパーの属性。「Normal」ならば画面スクロールの影響を受けず、画面外に出られる。
;                        「Player」なら画面スクロールの影響を受け、画面外に出られない上に、
;                         ヘルパー自体も「プレイヤー」として相手に判断される。
;                         デフォルトはNormal。
;
; name = "Striker"       ;ヘルパーの名前。省略すれば勝手に「(ヘルパーを出した親)'s Helper」という名前になる。
;
; stateno = 12345        ;ヘルパーの最初に向かうステートナンバー。
;
; pos = 0,0              ;ヘルパーの座標（Ｘ軸,Ｙ軸）
;                         postypeに依存。
;
; postype = p1           ;ヘルパーの位置属性（p1・p2・front・back・left・right）
;                         効果については「小ネタ.txt」を参照（PosTypeの違い）
;
; facing = 1             ;ヘルパーの左右の向き（1=そのまま・-1=左右反転）
;                         デフォルトは１。
;
; keyctrl = 0            ;ヘルパーのキーコントロールを可能にするか否か（0=しない・1=する）
;                         1の場合、[Statedef -1]に登録されたステートコントローラを
;                         そのヘルパーにも適用する事が出来る。デフォルトは０。
;
; ownpal = 1             ;ヘルパーの色を独立させるか否か（0=させない,1=させる）
;                         0にすればキャラ本体が「PalFX」などで色を変化させた場合、
;                         ヘルパーオブジェクトも一緒に色が変わってしまう。
;
; supermovetime = 6      ;「SuperPause」での時間停止を無視して有効にする時間を設定。
;                         「小ネタ.txt」を参照。
;
; pausemovetime = 6      ;「Pause」での時間停止を無視して有効にする時間を設定。
;                         「小ネタ.txt」を参照。
;
; ID = 54321             ;ヘルパーのＩＤナンバー。
;                         リダイレクションの「Helper(***),***」などでヘルパーの状況を確認する場合や
;                        「NumHelper」でヘルパーの個数を調べる場合など、『ヘルパーを特定する時』に必要。
;
; size.xscale = 1        ;｝
; size.yscale = 1        ;｝
; size.ground.back = 15  ;｝
; size.ground.front = 15 ;｝
; size.air.back = 10     ;｝これらは全てヘルパーへのサイズ指定（オプション）。
; size.air.front = 10    ;｝
; size.height = 60       ;｝やり方はコンスタンツファイルの[Size]の項目と一緒。
; size.proj.doscale = 0  ;｝
; size.head.pos = -5,-90 ;｝
; size.mid.pos = -5,-60  ;｝
; size.shadowoffset = 0  ;｝
;
;---------------------------------------------------------------------------
; こっちがヘルパー用に設定したステート。
;
; 今回は敢えて簡単にしてるけど、
; ヘルパー専用ステートにも、ヘルパー専用のコントローラやトリガーがある。
; それらも駆使して「Explodで表現出来ないエフェクト画像」など、
; 様々なオブジェクトを画面中に出す事も可能。
;
; ↓のコントローラの種類やトリガーに「Parent」や「Root」が付いているけど、
; これはヘルパー専用の処理。効果自体については「おまけフォルダ」にある
;「小ネタ.txt」を参照してください。（トリガーリダイレクション）
;---------------------------------------------------------------------------
;放り投げるまでの板（ヘルパー用ステート）
[Statedef 1301]
type     = A
movetype = I
physics  = N
ctrl     = 0
anim     = 1301
sprpriority = 3

[State 1301, 特殊効果]
type = AssertSpecial
trigger1 = 1
flag = NoShadow ;影を消す

[State 1301, 親に付く位置]
type = BindToParent ;『BindToRoot』なら「キャラ本体に付く位置」
trigger1 = Time = [0,1]
pos = -5,-60
;「このヘルパーを出した親」の軸位置からX=-5・Y=-60の座標の位置にくっ付きます

[State 1301, 親に付く位置]
type = BindToParent
trigger1 = Time = [2,3]
pos = 8,-68

[State 1301, 親に付く位置]
type = BindToParent
trigger1 = Time = [4,5]
pos = 17,-82

[State 1301, 親に付く位置]
type = BindToParent
trigger1 = Time = [6,7]
pos = 28,-90

[State 1301, 親に付く位置]
type = BindToParent
trigger1 = (Time > 7)
pos = 55,-83

[State 1301, ヘルパーを消す]
type = DestroySelf
trigger1 = Time >= 10
trigger2 = (Parent,MoveType != A) ;「このヘルパーを出した親」が「攻撃状態」以外の時
;trigger2 = (Root,MoveType != A) ;「キャラ本体」が「攻撃状態」以外の時

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; カンフーマンのこのコンスタンツファイルをそのまま使う場合は、
; ここからステートを追加すると整理しやすいでしょう。
;
; ・・・ってエレクバイト先生が言ってるけど、正直使いにくいかも（ﾏﾃｺﾗ
; 冗談です(´・ω:;.:...
;---------------------------------------------------------------------------





;===========================================================================
; 常時監視ステート（－２）
;===========================================================================
;---------------------------------------------------------------------------
; 通常の食らい状態（Statedef 5000～5199間）でも、
; 相手に（「P2StateNo」や「TargetState」等で）制御を奪われても、
; 常に登録したステートコントローラが有効になります。
; サブシステム等を制御する時に重宝するでしょう。
;---------------------------------------------------------------------------

[Statedef -2]

[State -2, 残虐表現スイッチ];0でON(残虐),1でOFF(マイルド)
type = VarSet
trigger1 = 1
var(15) = 0;

[State -2, kenjuureset];拳銃弾数リセット
type = VarSet
trigger1 = movetype = H
trigger2 = stateno != [210,211]
var(6) = 0;

[State -2, kenjuureset];ライフル弾数リセット
type = VarSet
trigger1 = movetype = H
trigger2 = stateno != [3000,3001]
var(16) = 0;

;[State -2, 身代わりが受けたダメージ分ライフ減少]
;type = LifeAdd
;trigger1 = NumHelper(702);1)
;trigger1 = time = 0
;;trigger1 = Helper(701),GetHitVar(damage)
;value = -var(10);-1*Helper(701),GetHitVar(damage)
;absolute = 1
;ignorehitpause = 1
;persistent = 0

[State 960, ヘルパー出現];10P時左右にクローン
type 	=	Helper 			;ヘルパー出現
triggerall = palno = 10 && var(12) = 0;&& stateno = 191
;trigger1 = roundstate = 1 && Alive
trigger1 = roundstate <= 2 && ctrl = 0 && StateType != A && movetype = I
trigger1 = numhelper(702) <= 1
name 	=	"clone" 			;ﾍﾙﾊﾟｰの名前
ID 	=	702 			;IDﾅﾝﾊﾞｰ
postype 	= p1 			;自分の向きを基準位置に
pos 	=	25, 0 			;位置
stateno 	=	10961			;ｽﾃｰﾄﾅﾝﾊﾞｰ
ownpal 	=	0 			;独自パレット
supermovetime 	=	0;9999;0 			;SuperPause中行動時間
pausemovetime 	=	0;9999;0 			;Pause中行動時間
persistent=0

[State 960, ヘルパー出現];10P時左右にクローン
type 	=	Helper 			;ヘルパー出現
triggerall = palno = 10 && var(12) = 0;&& stateno = 191
;trigger1 = roundstate = 1 && Alive
trigger1 = roundstate <= 2 && ctrl = 0 && StateType != A && movetype = I
trigger1 = numhelper(702) <= 1
name 	=	"clone" 			;ﾍﾙﾊﾟｰの名前
ID 	=	702 			;IDﾅﾝﾊﾞｰ
postype 	= p1 			;自分の向きを基準位置に
pos 	=	-25, 0 			;位置
stateno 	=	10961			;ｽﾃｰﾄﾅﾝﾊﾞｰ
ownpal 	=	0 			;独自パレット
supermovetime 	=	0;9999;0 			;SuperPause中行動時間
pausemovetime 	=	0;9999;0 			;Pause中行動時間
sprpriority = -3
persistent=0

[State -2, ヘルパー出現];クローン無限湧きジツ
type 	=	Helper 			;ヘルパー出現
;triggerall = 1
triggerall = roundstate = 2 && Alive
;trigger1 = PalNo = 12 || PalNo = 11
;trigger1=numhelper(702) <=1 ;分身がいない時
trigger1=numhelper(702) <=2 &&  PalNo = 12;1 ;分身がいない時
trigger2=numhelper(702) <=1 &&  PalNo = 11;1 ;分身がいない時
trigger3 = PalNo = 11 || PalNo = 12 || var(11) != 0;PalNo = 10 || PalNo = 11 || PalNo = 12 || var(11) != 0
trigger3=numhelper(702) =0 ;分身がいない時
trigger3 = BackEdgeBodyDist >= 60
trigger4=numhelper(702) <=1 &&  var(11) != 0 ;分身がいない時
trigger5=numhelper(702) < 2 &&  PalNo = 10;<=1 &&  PalNo = 10
trigger6=numhelper(702) =0  &&  PalNo = 10;分身がいない時
name 	=	"clone" 			;ﾍﾙﾊﾟｰの名前
ID 	=	702 			;IDﾅﾝﾊﾞｰ
postype =back
pos 	=	0,0
stateno 	=	10961;3			;ｽﾃｰﾄﾅﾝﾊﾞｰ
ownpal 	=	0 			;独自パレット
supermovetime =0;999999;SuperPause中行動時間
pausemovetime =0;999999;Pause中行動時間

[State -2, ヘルパー出現];クローン無限湧きジツ
type 	=	Helper 			;ヘルパー出現
;triggerall = 1
triggerall = roundstate = 2 && Alive
;triggerall = PalNo = 12 || PalNo = 11 
trigger1=numhelper(702) <=3 &&  PalNo = 12;1 ;分身がいない時
trigger2=numhelper(702) <=1 &&  PalNo = 11;1 ;分身がいない時
trigger3 =  PalNo = 11 || PalNo = 12 || var(11) != 0;PalNo = 10 || PalNo = 11 || PalNo = 12 || var(11) != 0
trigger3=numhelper(702) =0
trigger3 = BackEdgeBodyDist < 60
trigger4=numhelper(702) <=1 &&  var(11) != 0 ;分身がいない時
;trigger5=numhelper(702) <=1 &&  PalNo = 10
name 	=	"clone" 			;ﾍﾙﾊﾟｰの名前
ID 	=	702 			;IDﾅﾝﾊﾞｰ
postype =front
pos 	=	0,0
stateno 	=	10961;3			;ｽﾃｰﾄﾅﾝﾊﾞｰ
ownpal 	=	0 			;独自パレット
supermovetime =0;999999;SuperPause中行動時間
pausemovetime =0;999999;Pause中行動時間

[State -2,Migawari-no-jutsu]
type = ChangeState
triggerall = Life > 1;1
triggerall = roundstate = 2 && Alive
;triggerall = statetype != A && movetype = H
triggerall = movetype = H
triggerall = stateno = 5000 || stateno = 5001 || stateno = 5010 || stateno = 5011 || stateno = 5020
triggerall=numhelper(702) >= 1 ;分身が1以上ある時
trigger1 = PalNo = [1,10]
trigger1 = power>=1000
trigger1 = command = "z"
trigger2=PalNo = 12 || PalNo = 11
value = 961
ignorehitpause=1

[state -2,ctrl確認];ヘルパーのフライング防止用
type = varset
trigger1 = var(12) = 0
trigger1 = ctrl && RoundState = 2
var(12) = 1

[state -2,ctrl確認リセット]
type = varset
trigger1 = var(12) = 1
trigger1 = RoundState != 2
var(12) = 0

[State -2, 変数];板投げ用
type = VarSet
trigger1 = (StateNo != 1300)
var(5) = 0

;-----------------------------------
;ここは「パワー溜め」のステートで発生させた「Explod」のエフェクト画像を
;特定の条件が有効になれば消す、という処理をしています。

[State -2, エフェクトを消す];パワー溜めステート用
type = RemoveExplod
triggerall = NumExplod(130) > 0
                          ;↑はＩＤナンバー「130」のExplodの画面中の数が0よりも多い、
                          ;つまり１枚以上表示されている時
trigger1 = StateNo != 700 ;ステートが７００（パワー溜め）以外の時
trigger2 = MoveType != I  ;MoveTypeが「I（何もしてない）」以外の時
ID = 130                  ;消すExplodの特定のＩＤナンバーを指定

;-----------------------------------
[State -2, クリップボード]
type = DisplayToClipboard
trigger1 = 1
text = "Cancel=%d, Throw=%d, Button=%d, Body-Distance X=%d,Y=%d \n"
params = var(1),var(2),var(5),floor(P2BodyDist X),floor(P2BodyDist Y)

[State -2, クリップボード（追加専用）]
type = AppendToClipboard
trigger1 = 1
text = "Position X=%d,Y=%d, Velocity X=%f,Y=%f, Hit=%d \n"
params = floor(Pos X),floor(Pos Y),(Vel X),(Vel Y),(MoveHit)

;===========================================================================
; 準常時監視ステート（－３）
;===========================================================================
;---------------------------------------------------------------------------
; こちらは通常の食らい状態以外の「P2StateNo」や「TargetState」等で制御された、
; 作成者が任意に指定した相手側の食らいステートに限り、
; 登録したステートコントローラが有効にはなりません。
; －１や－２と上手く使い分けて行きましょう。
;---------------------------------------------------------------------------

[Statedef -3]

;-----------------------------------
;ここは「ジャンプ」か「バックステップ」をした後に
;着地する音を鳴らす設定をしています。

[State -3, 音を鳴らす]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 52  ;着地ステート
trigger2 = stateno = 106 ;バックステップ後の着地ステート
value = 40, 0

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; ■最後に『コモンステート』について■
; コモンステートとは、全キャラ共通の基本動作のステートです。
; 通常は特に変更しない限り、M.U.G.E.N本体のdataフォルダにある
;「common1.cns（コモンステートファイル）」を使います。
;
; しかし、もしもあなたのキャラのステートファイルでcommon1.cnsと同じ番号の
; 基本動作のステートを作った場合は処理が上書きされ、
; common1.cns側の同じ番号のステートは無効になります。
;
; common1.cnsのプログラム優先度は最低に属しているので、
; ステートの作成には番号に注意しないといけません。
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------

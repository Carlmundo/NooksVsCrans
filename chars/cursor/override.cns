;---------------------------------------------------------------------------
; Override common states (use same number to override) :
;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
; States that are always executed (use statedef -2)
;---------------------------------------------------------------------------
[Statedef -2]

[State -2, AngleDraw]
type = AngleDraw
trigger1 = 1
ignorehitpause = 1

;===== Armor Code =====
;----- State Set -----
[State -2, VarSet]
type = VarSet
trigger1 = MoveType != H
var(10) = StateNo
ignorehitpause = 1
;--------------------

;----- Anim Set -----
[State -2, Anim]
type = VarSet
trigger1 = MoveType != H
var(11) = Anim
ignorehitpause = 1
;--------------------

;----- AnimElemNo -----
[State -2, VarSet]
type = VarSet
trigger1 = MoveType != H
var(12) = AnimElemNo(0)
ignorehitpause = 1
;--------------------

;----- Ctrl Set -----
[State -2, VarSet]
type = VarSet
trigger1 = MoveType = I
var(13) = 1
ignorehitpause = 1

[State -2, VarSet]
type = VarSet
trigger1 = MoveType = A
var(13) = 0
;--------------------

;----- Time Add -----
[State -2, VarSet]
type = VarSet
trigger1 = MoveType = I
var(20) = 0

[State -2, VarAdd]
type = VarAdd
trigger1 = MoveType = A
var(20) = 1
;--------------------
;====================

[State -2,Display]
type = DisplayToClipboard
trigger1 = 1
text = "AnimElemTime = %d   AnimElemTime(AnimElemNo) = %d\nVel X = %f   Vel Y = %f"
params = AnimElemTime(1), AnimElemTime(AnimElemNo(0)), Vel X, Vel Y
ignorehitpause = 1

[State -2, Hit]
type = HitOverride
trigger1 = 1
slot = 0
stateno = 35
attr = SCA, AA, AP, AT
ignorehitpause = 1
time = 1

[State -2, Push]
type = PlayerPush
trigger1 = 1
value = 0

[State -2, PosSet] 
type = PosSet
triggerall = Win = 0
triggerall = Alive = 1
triggerall = !DrawGame
triggerall = LoseTime = 0
triggerall = StateNo != 190
trigger1 = StateNo = 5900
trigger2 = StateNo = 0
y = -50

[State -2, State]
type = ChangeState
triggerall = StateNo < 150
triggerall = Life > 0
trigger1 = Lose
trigger2 = Ctrl
trigger2 = DrawGame
trigger3 = Ctrl
trigger3 = Win
trigger4 = MoveType = A
trigger4 = NumTarget = 0
trigger4 = Pos Y < -100
trigger4 = Win
value = 0
ctrl = 1

[State -2, State]
type = ChangeState
triggerall = Ctrl
triggerall = Alive
triggerall = !Lose
trigger1 = StateNo = 0
trigger2 = StateNo > 50
trigger2 = StateNo < 100
trigger3 = StateNo > 1000
trigger3 = StateNo < 5900
value = 30
ctrl = 1

[State -2, State]
type = ChangeState
triggerall = StateNo != 5150
triggerall = StateNo != 5151
trigger1 = !DrawGame
trigger1 = Life = 0
trigger1 = Lose
value = 5151

[State -2, NoGuard]
type = AssertSpecial
trigger1 = 1
flag = NoStandGuard
flag2 = NoCrouchGuard
flag3 = NoAirGuard

;===== Blue Screen =====
[State -2, Pause]
type = Pause
trigger1 = Var(50) = 1
ignorehitpause = 1
time = 10
movetime = 10

[State -2, AssertSpecial]
type = AssertSpecial
trigger1 = Var(50) > 0
trigger2 = NumExplod(666) > 0
ignorehitpause = 1
flag = NoBarDisplay
flag2 = Invisible
flag3 = NoMusic

[State -2, Sound]
type = StopSnd
trigger1 = Var(50) > 0
trigger1 = Var(50) < 10
trigger2 = NumExplod(666) > 0
trigger2 = Var(50) > 50
ignorehitpause = 1
channel = -1

[State -2, EnvColor]
type = EnvColor
trigger1 = Var(50) > 0
trigger1 = Var(50) < 10
value = 0,0,0
ignorehitpause = 1
under = 0
time = 2

[State -2, PlaySnd]
type = PlaySnd
trigger1 = Var(50) = 10
ignorehitpause = 1
value = 666, 0
channel = 0

[State -2, Explod]
type = Explod
trigger1 = Var(50) = 10
pausemovetime = -1
supermovetime = -1
ignorehitpause = 1
sprpriority = 100
removetime = -1
postype = left
bindtime = -1
anim = 666
id = 666
ownpal = 1
pos = 0,0

[State -2, EnvColor]
type = EnvColor
trigger1 = Var(50) > 10
trigger2 = NumExplod(666) > 0
ignorehitpause = 1
value = 0,0,170
under = 1
time = 2

[State -2, VarAdd]
type = VarAdd
trigger1 = Var(50) > 0
trigger2 = NumExplod(666) > 0
var(50) = 1
ignorehitpause = 1
;=========================

;---------------------------------------------------------------------------
; States that are executed when in self's state file (use statedef -3)
;---------------------------------------------------------------------------

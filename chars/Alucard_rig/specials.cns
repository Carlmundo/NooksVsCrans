;---------------------------------------------------------------
;ＭＰＭＡＸ
[Statedef 2200]
Anim = 2140

[State 2200, cs]
type = PlaySnd
trigger1 = time = 0
value = 2100, 0

[State 2200, cs]
type = parentvarset
trigger1 = time = 0
v = 40
value = 0

[State 2200, cs]
type = parentvarset
trigger1 = time = 0
v = 41
value = 1

[State 7001, 3]
type = DestroySelf
trigger1 = time = 30

;---------------------------------------------------------------
;構え
[Statedef 990]
type    = S
movetype= I
physics = S
;anim = 990
ctrl = 1

[state 200,changeanim]
type = changeanim
trigger1 = (!time) && (anim != 990)
value = 990

[State 200, 7]
type = ChangeState
trigger1 = command != "holdup"
value = 0
ctrl = 1

;---------------------------------------------------------------
;アルカードシールド(立ち)
[Statedef 250]
type    = S
movetype= I
physics = S
anim = 252
ctrl = 0
sprpriority = 0

[State 0, 4]
type = afterimagetime
trigger1 = time = 0
time = 0

[State exp, *]
type = Explod
trigger1 = time = 0
anim = 250
ID = 250
pos = 14,-54
postype = p1
scale = 2,2
sprpriority = -1
ownpal = 1
bindtime = -1
pausemovetime = -1
ontop = 0

[State 200, 7]
type = ChangeState
trigger1 = command != "hold_z"
value = 0
ctrl = 1

[State 200, 7]
type = ChangeState
trigger1 = AnimElemtime(2) = 0
value = 130
ctrl = 0

;---------------------------------------------------------------
;アルカードシールド(しゃがみ)
[Statedef 251]
type    = S
movetype= I
physics = S
anim = 255
ctrl = 0
sprpriority = 0

[State 0, 4]
type = afterimagetime
trigger1 = time = 0
time = 0

[State exp, *]
type = Explod
trigger1 = time = 0
anim = 250
ID = 250
pos = 20,-21
postype = p1
scale = 2,2
sprpriority = -1
ownpal = 1
bindtime = -1
pausemovetime = -1
ontop = 0

[State 200, 7]
type = ChangeState
trigger1 = command != "hold_z"
value = 11
ctrl = 1

[State 200, 7]
type = ChangeState
trigger1 = AnimElemtime(1) = 4
value = 131
ctrl = 0

;---------------------------------------------------------------
;アルカードシールド(ジャンプ)
[Statedef 252]
type    = A
movetype= I
physics = A
ctrl = 0
anim = 258
sprpriority = 0

[State 0, 4]
type = afterimagetime
trigger1 = time = 0
time = 0

[State exp, *]
type = Explod
trigger1 = time = 0
anim = 250
ID = 250
pos = 18,-68
postype = p1
scale = 2,2
sprpriority = -1
ownpal = 1
bindtime = -1
pausemovetime = -1
ontop = 0

[State 200, 7]
type = ChangeState
trigger1 = command != "hold_z"
value = 54
ctrl = 1

[State 200, 7]
type = ChangeState
trigger1 = time = 4
value = 132
ctrl = 0

;---------------------------------------------------------------
;バックダッシュ
[Statedef 900]
type    = S
movetype= I
physics = N
velset = 0,0
anim = 900
ctrl = 0
sprpriority = -2

[State 7019, 1]
type = PlayerPush
trigger1 = time <= 15
value = 0

[State 200, 1]
type = PlaySnd
trigger1 = time = 0
value = 900, 0
channel = 1

[State 7019, 00000]
type = AfterImage
trigger1 = time = 0
time = 70
trans = add
length   = 9
timegap  = 3
framegap = 2
PalBright = 40 , 40 , 60
PalContrast = 90 , 90 , 90
PalAdd = 0 , 0 , 0
PalMul = 1.1 , 1.1 , 1.3
IgnoreHitPause = 1
Persistent = 1

[State exp, *]
type = Explod
trigger1 = time = 1
trigger2 = time = 5
trigger3 = time = 9
trigger4 = time = 13
trigger5 = time = 17
anim = 1090
ID = 1090
pos = -10,0
postype = p1
vel = 0,-0.4
scale = 1.0,1.0
sprpriority = 0
ownpal = 1
removetime = -2
ontop = 0

[State exp, *]
type = Explod
trigger1 = AnimElemtime(6) = 0
trigger2 = AnimElemtime(7) = 0
trigger3 = AnimElemtime(8) = 0
anim = 1090
ID = 1090
pos = 13,0
postype = p1
vel = 0,-0.4
scale = 1.0,1.0
sprpriority = 0
ownpal = 1
removetime = -2
ontop = 0

[State 7019]
type = Velset
trigger1 = time = 0
x = -5.3

[State 7019]
type = statetypeset
trigger1 = AnimElem = 6
physics = S

[State 195, 1]
type = CtrlSet
trigger1 = AnimElemTime(5) = 2
value = 1

[State 200, 7]
type = ChangeState
trigger1 = command = "x"
value = 200
ctrl = 1

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------
;フロントダッシュ
[Statedef 910]
type    = S
movetype= I
physics = N
velset = 0,0
anim = 910
ctrl = 0
sprpriority = -2

[State turn, *]
type = turn
trigger1 = time = 0

[State turn, *]
type = turn
triggerall = time = 54
trigger1 = P2Dist x <= 0

[State 7019, 1]
type = PlayerPush
trigger1 = time <= 15
value = 0

[State 200, 1]
type = PlaySnd
trigger1 = time = 0
value = 900, 0
channel = 1

[State 7019, 00000]
type = AfterImage
trigger1 = time = 0
time = 70
trans = add
length   = 9
timegap  = 3
framegap = 2
PalBright = 40 , 40 , 60
PalContrast = 90 , 90 , 90
PalAdd = 0 , 0 , 0
PalMul = 1.1 , 1.1 , 1.3
IgnoreHitPause = 1
Persistent = 1

[State exp, *]
type = Explod
trigger1 = time = 1
trigger2 = time = 5
trigger3 = time = 9
trigger4 = time = 13
trigger5 = time = 17
anim = 1090
ID = 1090
pos = -6,0
postype = p1
vel = 0,-0.6
scale = 1.0,1.0
sprpriority = 3
ownpal = 1
removetime = -2
ontop = 1

[State exp, *]
type = Explod
trigger1 = AnimElemtime(6) = 0
trigger2 = AnimElemtime(7) = 0
trigger3 = AnimElemtime(8) = 0
anim = 1090
ID = 1090
pos = 9,0
postype = p1
vel = 0,-0.4
scale = 1.0,1.0
sprpriority = 0
ownpal = 1
removetime = -2
ontop = 0

[State 7019]
type = Velset
trigger1 = time = 0
x = -5.3

[State 7019]
type = statetypeset
trigger1 = AnimElem = 6
physics = S

[State 195, 1]
type = CtrlSet
trigger1 = AnimElemTime(10) = 0
value = 1

[State 200, 7]
type = ChangeState
triggerall = AnimElemTime(6) >= 0
trigger1 = command = "holddown" && command = "x"
value = 400
ctrl = 1

[State 200, 7]
type = ChangeState
triggerall = AnimElemTime(6) >= 0
trigger1 = command = "x"
value = 200
ctrl = 1

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ヘルファイア
[Statedef 1000]
type = S
movetype = I
physics = S
anim = 1000
velset = 0,0
ctrl = 0
sprpriority = 0

[state 1000, 1]
type = varrandom
trigger1 = time <= 8
v = 37
range = 0,3

[State 200, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 251

[State 200, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 252

[State 200, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 253

[State mp]
type = varadd
trigger1 = time = 0
v = 42
value = -150

[State var, *]
type = varset
trigger1 = time = 0
v = 19
value = 0

[State var, *]
type = varset
trigger1 = time = 0
v = 56
value = 0

[state 1,AIturn]
type = turn
trigger1 = roundstate = 2
trigger1 = time = 0
trigger1 = var(30) = 30
trigger1 = P2Dist x <= 0

[State 0, 4]
type = afterimagetime
trigger1 = time = 0
time = 0

[State 7020, 1]
type = PlayerPush
trigger1 = 1
value = 0

[State 7500, 3]
type = NotHitBy
trigger1 = Time = 0
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 16

[State snd]
type = PlaySnd
trigger1 = AnimElem = 11
value = 1000,0

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 11
helpertype = Normal
ID = 1010
name = "fire1" 
postype = p1
pos = -23,-42
stateno = 1010
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 11
helpertype = Normal
ID = 1011
name = "fire2" 
postype = p1
pos = -23,-45
stateno = 1011
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElem = 11
helpertype = Normal
ID = 1012
name = "fire3" 
postype = p1
pos = -23,-45
stateno = 1012
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State exp, *]
type = Explod
trigger1 = AnimElemtime(11) = 0
anim = 1050
ID = 1050
pos = -23,-48
postype = p1
scale = 0,0
sprpriority = 2
ownpal = 1
Persistent = 6
bindtime = -1
pausemovetime = -1
ontop = 1

[State var, *]
type = varset
trigger1 = time = 0
fvar(17) = 0

[State var, *]
type = varadd
;trigger1 = time = [26,100]
trigger1 = AnimElemtime(11) = [2,100]
fvar(17) = 0.0970

[State var, *]
type = varset
trigger1 = time = 0
fvar(18) = 0

[State var, *]
type = varadd
;trigger1 = time = [26,100]
trigger1 = AnimElemtime(11) = [2,100]
fvar(18) = 0.0940

[State exp, *]
type = modifyexplod
trigger1 = 1
ID = 1050
scale = 1.5+fvar(17),1.5+fvar(18)

[State 195, 1]
type = CtrlSet
trigger1 = AnimElemTime(21) = 4
value = 1

[State var, *]
type = varset
trigger1 = command = "holdup"
v = 19
value = 1

[State var, *]
type = varset
trigger1 = command = "holdback"
v = 56
value = 1

[State 195, 1]
type = CtrlSet
trigger1 = AnimElemTime(16) >= 0
value = 1

[State 200, 7]
type = ChangeState
trigger1 = AnimElemtime(8) = 0;time = 19
trigger1 = var(19) = 1
value = 1050

[State 200, 7]
type = ChangeState
triggerall = var(42) >= 100
trigger1 = AnimElemtime(8) = 0;time = 19
trigger1 = var(56) = 1
value = 1900

;---------------------------------------------------------------
;ヘルファイア（１発目発射）
[Statedef 1010]
type    = A
movetype= A
physics = N
juggle  = 6
anim = 1051
ctrl = 0
sprpriority = 2

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SP
damage = 40, 5
animtype = back
guardflag = MA
hitflag = MAF
fall = 1
air.fall = 1
priority = 3
pausetime = 0, 11
sparkno = S1082
guard.sparkno = S1082
sparkxy = 7,0
hitsound = s1910,1;s2300,0
guardsound = s1500,0
ground.type = low
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -2,-4.3
airguard.velocity = -1.5,-1
guard.slidetime = 7
guard.hittime = 7
air.type = High
air.velocity = -2,-3.9
air.hittime = 9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 8,0
palfx.time = 32
palfx.sinadd = 140,50,-40,7
palfx.add = 50,-40,-130
getpower = 50,50
guard.kill = 0
fall.recovertime = 8
p2facing = 1
yaccel = .45
fall.yvelocity = -4

[State 7004]
type = Velset
trigger1 = parent,var(37) <= 1
trigger1 = time = 0
x = 4.5
y = -1.5

[State 7004]
type = Velset
trigger1 = parent,var(37) >= 2
trigger1 = time = 0
x = 2.9
y = -0.8

[State 7004]
type = Veladd
trigger1 = parent,var(37) >= 2
trigger1 = time >= 13
x = 0.3

[State 7004]
type = Velset
trigger1 = parent,var(37) <= 1
trigger1 = time = 20
y = 0

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 1100, 1]
type = Helper
trigger1 = MoveContact = 1
helpertype = Normal
ID = 1020
name = "firekieru" 
postype = p2
pos = 0,0
stateno = 1020
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 7001, 3]
type = DestroySelf
trigger1 = MoveContact = 1
trigger2 = FrontEdgeBodyDist <= -35

;---------------------------------------------------------------
;ヘルファイア（２発目発射）
[Statedef 1011]
type    = A
movetype= A
physics = N
juggle  = 6
anim = 1051
ctrl = 0
sprpriority = 2

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SP
damage = 40, 5
animtype = back
guardflag = MA
hitflag = MAF
fall = 1
air.fall = 1
priority = 3
pausetime = 0, 11
sparkno = S1080
guard.sparkno = S1080
sparkxy = 7,0
hitsound = s1910,1;s2300,0
guardsound = s1500,0
ground.type = low
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -2,-4.3
airguard.velocity = -1.5,-1
guard.slidetime = 7
guard.hittime = 7
air.type = High
air.velocity = -2,-3.9
air.hittime = 9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 8,0
palfx.time = 32
palfx.sinadd = 140,50,-40,7
palfx.add = 50,-40,-130
getpower = 50,50
guard.kill = 0
fall.recovertime = 8
p2facing = 1
yaccel = .45
fall.yvelocity = -4

[State 7004]
type = Velset
trigger1 = parent,var(37) <= 1
trigger1 = time = 0
x = 4.5
y = 0

[State 7004]
type = Velset
trigger1 = parent,var(37) >= 2
trigger1 = time = 0
x = 2.9

[State 7004]
type = Veladd
trigger1 = parent,var(37) >= 2
trigger1 = time >= 13
x = 0.3

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 1100, 1]
type = Helper
trigger1 = MoveContact = 1
helpertype = Normal
ID = 1020
name = "firekieru" 
postype = p2
pos = 0,0
stateno = 1020
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 7001, 3]
type = DestroySelf
trigger1 = MoveContact = 1
trigger2 = FrontEdgeBodyDist <= -35

;---------------------------------------------------------------
;ヘルファイア（３発目発射）
[Statedef 1012]
type    = A
movetype= A
physics = N
juggle  = 6
anim = 1051
ctrl = 0
sprpriority = 2

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SP
damage = 40, 5
animtype = back
guardflag = MA
hitflag = MAF
fall = 1
air.fall = 1
priority = 3
pausetime = 0, 11
sparkno = S1081
guard.sparkno = S1081
sparkxy = 7,0
hitsound = s1910,1;s2300,0
guardsound = s1500,0
ground.type = low
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -2,-4.3
airguard.velocity = -1.5,-1
guard.slidetime = 7
guard.hittime = 7
air.type = High
air.velocity = -2,-3.9
air.hittime = 9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 8,0
palfx.time = 32
palfx.sinadd = 140,50,-40,7
palfx.add = 50,-40,-130
getpower = 50,50
guard.kill = 0
fall.recovertime = 8
p2facing = 1
yaccel = .45
fall.yvelocity = -4

[State 7004]
type = Velset
trigger1 = parent,var(37) <= 1
trigger1 = time = 0
x = 4.5
y = 1.5

[State 7004]
type = Velset
trigger1 = parent,var(37) >= 2
trigger1 = time = 0
x = 2.9
y = 0.8

[State 7004]
type = Veladd
trigger1 = parent,var(37) >= 2
trigger1 = time >= 13
x = 0.3

[State 7004]
type = Velset
trigger1 = parent,var(37) <= 1
trigger1 = time = 18
y = 0

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 1100, 1]
type = Helper
trigger1 = MoveContact = 1
helpertype = Normal
ID = 1020
name = "firekieru" 
postype = p2
pos = 0,0
stateno = 1020
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 7001, 3]
type = DestroySelf
trigger1 = MoveContact = 1
trigger2 = FrontEdgeBodyDist <= -35

;---------------------------------------------------------------------------
;ファイア当たると消滅
[Statedef 1020]
type = S
movetype = I
physics = S
anim = 1053
velset = 0,0
ctrl = 0

[State 200]
type = Explod
trigger1 = time = 1
trigger2 = time = 3
trigger3 = time = 5
trigger4 = time = 7
trigger5 = time = 9
trigger6 = time = 11
anim = 1052
id = 1052
postype = p2
scale = 1.5,1.5
accel = 0,-.17
random = 60,80
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 7001, 3]
type = DestroySelf
trigger1 = time = 12

;---------------------------------------------------------------------------
;ヘルファイア(貫通弾)
[Statedef 1050]
type = S
movetype = I
physics = S
anim = 1010
velset = 0,0
ctrl = 0
sprpriority = 0

[State var, *]
type = varset
trigger1 = time = 0
v = 19
value = 0

[State 0, 4]
type = afterimagetime
trigger1 = time = 0
time = 0

[State 7020, 1]
type = PlayerPush
trigger1 = 1
value = 0

[State 7500, 3]
type = NotHitBy
trigger1 = Time = 0
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 5

[State snd]
type = PlaySnd
trigger1 = AnimElem = 4
value = 1050,0

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(4) = 0
helpertype = Normal
ID = 1060
name = "fire1" 
postype = p1
pos = -13,-62
stateno = 1060
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(4) = 14
helpertype = Normal
ID = 1060
name = "fire2" 
postype = p1
pos = -13,-29
stateno = 1060
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State exp, *]
type = Explod
trigger1 = AnimElemtime(4) = 0
anim = 1061
ID = 1061
pos = -13,-62
postype = p1
scale = 1.5,1.5
sprpriority = 2
ownpal = 1
bindtime = -1
pausemovetime = -1
ontop = 1

[State exp, *]
type = Explod
trigger1 = AnimElemtime(4) = 14
anim = 1061
ID = 1061
pos = -13,-29
postype = p1
scale = 1.5,1.5
sprpriority = 2
ownpal = 1
bindtime = -1
pausemovetime = -1
ontop = 1

[State exp, *]
type = Explod
trigger1 = AnimElemtime(4) = 0
anim = 1050
ID = 1050
pos = -23,-48
postype = p1
scale = 0,0
sprpriority = 2
ownpal = 1
Persistent = 6
bindtime = -1
pausemovetime = -1
ontop = 1

[State var, *]
type = varset
trigger1 = time = 0
fvar(17) = 0

[State var, *]
type = varadd
trigger1 = time = [13,100]
fvar(17) = 0.0970

[State var, *]
type = varset
trigger1 = time = 0
fvar(18) = 0

[State var, *]
type = varadd
trigger1 = time = [13,100]
fvar(18) = 0.0940

[State exp, *]
type = modifyexplod
trigger1 = 1
ID = 1050
scale = 1.5+fvar(17),1.5+fvar(18)

[State 195, 1]
type = CtrlSet
trigger1 = AnimElemTime(11) >= 0
value = 1

[State 195, 1]
type = CtrlSet
trigger1 = AnimElemTime(14) = 3
value = 1

;---------------------------------------------------------------
;ヘルファイア貫通弾（発射）
[Statedef 1060]
type    = A
movetype= A
physics = N
juggle  = 6
anim = 1060
ctrl = 0
sprpriority = 2

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
trigger2 = time = 50
attr = S, SP
damage = 78, 15
animtype = back
guardflag = MA
hitflag = MAF
fall = 1
priority = 3
pausetime = 0, 14
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = s2300,0
guardsound = s1500,0
ground.type = low 
ground.slidetime = 3             
ground.hittime  = 8               
ground.velocity = -5,0             
airguard.velocity = -1.9,-.8     
air.type = High                  
air.velocity = -5,-3           
air.hittime = 8
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 23,10
palfx.time = 26
palfx.sinadd = 140,50,-40,8
palfx.add = 50,-40,-130
guard.kill = 0

[State 7004]
type = Veladd
trigger1 = time = [36,85]
x = 0.2

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 7300, 0]
type = Explod
trigger1 = time = [23,25]
trigger2 = time = [29,31]
trigger3 = time = [35,37]
trigger4 = time = [41,43]
trigger5 = time = [47,49]
trigger6 = time = [53,55]
trigger7 = time = [59,61]
trigger8 = time = [65,67]
trigger9 = time = [71,73]
trigger10 = time = [77,79]
trigger11 = time = [83,85]
trigger12 = time = [89,91]
trigger13 = time = [95,97]
trigger14 = time = [101,105]
trigger15 = time = [109,111]
trigger16 = time = [115,117]
trigger17 = time = [121,123]
anim = 1062
ID = 1062
pos = 10,-20
postype = p1
;vel = 2,0
accel = 0,-.13
random = 23,60
removetime = -2
scale = 1.5,1.5
sprpriority = 1
ontop = 1
shadow = 40,40,40
ownpal = 1

[State 200]
type = Explod
trigger1 = MoveHit = 1
trigger2 = MoveHit = 3
trigger3 = MoveHit = 5
trigger4 = MoveHit = 7
trigger5 = MoveHit = 9
trigger6 = MoveHit = 11
anim = 1052
id = 1052
postype = p2
scale = 1.5,1.5
accel = 0,-.17
random = 60,80
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 7001, 3]
type = DestroySelf
trigger1 = FrontEdgeBodyDist <= -40

;---------------------------------------------------------------------------
;ヘルフレイム
[Statedef 1900]
type = S
movetype = I
physics = S
anim = 1910
velset = 0,0
ctrl = 0
sprpriority = 0

[State mp]
type = varadd
trigger1 = time = 0
v = 42
value = -100

[State var, *]
type = varset
trigger1 = time = 0
v = 56
value = 0

[State 0, 4]
type = afterimagetime
trigger1 = time = 0
time = 0

[State 7020, 1]
type = PlayerPush
trigger1 = 1
value = 0

[State 7500, 3]
type = NotHitBy
trigger1 = Time = 0
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 10

[State snd]
type = PlaySnd
trigger1 = AnimElem = 4
value = 1000,0

[State snd]
type = PlaySnd
trigger1 = AnimElem = 4
value = 1900,0

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(4) = 3
value = 3900,1

[State 1100, 1]
type = Helper
trigger1 = AnimElemtime(4) = 0
helpertype = Normal
ID = 1910
name = "freim"
postype = p1
pos = -5,-9
stateno = 1910
size.xscale = 2.0
size.yscale = 2.0
ownpal = 1

[State exp, *]
type = Explod
trigger1 = AnimElemtime(4) = 4
anim = 1050
ID = 1050
pos = -23,-48
postype = p1
scale = 0,0
sprpriority = 2
ownpal = 1
Persistent = 6
bindtime = -1
pausemovetime = -1
ontop = 1

[State var, *]
type = varset
trigger1 = time = 0
fvar(17) = 0

[State var, *]
type = varadd
trigger1 = time = [13,100]
fvar(17) = 0.0970

[State var, *]
type = varset
trigger1 = time = 0
fvar(18) = 0

[State var, *]
type = varadd
trigger1 = time = [13,100]
fvar(18) = 0.0940

[State exp, *]
type = modifyexplod
trigger1 = 1
ID = 1050
scale = 1.5+fvar(17),1.5+fvar(18)

[State 195, 1]
type = CtrlSet
trigger1 = AnimElemTime(9) >= 0
value = 1

[State 195, 1]
type = CtrlSet
trigger1 = AnimElemTime(14) = 3
value = 1

;---------------------------------------------------------------
;ヘルフレイム（放出）
[Statedef 1910]
type    = A
movetype= A
physics = N
juggle  = 6
anim = 1900
ctrl = 0
sprpriority = 4

[State 3200]
type = AngleDraw
trigger1 = 1

[State 3200]
type = Angleset
trigger1 = time = 0
value = -34

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SP
;damage = 150, 20
damage = ceil(ifelse(P2MoveType = H,93,150)),20
animtype = back
guardflag = MA
hitflag = MAF
fall = 1
air.fall = 1
pausetime = 0,21
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = s1910,0
guardsound = s1500,0
ground.type = low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -6.4,-2.2
airguard.velocity = -2.2,-.6
air.type = High
air.velocity = -6,-2.2
air.hittime = 12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 30,30
palfx.time = 33
palfx.sinadd = 140,50,-40,8
palfx.add = 50,-40,-130

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 7300, 0]
type = Explod
triggerall = time >= 10
trigger1 = !(time%1)
anim = 1920
ID = 1920
pos = 48,-67
postype = p1
vel = 0,-1
random = 87,40
removetime = -2
scale = 2.0,2.0
sprpriority = 0
shadow = 40,40,40
ownpal = 1

[State 200]
type = Explod
trigger1 = MoveHit = 1
trigger2 = MoveHit = 3
trigger3 = MoveHit = 5
trigger4 = MoveHit = 7
trigger5 = MoveHit = 9
trigger6 = MoveHit = 11
trigger7 = MoveHit = 13
trigger8 = MoveHit = 15
trigger9 = MoveHit = 17
trigger10 = MoveHit = 20
trigger11 = MoveHit = 24
trigger12 = MoveHit = 27
trigger13 = MoveHit = 31
anim = 1052
id = 1052
postype = p2
scale = 1.5,1.5
accel = 0,-.17
random = 60,80
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = MoveHit = 2
trigger2 = MoveHit = 4
trigger3 = MoveHit = 8
trigger4 = MoveHit = 10
trigger5 = MoveHit = 16
trigger6 = MoveHit = 19
trigger7 = MoveHit = 22
trigger8 = MoveHit = 29
trigger9 = MoveHit = 34
anim = 1062
id = 1062
postype = p2
scale = 2.0,2.0
accel = 0,-.17
random = 60,80
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 7001, 3]
type = DestroySelf
trigger1 = time = 35

;---------------------------------------------------------------------------
; アルカードソード２段斬り
[Statedef 1100]
type    = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 1115
sprpriority = 0

[State -2]
type = varadd
trigger1 = time = 0
v = 42
value = -250

[State 200, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 251

[State 200, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 252

[State 200, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 253

[State 0, 4]
type = afterimagetime
trigger1 = time = 0
time = 0

[State 1100, 1]
type = Helper
trigger1 = time = 4
helpertype = Normal
ID = 1105
name = "bunsin" 
postype = p1
pos = 0,0
stateno = 1105
size.xscale = 2
size.yscale = 2
ownpal = 1

[State 200, 7]
type = ChangeState
trigger1 = Time = 60
value = 1120
ctrl = 1

;---------------------------------------------------------------------------
; アルカードソード２段斬り(移動)
[Statedef 1105]
type    = S
movetype= I
physics = N
juggle  = 1
velset = 0,0
ctrl = 0
anim = 1100
sprpriority = 0

[State 7004]
type = Velset
trigger1 = time = 0
x = 15

[State 200,1]
type = playsnd
trigger1 = time = 0
value = 1100,3
channel = 0

[State 200, 7]
type = ChangeState
trigger1 = Time = 11
value = 1110
ctrl = 1

;---------------------------------------------------------------------------
; アルカードソード２段斬り(攻撃)
[Statedef 1110]
type    = S
movetype= A
physics = N
juggle  = 1
velset = 0,0
ctrl = 0
anim = 1105
sprpriority = 0

[state 7800,1]
type = varrandom
trigger1 = time = 0
v = 36
range = 0,4

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 2
trigger1 = var(36) != 2
trigger2 = AnimElem = 7
trigger2 = var(36) != 2
attr = S, SP
;damage = 50, 1
damage = ceil(ifelse(P2MoveType = H,33,50)),1
animtype = Light
guardflag = HA
hitflag = MAF
priority = 3, Hit
pausetime = 0, 8
sparkno = S1500
guard.sparkno = S1500
sparkxy = -10,-80
hitsound = s9,0
guardsound = s1500,0
ground.type = High
ground.slidetime = 9
ground.hittime  = 17
ground.velocity = 4
airguard.velocity = 1.9,-.8
air.type = High
air.velocity = 1.4,-3
air.hittime = 12
getpower = 0,40
palfx.time = 10
palfx.sinadd = 70,40,0,7
palfx.add = 120,-80,-80
guard.kill = 0

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 2
trigger1 = var(36) = 2
trigger2 = AnimElem = 7
trigger2 = var(36) = 2
attr = S, SP
;damage = 85, 1
damage = ceil(ifelse(P2MoveType = H,62,85)),1
animtype = Light
guardflag = HA
hitflag = MAF
priority = 3, Hit
pausetime = 0, 8
sparkno = S1500
guard.sparkno = S1500
sparkxy = -10,-80
hitsound = s9,0
guardsound = s1500,0
ground.type = High
ground.slidetime = 9
ground.hittime  = 18
ground.velocity = 4
airguard.velocity = 1.9,-.8
air.type = High
air.velocity = 1.4,-3
air.hittime = 12
getpower = 10,40
palfx.time = 10
palfx.sinadd = 70,40,0,7
palfx.add = 120,-80,-80
guard.kill = 0

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = MoveHit = 1
trigger1 = var(36) = 2
anim = 1600
id = 1600
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200,1]
type = playsnd
trigger1 = AnimElemtime(1) = 2
trigger2 = AnimElemtime(6) = 2
value = 200,1

[State 7300, 0]
type = Explod
trigger1 = AnimElemtime(1) = 2
trigger2 = AnimElemtime(6) = 2
anim = 1125
ID = 1125
pos = -57,-81
postype = p1
removetime = -2
scale = 2,2
sprpriority = 4
pausemovetime = 99999999
bindtime = -1
ontop = 1
ownpal = 1

[State 7300, 0]
type = Explod
trigger1 = AnimElemtime(2) = 0
trigger2 = AnimElemtime(7) = 0
anim = 206
ID = 206
pos = -54,-85
postype = p1
vel = 2.8,-0.7
random = 70,30
removetime = -2
scale = 2,2
sprpriority = 2
pausemovetime = 99999999
ontop = 1
ownpal = 1

[State 7300, 0]
type = Explod
trigger1 = AnimElemtime(2) = 0
trigger2 = AnimElemtime(7) = 0
anim = 206
ID = 206
pos = -54,-85
postype = p1
vel = 3.1,-0.8
random = 70,30
removetime = -2
scale = 2,2
sprpriority = 2
pausemovetime = 99999999
ontop = 1
ownpal = 1

[State 7300, 0]
type = Explod
trigger1 = AnimElemtime(2) = 0
trigger2 = AnimElemtime(7) = 0
anim = 206
ID = 206
pos = -54,-85
postype = p1
vel = 2.5,-0.9
random = 70,30
removetime = -2
scale = 2,2
sprpriority = 2
pausemovetime = 99999999
ontop = 1
ownpal = 1

[State 7300, 0]
type = Explod
trigger1 = AnimElemtime(2) = 0
trigger2 = AnimElemtime(7) = 0
anim = 206
ID = 206
pos = -54,-85
postype = p1
vel = 3.3,-1
random = 70,30
removetime = -2
scale = 2,2
sprpriority = 2
pausemovetime = 99999999
ontop = 1
ownpal = 1

[State 7300, 0]
type = Explod
trigger1 = AnimElemtime(2) = 1
trigger2 = AnimElemtime(7) = 0
anim = 206
ID = 206
pos = -54,-85
postype = p1
vel = 3.0,-0.6
random = 70,30
removetime = -2
scale = 2,2
sprpriority = 2
pausemovetime = 99999999
ontop = 1
ownpal = 1

[State 7300, 0]
type = Explod
trigger1 = AnimElemtime(2) = 1
trigger2 = AnimElemtime(7) = 0
anim = 206
ID = 206
pos = -54,-85
postype = p1
vel = 2.7,-0.8
random = 70,30
removetime = -2
scale = 2,2
sprpriority = 2
pausemovetime = 99999999
ontop = 1
ownpal = 1

[State 7300, 0]
type = Explod
trigger1 = AnimElemtime(2) = 1
trigger2 = AnimElemtime(7) = 0
anim = 206
ID = 206
pos = -54,-85
postype = p1
vel = 3.1,-0.9
random = 70,30
removetime = -2
scale = 2,2
sprpriority = 2
pausemovetime = 99999999
ontop = 1
ownpal = 1

[State 7300, 0]
type = Explod
trigger1 = AnimElemtime(2) = 2
trigger2 = AnimElemtime(7) = 0
anim = 206
ID = 206
pos = -54,-85
postype = p1
vel = 2.8,-0.7
random = 70,30
removetime = -2
scale = 2,2
sprpriority = 2
pausemovetime = 99999999
ontop = 1
ownpal = 1

[State 7300, 0]
type = Explod
trigger1 = AnimElemtime(2) = 2
trigger2 = AnimElemtime(7) = 0
anim = 206
ID = 206
pos = -54,-85
postype = p1
vel = 2.4,-0.6
random = 70,30
removetime = -2
scale = 2,2
sprpriority = 2
pausemovetime = 99999999
ontop = 1
ownpal = 1

[State 7300, 0]
type = Explod
trigger1 = AnimElemtime(2) = 2
trigger2 = AnimElemtime(7) = 0
anim = 206
ID = 206
pos = -54,-85
postype = p1
vel = 3.6,-0.5
random = 70,30
removetime = -2
scale = 2,2
sprpriority = 2
pausemovetime = 99999999
ontop = 1
ownpal = 1

[State 7300, 0]
type = Explod
trigger1 = AnimElemtime(2) = 3
trigger2 = AnimElemtime(7) = 0
anim = 206
ID = 206
pos = -54,-85
postype = p1
vel = 3.3,-1.0
random = 70,30
removetime = -2
scale = 2,2
sprpriority = 2
pausemovetime = 99999999
ontop = 1
ownpal = 1

[State 7300, 0]
type = Explod
trigger1 = AnimElemtime(2) = 3
trigger2 = AnimElemtime(7) = 0
anim = 206
ID = 206
pos = -54,-85
postype = p1
vel = 2.9,-0.9
random = 70,30
removetime = -2
scale = 2,2
sprpriority = 2
pausemovetime = 99999999
ontop = 1
ownpal = 1

[State 7300, 0]
type = Explod
trigger1 = AnimElemtime(2) = 3
trigger2 = AnimElemtime(7) = 0
anim = 206
ID = 206
pos = -54,-85
postype = p1
vel = 2.8,-0.4
random = 70,30
removetime = -2
scale = 2,2
sprpriority = 2
pausemovetime = 99999999
ontop = 1
ownpal = 1

[State 7300, 0]
type = Explod
trigger1 = AnimElemtime(2) = 3
trigger2 = AnimElemtime(7) = 0
anim = 206
ID = 206
pos = -54,-85
postype = p1
vel = 2.7,-1
random = 70,30
removetime = -2
scale = 2,2
sprpriority = 2
pausemovetime = 99999999
ontop = 1
ownpal = 1

[State 200, bloody]
type = Helper
trigger1 = movehit = 1
helpertype = Normal
ID = 300
name = "bloody"
postype = p2
stateno = 300
scale = 2.0,2.0
pos = -1,-81
persistent = 0
ownpal = 1

[State 200, bloody]
type = Helper
trigger1 = movehit = 1
helpertype = Normal
ID = 300
name = "bloody"
postype = p2
stateno = 300
scale = 2.0,2.0
pos = -2,-84
persistent = 0
ownpal = 1

[State 200, bloody]
type = Helper
trigger1 = movehit = 1
helpertype = Normal
ID = 300
name = "bloody"
postype = p2
stateno = 300
scale = 2.0,2.0
pos = 1,-77
persistent = 0
ownpal = 1

[State 200, bloody]
type = Helper
trigger1 = movehit = 1
helpertype = Normal
ID = 300
name = "bloody"
postype = p2
stateno = 300
scale = 2.0,2.0
pos = 2,-80
persistent = 0
ownpal = 1

[State 200, bloody]
type = Helper
trigger1 = movehit = 1
helpertype = Normal
ID = 300
name = "bloody"
postype = p2
stateno = 300
scale = 2.0,2.0
pos = 0,-82
persistent = 0
ownpal = 1

[State 200, bloody]
type = Helper
trigger1 = movehit = 1
helpertype = Normal
ID = 300
name = "bloody"
postype = p2
stateno = 300
scale = 2.0,2.0
pos = 3,-83
persistent = 0
ownpal = 1

[State 200, bloody]
type = Helper
trigger1 = movehit = 1
helpertype = Normal
ID = 300
name = "bloody"
postype = p2
stateno = 300
scale = 2.0,2.0
pos = -3,-74
persistent = 0
ownpal = 1

[State 200, bloody]
type = Helper
trigger1 = movehit = 1
helpertype = Normal
ID = 300
name = "bloody"
postype = p2
stateno = 300
scale = 2.0,2.0
pos = 4,-76
persistent = 0
ownpal = 1

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 1115
ctrl = 1

;---------------------------------------------------------------------------
; アルカードソード２段斬り(移動戻る)
[Statedef 1115]
type    = S
movetype= I
physics = N
juggle  = 1
velset = 0,0
ctrl = 0
anim = 1110
sprpriority = 0

[State 7004]
type = Velset
trigger1 = time = 0
x = -15

[State 7001, 3]
type = DestroySelf
trigger1 = time = 11

;---------------------------------------------------------------------------
; アルカードソード２段斬り(元の位置)
[Statedef 1120]
type    = S
movetype= I
physics = N
juggle  = 1
velset = 0,0
ctrl = 0
anim = 1120
sprpriority = 0

[State 7300, 0]
type = Explod
trigger1 = time = 0
anim = 1130
ID = 1130
pos = -4,-46
postype = p1
removetime = 5
scale = 2.6,2.6
sprpriority = 2
pausemovetime = -1
ontop = 1
ownpal = 1

[State 7300, 0]
type = Explod
trigger1 = time = 5
anim = 1130
ID = 1130
pos = -4,-46
postype = p1
removetime = 2
scale = 2.5,2.5
sprpriority = 2
pausemovetime = -1
ontop = 1
ownpal = 1

[State 7300, 0]
type = Explod
trigger1 = time = 6
anim = 1130
ID = 1130
pos = -4,-46
postype = p1
removetime = 2
scale = 2.4,2.4
sprpriority = 2
pausemovetime = -1
ontop = 1
ownpal = 1

[State 7300, 0]
type = Explod
trigger1 = time = 7
anim = 1130
ID = 1130
pos = -4,-46
postype = p1
removetime = 2
scale = 2.3,2.3
sprpriority = 2
pausemovetime = -1
ontop = 1
ownpal = 1

[State 7300, 0]
type = Explod
trigger1 = time = 8
anim = 1130
ID = 1130
pos = -4,-46
postype = p1
removetime = 2
scale = 2.2,2.2
sprpriority = 2
pausemovetime = -1
ontop = 1
ownpal = 1

[State 7300, 0]
type = Explod
trigger1 = time = 9
anim = 1130
ID = 1130
pos = -4,-46
postype = p1
removetime = 2
scale = 2.1,2.1
sprpriority = 2
pausemovetime = -1
ontop = 1
ownpal = 1

[State 7300, 0]
type = Explod
trigger1 = time = 10
anim = 1130
ID = 1130
pos = -4,-46
postype = p1
removetime = 6
scale = 2.0,2.0
sprpriority = 2
pausemovetime = -1
ontop = 1
ownpal = 1

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------
;浮身のブーツ
[Statedef 1200]
type    = A
movetype= I
physics = N
anim = 1210
ctrl = 0
velset = 0,-1
sprpriority = 3

[State -2]
type = varadd
trigger1 = time = 0
v = 42
value = -100

[State 7500, 3]
type = NotHitBy
trigger1 = Time = 0
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 13

[State 0, 4]
type = afterimagetime
trigger1 = time = 0
time = 0

[State 7004]
type = Velset
trigger1 = time = 0
y = -12

[State 7004]
type = Veladd
trigger1 = time >= 14
y = 0.3

[State 7019, 1]
type = PlayerPush
trigger1 = time <= 31
value = 0

[State exp, *]
type = Explod
trigger1 = time = 0
anim = 1220
ID = 1220
pos = 0,13
postype = p1
scale = 0,0
sprpriority = 2
ownpal = 1
Persistent = 6
pausemovetime = -1
removetime = 55

[State var, *]
type = varset
trigger1 = time = 0
fvar(17) = 0

[State var, *]
type = varadd
trigger1 = time = [33,90]
fvar(17) = -0.0900

[State var, *]
type = varset
trigger1 = time = 0
fvar(18) = 0

[State var, *]
type = varadd
trigger1 = time = [0,12]
fvar(18) = 0.13

[State var, *]
type = varadd
trigger1 = time = [13,32]
fvar(18) = 0.062

[State exp, *]
type = modifyexplod
trigger1 = 1
ID = 1220
scale = 2.0+fvar(17),0.0+fvar(18)

[State 7019, 00000]
type = AfterImage
trigger1 = AnimElem = 8
time = 80
trans = add
length   = 9
timegap  = 3
framegap = 2
PalBright = 40 , 40 , 60
PalContrast = 90 , 90 , 90
PalAdd = 0 , 0 , 0
PalMul = 1.1 , 1.1 , 1.3
IgnoreHitPause = 1
Persistent = 1

[State 45, 3]
type = VarSet
trigger1 = AnimElemTime(11) = 0
v = 20
value = 1

[State 200, 7]
type = ChangeState
triggerall = AnimElemTime(14) >= 0
trigger1 = command = "x" && command = "holddown"
value = 630

[State 200, 7]
type = ChangeState
triggerall = AnimElemTime(14) >= 0
trigger1 = command = "x"
value = 620

[State 200, 7]
type = ChangeState
triggerall = AnimElemTime(14) >= 0
trigger1 = command = "airkick" && command = "holdfwd"
value = 660

[State 200, 7]
type = ChangeState
triggerall = AnimElemTime(14) >= 0
trigger1 = command = "airkick"
value = 650

[State 1110, Fwd]
type = Velset
triggerall = AnimElemTime(11) >= 0
trigger1 = command = "holdfwd"
x = 2.3

[State 1110, back]
type = Velset
triggerall = AnimElemTime(11) >= 0
trigger1 = command = "holdback"
x = -2.3

[State 50,turn]
type = turn
triggerall = AnimElemTime(11) >= 0
trigger1 = command = "holdback"

[State 200, 7]
type = ChangeState
triggerall = AnimElemtime(1) <= 6
trigger1 = ScreenPos Y != [0,239]
trigger1 = p2bodydist Y > 200
value = 1212
ctrl = 0

[State 200, 7]
type = ChangeState
triggerall = AnimElemtime(8) <= 0
trigger1 = ScreenPos Y != [0,239]
trigger1 = p2bodydist Y > 200
value = 1210
ctrl = 0

[State 200, 7]
type = ChangeState
triggerall = var(20) = 1
trigger1 = pos y >= 0 && vel y > 0
value = 1205
ctrl = 0

;---------------------------------------------------------------
;着地(共通)
[Statedef 1205]
type    = C
movetype= I
physics = C
;anim = 1200
ctrl = 0
velset = 0,0
sprpriority = 1

[State 0, 1]
type = ChangeAnim
trigger1 = var(38) = 0
trigger1 = time = 0
value = 1200

[State 0, 1]
type = ChangeAnim
trigger1 = var(38) = 1
trigger1 = time = 0
value = 11750

[State 1205, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 205

[State 1205, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 215

[State 45, 3]
type = VarSet
trigger1 = Time = 0
v = 20
value = 0

[State 45, 3]
type = VarSet
trigger1 = Time = 0
v = 7
value = 0

[State 1110, var]
type = Varset
trigger1 = time = 0
v = 44
value = 0

[State 0, 4]
type = afterimagetime
trigger1 = time = 0
time = 0

[State 200,1]
type = playsnd
trigger1 = var(38) = 0
trigger1 = time = 0
value = 1200,0

[State 200,1]
type = playsnd
trigger1 = var(38) = 1
trigger1 = time = 0
value = 11750,0

[State vel]
type = velset
trigger1 = time = 0
y = 0

[State pos]
type = posset
trigger1 = time = 0
y = 0

[State exp, *]
type = Explod
trigger1 = var(38) = 0
trigger1 = time = 0
anim = 1090
ID = 1090
pos = 9,0
postype = p1
vel = 0,-0.7
scale = 1.0,1.0
sprpriority = 3
ownpal = 1
removetime = -2
ontop = 1

[State exp, *]
type = Explod
trigger1 = var(38) = 0
trigger1 = time = 2
anim = 1090
ID = 1090
pos = 2,0
postype = p1
vel = 0,-0.7
scale = 1.0,1.0
sprpriority = 3
ownpal = 1
removetime = -2
ontop = 1

[State exp, *]
type = Explod
trigger1 = var(38) = 0
trigger1 = time = 4
anim = 1090
ID = 1090
pos = -5,0
postype = p1
vel = 0,-0.7
scale = 1.0,1.0
sprpriority = 3
ownpal = 1
removetime = -2
ontop = 1

[State exp, *]
type = Explod
trigger1 = var(38) = 0
trigger1 = time = 6
anim = 1090
ID = 1090
pos = -12,0
postype = p1
vel = 0,-0.7
scale = 1.0,1.0
sprpriority = 3
ownpal = 1
removetime = -2
ontop = 1

[State exp, *]
type = Explod
trigger1 = var(38) = 0
trigger1 = time = 8
anim = 1090
ID = 1090
pos = -16,0
postype = p1
vel = 0,-0.7
scale = 1.0,1.0
sprpriority = 3
ownpal = 1
removetime = -2
ontop = 1

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------
;天井着地
[Statedef 1210]
type    = A
movetype= I
physics = N
anim = 1215
ctrl = 0
velset = 0,0
sprpriority = 3

[State sha]
type = envshake
trigger1 = time = 0
time = 9
freq = 40
ampl = 5
phase = 4

[State var, *]
type = varset
trigger1 = time = 0
fvar(17) = 0

[State var, *]
type = varadd
trigger1 = time = [1,22]
fvar(17) = -0.0900

[State exp, *]
type = modifyexplod
trigger1 = 1
ID = 1220
scale = 2.0+fvar(17),0.0+fvar(18)

[State 200,1]
type = playsnd
trigger1 = time = 0
value = 41,0

[State vel]
type = velset
trigger1 = time = 0
y = 0
x = 0

[State hel, kona]
type = Helper
trigger1 = time = 0
helpertype = Normal
ID = 1216
name = "kona"
postype = p1
stateno = 1216
scale = 1.5,1.5
pos = 0,-15
persistent = 0

[State hel, kona]
type = Helper
trigger1 = time = 2
helpertype = Normal
ID = 1216
name = "kona"
postype = p1
stateno = 1216
scale = 1.5,1.5
pos = 6,-15
persistent = 0

[State hel, kona]
type = Helper
trigger1 = time = 3
helpertype = Normal
ID = 1216
name = "kona"
postype = p1
stateno = 1216
scale = 1.5,1.5
pos = 4,-15
persistent = 0

[State hel, kona]
type = Helper
trigger1 = time = 4
helpertype = Normal
ID = 1216
name = "kona"
postype = p1
stateno = 1216
scale = 1.5,1.5
pos = -5,-15
persistent = 0

[State hel, kona]
type = Helper
trigger1 = time = 7
helpertype = Normal
ID = 1216
name = "kona"
postype = p1
stateno = 1216
scale = 1.5,1.5
pos = -2,-15
persistent = 0

[State hel, kona]
type = Helper
trigger1 = time = 9
helpertype = Normal
ID = 1216
name = "kona"
postype = p1
stateno = 1216
scale = 1.5,1.5
pos = -4,-15
persistent = 0

[State hel, kona]
type = Helper
trigger1 = time = 10
helpertype = Normal
ID = 1216
name = "kona"
postype = p1
stateno = 1216
scale = 1.5,1.5
pos = 2,-15
persistent = 0

[state 1,gravity]
type = gravity
trigger1 = AnimElemtime(17) >= 0

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 1211
ctrl = 0

;---------------------------------------------------------------
;天井ぶつかる
[Statedef 1212]
type    = A
movetype= I
physics = N
anim = 1217
ctrl = 0
velset = 0,0
sprpriority = 3

[State sha]
type = envshake
trigger1 = time = 0
time = 9
freq = 40
ampl = 5
phase = 4

[State var, *]
type = varset
trigger1 = time = 0
fvar(17) = 0

[State var, *]
type = varadd
trigger1 = time = [1,22]
fvar(17) = -0.0900

[State exp, *]
type = modifyexplod
trigger1 = 1
ID = 1220
scale = 2.0+fvar(17),0.0+fvar(18)

[State 200,1]
type = playsnd
trigger1 = time = 0
value = 41,0

[State vel]
type = velset
trigger1 = time = 0
y = 0
x = 0

[State hel, kona]
type = Helper
trigger1 = time = 0
helpertype = Normal
ID = 1216
name = "kona"
postype = p1
stateno = 1216
scale = 1.5,1.5
pos = 0,-15
persistent = 0

[State hel, kona]
type = Helper
trigger1 = time = 2
helpertype = Normal
ID = 1216
name = "kona"
postype = p1
stateno = 1216
scale = 1.5,1.5
pos = 6,-15
persistent = 0

[State hel, kona]
type = Helper
trigger1 = time = 3
helpertype = Normal
ID = 1216
name = "kona"
postype = p1
stateno = 1216
scale = 1.5,1.5
pos = 4,-15
persistent = 0

[State hel, kona]
type = Helper
trigger1 = time = 4
helpertype = Normal
ID = 1216
name = "kona"
postype = p1
stateno = 1216
scale = 1.5,1.5
pos = -5,-15
persistent = 0

[State hel, kona]
type = Helper
trigger1 = time = 7
helpertype = Normal
ID = 1216
name = "kona"
postype = p1
stateno = 1216
scale = 1.5,1.5
pos = -2,-15
persistent = 0

[State hel, kona]
type = Helper
trigger1 = time = 9
helpertype = Normal
ID = 1216
name = "kona"
postype = p1
stateno = 1216
scale = 1.5,1.5
pos = -4,-15
persistent = 0

[State hel, kona]
type = Helper
trigger1 = time = 10
helpertype = Normal
ID = 1216
name = "kona"
postype = p1
stateno = 1216
scale = 1.5,1.5
pos = 2,-15
persistent = 0

[state 1,gravity]
type = gravity
trigger1 = AnimElemtime(6) >= 0

[State 7019, 00000]
type = AfterImage
trigger1 = AnimElemtime(6) = 0
time = -1
trans = add
length   = 9
timegap  = 3
framegap = 2
PalBright = 40 , 40 , 60
PalContrast = 90 , 90 , 90
PalAdd = 0 , 0 , 0
PalMul = 1.1 , 1.1 , 1.3
IgnoreHitPause = 1
Persistent = 1

[State 50,turn]
type = turn
triggerall = AnimElemtime(6) >= 0
trigger1 = command = "holdback"

[State 1110, Fwd]
type = Velset
triggerall = AnimElemtime(6) >= 0
trigger1 = command = "holdback"
x = 1.9

[State 1110, Fwd]
type = Velset
triggerall = AnimElemtime(6) >= 0
trigger1 = command = "holdfwd"
x = 1.9

[State 200, 7]
type = ChangeState
triggerall = AnimElemtime(6) >= 5
trigger1 = command = "x" && command = "holddown"
value = 630

[State 200, 7]
type = ChangeState
triggerall = AnimElemtime(6) >= 5
trigger1 = command = "x"
value = 620

[State 200, 7]
type = ChangeState
triggerall = AnimElemtime(6) >= 5
trigger1 = command = "airkick" && command = "holdfwd"
value = 660

[State 200, 7]
type = ChangeState
triggerall = AnimElemtime(6) >= 5
trigger1 = command = "airkick"
value = 650

[State 45, 3]
type = VarSet
trigger1 = time = 72
v = 20
value = 1

[State 200, 7]
type = ChangeState
triggerall = var(20) = 0
trigger1 = pos y >= 0 && vel y > 0
value = 52
ctrl = 1

[State 200, 7]
type = ChangeState
triggerall = var(20) = 1
trigger1 = pos y >= 0 && vel y > 0
value = 1205
ctrl = 0

;---------------------------------------------------------------
;天井の粉
[Statedef 1216]
type    = A
movetype= I
physics = N
anim = 1216
sprpriority = 4

[state varran]
type = varrandom
trigger1 = time = 0
v = 13
range = -1,1

[State vel]
type = Velset
trigger1 = time = 0
x = 0.3+var(13)

[State vel]
type = Veladd
trigger1 = 1
y = .14

[State 7001, 3]
type = DestroySelf
trigger1 = Animtime = 0

;---------------------------------------------------------------
;天井から降りる
[Statedef 1211]
type    = A
movetype= I
physics = N
anim = 43
ctrl = 0
sprpriority = 3

[State 7019, 00000]
type = AfterImage
trigger1 = time = 0
time = -1
trans = add
length   = 9
timegap  = 3
framegap = 2
PalBright = 40 , 40 , 60
PalContrast = 90 , 90 , 90
PalAdd = 0 , 0 , 0
PalMul = 1.1 , 1.1 , 1.3
IgnoreHitPause = 1
Persistent = 1

[state 1,gravity]
type = gravity
trigger1 = 1

[State 50,turn]
type = turn
trigger1 = command = "holdback"

[State 1110, Fwd]
type = Velset
trigger1 = command = "holdback"
x = 2.7

[State 1110, Fwd]
type = Velset
triggerall = command = "holdfwd"
trigger1 = Time >= 5
x = 2.7

[State 200, 7]
type = ChangeState
trigger1 = command = "x" && command = "holddown"
value = 630

[State 200, 7]
type = ChangeState
trigger1 = command = "x"
value = 620

[State 200, 7]
type = ChangeState
trigger1 = command = "airkick" && command = "holdfwd"
value = 660

[State 200, 7]
type = ChangeState
trigger1 = command = "airkick"
value = 650

[State 45, 3]
type = VarSet
trigger1 = time = 40
v = 20
value = 1

[State 200, 7]
type = ChangeState
triggerall = var(20) = 0
trigger1 = pos y >= 0 && vel y > 0
value = 52
ctrl = 1

[State 200, 7]
type = ChangeState
triggerall = var(20) = 1
trigger1 = pos y >= 0 && vel y > 0
value = 1205
ctrl = 0

;---------------------------------------------------------------------------
; 急降下蹴り(真下)
[Statedef 650]
type    = A
movetype= A
physics = N
juggle  = 1
ctrl = 0
anim = 650
sprpriority = 2

[State 200, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 251

[State 200, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 252

[State 200, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 253

[state 7800,1]
type = varrandom
trigger1 = time = 0
v = 36
range = 0,7

[State 1110, var]
type = Velset
trigger1 = time = 0
y = 12

[State 1110, var]
type = Varadd
trigger1 = time = 0
v = 44
value = 1

[State 0, 4]
type = afterimagetime
trigger1 = time = 0
time = -1

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 1
trigger1 = var(36) != 2
attr = A, NA
damage = 32, 1
animtype = Light
guardflag = MA
hitflag = MAFD
fall = 1
air.fall = 1
priority = 3, Hit
pausetime = 0, 2
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,-50
hitsound = s2300,0
guardsound = s1500,0
ground.type = High
ground.slidetime = 1
ground.hittime  = 5
ground.velocity = -2,3
airguard.velocity = -2.3,0.8
air.type = High
air.velocity = -2.3,5
air.hittime = 5
getpower = 0,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.time = 8
palfx.sinadd = 120,120,-20,4
palfx.add = 150,-100,-100
guard.kill = 0
fall.recover = 0

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 1
trigger1 = var(36) = 2
attr = A, NA
damage = 118, 1
animtype = Light
guardflag = MA
hitflag = MAFD
fall = 1
air.fall = 1
priority = 3, Hit
pausetime = 0, 16
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,-50
hitsound = s2300,0
guardsound = s1500,0
ground.type = High
ground.slidetime = 1
ground.hittime  = 17
ground.velocity = -3,5
airguard.velocity = -3.3,0.8
air.type = High
air.velocity = -3.3,7
air.hittime = 17
getpower = 0,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.time = 8
palfx.sinadd = 120,120,-20,4
palfx.add = 150,-100,-100
guard.kill = 0
fall.recover = 0

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = MoveHit = 1
trigger1 = var(36) = 2
anim = 1600
id = 1600
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200,1]
type = playsnd
trigger1 = time = 0
value = 1100,3
channel = 0

[State 1110, var]
type = Varset
trigger1 = time = 0
v = 7
value = 0

[State 200, 7]
type = ChangeState
trigger1 = MoveHit = 1
value = 40
ctrl = 0

[State 200, 7]
type = ChangeState
trigger1 = pos y >= 0 && vel y > 0
value = 1205
ctrl = 0

;---------------------------------------------------------------------------
; 急降下蹴り(斜め)
[Statedef 660]
type    = A
movetype= A
physics = N
juggle  = 1
ctrl = 0
anim = 650
sprpriority = 2

[State 200, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 251

[State 200, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 252

[State 200, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 253

[state 7800,1]
type = varrandom
trigger1 = time = 0
v = 36
range = 0,7

[State 1110, vel]
type = Velset
trigger1 = time = 0
y = 12
x = 7.4

[State 1110, var]
type = Varadd
trigger1 = time = 0
v = 44
value = 1

[State 0, 4]
type = afterimagetime
trigger1 = time = 0
time = -1

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 1
trigger1 = var(36) != 2
attr = A, NA
damage = 32, 1
animtype = Light
guardflag = MA
hitflag = MAFD
fall = 1
air.fall = 1
priority = 3, Hit
pausetime = 0, 2
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,-50
hitsound = s2300,0
guardsound = s1500,0
ground.type = High
ground.slidetime = 1
ground.hittime  = 5
ground.velocity = -2,3
airguard.velocity = -2.3,0.8
air.type = High
air.velocity = -2.3,5
air.hittime = 5
getpower = 0,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.time = 8
palfx.sinadd = 120,120,-20,4
palfx.add = 150,-100,-100
guard.kill = 0
fall.recover = 0

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 1
trigger1 = var(36) = 2
attr = A, NA
damage = 118, 1
animtype = Light
guardflag = MA
hitflag = MAFD
fall = 1
air.fall = 1
priority = 3, Hit
pausetime = 0, 16
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,-50
hitsound = s2300,0
guardsound = s1500,0
ground.type = High
ground.slidetime = 1
ground.hittime  = 17
ground.velocity = -3,5
airguard.velocity = -3.3,0.8
air.type = High
air.velocity = -3.3,7
air.hittime = 17
getpower = 0,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.time = 8
palfx.sinadd = 120,120,-20,4
palfx.add = 150,-100,-100
guard.kill = 0
fall.recover = 0

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = MoveHit = 1
trigger1 = var(36) = 2
anim = 1600
id = 1600
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200,1]
type = playsnd
trigger1 = time = 0
value = 1100,3
channel = 0

[State 200, 7]
type = ChangeState
trigger1 = MoveHit = 1
value = 40
ctrl = 0

[State 1110, var]
type = Varset
trigger1 = time = 0
v = 7
value = 0

[State 200, 7]
type = ChangeState
trigger1 = pos y >= 0 && vel y > 0
value = 1205
ctrl = 0

;---------------------------------------------------------------------------
;霧(地上発動)
[Statedef 3000]
type = S
movetype = I
physics = S
anim = 3000
ctrl = 0
sprpriority = 2

[State 200, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 251

[State 200, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 252

[State 200, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 253

[State -2]
type = varadd
triggerall = alive = 1
trigger1 = var(30) = 0
trigger1 = (GameTime%1) = 0
ignorehitpause = 1
v = 42
value = -5

[State -2]
type = varadd
triggerall = alive = 1
trigger1 = var(30) = 30
trigger1 = (GameTime%2) = 0
ignorehitpause = 1
v = 42
value = -4

[State 0, 4]
type = afterimagetime
trigger1 = time = 0
time = 0

[State snd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3000,0

[State exp, *]
type = Explod
trigger1 = AnimElem = 3
anim = 3001
ID = 3001
pos = 0,-47
postype = p1
scale = 0,0
sprpriority = 3
removetime = -2
ownpal = 1
Persistent = 6
bindtime = -1
;pausemovetime = -1
ontop = 1

[State exp, *]
type = Explod
trigger1 = AnimElem = 17
anim = 3002
ID = 3002
pos = 0,-47
postype = p1
scale = 2.0,2.0
sprpriority = 3
removetime = -1
ownpal = 1
Persistent = 6
bindtime = -1
;pausemovetime = -1
ontop = 1

[State var, *]
type = varset
trigger1 = time = 0
fvar(17) = 0

[State var, *]
type = varadd
trigger1 = time = [3,30]
fvar(17) = 0.0720

[State var, *]
type = varset
trigger1 = time = 0
fvar(18) = 0

[State var, *]
type = varadd
trigger1 = time = [3,30]
fvar(18) = 0.0600

[State exp, *]
type = modifyexplod
trigger1 = 1
ID = 3001
scale = 0.1+fvar(17),0.1+fvar(18)

[State 1110, Fwd]
type = Velset
triggerall = AnimElemTime(17) >= 0
trigger1 = command = "holdfwd"
x = 1.2

[State 1110, back]
type = Velset
triggerall = AnimElemTime(17) >= 0
trigger1 = command = "holdback"
x = -1.2

[State 1110, Fwd]
type = Velset
triggerall = AnimElemTime(17) >= 0
trigger1 = command = "holdup"
y = -1.2

[State 1110, back]
type = Velset
triggerall = AnimElemTime(17) >= 0
trigger1 = command = "holddown"
y = 1.2

[State 1110, back]
type = Velset
trigger1 = pos y >= 0 && vel y > 0
trigger2 = command != "holdup" && command != "holddown"
y = 0

[State 1110, back]
type = Velset
trigger1 = ScreenPos Y != [0,239]
trigger1 = p2bodydist Y > 200
y = 3

[State 200, 7]
type = ChangeState
trigger1 = AnimElemTime(17) >= 1 && command = "c"
trigger2 = var(42) <= 0
trigger3 = AnimElemTime(17) >= 1 && win
trigger4 = AnimElemTime(17) >= 1 && Lose
value = 3010

;---------------------------------------------------------------------------
;霧(空中発動)
[Statedef 3030]
type = A
movetype = I
physics = S
velset = 0,0
anim = 3000
ctrl = 0
sprpriority = 2

[State 200, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 251

[State 200, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 252

[State 200, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 253

[State -2]
type = varadd
triggerall = alive = 1
trigger1 = (GameTime%1) = 0
ignorehitpause = 1
v = 42
value = -5

[State 0, 4]
type = afterimagetime
trigger1 = time = 0
time = 0

[State snd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3000,0

[State exp, *]
type = Explod
trigger1 = AnimElem = 3
anim = 3001
ID = 3001
pos = 0,-47
postype = p1
scale = 0,0
sprpriority = 3
removetime = -2
ownpal = 1
Persistent = 6
bindtime = -1
;pausemovetime = -1
ontop = 1

[State exp, *]
type = Explod
trigger1 = AnimElem = 17
anim = 3002
ID = 3002
pos = 0,-47
postype = p1
scale = 2.0,2.0
sprpriority = 3
removetime = -1
ownpal = 1
Persistent = 6
bindtime = -1
;pausemovetime = -1
ontop = 1

[State var, *]
type = varset
trigger1 = time = 0
fvar(17) = 0

[State var, *]
type = varadd
trigger1 = time = [3,30]
fvar(17) = 0.0720

[State var, *]
type = varset
trigger1 = time = 0
fvar(18) = 0

[State var, *]
type = varadd
trigger1 = time = [3,30]
fvar(18) = 0.0600

[State exp, *]
type = modifyexplod
trigger1 = 1
ID = 3001
scale = 0.1+fvar(17),0.1+fvar(18)

[State 1110, Fwd]
type = Velset
triggerall = AnimElemTime(17) >= 0
trigger1 = command = "holdfwd"
x = 1.2

[State 1110, back]
type = Velset
triggerall = AnimElemTime(17) >= 0
trigger1 = command = "holdback"
x = -1.2

[State 1110, Fwd]
type = Velset
triggerall = AnimElemTime(17) >= 0
trigger1 = command = "holdup"
y = -1.2

[State 1110, back]
type = Velset
triggerall = AnimElemTime(17) >= 0
trigger1 = command = "holddown"
y = 1.2

[State 1110, back]
type = Velset
trigger1 = pos y >= 0 && vel y > 0
trigger2 = command != "holdup" && command != "holddown"
y = 0

[State 1110, back]
type = Velset
trigger1 = ScreenPos Y != [0,239]
trigger1 = p2bodydist Y > 200
y = 3

[State turn, *]
type = turn
trigger1 = roundstate = 2
trigger1 = P2Dist x < 0

[State 200, 7]
type = ChangeState
trigger1 = AnimElemTime(17) >= 1 && command = "c"
trigger2 = var(42) <= 0
trigger3 = AnimElemTime(17) >= 1 && win
trigger4 = AnimElemTime(17) >= 1 && Lose
value = 3010

;---------------------------------------------------------------------------
;霧(解除中)
[Statedef 3010]
type = A
movetype = I
physics = N
anim = 3004
ctrl = 0
sprpriority = 2

[State -2, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 3001

[State -2, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 3002

[State exp, *]
type = Explod
trigger1 = time = 0
anim = 3003
ID = 3003
pos = 0,-47
postype = p1
scale = 0,0
sprpriority = 3
removetime = -2
ownpal = 1
Persistent = 6
bindtime = -1
;pausemovetime = -1
ontop = 1

[State var, *]
type = varset
trigger1 = time = 0
fvar(17) = 0

[State var, *]
type = varadd
trigger1 = time = [0,55]
fvar(17) = -0.0610

[State var, *]
type = varset
trigger1 = time = 0
fvar(18) = 0

[State var, *]
type = varadd
trigger1 = time = [0,78]
fvar(18) = -0.0150

[State exp, *]
type = modifyexplod
trigger1 = 1
ID = 3003
scale = 2.0+fvar(17),2.0+fvar(18)

[State 1110, back]
type = Velset
trigger1 = pos y >= 0 && vel y > 0
y = 0

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 3020
ctrl = 1

;---------------------------------------------------------------------------
;霧(完全解除空中)
[Statedef 3020]
type = A
movetype = I
physics = A
anim = 3005
velset = 0,-2
ctrl = 0
sprpriority = 2

[State 7019, 00000]
type = AfterImage
trigger1 = time = 0
time = -1
trans = add
length   = 9
timegap  = 3
framegap = 2
PalBright = 40 , 40 , 60
PalContrast = 90 , 90 , 90
PalAdd = 0 , 0 , 0
PalMul = 1.1 , 1.1 , 1.3
IgnoreHitPause = 1
Persistent = 1

[State turn, *]
type = turn
trigger1 = command = "holdback"

[State 1110, 1]
type = Velset
trigger1 = time = 0
y = -2

[State 195, 1]
type = CtrlSet
trigger1 = time = 8
value = 1

;---------------------------------------------------------------
;サモンスピリット
[Statedef 1300]
type    = C
movetype= I
physics = C
velset = 0,0
anim = 1300
ctrl = 0
sprpriority = 2

[State -2]
type = varadd
trigger1 = time = 0
v = 42
value = -280

[State 1300, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1100, 0

[State 0, 4]
type = afterimagetime
trigger1 = time = 0
time = 0

[State 1300, 2]
type = Helper
trigger1 = AnimElemtime(2) = 8
helpertype = Normal
ID = 1310
name = "spirit"
postype = left
pos = 150,-115
stateno = 1310
size.xscale = 1.0
size.yscale = 1.0
sprpriority = 3
ownpal = 1
keyctrl = 0

[State 1000, 0]
type = AllPalFX
trigger1 = AnimElemtime(2) = 0
trigger2 = AnimElemtime(2) = 3
trigger3 = AnimElemtime(2) = 6
trigger4 = AnimElemtime(2) = 9
trigger5 = AnimElemtime(2) = 12
time = 1
add = 190,190,190
mul = 190,190,190
sinadd = 0,0,0,10
invertall = 0
color = 256

[State exp, *]
type = Explod
trigger1 = AnimElemtime(2) = 0
anim = 1310
ID = 1310
pos = 150,105
postype = left
scale = 0.2,0.2
sprpriority = -1
removetime = 1
ownpal = 1
;bindtime = -1
;pausemovetime = -1

[State exp, *]
type = Explod
trigger1 = AnimElemtime(2) = 1
anim = 1310
ID = 1310
pos = 150,105
postype = left
scale = 0.4,0.4
sprpriority = -1
removetime = 1
ownpal = 1
;bindtime = -1
;pausemovetime = -1

[State exp, *]
type = Explod
trigger1 = AnimElemtime(2) = 2
anim = 1310
ID = 1310
pos = 150,105
postype = left
scale = 0.6,0.6
sprpriority = -1
removetime = 1
ownpal = 1
;bindtime = -1
;pausemovetime = -1

[State exp, *]
type = Explod
trigger1 = AnimElemtime(2) = 3
anim = 1310
ID = 1310
pos = 150,105
postype = left
scale = 0.8,0.8
sprpriority = -1
removetime = 1
ownpal = 1
;bindtime = -1
;pausemovetime = -1

[State exp, *]
type = Explod
trigger1 = AnimElemtime(2) = 4
anim = 1310
ID = 1310
pos = 150,105
postype = left
scale = 1.0,1.0
sprpriority = -1
removetime = 20
ownpal = 1
;bindtime = -1
;pausemovetime = -1

[State exp, *]
type = Explod
trigger1 = AnimElemtime(2) = 25
anim = 1310
ID = 1310
pos = 150,105
postype = left
scale = 0.8,0.8
sprpriority = -1
removetime = 1
ownpal = 1
;bindtime = -1
;pausemovetime = -1

[State exp, *]
type = Explod
trigger1 = AnimElemtime(2) = 26
anim = 1310
ID = 1310
pos = 150,105
postype = left
scale = 0.6,0.6
sprpriority = -1
removetime = 1
ownpal = 1
;bindtime = -1
;pausemovetime = -1

[State exp, *]
type = Explod
trigger1 = AnimElemtime(2) = 27
anim = 1310
ID = 1310
pos = 150,105
postype = left
scale = 0.4,0.4
sprpriority = -1
removetime = 1
ownpal = 1
;bindtime = -1
;pausemovetime = -1

[State exp, *]
type = Explod
trigger1 = AnimElemtime(2) = 28
anim = 1310
ID = 1310
pos = 150,105
postype = left
scale = 0.2,0.2
sprpriority = -1
removetime = 1
ownpal = 1
;bindtime = -1
;pausemovetime = -1

[State 1300, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------
;サモンスピリット(発射)
[Statedef 1310]
type    = A
movetype= A
physics = N
juggle  = 12
anim = 1305
ctrl = 0
sprpriority = 3

[State 3101, 1]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 3101, Seek 1]
type = Velset
trigger1 = time = 0
y = -5.3

[State 1300, 1]
type = PlaySnd
trigger1 = time = 0
value = 2100, 0

[State 7019, 00000]
type = AfterImage
trigger1 = time = 0
length = 28
timegap = 1
framegap = 2
palcolor = 256
palinvertall = 0
palbright = 30,30,30
palcontrast = 250,250,250
palpostbright = 0,0,0
time = -1
trans = add

[State 1300, 3]
type = ChangeState
trigger1 = time = 25
value = 1315

;---------------------------------------------------------------
;スピリット(誘導)
[Statedef 1315]
type    = A
movetype= A
physics = N
juggle  = 12
anim = 1305
ctrl = 0
sprpriority = 3

[State 3101, 1]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
trigger2 = AnimElem = 2
attr = S, SP
;damage = 56, 2
damage = ceil(ifelse(P2MoveType = H,39,56)),2
animtype = Light
guardflag = MA
hitflag = MAF
pausetime = 0, 3
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = s2300,0
guardsound = s1500,0
ground.type = low
ground.slidetime = 1
ground.hittime  = 4
ground.velocity = -2,0
airguard.velocity = -1.3,-.5
air.type = High
air.velocity = -2.1,-2
air.hittime = 3
getpower = 0,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.time = 13
palfx.sinadd = 140,-30,-30,13
palfx.add = 160,-100,-100
guard.kill = 0

[State 3101, 0]
type = Turn
trigger1 = P2Dist X < 0

[State 3101, Seek 1]
type = VelAdd
trigger1 = P2Dist X < 0
trigger1 = time >= 0
x = -.235

[State 3101, Seek 2]
type = VelAdd
trigger1 = P2Dist X > 0
trigger1 = time >= 0
x = .235

[State 3101, Seek 3]
type = VelAdd
trigger1 = P2Dist Y < 10
trigger1 = time >= 0
y = -.133

[State 3101, Seek 4]
type = VelAdd
trigger1 = P2Dist Y > 140
trigger1 = time >= 0
y = .163

[State 3101, Seek 4]
type = Velset
trigger1 = P2Dist Y < -30
y = -.3

[State 3101, Seek 4]
type = Velset
trigger1 = P2Dist X < -130
y = -.3

[State 3101, Seek 4]
type = Velset
trigger1 = P2Dist X > 130
y = .3

[State 3101, VarSet]
type = VarSet
trigger1 = time = 1
ignorehitpause = 1
fvar(21) = parent,fvar(21)

[State 3101, VarSet]
type = VarSet
trigger1 = time = 1
fvar(22) = ifelse((root,P2dist x=[0,1]),1,ifelse((root,P2dist x=[-1,0]),-1,root,P2dist x))

[State 3101, VarSet]
type = VarSet
trigger1 = time = 1
fvar(23) = ifelse((root,P2dist y=[0,1]),1,ifelse((root,P2dist y=[-1,0]),-1,root,P2dist y))+20

[State 3101, VarSet]
type = VarSet
trigger1 = time = 1
ignorehitpause = 1
var(24) = ceil((atan(fvar(22)/fvar(23))*180)/pi)-(90*ifelse(root,P2dist Y<0,-1,1))

[State 3101, VarSet]
type = VarSet
trigger1 = time = 1
ignorehitpause = 1
var(24) = ifelse(var(24)>60,60,ifelse(var(24)<-60,-60,var(22)))

[State 3101, VarSet]
type = VarSet
trigger1 = time = 1
ignorehitpause = 1
fvar(24) = atan(fvar(22)/fvar(23))-(.5*pi*ifelse(root,P2dist Y <0,-1,1))

[State 3101, VarSet]
type = VarSet
trigger1 = time = 1
ignorehitpause = 1
fvar(24) = ifelse(fvar(24)>(.33*pi),.33*pi,ifelse(fvar(24)<(-.33*pi),-.33*pi,fvar(24)))

[State 3101, 1]
type = angleset
trigger1 = time = 1
value = var(24)

[State 3101, 1]
type = angledraw
trigger1 = time = 1

[State 3101, 1]
type = VelSet
trigger1 = time = 1
x = abs(0.5*cos(fvar(24)))
y = 0.6*sin(fvar(24))

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 1300, 3]
type = ChangeState
trigger1 = movecontact = 10
trigger2 = time = 300
value = 1320

;---------------------------------------------------------------
;スピリット(当たったら退散)
[Statedef 1320]
type    = A
movetype= A
physics = N
juggle  = 12
anim = 1305
ctrl = 0
sprpriority = 3

[State 3101, 1]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 3101, Seek 1]
type = Veladd
trigger1 = time >= 0
y = -0.2

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
trigger2 = AnimElem = 2
attr = S, SP
;damage = 19, 2
damage = ceil(ifelse(P2MoveType = H,10,19)),2
animtype = Light
guardflag = MA
hitflag = MAF
pausetime = 0, 3
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = s2300,0
guardsound = s1500,0
ground.type = low
ground.slidetime = 1
ground.hittime  = 4
ground.velocity = -2,0
airguard.velocity = -1.3,-.5
air.type = High
air.velocity = -2.1,-2
air.hittime = 3
getpower = 0,0
palfx.time = 13
palfx.sinadd = 140,-30,-30,13
palfx.add = 160,-100,-100
guard.kill = 0

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 7001, 3]
type = DestroySelf
trigger1 = time = 150

;---------------------------------------------------------------
;テトラスピリット
[Statedef 1400]
type    = C
movetype= I
physics = C
velset = 0,0
anim = 1300
ctrl = 0
sprpriority = 2

[State -2]
type = varadd
trigger1 = time = 0
v = 42
value = -870

[State 1300, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1100, 0

[State 0, 4]
type = afterimagetime
trigger1 = time = 0
time = 0

[State 1300, 2]
type = Helper
trigger1 = AnimElemtime(2) = 8
helpertype = Normal
ID = 1410
name = "spirit"
postype = left
pos = 150,-115
stateno = 1410
size.xscale = 1.0
size.yscale = 1.0
sprpriority = 3
ownpal = 1
keyctrl = 0

[State 1300, 2]
type = Helper
trigger1 = AnimElemtime(2) = 8
helpertype = Normal
ID = 1411
name = "spirit"
postype = left
pos = 150,-115
stateno = 1411
size.xscale = 1.0
size.yscale = 1.0
sprpriority = 3
ownpal = 1
keyctrl = 0

[State 1300, 2]
type = Helper
trigger1 = AnimElemtime(2) = 8
helpertype = Normal
ID = 1412
name = "spirit"
postype = left
pos = 150,-115
stateno = 1412
size.xscale = 1.0
size.yscale = 1.0
sprpriority = 3
ownpal = 1
keyctrl = 0

[State 1300, 2]
type = Helper
trigger1 = AnimElemtime(2) = 8
helpertype = Normal
ID = 1413
name = "spirit"
postype = left
pos = 150,-115
stateno = 1413
size.xscale = 1.0
size.yscale = 1.0
sprpriority = 3
ownpal = 1
keyctrl = 0

[State 1000, 0]
type = AllPalFX
trigger1 = AnimElemtime(2) = 0
trigger2 = AnimElemtime(2) = 3
trigger3 = AnimElemtime(2) = 6
trigger4 = AnimElemtime(2) = 9
trigger5 = AnimElemtime(2) = 12
time = 1
add = 190,190,190
mul = 190,190,190
sinadd = 0,0,0,10
invertall = 0
color = 256

[State exp, *]
type = Explod
trigger1 = AnimElemtime(2) = 0
anim = 1310
ID = 1310
pos = 150,105
postype = left
scale = 0.2,0.2
sprpriority = -1
removetime = 1
ownpal = 1
;bindtime = -1
;pausemovetime = -1

[State exp, *]
type = Explod
trigger1 = AnimElemtime(2) = 1
anim = 1310
ID = 1310
pos = 150,105
postype = left
scale = 0.4,0.4
sprpriority = -1
removetime = 1
ownpal = 1
;bindtime = -1
;pausemovetime = -1

[State exp, *]
type = Explod
trigger1 = AnimElemtime(2) = 2
anim = 1310
ID = 1310
pos = 150,105
postype = left
scale = 0.6,0.6
sprpriority = -1
removetime = 1
ownpal = 1
;bindtime = -1
;pausemovetime = -1

[State exp, *]
type = Explod
trigger1 = AnimElemtime(2) = 3
anim = 1310
ID = 1310
pos = 150,105
postype = left
scale = 0.8,0.8
sprpriority = -1
removetime = 1
ownpal = 1
;bindtime = -1
;pausemovetime = -1

[State exp, *]
type = Explod
trigger1 = AnimElemtime(2) = 4
anim = 1310
ID = 1310
pos = 150,105
postype = left
scale = 1.0,1.0
sprpriority = -1
removetime = 20
ownpal = 1
;bindtime = -1
;pausemovetime = -1

[State exp, *]
type = Explod
trigger1 = AnimElemtime(2) = 25
anim = 1310
ID = 1310
pos = 150,105
postype = left
scale = 0.8,0.8
sprpriority = -1
removetime = 1
ownpal = 1
;bindtime = -1
;pausemovetime = -1

[State exp, *]
type = Explod
trigger1 = AnimElemtime(2) = 26
anim = 1310
ID = 1310
pos = 150,105
postype = left
scale = 0.6,0.6
sprpriority = -1
removetime = 1
ownpal = 1
;bindtime = -1
;pausemovetime = -1

[State exp, *]
type = Explod
trigger1 = AnimElemtime(2) = 27
anim = 1310
ID = 1310
pos = 150,105
postype = left
scale = 0.4,0.4
sprpriority = -1
removetime = 1
ownpal = 1
;bindtime = -1
;pausemovetime = -1

[State exp, *]
type = Explod
trigger1 = AnimElemtime(2) = 28
anim = 1310
ID = 1310
pos = 150,105
postype = left
scale = 0.2,0.2
sprpriority = -1
removetime = 1
ownpal = 1
;bindtime = -1
;pausemovetime = -1

[State 1300, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------
;テトラスピリット(発射１発目)
[Statedef 1410]
type    = A
movetype= A
physics = N
juggle  = 12
anim = 1305
ctrl = 0
sprpriority = 3

[State 3101, 1]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 3101, Seek 1]
type = Velset
trigger1 = time = 0
y = -5.3
x = 1.0

[State 1300, 1]
type = PlaySnd
trigger1 = time = 0
value = 2100, 0

[State 7019, 00000]
type = AfterImage
trigger1 = time = 0
length = 28
timegap = 1
framegap = 2
palcolor = 256
palinvertall = 0
palbright = 30,30,30
palcontrast = 250,250,250
palpostbright = 0,0,0
time = -1
trans = add

[State 1300, 3]
type = ChangeState
trigger1 = time = 25
value = 1415

;---------------------------------------------------------------
;テトラスピリット(発射２発目)
[Statedef 1411]
type    = A
movetype= A
physics = N
juggle  = 12
anim = 1305
ctrl = 0
sprpriority = 3

[State 3101, 1]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 3101, Seek 1]
type = Velset
trigger1 = time = 0
y = -5.3
x = 0.5

[State 7019, 00000]
type = AfterImage
trigger1 = time = 0
length = 28
timegap = 1
framegap = 2
palcolor = 256
palinvertall = 0
palbright = 30,30,30
palcontrast = 250,250,250
palpostbright = 0,0,0
time = -1
trans = add

[State 1300, 3]
type = ChangeState
trigger1 = time = 25
value = 1415

;---------------------------------------------------------------
;テトラスピリット(発射３発目)
[Statedef 1412]
type    = A
movetype= A
physics = N
juggle  = 12
anim = 1305
ctrl = 0
sprpriority = 3

[State 3101, 1]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 3101, Seek 1]
type = Velset
trigger1 = time = 0
y = -5.3
x = -0.5

[State 7019, 00000]
type = AfterImage
trigger1 = time = 0
length = 28
timegap = 1
framegap = 2
palcolor = 256
palinvertall = 0
palbright = 30,30,30
palcontrast = 250,250,250
palpostbright = 0,0,0
time = -1
trans = add

[State 1300, 3]
type = ChangeState
trigger1 = time = 25
value = 1415

;---------------------------------------------------------------
;テトラスピリット(発射４発目)
[Statedef 1413]
type    = A
movetype= A
physics = N
juggle  = 12
anim = 1305
ctrl = 0
sprpriority = 3

[State 3101, 1]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 3101, Seek 1]
type = Velset
trigger1 = time = 0
y = -5.3
x = -1.0

[State 7019, 00000]
type = AfterImage
trigger1 = time = 0
length = 28
timegap = 1
framegap = 2
palcolor = 256
palinvertall = 0
palbright = 30,30,30
palcontrast = 250,250,250
palpostbright = 0,0,0
time = -1
trans = add

[State 1300, 3]
type = ChangeState
trigger1 = time = 25
value = 1415

;---------------------------------------------------------------
;スピリット(誘導)
[Statedef 1415]
type    = A
movetype= A
physics = N
juggle  = 12
anim = 1305
ctrl = 0
sprpriority = 3

[State 3101, 1]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
trigger2 = AnimElem = 2
attr = S, HP
;damage = 24, 2
damage = ceil(ifelse(P2MoveType = H,17,33)),2
animtype = Light
guardflag = MA
hitflag = MAF
pausetime = 0, 2
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = s2300,0
guardsound = s1500,0
ground.type = low
ground.slidetime = 1
ground.hittime  = 3
ground.velocity = -2,0
airguard.velocity = -1.3,-.5
air.type = High
air.velocity = -2.1,-2
air.hittime = 3
getpower = 0,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.time = 13
palfx.sinadd = 140,-30,-30,13
palfx.add = 160,-100,-100
guard.kill = 0

[State 3101, 0]
type = Turn
trigger1 = P2Dist X < 0

[State 3101, Seek 1]
type = VelAdd
trigger1 = P2Dist X < 0
trigger1 = time >= 0
x = -.235

[State 3101, Seek 2]
type = VelAdd
trigger1 = P2Dist X > 0
trigger1 = time >= 0
x = .235

[State 3101, Seek 3]
type = VelAdd
trigger1 = P2Dist Y < 10
trigger1 = time >= 0
y = -.133

[State 3101, Seek 4]
type = VelAdd
trigger1 = P2Dist Y > 140
trigger1 = time >= 0
y = .163

[State 3101, Seek 4]
type = Velset
trigger1 = P2Dist Y < -30
y = -.3

[State 3101, Seek 4]
type = Velset
trigger1 = P2Dist X < -130
y = -.3

[State 3101, Seek 4]
type = Velset
trigger1 = P2Dist X > 130
y = .3

[State 3101, VarSet]
type = VarSet
trigger1 = time = 1
ignorehitpause = 1
fvar(21) = parent,fvar(21)

[State 3101, VarSet]
type = VarSet
trigger1 = time = 1
fvar(22) = ifelse((root,P2dist x=[0,1]),1,ifelse((root,P2dist x=[-1,0]),-1,root,P2dist x))

[State 3101, VarSet]
type = VarSet
trigger1 = time = 1
fvar(23) = ifelse((root,P2dist y=[0,1]),1,ifelse((root,P2dist y=[-1,0]),-1,root,P2dist y))+20

[State 3101, VarSet]
type = VarSet
trigger1 = time = 1
ignorehitpause = 1
var(24) = ceil((atan(fvar(22)/fvar(23))*180)/pi)-(90*ifelse(root,P2dist Y<0,-1,1))

[State 3101, VarSet]
type = VarSet
trigger1 = time = 1
ignorehitpause = 1
var(24) = ifelse(var(24)>60,60,ifelse(var(24)<-60,-60,var(22)))

[State 3101, VarSet]
type = VarSet
trigger1 = time = 1
ignorehitpause = 1
fvar(24) = atan(fvar(22)/fvar(23))-(.5*pi*ifelse(root,P2dist Y <0,-1,1))

[State 3101, VarSet]
type = VarSet
trigger1 = time = 1
ignorehitpause = 1
fvar(24) = ifelse(fvar(24)>(.33*pi),.33*pi,ifelse(fvar(24)<(-.33*pi),-.33*pi,fvar(24)))

[State 3101, 1]
type = angleset
trigger1 = time = 1
value = var(24)

[State 3101, 1]
type = angledraw
trigger1 = time = 1

[State 3101, 1]
type = VelSet
trigger1 = time = 1
x = abs(0.5*cos(fvar(24)))
y = 0.6*sin(fvar(24))

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 1300, 3]
type = ChangeState
trigger1 = movecontact = 10
trigger2 = time = 300
value = 1420

;---------------------------------------------------------------
;スピリット(当たったら退散)
[Statedef 1420]
type    = A
movetype= A
physics = N
juggle  = 12
anim = 1305
ctrl = 0
sprpriority = 3

[State 3101, 1]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 3101, Seek 1]
type = Veladd
trigger1 = time >= 0
y = -0.2

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
trigger2 = AnimElem = 2
attr = S, HP
;damage = 11, 2
damage = ceil(ifelse(P2MoveType = H,7,11)),2
animtype = Light
guardflag = MA
hitflag = MAF
pausetime = 0, 2
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = s2300,0
guardsound = s1500,0
ground.type = low
ground.slidetime = 1
ground.hittime  = 3
ground.velocity = -2,0
airguard.velocity = -1.3,-.5
air.type = High
air.velocity = -2.1,-2
air.hittime = 3
getpower = 0,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.time = 13
palfx.sinadd = 140,-30,-30,13
palfx.add = 160,-100,-100
guard.kill = 0

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 7001, 3]
type = DestroySelf
trigger1 = time = 150

;---------------------------------------------------------------
;ダークメタモルフォーゼ
[Statedef 1500]
type    = S
movetype= I
physics = S
velset = 0,0
anim = 1550
ctrl = 0
sprpriority = 2

[State 7019, 1]
type = PlayerPush
trigger1 = var(30) = 30
trigger1 = 1
value = 0

[State 3000, 3]
type = NotHitBy
trigger1 = var(30) = 30
trigger1 = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
time = 1

[State -2]
type = varadd
trigger1 = var(30) != 30
trigger1 = time = 0
v = 42
value = -330

[State -2]
type = varadd
trigger1 = var(30) = 30
trigger1 = time = 0
v = 42
value = -165

[State 1300, 1]
type = PlaySnd
trigger1 = time = 0
value = 1550, 0

[State 1300, 1]
type = PlaySnd
trigger1 = time = 0
value = 2100, 0

[State 0, 4]
type = afterimagetime
trigger1 = time = 0
time = 0

[State bghyugfu]
type = Helper
trigger1 = !numhelper(1550) && !time
helpertype = Normal
ID = 1550
name = "dark" 
postype = p1
pos = 0,0
stateno = 1550
ownpal = 1
size.xscale = 2.27
size.yscale = 2.13

[State 1000, 0]
type = AllPalFX
trigger1 = AnimElemtime(2) = 0
trigger2 = AnimElemtime(2) = 3
trigger3 = AnimElemtime(2) = 6
trigger4 = AnimElemtime(2) = 9
trigger5 = AnimElemtime(2) = 12
time = 1
add = 190,0,0
mul = 190,0,0
sinadd = 0,0,0,10
invertall = 0
color = 256

[State 1300, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------
;ダークメタモルフォーゼ(制限時間)
[Statedef 1550]
type    = A
movetype= I
physics = N
ctrl = 0
velset = 0,0
anim = 9999
sprpriority = 0

[State ]
type = changeanim
trigger1 = 1
value = parent,anim
elem = parent,animelemno(0)

[State ]
type = posset
trigger1 = 1
x = parent,pos x+1
y = parent,pos y+3

[State ]
type = assertspecial
trigger1 = 1
flag = invisible

[State blerg]
type = AfterImage
trigger1 = !(time%(7))
time = 14
framegap = 1
length = 13
palcolor = 80
trans = add
palbright = 230,0,0
palcontrast = 255,0,0

[State ]
type = turn
trigger1 = (facing = 1 && parent,facing = -1) || (facing = -1 && parent,facing = 1)

[State gethit]
type = nothitby
trigger1 = 1
persistent = 1
value = SCA

[State ]
type = destroyself
trigger1 = var(30) != 30
trigger1 = time = 1500
trigger2 = life <= 370
trigger2 = var(30) = 30
trigger2 = time = 4000

;----------------------------------------------------------------
;ソウルスチール
[Statedef 1800]
type    = S
movetype= A
physics = S
ctrl = 0
velset = 0,0
anim = 1800
sprpriority = 2

[State var]
type = varadd
trigger1 = time = 0
v = 42
value = -1200

[State 0, 4]
type = afterimagetime
trigger1 = time = 0
time = 0

[State 1000, 0]
type = AllPalFX
trigger1 = AnimElemtime(1) = 0
trigger2 = AnimElemtime(1) = 3
trigger3 = AnimElemtime(1) = 6
trigger4 = AnimElemtime(1) = 9
trigger5 = AnimElemtime(1) = 12
time = 1
add = 190,190,190
mul = 190,190,190
sinadd = 0,0,0,10
invertall = 0
color = 256

[state 195,1]
type = varrandom
trigger1 = time = 0
v = 10
range = 0,1

[State snd]
type = PlaySnd
trigger1 = time = 0
value = 1600, var(10)

[State snd]
type = PlaySnd
trigger1 = AnimElem = 10
value = 2100, 0

[State 7300, 0]
type = Explod
trigger1 = AnimElemtime(10) = 0
anim = 1805
ID = 1805
pos = -4,-46
postype = p1
removetime = 1
scale = 2.0,2.0
sprpriority = 2
pausemovetime = -1
ontop = 1
ownpal = 1

[State 7300, 0]
type = Explod
trigger1 = AnimElemtime(10) = 1
anim = 1805
ID = 1805
pos = -4,-46
postype = p1
removetime = 1
scale = 2.1,2.1
sprpriority = 2
pausemovetime = -1
ontop = 1
ownpal = 1

[State 7300, 0]
type = Explod
trigger1 = AnimElemtime(10) = 2
anim = 1805
ID = 1805
pos = -4,-46
postype = p1
removetime = 1
scale = 2.2,2.2
sprpriority = 2
pausemovetime = -1
ontop = 1
ownpal = 1

[State 7300, 0]
type = Explod
trigger1 = AnimElemtime(10) = 3
anim = 1805
ID = 1805
pos = -4,-46
postype = p1
removetime = 1
scale = 2.3,2.3
sprpriority = 2
pausemovetime = -1
ontop = 1
ownpal = 1

[State 7300, 0]
type = Explod
trigger1 = AnimElemtime(10) = 4
anim = 1805
ID = 1805
pos = -4,-46
postype = p1
removetime = 1
scale = 2.4,2.4
sprpriority = 2
pausemovetime = -1
ontop = 1
ownpal = 1

[State 7300, 0]
type = Explod
trigger1 = AnimElemtime(10) = 5
anim = 1805
ID = 1805
pos = -4,-46
postype = p1
removetime = 1
scale = 2.5,2.5
sprpriority = 2
pausemovetime = -1
ontop = 1
ownpal = 1

[State 7300, 0]
type = Explod
trigger1 = AnimElemtime(10) = 6
anim = 1805
ID = 1805
pos = -4,-46
postype = p1
removetime = -2
scale = 2.6,2.6
sprpriority = 2
pausemovetime = -1
ontop = 1
ownpal = 1

[State hel]
type = Helper
trigger1 = AnimElemtime(10) = 0
helpertype = Normal
ID = 7029
name = "soul" 
postype = p2
pos = enemynear,Const(size.mid.pos.x),enemynear,Const(size.mid.pos.y)
stateno = 7032
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State hel]
type = Helper
trigger1 = AnimElemtime(10) = 0
helpertype = Normal
ID = 7029
name = "soul2" 
postype = p2
pos = enemynear,Const(size.mid.pos.x),enemynear,Const(size.mid.pos.y)
stateno = 7033
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State hel]
type = Helper
trigger1 = AnimElemtime(10) = 10
helpertype = Normal
ID = 7129
name = "soul" 
postype = p2
pos = enemynear,Const(size.mid.pos.x),enemynear,Const(size.mid.pos.y)
stateno = 7032
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State hel]
type = Helper
trigger1 = AnimElemtime(10) = 10
helpertype = Normal
ID = 7129
name = "soul2" 
postype = p2
pos = enemynear,Const(size.mid.pos.x),enemynear,Const(size.mid.pos.y)
stateno = 7033
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State hel]
type = Helper
trigger1 = AnimElemtime(10) = 20
helpertype = Normal
ID = 7229
name = "soul" 
postype = p2
pos = enemynear,Const(size.mid.pos.x),enemynear,Const(size.mid.pos.y)
stateno = 7032
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State hel]
type = Helper
trigger1 = AnimElemtime(10) = 20
helpertype = Normal
ID = 7229
name = "soul2" 
postype = p2
pos = enemynear,Const(size.mid.pos.x),enemynear,Const(size.mid.pos.y)
stateno = 7033
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State hel]
type = Helper
trigger1 = AnimElemtime(10) = 30
helpertype = Normal
ID = 7329
name = "soul" 
postype = p2
pos = enemynear,Const(size.mid.pos.x),enemynear,Const(size.mid.pos.y)
stateno = 7032
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State hel]
type = Helper
trigger1 = AnimElemtime(10) = 30
helpertype = Normal
ID = 7329
name = "soul2" 
postype = p2
pos = enemynear,Const(size.mid.pos.x),enemynear,Const(size.mid.pos.y)
stateno = 7033
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State hel]
type = Helper
trigger1 = AnimElemtime(10) = 40
helpertype = Normal
ID = 7429
name = "soul" 
postype = p2
pos = enemynear,Const(size.mid.pos.x),enemynear,Const(size.mid.pos.y)
stateno = 7032
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State hel]
type = Helper
trigger1 = AnimElemtime(10) = 40
helpertype = Normal
ID = 7429
name = "soul2" 
postype = p2
pos = enemynear,Const(size.mid.pos.x),enemynear,Const(size.mid.pos.y)
stateno = 7033
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State hel]
type = Helper
trigger1 = AnimElemtime(10) = 50
helpertype = Normal
ID = 7529
name = "soul" 
postype = p2
pos = enemynear,Const(size.mid.pos.x),enemynear,Const(size.mid.pos.y)
stateno = 7032
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State hel]
type = Helper
trigger1 = AnimElemtime(10) = 50
helpertype = Normal
ID = 7529
name = "soul2" 
postype = p2
pos = enemynear,Const(size.mid.pos.x),enemynear,Const(size.mid.pos.y)
stateno = 7033
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State hel]
type = Helper
trigger1 = AnimElemtime(10) = 60
helpertype = Normal
ID = 7629
name = "soul" 
postype = p2
pos = enemynear,Const(size.mid.pos.x),enemynear,Const(size.mid.pos.y)
stateno = 7032
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State hel]
type = Helper
trigger1 = AnimElemtime(10) = 60
helpertype = Normal
ID = 7629
name = "soul2" 
postype = p2
pos = enemynear,Const(size.mid.pos.x),enemynear,Const(size.mid.pos.y)
stateno = 7033
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State hel]
type = Helper
trigger1 = AnimElemtime(10) = 70
helpertype = Normal
ID = 7729
name = "soul" 
postype = p2
pos = enemynear,Const(size.mid.pos.x),enemynear,Const(size.mid.pos.y)
stateno = 7032
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State hel]
type = Helper
trigger1 = AnimElemtime(10) = 70
helpertype = Normal
ID = 7729
name = "soul2" 
postype = p2
pos = enemynear,Const(size.mid.pos.x),enemynear,Const(size.mid.pos.y)
stateno = 7033
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State end]
type = changestate
trigger1 = Animtime = 0
value = 0
ctrl = 1

;--------------------------------------------
;ソウルスチール(吸収)
[Statedef 7029]
type    = A
movetype= A
physics = N
poweradd= 0
anim = 1810
movehitpersist = 1
;velset = -4,-4
velset = -5,-2
ctrl = 0
sprpriority = 3

;[State end]
;type = veladd
;trigger1 = time >= 15 && time <= 34
;y = -.3

;[State end]
;type = veladd
;trigger1 = time >= 35 && vel x < 3 && rootdist x >= 8
;x = .6
;[State end]
;type = veladd
;trigger1 = time >= 35 && vel x > -3 && rootdist x <= -8
;x = -.6
;[State end]
;type = veladd
;trigger1 = time >= 35 && vel y < 4 && rootdist y >= 50
;y = .6
;[State end]
;type = veladd
;trigger1 = time >= 35 && vel y > -4 && rootdist y <= 30
;y = -.6

[State end]
type = veladd
trigger1 = time >= 5 && time <= 21
y = -.3

[State end]
type = veladd
trigger1 = time >= 22
trigger1 = vel x < 4 && ParentDist x >= 3
x = .6

[State end]
type = velset
trigger1 = time >= 22
trigger1 = ParentDist x = [-2,2]
trigger1 = root,anim != [3000,3004]
trigger1 = root,anim != [1100,1115]
trigger1 = root,anim != [1400,1410]
x = 0

[State end]
type = veladd
trigger1 = time >= 22
trigger1 = vel x > -4 && ParentDist x <= -3
x = -.6

[State end]
type = veladd
trigger1 = time >= 22
trigger1 = vel y < 5 && ParentDist y >= 42
y = .3

[State end]
type = velset
trigger1 = time >= 22
trigger1 = ParentDist y = [38,42]
trigger1 = root,anim != [3000,3004]
trigger1 = root,anim != [1100,1115]
trigger1 = root,anim != [1400,1410]
y = 0

[State end]
type = veladd
trigger1 = time >= 22
trigger1 = vel y > -5 && ParentDist y <= 38
y = -.3

[State -2, yo]
type = DisplayToClipboard
trigger1 = 1
text = "P2bdX:%f  P2bdy:%f  0:%d"
params = P2dist X, P2dist Y, var(0)

[State stfu]
type = null;Hitdef
triggerall = (P2stateno != 5040)
trigger1 = !movecontact
damage = 29,3
getpower = 0,0
pausetime = 0,9
attr = A,SP
guardflag = MA
animtype = heavy
air.animtype = back
priority = 5, hit
sparkno = s1500
guard.sparkno = s1500
sparkxy = 10, 0
hitsound = S2,2
guardsound = S2,1
ground.type = low
air.type = high
air.hittime = 8
ground.slidetime = 13
ground.hittime = 17
ground.velocity = -1, 0
air.velocity = 1, -2
air.fall = 1
fall.recover = 0
yaccel = .5

[State ]
type = assertspecial
trigger1 = 1
flag = noshadow

[State ]
type = varset
trigger1 = movecontact
ignorehitpause = 1
persistent = 0
var(48) = enemynear,gethitvar(damage)

[State 3456]
type = DisplayToClipboard
trigger1 = 1
text = "rdX:%f rdy:%f"
params = rootdist X, rootdist Y

[State end]
type = changestate
triggerall = time >= 22
triggerall = (rootdist x <= 23 && rootdist x >= -23) && (rootdist y <= 90 && rootdist y >= 0)
trigger1 = root,anim != [3000,3004]
trigger1 = root,anim != [1100,1115]
trigger1 = root,anim != [1400,1410]
value = 303

[State end]
type = changestate
trigger1 = parent,alive != 1
trigger2 = lose
trigger3 = time = 300
value = 1805

;--------------------------------------------
;ソウルスチール(死んだら上へ飛んでいく)
[Statedef 1805]
type    = A
movetype= A
physics = N
anim = 1810
ctrl = 0
sprpriority = 3

[State 3101, 1]
type = assertspecial
trigger1 = 1
flag = noshadow

[State end]
type = veladd
trigger1 = time >= 0
y = -0.27

[State 7001, 3]
type = DestroySelf
trigger1 = time = 150

;--------------------------------------------
;ソウルスチール(攻撃判定)
[Statedef 7032]
type    = A
movetype= A
physics = N
poweradd= 0
anim = 1820
velset = 0,0
ctrl = 0
sprpriority = 3

[State 3101, 1]
type = assertspecial
trigger1 = 1
flag = noshadow

[State ]
type = posset
trigger1 = 1
x = floor(enemynear,pos x)
y = floor(enemynear,pos y + enemynear,Const(size.mid.pos.y))

[State -2, yo]
type = DisplayToClipboard
trigger1 = 1
text = "P2bdX:%f  P2bdy:%f  0:%d"
params = P2dist X, P2dist Y, var(0)

[State stfu]
type = Hitdef
triggerall = (P2stateno != 5040)
trigger1 = !movecontact
damage = 29,3
getpower = 0,0
pausetime = 0,9
attr = A,SP
guardflag = MA
animtype = heavy
air.animtype = back
priority = 5, hit
sparkno = s1500
guard.sparkno = s1500
sparkxy = 10, 0
hitsound = S2300,0
guardsound = S1500,0
ground.type = low
air.type = high
air.hittime = 5
ground.slidetime = 13
ground.hittime = 5
ground.velocity = -1, 0
air.velocity = 1, -2
air.fall = 1
fall.recover = 0
yaccel = .5
guard.kill = 0

[State end]
type = destroyself
trigger1 = time = 10

[State 3456]
type = DisplayToClipboard
trigger1 = 1
text = "rdX:%f rdy:%f"
params = rootdist X, rootdist Y

[State end]
type = changestate
trigger1 = movecontact
value = 7029
;--------------------------------------------
;ソウルスチール(攻撃判定２)
[Statedef 7033]
type    = A
movetype= A
physics = N
poweradd= 0
anim = 1820
velset = 0,0
ctrl = 0
sprpriority = 3

[State 3101, 1]
type = assertspecial
trigger1 = 1
flag = noshadow

[State ]
type = posset
trigger1 = 1
x = floor(enemynear,pos x)
y = floor(enemynear,pos y + enemynear,Const(size.mid.pos.y))

[State -2, yo]
type = DisplayToClipboard
trigger1 = 1
text = "P2bdX:%f  P2bdy:%f  0:%d"
params = P2dist X, P2dist Y, var(0)

[State stfu]
type = Hitdef
triggerall = (P2stateno != 5040)
trigger1 = !movecontact
damage = 0,0
getpower = 0,0
pausetime = 0,10
attr = A,SP
guardflag = MA
animtype = heavy
air.animtype = back
priority = 5, hit
sparkno = s1500
guard.sparkno = s1500
sparkxy = 10, 0
ground.type = low
air.type = high
air.hittime = 5
ground.slidetime = 13
ground.hittime = 5
ground.velocity = -1, 0
air.velocity = 1, -2
air.fall = 1
fall.recover = 0
yaccel = .5
numhits = 0
guard.kill = 0

[State end]
type = destroyself
trigger1 = time = 10 || movecontact

[State 3456]
type = DisplayToClipboard
trigger1 = 1
text = "rdX:%f rdy:%f"
params = rootdist X, rootdist Y


;---------------------------------------------------------------------------
;コウモリへ変身(地上発動)
[Statedef 3100]
type = S
movetype = I
physics = S
anim = 3100
ctrl = 0
sprpriority = 2

[State 200, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 251

[State 200, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 252

[State 200, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 253

[State mp]
type = varadd
triggerall = alive = 1
trigger1 = (GameTime%5) = 0
ignorehitpause = 1
v = 42
value = -10

[State 0, 4]
type = afterimagetime
trigger1 = time = 0
time = 0

[State snd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3000,0

[State pal]
type = PalFX
trigger1 = AnimElemtime(3) = 0
palcolor = 256
add = 30,30,30
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = AnimElemtime(3) = 1
palcolor = 256
add = 60,60,60
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = AnimElemtime(3) = 2
palcolor = 256
add = 90,90,90
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = AnimElemtime(3) = 3
palcolor = 256
add = 120,120,120
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = AnimElemtime(3) = 4
palcolor = 256
add = 150,150,150
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = AnimElemtime(3) = 5
palcolor = 256
add = 180,180,180
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = AnimElemtime(3) = 6
palcolor = 256
add = 210,210,210
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = AnimElemtime(3) = 7
palcolor = 256
add = 240,240,240
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = AnimElemtime(3) = 8
palcolor = 256
add = 255,255,255
palinvertall = 1
time = 30

[State 1110, back]
type = Velset
trigger1 = pos y >= 0 && vel y > 0
y = 0

[State 1110, back]
type = Velset
trigger1 = ScreenPos Y != [0,239]
trigger1 = p2bodydist Y > 200
y = 1

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 3110

;---------------------------------------------------------------------------
;コウモリへ変身(空中発動)
[Statedef 3130]
type = A
movetype = I
physics = N
anim = 3100
ctrl = 0
velset = 0,0
sprpriority = 2

[State 200, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 251

[State 200, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 252

[State 200, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 253

[State mp]
type = varadd
triggerall = alive = 1
trigger1 = (GameTime%5) = 0
ignorehitpause = 1
v = 42
value = -10

[State 0, 4]
type = afterimagetime
trigger1 = time = 0
time = 0

[State snd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3000,0

[State pal]
type = PalFX
trigger1 = AnimElemtime(3) = 0
palcolor = 256
add = 30,30,30
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = AnimElemtime(3) = 1
palcolor = 256
add = 60,60,60
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = AnimElemtime(3) = 2
palcolor = 256
add = 90,90,90
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = AnimElemtime(3) = 3
palcolor = 256
add = 120,120,120
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = AnimElemtime(3) = 4
palcolor = 256
add = 150,150,150
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = AnimElemtime(3) = 5
palcolor = 256
add = 180,180,180
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = AnimElemtime(3) = 6
palcolor = 256
add = 210,210,210
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = AnimElemtime(3) = 7
palcolor = 256
add = 240,240,240
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = AnimElemtime(3) = 8
palcolor = 256
add = 255,255,255
palinvertall = 1
time = 30

[State 1110, back]
type = Velset
trigger1 = pos y >= 0 && vel y > 0
y = 0

[State 1110, back]
type = Velset
trigger1 = ScreenPos Y != [0,239]
trigger1 = p2bodydist Y > 200
y = 1

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 3110

;---------------------------------------------------------------------------
;コウモリ(変身中)
[Statedef 3110]
type = A
movetype = I
physics = N
anim = 3101
ctrl = 0
sprpriority = 2

[State var]
type = varset
trigger1 = time = 0
v = 49
value = 1

[State mp]
type = varadd
triggerall = alive = 1
trigger1 = (GameTime%5) = 0
ignorehitpause = 1
v = 42
value = -10

[State pal]
type = PalFX
trigger1 = time = 0
palcolor = 256
add = 255,255,255
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 1
palcolor = 256
add = 220,220,220
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 2
palcolor = 256
add = 190,190,190
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 3
palcolor = 256
add = 160,160,160
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 4
palcolor = 256
add = 130,130,130
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 5
palcolor = 256
add = 100,100,100
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 6
palcolor = 256
add = 70,70,70
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 7
palcolor = 256
add = 40,40,40
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 8
palcolor = 256
add = 10,10,10
palinvertall = 1
time = 2

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 3115

;---------------------------------------------------------------------------
;コウモリ(変身完了)
[Statedef 3115]
type = A
movetype = I
physics = S
anim = 3110
ctrl = 0
sprpriority = 2

[State mp]
type = varadd
triggerall = alive = 1
trigger1 = (GameTime%5) = 0
ignorehitpause = 1
v = 42
value = -10

[State snd]
type = PlaySnd
trigger1 = time = 0
value = 3100,0

[State 200, 1]
type = PlaySnd
trigger1 = (GameTime%170) = 0
value = 3100, 0
channel = 1

[State 1110, Fwd]
type = Velset
trigger1 = command = "holdfwd"
x = 1.6

[State 1110, back]
type = Velset
trigger1 = command = "holdback"
x = -1.6

[State 1110, Fwd]
type = Velset
trigger1 = command = "holdup"
y = -1.2

[State 1110, back]
type = Velset
trigger1 = command = "holddown"
y = 1.9

[State 1110, back]
type = Velset
trigger1 = pos y >= 0 && vel y > 0
trigger2 = command != "holdup" && command != "holddown"
y = 0

[State 1110, back]
type = Velset
trigger1 = ScreenPos Y != [0,239]
trigger1 = p2bodydist Y > 200
y = 3

[State 7004]
type = Angleset
trigger1 = command = "holdfwd"
value = -18

[State 7004]
type = Angleset
trigger1 = command = "holdup"
value = 18

[State 7004]
type = Angleset
trigger1 = command = "holddown"
value = -30

[State 7004]
type = Angleset
trigger1 = command != "holdup" && command != "holddown" && command != "holdfwd" && command != "holdback"
value = 0

[State 7004]
type = AngleDraw
trigger1 = 1

[State turn]
type = turn
triggerall = command != "hold_a"
trigger1 = command = "holdback"

[State 7004]
type = Angleset
trigger1 = command = "hold_a"
value = 0

[State 1110, back]
type = Velset
trigger1 = command = "hold_a"
y = 0
x = 0

[State 3200, hel]
type = Helper
triggerall = var(42) >= 45
trigger1 = p2statetype != L
trigger1 = command = "y" && numhelper(3350) = 0
helpertype = Normal
ID = 3350
name = "eco"
postype = p1
pos = 20,-45
stateno = 3350
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 3200, hel]
type = Helper
triggerall = var(42) >= 1071 && NumHelper(7000) = 1
trigger1 = var(30) = 30 && numhelper(3350) = 0
trigger1 = var(57) = 0
helpertype = Normal
ID = 3350
name = "eco"
postype = p1
pos = 20,-45
stateno = 3350
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 200, 7]
type = ChangeState
triggerall = var(30) = 0
trigger1 = command = "b"
trigger2 = var(42) <= 0
trigger3 = win
trigger4 = Lose
value = 3120

[State 200, 7]
type = ChangeState
triggerall = var(42) >= 80 && numhelper(3350) = 0
trigger1 = command = "x"
value = 3300

[State 200, 7]
type = ChangeState
triggerall = var(42) >= 230
trigger1 = command = "wingsmash" && numhelper(3350) = 0
value = 3200

[State 200, 7]
type = ChangeState
triggerall = var(42) >= 740
triggerall = NumHelper(7000) = 1
trigger1 = command = "batflock" && numhelper(3350) = 0
trigger1 = var(57) = 0
value = 3400

[State 200, 7]
type = ChangeState
trigger1 = var(30) = 30
trigger1 = var(42) <= 225
value = 3120

;---------------------------------------------------------------------------
;コウモリ変身解除
[Statedef 3120]
type = S
movetype = I
physics = S
anim = 3111
ctrl = 0
sprpriority = 2

[State var]
type = varset
trigger1 = time = 0
v = 49
value = 0

[State pal]
type = PalFX
trigger1 = time = 0
palcolor = 256
add = 30,30,30
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 1
palcolor = 256
add = 60,60,60
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 2
palcolor = 256
add = 90,90,90
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 3
palcolor = 256
add = 120,120,120
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 4
palcolor = 256
add = 150,150,150
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 5
palcolor = 256
add = 180,180,180
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 6
palcolor = 256
add = 210,210,210
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 7
palcolor = 256
add = 240,240,240
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 8
palcolor = 256
add = 255,255,255
palinvertall = 1
time = 30

[State 1110, back]
type = Velset
trigger1 = pos y >= 0 && vel y > 0
y = 0

[State 1110, back]
type = Velset
trigger1 = ScreenPos Y != [0,239]
trigger1 = p2bodydist Y > 200
y = 1

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 3125

;---------------------------------------------------------------------------
;コウモリ(変身解除中)
[Statedef 3125]
type = A
movetype = I
physics = N
anim = 3112
ctrl = 0
sprpriority = 2

[State 7004]
type = AngleDraw
trigger1 = 1

[State 7004]
type = Angleset
trigger1 = time = 0
value = 0

[State pal]
type = PalFX
trigger1 = time = 0
palcolor = 256
add = 255,255,255
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 1
palcolor = 256
add = 220,220,220
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 2
palcolor = 256
add = 190,190,190
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 3
palcolor = 256
add = 160,160,160
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 4
palcolor = 256
add = 130,130,130
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 5
palcolor = 256
add = 100,100,100
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 6
palcolor = 256
add = 70,70,70
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 7
palcolor = 256
add = 40,40,40
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 8
palcolor = 256
add = 10,10,10
palinvertall = 1
time = 2

[State 1110, back]
type = Velset
trigger1 = pos y >= 0 && vel y > 0
y = 0

[State 1110, back]
type = Velset
trigger1 = ScreenPos Y != [0,239]
trigger1 = p2bodydist Y > 200
y = 1

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 3126

;---------------------------------------------------------------------------
;コウモリ(完全解除空中)
[Statedef 3126]
type = A
movetype = I
physics = A
anim = 3113
velset = 0,-2
ctrl = 0
sprpriority = 2

[State 7019, 00000]
type = AfterImage
trigger1 = time = 0
time = 30
trans = add
length   = 9
timegap  = 3
framegap = 2
PalBright = 40 , 40 , 60
PalContrast = 90 , 90 , 90
PalAdd = 0 , 0 , 0
PalMul = 1.1 , 1.1 , 1.3
IgnoreHitPause = 1
Persistent = 1

[State 1110, 1]
type = Velset
trigger1 = time = 0
y = -2

;---------------------------------------------------------------------------
;ウィングスマッシュ(コウモリ中)
[Statedef 3200]
type = A
movetype = A
physics = N
anim = 3200
ctrl = 0
sprpriority = 2

[State -2]
type = varadd
trigger1 = time = 0
v = 42
value = -230

[State 3200, 1]
type = PlayerPush
trigger1 = 1
value = 0

[state 1,AIturn]
type = turn
trigger1 = roundstate = 2
trigger1 = time = 0
trigger1 = var(30) = 30
trigger1 = P2Dist x <= 0

[State 3200]
type = Velset
trigger1 = time = 0
x = 10

[State 3200]
type = AngleDraw
trigger1 = 1

[State 3200]
type = Angleset
trigger1 = time = 0
value = 0

[State 3200]
type = Angleadd
trigger1 = time <= 18
value = -1.7

[State 3200, hel]
type = Helper
trigger1 = time = 0
helpertype = Normal
ID = 3220
name = "wing"
postype = p1
pos = 0,0
stateno = 3220
size.xscale = 2.0
size.yscale = 2.0
ownpal = 1

[State pal]
type = PalFX
trigger1 = !(time%9)
palcolor = 256
add = 60,60,60
sinadd = 30,30,30,22
palinvertall = 1
time = 15

[State 3200, 1]
type = HitDef
trigger1 = AnimElem = 1
attr = A, HA
damage = ceil(ifelse(enemy,stateno = 8000,92,163)),12
animtype = back
air.animtype = back
guardflag = MA
hitflag = MAF
;fall.animtype = back
fall = 1
air.fall = 1
priority = 99, Hit
pausetime = 0,1
guard.pausetime = 0,18
sparkno = S1500
guard.sparkno = S1500
sparkxy = -15,-40
hitsound = -1,0
guardsound = s1500,0
ground.type = trip
ground.slidetime = 1
ground.hittime  = 50
ground.velocity = -18,-9.4
airguard.velocity = -7,-2
guard.velocity = -11
airguard.velocity = -6,-7
air.type = trip
air.velocity = -18,-7.3
air.hittime = 50
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.time = 8
palfx.sinadd = 120,120,-20,4
palfx.add = 150,-100,-100
getpower = 5,50
sprpriority = 1
fall.recovertime = 80-var(12)*2
p2facing = 1
;p2stateno = 6000
yaccel = .45
fall.yvelocity = -4
guard.kill = 1
ID = 3200

[state 3200, targetstate]
type = targetstate
trigger1 = movehit = 1
;persistent = 0
;ignorehitpause = 1
value = 6000
ID = 3200

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 1110, Fwd]
type = Velset
trigger1 = command = "holdup"
y = -1.4

[State 1110, back]
type = Velset
trigger1 = command = "holddown"
y = 1.4

[State 1110, back]
type = Velset
trigger1 = pos y >= 0 && vel y > 0
trigger2 = command != "holdup" && command != "holddown"
y = 0

[State 7019, 00000]
type = AfterImage
trigger1 = time = 0
time = -1
trans = add
length   = 12
timegap  = 2
framegap = 1
PalBright = 30 , 80 , 90
PalContrast = 90 , 90 , 90
PalAdd = 0 , 0 , 0
PalMul = 0.9 , 1.4 , 1.6
IgnoreHitPause = 1
Persistent = 1

[State 200, 7]
type = ChangeState
triggerall = var(30) = 0
trigger1 = time = 55
trigger2 = command = "b"
trigger3 = win
trigger4 = lose
value = 3210

[State 200, 7]
type = ChangeState
triggerall = var(30) = 30
trigger1 = time = 55
trigger2 = win
trigger3 = lose
value = 3210

[State 200, 7]
type = ChangeState
trigger1 = FrontEdgeBodyDist <= 6
value = 3211

;---------------------------------------------------------------------------
;ウィングスマッシュ(終わり)
[Statedef 3210]
type = A
movetype = I
physics = N
anim = 3210
ctrl = 0
sprpriority = 2

[State var]
type = varset
trigger1 = time = 0
v = 49
value = 0

[State 0, 4]
type = afterimagetime
trigger1 = time = 0
time = 0

[State 7004]
type = AngleDraw
trigger1 = 1

[State 7004]
type = Angleset
trigger1 = time = 0
value = -31

[State var]
type = varset
trigger1 = time = 0
v = 49
value = 0

[State var]
type = veladd
trigger1 = time <= 12
x = -0.5

[State 7019]
type = statetypeset
trigger1 = time = 20
physics = S

[State pal]
type = PalFX
trigger1 = time = 0
palcolor = 256
add = 30,30,30
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 1
palcolor = 256
add = 60,60,60
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 2
palcolor = 256
add = 90,90,90
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 3
palcolor = 256
add = 120,120,120
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 4
palcolor = 256
add = 150,150,150
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 5
palcolor = 256
add = 180,180,180
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 6
palcolor = 256
add = 210,210,210
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 7
palcolor = 256
add = 240,240,240
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 8
palcolor = 256
add = 255,255,255
palinvertall = 1
time = 30

[State 1110, back]
type = Velset
trigger1 = pos y >= 0 && vel y > 0
y = 0

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 3125

;---------------------------------------------------------------------------
;ウィングスマッシュ(壁にぶつかる)
[Statedef 3211]
type = A
movetype = I
physics = N
anim = 3210
ctrl = 0
velset = 0,0
sprpriority = 2

[State var]
type = varset
trigger1 = time = 0
v = 49
value = 0

[State life]
type = lifeadd
triggerall = alive = 1
trigger1 = time = 1
value = -30

[State snd]
type = PlaySnd
trigger1 = time = 0
value = 41,0

[State snd]
type = PlaySnd
trigger1 = time = 4
value = 28,0

[State sha]
type = envshake
trigger1 = time = 0
time = 8
freq = 47
ampl = 10
phase = 3

[State 0, 4]
type = afterimagetime
trigger1 = time = 0
time = 0

[State 7004]
type = AngleDraw
trigger1 = 1

[State 7004]
type = Angleset
trigger1 = time = 0
value = -31

[State var]
type = varset
trigger1 = time = 0
v = 49
value = 0

[State 7019]
type = statetypeset
trigger1 = time = 0
physics = S

[State pal]
type = PalFX
trigger1 = time = 0
palcolor = 256
add = 30,30,30
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 1
palcolor = 256
add = 60,60,60
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 2
palcolor = 256
add = 90,90,90
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 3
palcolor = 256
add = 120,120,120
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 4
palcolor = 256
add = 150,150,150
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 5
palcolor = 256
add = 180,180,180
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 6
palcolor = 256
add = 210,210,210
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 7
palcolor = 256
add = 240,240,240
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 8
palcolor = 256
add = 255,255,255
palinvertall = 1
time = 30

[State 1110, back]
type = Velset
trigger1 = pos y >= 0 && vel y > 0
y = 0

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 3125

;---------------------------------------------------------------------------
;ウィングスマッシュ(周りのヘルパー)
[Statedef 3220]
type = S
movetype = I
physics = S
anim = 3201
ctrl = 0
sprpriority = 4

[State 1000, 3]
type = BindToParent
trigger1 = 1
time = -1
pos = -2, -46

[State 7004]
type = AngleDraw
trigger1 = 1

[State 3200]
type = Angleset
trigger1 = time = 0
value = 0

[State 3200]
type = Angleadd
trigger1 = time <= 18
value = -1.7

[State -2]
type = palfx
trigger1 = !(time%5)
time = 2
add = 210,210,210

[State end]
type = destroyself
triggerall = var(30) = 0
trigger1 = time = 55
trigger2 = FrontEdgeBodyDist <= 6
trigger3 = parent,movetype = H
trigger4 = parent,anim != 3200
;trigger5 = parent,command = "b"

[State end]
type = destroyself
triggerall = var(30) = 30
trigger1 = time = 55
trigger2 = FrontEdgeBodyDist <= 6
trigger3 = parent,movetype = H
trigger4 = parent,anim != 3200

;---------------------------------------------------------------------------
;ウィングファイア(コウモリ中)
[Statedef 3300]
type = A
movetype = I
physics = N
anim = 3300
velset = 0,0
ctrl = 0
sprpriority = 2

[State mp]
type = varadd
triggerall = alive = 1
trigger1 = (GameTime%5) = 0
ignorehitpause = 1
v = 42
value = -3

[State mp]
type = varadd
trigger1 = time = 0
v = 42
value = -80

[State 7004]
type = AngleDraw
trigger1 = 1

[State 7004]
type = Angleset
trigger1 = time = 0
value = 0

[State 3200, 1]
type = PlayerPush
trigger1 = 1
value = 0

[State 3200]
type = Veladd
trigger1 = time = [12,18]
x = -0.6

[State 3200]
type = Velset
trigger1 = time = 21
x = 0

[State 3200]
type = AngleDraw
trigger1 = 1

[State 3200]
type = Angleadd
trigger1 = time <= 10
value = -2.5

[State 3200]
type = Angleadd
trigger1 = time = [11,18]
value = 3.50

[State 3200]
type = Angleset
trigger1 = time = 19
value = 0

[State pal]
type = PalFX
trigger1 = time = 0
palcolor = 256
add = 20,10,0
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 2
palcolor = 256
add = 50,20,0
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 4
palcolor = 256
add = 80,50,0
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 6
palcolor = 256
add = 110,80,0
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 8
palcolor = 256
add = 150,110,0
sinadd = 70,40,0,15
palinvertall = 1
time = 60

[State 3200, hel]
type = Helper
trigger1 = time = 12
helpertype = Normal
ID = 3310
name = "wingfire"
postype = p1
pos = 0,-44
stateno = 3310
size.xscale = 2.5
size.yscale = 1.5
ownpal = 1

[State 1110, back]
type = Velset
trigger1 = pos y >= 0 && vel y > 0
y = 0

[State exp, *]
type = Explod
trigger1 = time = 12
anim = 3310
ID = 3310
pos = 16,-50
postype = p1
scale = 0,0
sprpriority = 2
ownpal = 1
Persistent = 6
removetime = -2
pausemovetime = -1
ontop = 1

[State var, *]
type = varset
trigger1 = time = 0
fvar(17) = 0

[State var, *]
type = varadd
trigger1 = time = [12,27]
fvar(17) = 0.0940

[State var, *]
type = varset
trigger1 = time = 0
fvar(18) = 0

[State var, *]
type = varadd
trigger1 = time = [12,27]
fvar(18) = 0.0940

[State exp, *]
type = modifyexplod
trigger1 = 1
ID = 3310
scale = 0.3+fvar(17),0.3+fvar(18)

[State 200, 7]
type = ChangeState
trigger1 = time = 90
value = 3115

;---------------------------------------------------------------
;ウィングファイア（発射）
[Statedef 3310]
type    = A
movetype= A
physics = N
juggle  = 6
anim = 1051
ctrl = 0
sprpriority = 2

[State snd]
type = PlaySnd
trigger1 = time = 0
value = 3300,0

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SP
damage = 57, 6
animtype = back
guardflag = MA
hitflag = MAFP
fall = 1
air.fall = 1
priority = 3
pausetime = 0, 11
sparkno = S1080
guard.sparkno = S1080
sparkxy = 0,0
hitsound = s1910,1;s2300,0
guardsound = s1500,0
ground.type = low
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -2,-4.3
airguard.velocity = -1.5,-1
guard.slidetime = 7
guard.hittime = 7
air.type = High
air.velocity = -2,-3.9
air.hittime = 9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 8,0
palfx.time = 12
palfx.sinadd = 140,50,-40,7
palfx.add = 50,-40,-130
getpower = 50,50
guard.kill = 0
fall.recovertime = 8
p2facing = 1
yaccel = .45
fall.yvelocity = -4

[State 7004]
type = Velset
trigger1 = time = 0
x = 5.2

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 1100, 1]
type = Helper
trigger1 = MoveContact = 1
helpertype = Normal
ID = 3320
name = "firekieru" 
postype = p2
pos = 0,0
stateno = 3320
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 7001, 3]
type = DestroySelf
trigger1 = MoveContact = 1
trigger2 = FrontEdgeBodyDist <= -35

;---------------------------------------------------------------------------
;ファイア当たると消滅
[Statedef 3320]
type = S
movetype = I
physics = S
anim = 1053
velset = 0,0
ctrl = 0

[State 200]
type = Explod
trigger1 = time = 1
trigger2 = time = 3
trigger3 = time = 5
trigger4 = time = 7
trigger5 = time = 9
trigger6 = time = 11
anim = 1052
id = 1052
postype = p2
scale = 1.5,1.5
accel = 0,-.17
random = 60,80
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 7001, 3]
type = DestroySelf
trigger1 = time = 12

;---------------------------------------------------------------------------
;クレイジーエコー(放射)
[Statedef 3350]
type = A
movetype = A
physics = N
anim = 3355
ctrl = 0

[State 1000, 3]
type = BindToParent
trigger1 = 1
time = -1
pos = 0, -45

[State snd]
type = PlaySnd
trigger1 = time = 0
value = 3350,0

[State mp]
type = varadd
triggerall = alive = 1
trigger1 = (GameTime%5) = 0
ignorehitpause = 1
v = 42
value = -2

[State mp]
type = varadd
trigger1 = time = 0
v = 42
value = -45

[State exp, *]
type = Explod
trigger1 = time = 0
anim = 3350
ID = 3350
pos = 25,-6
postype = p1
scale = 0,0
sprpriority = 2
ownpal = 1
Persistent = 6
bindtime = -1
removetime = -2
ontop = 1

[State var, *]
type = varset
trigger1 = time = 0
fvar(17) = 0

[State var, *]
type = varadd
trigger1 = time = [0,38]
fvar(17) = 0.0322

[State var, *]
type = varset
trigger1 = time = 0
fvar(18) = 0

[State var, *]
type = varadd
trigger1 = time = [0,25]
fvar(18) = -0.0560

[State exp, *]
type = modifyexplod
trigger1 = 1
ID = 3350
scale = 0.1+fvar(17),0.1+fvar(18)

[State 3200, 1]
type = HitDef
trigger1 = AnimElem = 1
trigger1 = enemy,stateno != 8000
attr = A, NP
damage = 10, 0
animtype = Light
air.animtype = back
hitflag = MAF
;guardflag = MA
fall = 1
air.fall = 1
priority = 3, Hit
pausetime = 0,27
guard.pausetime = 0,13
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = S2300,0
guardsound = s1500,0
ground.type = High
ground.slidetime = 8
ground.hittime  = 8
guard.slidetime = 6
guard.hittime = 6
ground.velocity = -3,0
airguard.velocity = -3,0     
guard.velocity = -3
airguard.velocity = -3,0
air.type = High
air.velocity = -3,-2
air.hittime = 8
palfx.time = 8
palfx.sinadd = 120,120,-20,4
palfx.add = 150,-100,-100
getpower = 0,0
sprpriority = 1
fall.recover = 0
p2facing = 1
p2stateno = 8000
yaccel = .45
fall.yvelocity = -4

[State 3200, 1]
type = HitDef
trigger1 = AnimElem = 1
trigger1 = enemy,stateno = 8000
attr = A, NP
damage = 10, 0
animtype = Light
air.animtype = back
hitflag = MAF
;guardflag = MA
fall = 1
air.fall = 1
priority = 3, Hit
pausetime = 0,15
guard.pausetime = 0,8
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = S2300,0
guardsound = s1500,0
ground.type = High
ground.slidetime = 8
ground.hittime  = 8
guard.slidetime = 6
guard.hittime = 6
ground.velocity = -4,-2.5
airguard.velocity = -4,-2.5    
guard.velocity = -3
airguard.velocity = -4,2.5
air.type = High
air.velocity = -4,-2.5
air.hittime = 8
palfx.time = 8
palfx.sinadd = 120,120,-20,4
palfx.add = 150,-100,-100
getpower = 0,0
sprpriority = 1
fall.recover = 0

[State 3200, 1]
type = HitDef
trigger1 = AnimElem = 1
trigger1 = enemy,statetype = A
attr = A, NP
damage = 10, 0
animtype = Light
air.animtype = back
hitflag = MAF
;guardflag = MA
fall = 1
air.fall = 1
priority = 3, Hit
pausetime = 0,24
guard.pausetime = 0,11
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = S2300,0
guardsound = s1500,0
ground.type = High
ground.slidetime = 8
ground.hittime  = 8
guard.slidetime = 6
guard.hittime = 6
ground.velocity = -4,-2.5
airguard.velocity = -4,-2.5    
guard.velocity = -3
airguard.velocity = -4,2.5
air.type = High
air.velocity = -4,-2.5
air.hittime = 8
palfx.time = 8
palfx.sinadd = 120,120,-20,4
palfx.add = 150,-100,-100
getpower = 0,0
sprpriority = 1
fall.recover = 0

[State 3350, 3]
type = DestroySelf
trigger1 = time = 70
trigger2 = root,movetype = H

;---------------------------------------------------------------------------
;よろけ
[Statedef 8000]
type    = S
movetype= H
physics = S
ctrl = 0
anim = 5300
sprpriority = 0
poweradd = 0
velset = 0,0

[State 1000, Snd1]
type = PlaySnd
trigger1 = time = 1
value = 11,2
channel = 0

[state 0,0]
type = posset
trigger1 = time = 0
y = 0

[state 0,0]
type = selfstate
trigger1 = life = 0
value = 5050
ctrl = 0

[state 0,0]
type = selfstate
trigger1 = time = 100
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;使い魔召還(インテリジェンスソード)
[Statedef 6500]
type = S
movetype = I
physics = S
anim = 6500
velset = 0,0
ctrl = 0

[State 1300, 1]
type = PlaySnd
trigger1 = time = 0
value = 1100, 0

[State var]
type = varset
trigger1 = time = 0
v = 51
value = 1

[State var]
type = varset
trigger1 = time = 0
v = 52
value = 1

[State 3200, hel]
type = Helper
trigger1 = time = 0 && NumHelper(6600) = 0
helpertype = Normal
ID = 6600
name = "sword"
postype = left
pos = 100,-300
stateno = 6600
size.xscale = 0.8
size.yscale = 0.8
ownpal = 1

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;使い魔召還(コウモリ)
[Statedef 6510]
type = S
movetype = I
physics = S
anim = 6500
velset = 0,0
ctrl = 0

[State 1300, 1]
type = PlaySnd
trigger1 = time = 0
value = 1100, 0

[State var]
type = varset
trigger1 = time = 0
v = 53
value = 1

[State 3200, hel]
type = Helper
trigger1 = time = 0 && NumHelper(7000) = 0
helpertype = Normal
ID = 7000
name = "bat"
postype = left
pos = 100,-300
stateno = 7000
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;マナプリズム(ポーズ)
[Statedef 6800]
type = S
movetype = I
physics = S
anim = 6800
velset = 0,0
ctrl = 0

[State 0, 4]
type = afterimagetime
trigger1 = time = 0
time = 0

[State var, *]
type = varset
trigger1 = time = 0
v = 54
value = 1

[State 1300, 1]
type = PlaySnd
trigger1 = time = 0
value = 6800, 0

[State 3200, hel]
type = Helper
trigger1 = time = 0
helpertype = Normal
ID = 6810
name = "mana"
postype = p1
pos = 0,0
stateno = 6810
size.xscale = 1.0
size.yscale = 1.0
ownpal = 1

[State bghyugfu]
type = Helper
trigger1 = time = 47
helpertype = Normal
ID = 6850
name = "manaeffect"
postype = p1
pos = 0,0
stateno = 6850
ownpal = 1
size.xscale = 2.27
size.yscale = 2.13

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;マナプリズム(回復エフェクト)
[Statedef 6810]
type = S
movetype = I
physics = S
anim = 9999
velset = 0,0
ctrl = 0

[State 1000, 3]
type = BindToParent
trigger1 = 1
time = -1
pos = -5,-43

[State 1300, 1]
type = PlaySnd
trigger1 = time = 135
value = 6810, 0

[State exp, *]
type = Explod
trigger1 = time = 0
anim = 6810
ID = 6810
pos = 0,0
postype = p1
scale = 0,0
sprpriority = 6
ownpal = 1
bindtime = -1
ontop = 1

[State var, *]
type = varset
trigger1 = time = 0
fvar(32) = 0

[State var, *]
type = varadd
trigger1 = time = [1,70]
fvar(32) = -0.0109

[State var, *]
type = varadd
trigger1 = time = [71,200]
fvar(32) = -0.0045

[State var, *]
type = varset
trigger1 = time = 0
fvar(33) = 0

[State var, *]
type = varadd
trigger1 = time = [1,70]
fvar(33) = -0.0099

[State var, *]
type = varadd
trigger1 = time = [71,200]
fvar(33) = -0.0035

[State exp, *]
type = modifyexplod
trigger1 = 1
ID = 6810
scale = 1.2+fvar(32),1.2+fvar(33)

[State exp, *]
type = Explod
trigger1 = time = 27
anim = 6815
ID = 6815
pos = 0,0
postype = p1
scale = 0,0
sprpriority = 6
ownpal = 1
bindtime = -1
ontop = 1

[State var, *]
type = varset
trigger1 = time = 0
fvar(17) = 0

[State var, *]
type = varadd
trigger1 = time = [27,76]
fvar(17) = -0.0119

[State var, *]
type = varadd
trigger1 = time = [77,200]
fvar(17) = -0.0055

[State var, *]
type = varset
trigger1 = time = 0
fvar(18) = 0

[State var, *]
type = varadd
trigger1 = time = [27,76]
fvar(18) = -0.0110

[State var, *]
type = varadd
trigger1 = time = [77,200]
fvar(18) = -0.0045

[State exp, *]
type = modifyexplod
trigger1 = 1
ID = 6815
scale = 1.2+fvar(17),1.2+fvar(18)

[State var, *]
type = parentvarset
triggerall = alive = 1
trigger1 = time = 170
v = 42
value = 2000

[State var, *]
type = parentvarset
trigger1 = time = 135
v = 55
value = 1

[State var, *]
type = parentvarset
trigger1 = time = 180
v = 55
value = 0

[State 6810, 3]
type = DestroySelf
trigger1 = time = 200

;----------------------------------------------------
;マナプリズム(エフェクト其の二)
[Statedef 6850]
type    = S
movetype= I
physics = N
ctrl = 0
velset = 0,0
anim = 9999
sprpriority = 0

[State ]
type = changeanim
trigger1 = 1
value = parent,anim
elem = parent,animelemno(0)

[State ]
type = posset
trigger1 = 1
x = parent,pos x+1
y = parent,pos y+3

[State ]
type = assertspecial
trigger1 = 1
flag = invisible

[State blerg]
type = AfterImage
trigger1 = !(time%(16))
time = 20
framegap = 1
length = 13
palcolor = 80
trans = add
sinadd = 0,40,40,24
palbright = 0,208,208

[State ]
type = turn
trigger1 = (facing = 1 && parent,facing = -1) || (facing = -1 && parent,facing = 1)

[State gethit]
type = nothitby
trigger1 = 1
persistent = 1
value = SCA

[State dest]
type = destroyself
trigger1 = time = 160

;---------------------------------------------------------------------------
;シールド魔法(アックスアーマー)
[Statedef 2000]
type = S
movetype = I
physics = S
anim = 2000
velset = 0,0
ctrl = 0
sprpriority = 3

[State 200, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 251

[State 200, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 252

[State 200, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 253

[State mp]
type = varadd
trigger1 = time = 0
v = 42
value = -610

[State 0, 4]
type = afterimagetime
trigger1 = time = 0
time = 0

[state 7800,1]
type = varrandom
trigger1 = time = 0
v = 11
range = 0,5

[State 1300, 1]
type = PlaySnd
trigger1 = time = 0
value = 1100, var(11)

[State 1300, 1]
type = PlaySnd
trigger1 = time = 0
value = 2000, 0

[State 3200, hel]
type = Helper
trigger1 = time = 0
helpertype = Normal
ID = 2020
name = "tate"
postype = p1
pos = 6,-45
stateno = 2020
size.xscale = 1.5
size.yscale = 1.5
supermovetime = 99999999999
ownpal = 1

;[State 200, 7]
;type = Pause
;trigger1 = time = 0
;time = 190
;movetime = 190
;anim = -1
;darken = 0

[State 7015, 1]
type = SuperPause
trigger1 = time = 0
time = 190
movetime = 190
anim = -1
darken = 0

[State 195, 1]
type = ChangeState
trigger1 = time >= 100
trigger1 = numhelper(2010) = 0
trigger2 = time >= 400
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;シールド魔法(盾出現)
[Statedef 2020]
type = A
movetype = I
physics = N
anim = 2020
ctrl = 0
sprpriority = 1

[State 1300, 1]
type = PlaySnd
trigger1 = time = 50
value = 6810, 0

[State vel, 1]
type = Veladd
trigger1 = Time = [1,6]
y = -1.1
x = -1.0

[State vel, 1]
type = Veladd
trigger1 = Time = [7,13]
y = 0.02
x = 0.09

[State vel, 2]
type = Velset
trigger1 = Time = 14
y = 0
x = 0

[State 200, 7]
type = ChangeAnim
trigger1 = time = 34
value = 9999

[State exp, *]
type = Explod
trigger1 = time = 34
anim = 2020
ID = 2025
pos = 0,0
postype = p1
scale = 1.5,1.5
sprpriority = 1
removetime = 2
supermovetime = 99999999999
ownpal = 1
ontop = 1

[State exp, *]
type = Explod
trigger1 = time = 36
anim = 2020
ID = 2025
pos = 0,0
postype = p1
scale = 1.2,1.2
sprpriority = 1
removetime = 2
supermovetime = 99999999999
ownpal = 1
ontop = 1

[State exp, *]
type = Explod
trigger1 = time = 38
anim = 2020
ID = 2025
pos = 0,0
postype = p1
scale = 0.9,0.9
sprpriority = 1
removetime = 2
supermovetime = 99999999999
ownpal = 1
ontop = 1

[State exp, *]
type = Explod
trigger1 = time = 40
anim = 2020
ID = 2025
pos = 0,0
postype = p1
scale = 0.6,0.6
sprpriority = 1
removetime = 2
supermovetime = 99999999999
ownpal = 1
ontop = 1

[State exp, *]
type = Explod
trigger1 = time = 42
anim = 2020
ID = 2025
pos = 0,0
postype = p1
scale = 0.3,0.3
sprpriority = 1
removetime = 2
supermovetime = 99999999999
ownpal = 1
ontop = 1

[State exp, *]
type = Explod
trigger1 = time = 0
anim = 2030
ID = 2030
pos = 0,0
postype = p1
scale = 1.5,1.5
sprpriority = 0
removetime = -1
supermovetime = 99999999999
bindtime = -1
ownpal = 1
ontop = 1

[State var, *]
type = varset
trigger1 = time = 0
fvar(17) = 0

[State var, *]
type = varadd
trigger1 = time = [43,84]
fvar(17) = 0.2050

[State var, *]
type = varset
trigger1 = time = 0
fvar(18) = 0

[State var, *]
type = varadd
trigger1 = time = [43,84]
fvar(18) = 0.2050

[State exp, *]
type = modifyexplod
trigger1 = 1
ID = 2030
scale = 1.5+fvar(17),1.5+fvar(18)

[State 200, cs]
type = RemoveExplod
trigger1 = time = 118
ID = 2030

[State exp, *]
type = Explod
trigger1 = time = 43
anim = 2005
ID = 2005
pos = 0,45
postype = p1
scale = 2.0,2.0
sprpriority = 0
removetime = 47
supermovetime = 99999999999
ownpal = 1
ontop = 1

[State 3200, hel]
type = Helper
trigger1 = time = 91
helpertype = Normal
ID = 2010
name = "axe"
postype = p1
pos = 0,45
stateno = 2010
size.xscale = 2.0
size.yscale = 2.0
supermovetime = 99999999999
ownpal = 1

[State dest]
type = destroyself
trigger1 = time = 130

;---------------------------------------------------------------------------
;シールド魔法(アックスアーマー出現)
[Statedef 2010]
type = A
movetype = I
physics = N
anim = 2010
ctrl = 0
sprpriority = 6

[State vel, 1]
type = Velset
trigger1 = P2Dist X >= 0
trigger1 = time = 0
x = 1.3

[State vel, 1]
type = Velset
trigger1 = P2Dist X < -1
trigger1 = time = 0
x = -1.3

[state 1,gravity]
type = gravity
trigger1 = 1

[State 3101, 0]
type = Turn
trigger1 = P2Dist X <= 0

[State 200, 7]
type = ChangeState
trigger1 = P2Dist X < 45
value = 2015

[State 200, 7]
type = ChangeState
trigger1 = pos y >= 0 && vel y > 0
value = 2011

;---------------------------------------------------------------------------
;シールド魔法(アックスアーマー歩く)
[Statedef 2011]
type = S
movetype = I
physics = N
anim = 2010
velset = 0,0
ctrl = 0
sprpriority = 6

[State pos]
type = posset
trigger1 = time = 0
y = 0

[State vel, 1]
type = Velset
trigger1 = time = 0
x = 4.5

[State 1300, 1]
type = PlaySnd
trigger1 = !(time%9)
value = 2000, 1

[State 3101, 0]
type = Turn
trigger1 = P2Dist X <= 0

[State 200, 7]
type = ChangeState
trigger1 = P2Dist X < 45
value = 2015

[State 200, 7]
type = ChangeState
trigger1 = FrontEdgeBodyDist <= 50
trigger2 = backEdgeBodyDist <= -80
value = 2015

;---------------------------------------------------------------------------
;シールド魔法(アックスアーマー攻撃＆消える)
[Statedef 2015]
type = S
movetype = A
physics = N
anim = 2015
velset = 0,0
ctrl = 0
sprpriority = 6

[State 1300, 1]
type = PlaySnd
trigger1 = time = 0
value = 2000, 2

[State vel, 1]
type = Velset
trigger1 = 1
x = 0
y = 0

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SP
damage = 58, 58
animtype = Light
;guardflag = MA
hitflag = MAFD
fall = 1
air.fall = 1
pausetime = 0,17
sparkno = S1500
guard.sparkno = S1500
sparkxy = 0,0
hitsound = s9,0
guardsound = s1500,0
ground.type = low
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -7,-3.2
airguard.velocity = -2.0,-.9
air.type = High
air.velocity = -7,-3.2
air.hittime = 15
getpower = 0,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.time = 13
palfx.sinadd = 140,-30,-30,13
palfx.add = 160,-100,-100
fall.recover = 0
p2facing = 1
yaccel = .45
fall.yvelocity = -4

[State 200, 7]
type = SuperPause
trigger1 = time = 0
time = 0
movetime = 0
anim = -1
darken = 0

[State dest]
type = destroyself
trigger1 = Animtime = 0

;---------------------------------------------------------------------------
;バットオブフロック(コウモリ中)
[Statedef 3400]
type = A
movetype = I
physics = N
anim = 3400
velset = 0,0
ctrl = 0
sprpriority = 2

[State 1300, 1]
type = PlaySnd
trigger1 = time = 1
trigger2 = time = 18
value = 3100, 0

[State mp]
type = varadd
triggerall = alive = 1
trigger1 = (GameTime%5) = 0
ignorehitpause = 1
v = 42
value = -2

[State mp]
type = varadd
trigger1 = time = 0
v = 42
value = -740

[State 7004]
type = AngleDraw
trigger1 = 1

[State 7004]
type = Angleset
trigger1 = time = 0
value = 0

[State 3200, 1]
type = PlayerPush
trigger1 = 1
value = 0

[State 1110, back]
type = Velset
trigger1 = pos y >= 0 && vel y > 0
y = 0

[State exp, *]
type = Explod
trigger1 = time = 1
anim = 3415
ID = 3415
pos = 20,-52
postype = p1
scale = 0,0
sprpriority = 2
ownpal = 1
Persistent = 6
bindtime = -1
removetime = -2
pausemovetime = -1
ontop = 1

[State var, *]
type = varset
trigger1 = time = 0
fvar(17) = 0

[State var, *]
type = varadd
trigger1 = time = [1,70]
fvar(17) = 0.0150

[State var, *]
type = varset
trigger1 = time = 0
fvar(18) = 0

[State var, *]
type = varadd
trigger1 = time = [1,70]
fvar(18) = 0.0150

[State exp, *]
type = modifyexplod
trigger1 = 1
ID = 3415
scale = 0.0+fvar(17),0.0+fvar(18)

[State exp, *]
type = Explod
trigger1 = time = 18
anim = 3415
ID = 3416
pos = 20,-52
postype = p1
scale = 0,0
sprpriority = 2
ownpal = 1
Persistent = 6
bindtime = -1
removetime = -2
pausemovetime = -1
ontop = 1

[State var, *]
type = varset
trigger1 = time = 0
fvar(27) = 0

[State var, *]
type = varadd
trigger1 = time = [18,90]
fvar(27) = 0.0150

[State var, *]
type = varset
trigger1 = time = 0
fvar(28) = 0

[State var, *]
type = varadd
trigger1 = time = [18,90]
fvar(28) = 0.0150

[State exp, *]
type = modifyexplod
trigger1 = 1
ID = 3416
scale = 0.0+fvar(27),0.0+fvar(28)

[State var]
type = varset
trigger1 = time = 30
v = 57
value = 1

[State 1100, 1]
type = Helper
trigger1 = time = 30
helpertype = Normal
ID = 3410
name = "batpos"
postype = left
pos = 0,0
stateno = 3410
size.xscale = 0
size.yscale = 0
ownpal = 1

[State 200, 7]
type = ChangeState
trigger1 = time = 160
value = 3115

;---------------------------------------------------------------------------
;バットオブフロック(コウモリ出現ダミー)
[Statedef 3410]
type = A
movetype = I
physics = N
anim = 9999
velset = 0,0
ctrl = 0
sprpriority = 2

[State 1100, 1]
type = Helper
trigger1 = time = 0
helpertype = Normal
ID = 7110
name = "bat"
postype = left
pos = -35,-60
stateno = 7110
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = time = 27
helpertype = Normal
ID = 7111
name = "bat"
postype = right
pos = 35,-73
stateno = 7111
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = time = 30
helpertype = Normal
ID = 7110
name = "bat"
postype = left
pos = -35,-35
stateno = 7110
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = time = 38
helpertype = Normal
ID = 7111
name = "bat"
postype = right
pos = 35,-56
stateno = 7111
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = time = 47
helpertype = Normal
ID = 7110
name = "bat"
postype = left
pos = -35,-82
stateno = 7110
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = time = 53
helpertype = Normal
ID = 7111
name = "bat"
postype = right
pos = 35,-89
stateno = 7111
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = time = 62
helpertype = Normal
ID = 7110
name = "bat"
postype = left
pos = -35,-74
stateno = 7110
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = time = 66
helpertype = Normal
ID = 7111
name = "bat"
postype = right
pos = 35,-32
stateno = 7111
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = time = 71
helpertype = Normal
ID = 7110
name = "bat"
postype = left
pos = -35,-46
stateno = 7110
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = time = 78
helpertype = Normal
ID = 7111
name = "bat"
postype = right
pos = 35,-68
stateno = 7111
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = time = 83
helpertype = Normal
ID = 7110
name = "bat"
postype = left
pos = -35,-73
stateno = 7110
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = time = 89
helpertype = Normal
ID = 7111
name = "bat"
postype = right
pos = 35,-21
stateno = 7111
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = time = 95
helpertype = Normal
ID = 7110
name = "bat"
postype = left
pos = -35,-38
stateno = 7110
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = time = 102
helpertype = Normal
ID = 7111
name = "bat"
postype = right
pos = 35,-85
stateno = 7111
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = time = 111
helpertype = Normal
ID = 7110
name = "bat"
postype = left
pos = -35,-57
stateno = 7110
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = time = 122
helpertype = Normal
ID = 7111
name = "bat"
postype = right
pos = 35,-62
stateno = 7111
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = time = 134
helpertype = Normal
ID = 7110
name = "bat"
postype = left
pos = -35,-41
stateno = 7110
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = time = 142
helpertype = Normal
ID = 7111
name = "bat"
postype = right
pos = 35,-99
stateno = 7111
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = time = 159
helpertype = Normal
ID = 7110
name = "bat"
postype = left
pos = -35,-83
stateno = 7110
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State dest]
type = destroyself
trigger1 = time = 160

;----------------------------------------------------------------
;デモニックメギド
[Statedef 2500]
type    = S
movetype= I
physics = S
ctrl = 0
velset = 0,0
anim = 2500
sprpriority = 2

[State var]
type = varadd
trigger1 = time = 0
v = 42
value = -1120

[State 0, 4]
type = afterimagetime
trigger1 = time = 0
time = 0

[State 1000, 0]
type = AllPalFX
trigger1 = AnimElemtime(1) = 0
trigger2 = AnimElemtime(1) = 3
trigger3 = AnimElemtime(1) = 6
trigger4 = AnimElemtime(1) = 9
trigger5 = AnimElemtime(1) = 12
time = 1
add = -80,-80,-80
color = 256

[State 1000, 0]
type = AllPalFX
trigger1 = time = 48
trigger2 = time = 65
trigger3 = time = 79
trigger4 = time = 91
trigger5 = time = 108
trigger6 = time = 120
trigger7 = time = 132
trigger8 = time = 148
trigger9 = time = 163
time = 3
add = 230,230,230
mul = 230,230,230
sinadd = 0,0,0,6
invertall = 0
color = 256

[State snd]
type = PlaySnd
trigger1 = time = 0
value = 2500, 0

[State snd]
type = PlaySnd
trigger1 = time = 28
value = 2510, 0

[State snd]
type = PlaySnd
trigger1 = time = 48
trigger2 = time = 65
trigger3 = time = 79
trigger4 = time = 91
trigger5 = time = 108
trigger6 = time = 120
trigger7 = time = 132
trigger8 = time = 148
trigger9 = time = 163
value = 4000, 1

[State snd]
type = PlaySnd
trigger1 = AnimElem = 11
value = 2500, 1

[State snd]
type = PlaySnd
trigger1 = AnimElem = 14
value = 2520, 2

[State snd]
type = PlaySnd
trigger1 = AnimElem = 14
value = 6700, 1

[State snd]
type = PlaySnd
trigger1 = AnimElemtime(14) = 6
value = 2520, 1

[State exp, *]
type = Explod
trigger1 = time = 48
trigger2 = time = 65
anim = 2505
ID = 2505
pos = 40,-48
postype = p1
scale = 4.0,4.0
sprpriority = 8
ownpal = 1
supermovetime = 99999999999
ontop = 1

[State exp, *]
type = Explod
trigger1 = AnimElem = 14
anim = 2540
ID = 2540
pos = 52,-79
postype = p1
scale = 1.0,1.0
sprpriority = 5
ownpal = 1
supermovetime = 99999999999
ontop = 1

[State 7015, 1]
type = SuperPause
trigger1 = AnimElem = 10
time = 129
movetime = 129
anim = -1
darken = 1

[State 1100, 1]
type = Helper
trigger1 = time = 26
helpertype = Normal
ID = 2510
name = "maru"
postype = p1
pos = 40,-50
stateno = 2510
size.xscale = 1.0
size.yscale = 1.0
supermovetime = 99999999999
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = time = 57
helpertype = Normal
ID = 2520
name = "demoni"
postype = p1
pos = 40,-50
stateno = 2520
size.xscale = 1.0
size.yscale = 1.0
supermovetime = 99999999999
ownpal = 1

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------
;デモニックメギド(エフェクト)
[Statedef 2510]
type    = A
movetype= I
physics = N
ctrl = 0
velset = 0,0
anim = 2510
sprpriority = 10

[State trans]
type = Trans
trigger1 = 1
trans = add

[State Var]
type = Varadd
Trigger1 = time = [0,20]
ignorehitpause = 1
fvar(2) = -0.039

[State Angle]
type = AngleDraw
trigger1 = time = [0,20]
scale = 1.2+fvar(2),1.2+fvar(2)

[State Angle]
type = AngleDraw
trigger1 = time > 20
scale = 0.37,0.37

[State Angle]
type = Angleadd
trigger1 = 1
value = -8

[State AfterI]
type = AfterImage
trigger1 = time = 0
length = 23
timegap = 1
framegap = 1
time = -1
palcontrast = 220,220,220
paladd = 0,0,0
palmul = .68,.68,.68
palbright = 1,1,1
trans = Add

[State vel]
type = velset
trigger1 = time = 131
x = 6

[State dest]
type = destroyself
trigger1 = FrontEdgeBodyDist <= -85

;----------------------------------------------------------------
;デモニックメギド(弾)
[Statedef 2520]
type    = A
movetype= A
physics = N
ctrl = 0
juggle  = 5
velset = 0,0
anim = 2520
sprpriority = 6

[State exp, *]
type = Explod
trigger1 = time = 12
trigger2 = time = 24
trigger3 = time = 41
trigger4 = time = 53
trigger5 = time = 65
trigger6 = time = 81
anim = 2505
ID = 2505
pos = 0,0
postype = p1
scale = 4.0,4.0
sprpriority = 8
ownpal = 1
bindtime = -1
supermovetime = 99999999999
ontop = 1

[State vel]
type = velset
trigger1 = time = 100
x = 6

[State snd]
type = PlaySnd
trigger1 = time = 100
trigger2 = time = 117
trigger3 = time = 134
trigger4 = time = 151
trigger5 = time = 168
trigger6 = time = 185
value = 2520, 0
channel = 2

[State 200, 7]
type = Changeanim
trigger1 = time = 100
value = 2525

[State 7001, 2]
type = HitDef
trigger1 = AnimElem = 1
attr = A, HP
;damage = 310, 48
damage = ceil(ifelse(P2Life <= 500,67,155)),48
animtype = Light
guardflag = MA
hitflag = MAF
fall = 1
air.fall = 1
pausetime = 0,50
sparkno = S2540
guard.sparkno = S1500
sparkxy = 0,0
hitsound = s2530,0
guardsound = s1500,0
ground.type = low
ground.slidetime = 24
ground.hittime  = 35
ground.velocity = -8,-4.5
airguard.velocity = -1.7,-.7
air.type = High
air.velocity = -8,-4.5
air.hittime = 35
getpower = 0,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.time = 60
palfx.sinadd = 10,70,60,9
palfx.add = -110,-60,-80
fall.recover = 0
p2facing = 1
yaccel = .45
fall.yvelocity = -4

[State hel]
type = Helper
trigger1 = movehit = 1
helpertype = Normal
ID = 2535
name = "bakuha"
postype = p2
stateno = 2535
scale = 1.0,1.0
;pos = 23,-54
pos = enemynear,Const(size.mid.pos.x),enemynear,Const(size.mid.pos.y)
persistent = 0
ownpal = 1

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State dest]
type = destroyself
trigger1 = FrontEdgeBodyDist <= -85

;----------------------------------------------------------------
;デモニックメギド(相手爆発)
[Statedef 2535]
type    = A
movetype= A
physics = N
anim = 2550
sprpriority = 5

[State turn]
type = turn
trigger1 = time = 0

[State 200]
type = Explod
trigger1 = time = 10
trigger2 = time = 13
trigger3 = time = 16
trigger4 = time = 19
trigger5 = time = 22
trigger6 = time = 25
trigger7 = time = 28
trigger8 = time = 33
anim = 1052
id = 1052
postype = p2
scale = 1.5,1.5
accel = 0,-.17
random = 60,80
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = time = 9
trigger2 = time = 11
trigger3 = time = 14
trigger4 = time = 16
trigger5 = time = 19
trigger6 = time = 23
trigger7 = time = 26
trigger8 = time = 31
anim = 1062
id = 1062
postype = p2
scale = 1.5,1.5
accel = 0,-.17
random = 60,80
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = time = 12
trigger2 = time = 15
trigger3 = time = 18
trigger4 = time = 20
trigger5 = time = 24
trigger6 = time = 28
trigger7 = time = 30
trigger8 = time = 35
anim = 2540
id = 2545
postype = p2
scale = 1.5,1.5
accel = 0,-.19
random = 60,80
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State snd]
type = PlaySnd
trigger1 = time = 12
trigger2 = time = 18
trigger3 = time = 20
trigger4 = time = 28
trigger5 = time = 30
value = 1900, 0
channel = 4

[State snd]
type = PlaySnd
trigger1 = time = 12
trigger2 = time = 18
trigger3 = time = 20
trigger4 = time = 24
trigger5 = time = 28
trigger6 = time = 35
value = 2530, 0
channel = 3

[State 1000, 0]
type = AllPalFX
trigger1 = time = 12
trigger2 = time = 18
trigger3 = time = 20
trigger4 = time = 24
trigger5 = time = 28
trigger6 = time = 35
time = 2
add = 90,90,90
color = 256

[State 7001, 2]
type = HitDef
trigger1 = time = 12
trigger2 = time = 18
trigger3 = time = 20
trigger4 = time = 24
trigger5 = time = 28
trigger6 = time = 35
attr = A, HP
;damage = 21, 2
damage = ceil(ifelse(P2Life <= 380,8,16)),2
animtype = Light
guardflag = MA
hitflag = MAFD
fall = 1
air.fall = 1
pausetime = 0,27
sparkno = -1
guard.sparkno = S1500
sparkxy = 0,0
hitsound = -1
guardsound = s1500,0
ground.type = low
ground.slidetime = 24
ground.hittime  = 35
ground.velocity = -8,-7.5
airguard.velocity = -1.5,-.7
air.type = High
air.velocity = -8,-7.5
air.hittime = 35
getpower = 0,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.time = 60
palfx.sinadd = 10,70,60,9
palfx.add = -110,-60,-80
fall.recover = 0
p2facing = 1
yaccel = .45
fall.yvelocity = -4
guard.kill = 0

[State 7001, 2]
type = HitDef
trigger1 = time = 35
attr = A, HP
;damage = 22, 2
damage = ceil(ifelse(P2Life <= 380,10,18)),2
animtype = Light
guardflag = MA
hitflag = MAFD
fall = 1
air.fall = 1
pausetime = 0,27
sparkno = -1
guard.sparkno = S1500
sparkxy = 0,0
hitsound = -1
guardsound = s1500,0
ground.type = low
ground.slidetime = 24
ground.hittime  = 35
ground.velocity = -18.7,-8.8
airguard.velocity = -1.5,-.7
air.type = High
air.velocity = -18.7,-8.8
air.hittime = 35
getpower = 0,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.time = 60
palfx.sinadd = 10,70,60,9
palfx.add = -110,-60,-80
fall.recover = 0
p2facing = 1
yaccel = .45
fall.yvelocity = -4
p2stateno = 6005
guard.kill = 0
ID = 2535

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 7001, 3]
type = DestroySelf
trigger1 = time = 36

;----------------------------------------------------------------
;ワープ移動
[Statedef 1600]
type    = S
movetype= I
physics = S
ctrl = 0
velset = 0,0
anim = 1400
sprpriority = 1

[State 0, 4]
type = afterimagetime
trigger1 = time = 0
time = 0

[State var]
type = varset
trigger1 = time = 20
v = 21
value = 1

[State 20, 1]
type = VarSet
trigger1 = time = 0
v = 22
value = 0

[State 20, 1]
type = VarSet
trigger1 = time = 0
v = 19
value = 0

[State 7019, 1]
type = PlayerPush
trigger1 = 1
value = 0

[State snd]
type = PlaySnd
trigger1 = time = 0
value = 51,0

[State var]
type = varadd
trigger1 = time = 0
v = 42
value = -240

[State 20, 1]
type = VelSet
trigger1 = time = 0
x = 0

[State exp, *]
type = Explod
trigger1 = time = 0
anim = 1405
ID = 1405
pos = 0,0
postype = p1
scale = 0,0
sprpriority = 2
removetime = -2
ownpal = 1
Persistent = 6
bindtime = 23
ontop = 1

[State var, *]
type = varset
trigger1 = time = 0
fvar(15) = 0

[State var, *]
type = varadd
trigger1 = time = [5,9]
fvar(15) = 0.1070

[State var, *]
type = varadd
trigger1 = time = [18,23]
fvar(15) = -0.1070

[State var, *]
type = varset
trigger1 = time = 0
fvar(16) = 0

[State var, *]
type = varadd
trigger1 = time = [1,26]
fvar(16) = 0.0250

[State exp, *]
type = modifyexplod
trigger1 = 1
ID = 1405
scale = 0.1+fvar(15),0.1+fvar(16)

[State 200, 7]
type = ChangeState
trigger1 = AnimElemtime(1) = 24
value = 1605

;----------------------------------------------------------------
;ワープ移動(操作)
[Statedef 1605]
type    = S
movetype= I
physics = S
ctrl = 0
sprpriority = 1

[state 7800,1]
type = varrandom
trigger1 = var(30) = 30
trigger1 = time <= 34
v = 24
range = -140,140

[State 191, 2]
type = posset
trigger1 = var(30) = 30
trigger1 = time = 35
x = var(24)

[State 20, 1]
type = VelSet
trigger1 = var(30) != 30
trigger1 = command = "holdfwd"
x = 9.6

[State 20, 2]
type = VelSet
trigger1 = var(30) != 30
trigger1 = command = "holdback"
x = -9.6

[State 20, 1]
type = VelSet
trigger1 = command != "holdfwd"
trigger1 = command != "holdback"
x = 0

[State 20, 1]
type = VarSet
trigger1 = command = "hold_x"
trigger2 = var(30) = 30
trigger2 = time >= 27
trigger2 = random <= 180
v = 22
value = 1

[State var, *]
type = varset
trigger1 = command = "holdup"
trigger2 = var(30) = 30
trigger2 = time >= 29
trigger2 = random <= 36
v = 19
value = 1

[State turn, *]
type = turn
trigger1 = roundstate = 2
trigger1 = P2Dist x <= 0

[State 200, 7]
type = ChangeState
triggerall = var(42) >= 150
trigger1 = var(19) = 1
trigger1 = time = 36
value = 1615
ctrl = 0

[State 200, 7]
type = ChangeState
triggerall = var(42) >= 150
trigger1 = var(22) = 1
trigger1 = time = 36
value = 1615
ctrl = 0

[State 200, 7]
type = ChangeState
trigger1 = time = 37
trigger2 = Win
value = 1610
ctrl = 0

;----------------------------------------------------------------
;ワープ移動(出現)
[Statedef 1610]
type    = S
movetype= I
physics = S
ctrl = 0
velset = 0,0
anim = 1410
sprpriority = 1

[State var]
type = varset
trigger1 = time = 0
v = 21
value = 0

[State 7019, 1]
type = PlayerPush
trigger1 = 1
value = 0

[State 20, 1]
type = VelSet
trigger1 = time = 0
x = 0

[State exp, *]
type = Explod
trigger1 = time = 0
anim = 1405
ID = 1405
pos = 0,0
postype = p1
scale = 0,0
sprpriority = 2
removetime = -2
ownpal = 1
Persistent = 6
bindtime = 23
ontop = 1

[State var, *]
type = varset
trigger1 = time = 0
fvar(15) = 0

[State var, *]
type = varadd
trigger1 = time = [5,9]
fvar(15) = 0.1070

[State var, *]
type = varadd
trigger1 = time = [18,23]
fvar(15) = -0.1070

[State var, *]
type = varset
trigger1 = time = 0
fvar(16) = 0

[State var, *]
type = varadd
trigger1 = time = [1,26]
fvar(16) = 0.0250

[State exp, *]
type = modifyexplod
trigger1 = 1
ID = 1405
scale = 0.1+fvar(15),0.1+fvar(16)

[State turn, *]
type = turn
trigger1 = roundstate = 2
trigger1 = time <= 6
trigger1 = P2Dist x <= 0

[State 195, 1]
type = CtrlSet
trigger1 = AnimElemTime(1) = 24
value = 1

;----------------------------------------------------------------
;ワープファイア(出現)
[Statedef 1615]
type    = S
movetype= I
physics = S
ctrl = 0
sprpriority = 1

[State var, *]
type = varset
trigger1 = time = 0
trigger1 = var(19) = 1
trigger1 = var(22) = 1
var(22) = 0

[state 1000, 1]
type = varrandom
trigger1 = time <= 10
v = 37
range = 0,3

[State var]
type = varadd
trigger1 = time = 15
v = 42
value = -150

[State 20, 1]
type = VelSet
trigger1 = time = 0
x = 0

[State exp, *]
type = Explod
trigger1 = time = 0
anim = 1405
ID = 1405
pos = 0,0
postype = p1
scale = 0,0
sprpriority = 2
removetime = -2
ownpal = 1
Persistent = 6
bindtime = 23
ontop = 1

[State var, *]
type = varset
trigger1 = time = 0
fvar(15) = 0

[State var, *]
type = varadd
trigger1 = time = [5,9]
fvar(15) = 0.1070

[State var, *]
type = varadd
trigger1 = time = [18,23]
fvar(15) = -0.1070

[State var, *]
type = varset
trigger1 = time = 0
fvar(16) = 0

[State var, *]
type = varadd
trigger1 = time = [1,26]
fvar(16) = 0.0250

[State exp, *]
type = modifyexplod
trigger1 = 1
ID = 1405
scale = 0.1+fvar(15),0.1+fvar(16)

[State turn, *]
type = turn
trigger1 = roundstate = 2
trigger1 = P2Dist x <= 0

[State snd]
type = PlaySnd
trigger1 = var(22) = 1
trigger1 = time = 15
value = 1000,0

[State 1100, 1]
type = Helper
trigger1 = var(22) = 1
trigger1 = time = 15
helpertype = Normal
ID = 1010
name = "fire1" 
postype = p1
pos = -23,-42
stateno = 1010
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = var(22) = 1
trigger1 = time = 15
helpertype = Normal
ID = 1011
name = "fire2" 
postype = p1
pos = -23,-45
stateno = 1011
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = var(22) = 1
trigger1 = time = 15
helpertype = Normal
ID = 1012
name = "fire3" 
postype = p1
pos = -23,-45
stateno = 1012
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State snd]
type = PlaySnd
trigger1 = var(19) = 1
trigger1 = time = 15
value = 1050,0

[State 1100, 1]
type = Helper
trigger1 = var(19) = 1
trigger1 = time = 15
helpertype = Normal
ID = 1060
name = "fire1" 
postype = p1
pos = -13,-62
stateno = 1060
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 1100, 1]
type = Helper
trigger1 = var(19) = 1
trigger1 = time = 29
helpertype = Normal
ID = 1060
name = "fire2" 
postype = p1
pos = -13,-29
stateno = 1060
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State exp, *]
type = Explod
trigger1 = var(19) = 1
trigger1 = time = 15
anim = 1061
ID = 1061
pos = -13,-62
postype = p1
scale = 1.5,1.5
sprpriority = 2
ownpal = 1
bindtime = -1
pausemovetime = -1
ontop = 1

[State exp, *]
type = Explod
trigger1 = var(19) = 1
trigger1 = time = 29
anim = 1061
ID = 1061
pos = -13,-29
postype = p1
scale = 1.5,1.5
sprpriority = 2
ownpal = 1
bindtime = -1
pausemovetime = -1
ontop = 1

[State exp, *]
type = Explod
trigger1 = time = 15
anim = 1050
ID = 1050
pos = -23,-48
postype = p1
scale = 0,0
sprpriority = 2
ownpal = 1
Persistent = 6
pausemovetime = -1
ontop = 1

[State var, *]
type = varset
trigger1 = time = 0
fvar(17) = 0

[State var, *]
type = varadd
trigger1 = time = [15,100]
fvar(17) = 0.0970

[State var, *]
type = varset
trigger1 = time = 0
fvar(18) = 0

[State var, *]
type = varadd
trigger1 = time = [15,100]
fvar(18) = 0.0940

[State exp, *]
type = modifyexplod
trigger1 = 1
ID = 1050
scale = 1.5+fvar(17),1.5+fvar(18)

[state 7800,1]
type = varrandom
trigger1 = time <= 50
v = 23
range = -150,150

[State 191, 2]
type = posset
trigger1 = time = 60
x = var(23)

[State 200, 7]
type = ChangeState
trigger1 = time = 70
trigger2 = Win
value = 1610
ctrl = 0

;----------------------------------------------------------------
;ヴァルマンウェ入手
[Statedef 3500]
type    = S
movetype= I
physics = S
ctrl = 0
velset = 0,0
anim = 3500
sprpriority = 1

[State 0, 4]
type = afterimagetime
trigger1 = time = 0
time = 0

[state 195,1]
type = varset
trigger1 = time = 0
v = 16
value = 1

[state 195,1]
type = varrandom
trigger1 = time = 0
v = 10
range = 0,2

[State snd]
type = PlaySnd
trigger1 = time = 0
value = 3500,var(10)
channel = 0

[State hel]
type = Helper
trigger1 = AnimElemtime(13) = 10
helpertype = Normal
ID = 3570
name = "schmoo"
postype = p1
pos = ceil(180*const(size.xscale)),-210
stateno = 3570
size.xscale = 1.5
size.yscale = 1.5
ownpal = 1

[State 200, 7]
type = ChangeState
trigger1 = var(30) != 30
trigger1 = time = 70
trigger2 = var(30) = 30
trigger2 = AnimElemtime(13) >= 15
trigger2 = NumHelper(3570) = 0
trigger3 = var(30) = 30
trigger3 = var(17) = 1
trigger4 = win
trigger5 = lose
value = 0
ctrl = 1

;----------------------------------------------------------------
;ヴァルマンウェ(立ち斬り)
[Statedef 3505]
type    = S
movetype= A
physics = S
ctrl = 0
velset = 0,0
anim = 3505
sprpriority = 1

[State 200, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 251

[State 200, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 252

[State 200, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 253

[state 1,AIturn]
type = turn
trigger1 = roundstate = 2
trigger1 = time = 0
trigger1 = var(30) = 30
trigger1 = P2Dist x <= 0

[State -2]
type = varadd
trigger1 = time = 0
v = 42
value = -70

[State 0, 4]
type = afterimagetime
trigger1 = time = 0
time = 0

[state 195,1]
type = varrandom
trigger1 = time = 0
v = 10
range = 0,4

[State snd]
type = PlaySnd
trigger1 = time = 0
value = 3505,var(10)
channel = 0

[State hel]
type = Helper
trigger1 = AnimElemtime(3) = 0
helpertype = Normal
ID = 3550
name = "valman1"
postype = p1
pos = 7,-53
stateno = 3550
size.xscale = 2
size.yscale = 2
ownpal = 1

[State hel]
type = Helper
trigger1 = AnimElemtime(3) = 4
helpertype = Normal
ID = 3551
name = "valman2"
postype = p1
pos = 7,-38
stateno = 3551
size.xscale = 2
size.yscale = 2
ownpal = 1

[State hel]
type = Helper
trigger1 = AnimElemtime(3) = 8
helpertype = Normal
ID = 3552
name = "valman3"
postype = p1
pos = 23,-47
stateno = 3552
size.xscale = 2
size.yscale = 2.5
ownpal = 1

[State hel]
type = Helper
trigger1 = AnimElemtime(3) = 12
helpertype = Normal
ID = 3550
name = "valman1"
postype = p1
pos = 7,-53
stateno = 3550
size.xscale = 2
size.yscale = 2
ownpal = 1

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------
;ヴァルマンウェ(しゃがみ斬り)
[Statedef 3510]
type    = C
movetype= A
physics = C
ctrl = 0
velset = 0,0
anim = 3510
sprpriority = 1

[State 200, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 251

[State 200, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 252

[State 200, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 253

[state 1,AIturn]
type = turn
trigger1 = roundstate = 2
trigger1 = time = 0
trigger1 = var(30) = 30
trigger1 = P2Dist x <= 0

[State -2]
type = varadd
trigger1 = time = 0
v = 42
value = -70

[State 0, 4]
type = afterimagetime
trigger1 = time = 0
time = 0

[state 195,1]
type = varrandom
trigger1 = time = 0
v = 10
range = 0,4

[State snd]
type = PlaySnd
trigger1 = time = 0
value = 3505,var(10)
channel = 0

[State hel]
type = Helper
trigger1 = AnimElemtime(3) = 0
helpertype = Normal
ID = 3550
name = "valman1"
postype = p1
pos = 7,-34
stateno = 3550
size.xscale = 2
size.yscale = 2
ownpal = 1

[State hel]
type = Helper
trigger1 = AnimElemtime(3) = 4
helpertype = Normal
ID = 3551
name = "valman2"
postype = p1
pos = 7,-19
stateno = 3551
size.xscale = 2
size.yscale = 2
ownpal = 1

[State hel]
type = Helper
trigger1 = AnimElemtime(3) = 8
helpertype = Normal
ID = 3552
name = "valman3"
postype = p1
pos = 23,-28
stateno = 3552
size.xscale = 2
size.yscale = 2.5
ownpal = 1

[State hel]
type = Helper
trigger1 = AnimElemtime(3) = 12
helpertype = Normal
ID = 3550
name = "valman1"
postype = p1
pos = 7,-34
stateno = 3550
size.xscale = 2
size.yscale = 2
ownpal = 1

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 11
ctrl = 1

;----------------------------------------------------------------
;ヴァルマンウェ(ジャンプ斬り)
[Statedef 3515]
type    = A
movetype= A
physics = N
ctrl = 0
anim = 3515
sprpriority = 1

[state 1,gravity]
type = gravity
trigger1 = 1

[State 200, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 251

[State 200, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 252

[State 200, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 253

[state 1,AIturn]
type = turn
trigger1 = roundstate = 2
trigger1 = time = 0
trigger1 = var(30) = 30
trigger1 = P2Dist x <= 0

[State -2]
type = varadd
trigger1 = time = 0
v = 42
value = -70

[State 1110, Fwd]
type = Velset
trigger1 = command = "holdfwd"
x = 2.0

[State 1110, back]
type = Velset
trigger1 = command = "holdback"
x = -2.0

[State 0, 4]
type = afterimagetime
trigger1 = time = 0
time = 0

[state 195,1]
type = varrandom
trigger1 = time = 0
v = 10
range = 0,4

[State snd]
type = PlaySnd
trigger1 = time = 0
value = 3505,var(10)
channel = 0

[State hel]
type = Helper
trigger1 = AnimElemtime(3) = 0
helpertype = Normal
ID = 3550
name = "valman1"
postype = p1
pos = 7,-53
stateno = 3550
size.xscale = 2
size.yscale = 2
ownpal = 1

[State hel]
type = Helper
trigger1 = AnimElemtime(3) = 4
helpertype = Normal
ID = 3551
name = "valman2"
postype = p1
pos = 7,-38
stateno = 3551
size.xscale = 2
size.yscale = 2
ownpal = 1

[State hel]
type = Helper
trigger1 = AnimElemtime(3) = 8
helpertype = Normal
ID = 3552
name = "valman3"
postype = p1
pos = 23,-47
stateno = 3552
size.xscale = 2
size.yscale = 2.5
ownpal = 1

[State hel]
type = Helper
trigger1 = AnimElemtime(3) = 12
helpertype = Normal
ID = 3550
name = "valman1"
postype = p1
pos = 7,-53
stateno = 3550
size.xscale = 2
size.yscale = 2
ownpal = 1

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 54
ctrl = 1

[State 200, 7]
type = ChangeState
triggerall = var(20) = 0
trigger1 = pos y >= 0 && vel y > 0
value = 52
ctrl = 1

[State 200, 7]
type = ChangeState
triggerall = var(20) = 1
trigger1 = pos y >= 0 && vel y > 0
value = 1205
ctrl = 0

;----------------------------------------------------------------
;ヴァルマンウェ(一発目)
[Statedef 3550]
type    = A
movetype= A
physics = N
ctrl = 0
velset = 0,0
anim = 3550
sprpriority = 5

[State afimage]
type = null;AfterImage
trigger1 = time = 0
time = -1
trans = add
length   = 40
timegap  = 1
framegap = 1
PalBright = 10 , 10 , 10
PalContrast = 180 , 180 , 180
PalAdd = 0 , 0 , 0
IgnoreHitPause = 1
Persistent = 1

[State snd]
type = PlaySnd
trigger1 = time = 0
value = 3510,0
channel = 1

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SP
damage = ceil(ifelse(P2MoveType = H,7,15)),0
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 0,1
sparkno = S1500
guard.sparkno = S1500
sparkxy = -10,-10
hitsound = s9,0
guardsound = s1500,0
ground.type = High
ground.slidetime = 1
ground.hittime  = 3
ground.velocity = -8, 0
airguard.velocity = -1.9,.6
air.type = High
air.velocity = -5,0
air.hittime = 3
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
palfx.time = 10
palfx.sinadd = 70,40,0,7
palfx.add = 120,-80,-80
guard.kill = 0

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200, bloody]
type = Helper
trigger1 = movehit = 1
helpertype = Normal
ID = 300
name = "bloody"
postype = p2
stateno = 300
scale = 2.0,2.0
pos = -2,-64
persistent = 0
ownpal = 1

[State 200, bloody]
type = Helper
trigger1 = movehit = 1
helpertype = Normal
ID = 300
name = "bloody"
postype = p2
stateno = 300
scale = 2.0,2.0
pos = 1,-57
persistent = 0
ownpal = 1

[State 200, bloody]
type = Helper
trigger1 = movehit = 1
helpertype = Normal
ID = 300
name = "bloody"
postype = p2
stateno = 300
scale = 2.0,2.0
pos = 2,-60
persistent = 0
ownpal = 1

[State 200, bloody]
type = Helper
trigger1 = movehit = 1
helpertype = Normal
ID = 300
name = "bloody"
postype = p2
stateno = 300
scale = 2.0,2.0
pos = 0,-62
persistent = 0
ownpal = 1

[State ds]
type = DestroySelf
trigger1 = Animtime = 0

;----------------------------------------------------------------
;ヴァルマンウェ(ニ発目)
[Statedef 3551]
type    = A
movetype= A
physics = N
ctrl = 0
velset = 0,0
anim = 3551
sprpriority = 5

[State afimage]
type = null;AfterImage
trigger1 = time = 0
time = -1
trans = add
length   = 40
timegap  = 1
framegap = 1
PalBright = 10 , 10 , 10
PalContrast = 180 , 180 , 180
PalAdd = 0 , 0 , 0
IgnoreHitPause = 1
Persistent = 1

[State snd]
type = PlaySnd
trigger1 = time = 0
value = 3510,0
channel = 1

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SP
damage = ceil(ifelse(P2MoveType = H,7,15)),0
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 0,1
sparkno = S1500
guard.sparkno = S1500
sparkxy = -10,-10
hitsound = s9,0
guardsound = s1500,0
ground.type = High
ground.slidetime = 1
ground.hittime  = 3
ground.velocity = -8, 0
airguard.velocity = -1.9,.6
air.type = High
air.velocity = -5,0
air.hittime = 3
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
palfx.time = 10
palfx.sinadd = 70,40,0,7
palfx.add = 120,-80,-80
guard.kill = 0

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State ds]
type = DestroySelf
trigger1 = Animtime = 0

;----------------------------------------------------------------
;ヴァルマンウェ(三発目)
[Statedef 3552]
type    = A
movetype= A
physics = N
ctrl = 0
velset = 0,0
anim = 3552
sprpriority = 5

[State afimage]
type = null;AfterImage
trigger1 = time = 0
time = -1
trans = add
length   = 40
timegap  = 1
framegap = 1
PalBright = 10 , 10 , 10
PalContrast = 180 , 180 , 180
PalAdd = 0 , 0 , 0
IgnoreHitPause = 1
Persistent = 1

[State snd]
type = PlaySnd
trigger1 = time = 0
value = 3510,0
channel = 1

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SP
damage = ceil(ifelse(P2MoveType = H,7,15)),0
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 0,1
sparkno = S1500
guard.sparkno = S1500
sparkxy = -10,-10
hitsound = s9,0
guardsound = s1500,0
ground.type = High
ground.slidetime = 1
ground.hittime  = 3
ground.velocity = -8, 0
airguard.velocity = -1.9,.6
air.type = High
air.velocity = -5,0
air.hittime = 3
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
palfx.time = 10
palfx.sinadd = 70,40,0,7
palfx.add = 120,-80,-80
guard.kill = 0

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State ds]
type = DestroySelf
trigger1 = Animtime = 0

;----------------------------------------------------------------
;キュウ
[Statedef 3570]
type    = A
movetype= I
physics = N
ctrl = 0
velset = 0,0
anim = 3570
sprpriority = 12

[State turn]
type = turn
trigger1 = time = 0

[State 3200]
type = AngleDraw
trigger1 = 1

[State 3200]
type = Angleset
trigger1 = time = 0
value = 0

[State 3200]
type = Angleadd
trigger1 = time <= 18
value = -2.7

[State vel]
type = VelSet
trigger1 = time = 0
x = 5
y = 1.5

[State vel]
type = Veladd
trigger1 = time = [34,42]
y = -0.1

[State vel]
type = Velset
trigger1 = time = 43
y = 0

[state 200]
type = ParentVarset
trigger1 = var(18) = 1
v = 18
value = 1

[state pvar, valman]
type = ParentVarset
trigger1 = var(17) = 1
v = 17
value = 1

[State hel]
type = Helper
trigger1 = root,var(30) != 30
trigger1 = rootdist x <= 35
trigger2 = root,var(30) = 30
trigger2 = rootdist x <= 0
helpertype = Normal
ID = 3560
name = "valman"
postype = p1
pos = 0,0
stateno = 3560
size.xscale = 2
size.yscale = 2
ownpal = 1
ignorehitpause = 0
persistent = 0

[State 3000]
type = HitOverride
trigger1 = time = 0
attr = SCA,AA,AP
slot = 0
stateno = 3571
time = -1

[State ds]
type = DestroySelf
trigger1 = NumHelper(3560) = 0
trigger1 = frontEdgeBodyDist <= -40

;----------------------------------------------------------------
;キュウ撃破
[Statedef 3571]
type    = A
movetype= I
physics = N
ctrl = 0
velset = 0,0
anim = 3571
sprpriority = 12

[state 195,1]
type = varrandom
trigger1 = time = 0
v = 15
range = 0,64

[State hel]
type = Helper
trigger1 = var(15) = 1
trigger1 = time = 1
helpertype = Normal
ID = 3560
name = "valman"
postype = p1
pos = 0,0
stateno = 3560
size.xscale = 2
size.yscale = 2
ownpal = 1
ignorehitpause = 0
persistent = 0

[State snd]
type = PlaySnd
trigger1 = time = 0
value = 1900,0

[State 7004]
type = Veladd
trigger1 = time = [0,40]
y = -0.08

[state 200]
type = ParentVarset
trigger1 = var(18) = 1
v = 18
value = 1

[state pvar, valman]
type = ParentVarset
trigger1 = var(17) = 1
v = 17
value = 1

[State 7001, 3]
type = DestroySelf
trigger1 = NumHelper(3560) = 0
trigger1 = AnimElemtime(24) >= 0

;----------------------------------------------------------------
;ヴァルマンウェアイテム(出現)
[Statedef 3560]
type    = S
movetype= I
physics = N
ctrl = 0
velset = 0,0
anim = 3560
sprpriority = 10

[State turn]
type = turn
trigger1 = time = 0

[State vel]
type = VelSet
trigger1 = time = 0
y = -2

[State vel]
type = Veladd
trigger1 = time = [7,25]
y = 0.6

[state 4300,2]
type = ChangeState
trigger1 = rootdist x = [-30, 30]
trigger1 = rootdist y = [-5, 86]
value = 3562

[State 200, 7]
type = ChangeState
trigger1 = pos y >= 0 && vel y > 0
value = 3561

;----------------------------------------------------------------
;ヴァルマンウェアイテム(着地)
[Statedef 3561]
type    = S
movetype= I
physics = N
ctrl = 0
velset = 0,0
sprpriority = 10

[State vel]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State pos]
type = posset
trigger1 = 1
y = 0

[state 4300,2]
type = ChangeState
trigger1 = rootdist x = [-30, 30]
trigger1 = rootdist y = [-5, 86]
value = 3562

[State 200, 7]
type = ChangeAnim
trigger1 = time = 100
value = 3561

[State 7001, 3]
type = DestroySelf
trigger1 = Time = 160
trigger2 = frontEdgeBodyDist <= -40
trigger3 = backEdgeBodyDist <= -40

;----------------------------------------------------------------
;ヴァルマンウェアイテム(入手)
[Statedef 3562]
type    = S
movetype= I
physics = N
ctrl = 0
velset = 0,0
anim = 3561
sprpriority = 0

[State snd]
type = playsnd
trigger1 = time = 0
value = 7000,0
channel = 1

[state 200]
type = ParentVarset
trigger1 = time = 0
v = 18
value = 1

[state pvar, valman]
type = ParentVarset
trigger1 = time = 0
v = 17
value = 1

[State ds]
type = DestroySelf
trigger1 = time = 0

;---------------------------------------------------------------------------
;狼へ変身(地上発動)
[Statedef 3600]
type = S
movetype = I
physics = S
anim = 3600
ctrl = 0
sprpriority = 2

[State 200, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 251

[State 200, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 252

[State 200, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 253

[State mp]
type = varadd
triggerall = alive = 1
trigger1 = (GameTime%5) = 0
ignorehitpause = 1
v = 42
value = -10

[State 0, 4]
type = afterimagetime
trigger1 = time = 0
time = 0

[State snd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 6800,0

[State pal]
type = PalFX
trigger1 = AnimElemtime(3) = 0
palcolor = 256
add = 30,30,30
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = AnimElemtime(3) = 1
palcolor = 256
add = 60,60,60
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = AnimElemtime(3) = 2
palcolor = 256
add = 90,90,90
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = AnimElemtime(3) = 3
palcolor = 256
add = 120,120,120
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = AnimElemtime(3) = 4
palcolor = 256
add = 150,150,150
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = AnimElemtime(3) = 5
palcolor = 256
add = 180,180,180
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = AnimElemtime(3) = 6
palcolor = 256
add = 210,210,210
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = AnimElemtime(3) = 7
palcolor = 256
add = 240,240,240
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = AnimElemtime(3) = 8
palcolor = 256
add = 255,255,255
palinvertall = 1
time = 30

[State 1110, back]
type = Velset
trigger1 = pos y >= 0 && vel y > 0
y = 0

[State 1110, back]
type = Velset
trigger1 = ScreenPos Y != [0,239]
trigger1 = p2bodydist Y > 200
y = 1

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 3601

;---------------------------------------------------------------------------
;狼(変身中)
[Statedef 3601]
type = A
movetype = I
physics = N
anim = 3601
ctrl = 0
sprpriority = 2

[State var]
type = varset
trigger1 = time = 0
v = 26
value = 1

[State mp]
type = varadd
triggerall = alive = 1
trigger1 = (GameTime%5) = 0
ignorehitpause = 1
v = 42
value = -10

[State pal]
type = PalFX
trigger1 = time = 0
palcolor = 256
add = 255,255,255
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 1
palcolor = 256
add = 220,220,220
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 2
palcolor = 256
add = 190,190,190
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 3
palcolor = 256
add = 160,160,160
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 4
palcolor = 256
add = 130,130,130
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 5
palcolor = 256
add = 100,100,100
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 6
palcolor = 256
add = 70,70,70
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 7
palcolor = 256
add = 40,40,40
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 8
palcolor = 256
add = 10,10,10
palinvertall = 1
time = 2

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 3602

;---------------------------------------------------------------------------
;狼(変身空中落下中)
[Statedef 3602]
type = A
movetype = I
physics = N
anim = 3602
velset = 0,-2
ctrl = 0
sprpriority = 2

[State 200, 7]
type = ChangeState
trigger1 = var(42) <= 0
trigger2 = win
trigger3 = Lose
value = 3645

[state 1,AIturn]
type = turn
trigger1 = var(30) != 30
trigger1 = command = "holdback"

[state 1,AIturn]
type = turn
trigger1 = roundstate = 2
trigger1 = var(30) = 30
trigger1 = P2Dist x <= 0

[state 3602,gravity]
type = gravity
trigger1 = 1

[State 3602, 1]
type = Velset
trigger1 = time = 0
y = -2

[State snd]
type = PlaySnd
trigger1 = pos y >= 0 && vel y > 0
value = 42,0

[State 7001, 1]
type = ChangeState
trigger1 = command = "sc"
trigger1 = var(42) >= 250
trigger2 = var(30) = 30
trigger2 = p2statetype = A
trigger2 = var(42) >= 250
trigger2 = time >= 0
value = 3631

[State 7001, 1]
type = ChangeState
trigger1 = command = "nidangiri"
trigger1 = var(42) >= 180
trigger2 = var(30) = 30
trigger2 = var(42) >= 250
trigger2 = time >= 0
value = 3625

[State hel]
type = Helper
trigger1 = command = "x" && numhelper(3640) = 0
helpertype = Normal
ID = 3640
name = "voice"
postype = p1
pos = 30,-45
stateno = 3640
size.xscale = 2
size.yscale = 2
ownpal = 1

[State 200, 7]
type = ChangeState
trigger1 = var(30) = 0
trigger1 = command = "b" || command = "changewolf"
trigger2 = var(42) <= 0
trigger3 = win
trigger4 = Lose
value = 3645

[State 200, 7]
type = ChangeState
trigger1 = var(30) = 30
trigger1 = var(42) <= 175
value = 3645

[State 3602, cs]
type = ChangeState
trigger1 = pos y >= 0 && vel y > 0
value = 3610

;---------------------------------------------------------------------------
;狼へ変身(空中発動)
[Statedef 3605]
type = A
movetype = I
physics = N
anim = 3600
velset = 0,0
ctrl = 0
sprpriority = 2

[State 200, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 251

[State 200, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 252

[State 200, cs]
type = RemoveExplod
trigger1 = time = 0
ID = 253

[State mp]
type = varadd
triggerall = alive = 1
trigger1 = (GameTime%5) = 0
ignorehitpause = 1
v = 42
value = -10

[State 0, 4]
type = afterimagetime
trigger1 = time = 0
time = 0

[State snd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 6800,0

[State pal]
type = PalFX
trigger1 = AnimElemtime(3) = 0
palcolor = 256
add = 30,30,30
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = AnimElemtime(3) = 1
palcolor = 256
add = 60,60,60
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = AnimElemtime(3) = 2
palcolor = 256
add = 90,90,90
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = AnimElemtime(3) = 3
palcolor = 256
add = 120,120,120
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = AnimElemtime(3) = 4
palcolor = 256
add = 150,150,150
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = AnimElemtime(3) = 5
palcolor = 256
add = 180,180,180
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = AnimElemtime(3) = 6
palcolor = 256
add = 210,210,210
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = AnimElemtime(3) = 7
palcolor = 256
add = 240,240,240
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = AnimElemtime(3) = 8
palcolor = 256
add = 255,255,255
palinvertall = 1
time = 30

[State 1110, back]
type = Velset
trigger1 = pos y >= 0 && vel y > 0
y = 0

[State 1110, back]
type = Velset
trigger1 = ScreenPos Y != [0,239]
trigger1 = p2bodydist Y > 200
y = 1

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 3601

;---------------------------------------------------------------------------
;狼(変身完了)
[Statedef 3610]
type = S
movetype = I
physics = S
anim = 3610
velset = 0,0
ctrl = 0
sprpriority = 2

[State 3610, ps]
type = posset
trigger1 = pos y >= 0
y = 0

[State mp]
type = varadd
triggerall = alive = 1
trigger1 = (GameTime%5) = 0
ignorehitpause = 1
v = 42
value = -10

[State 3610, back]
type = Velset
trigger1 = ScreenPos Y != [0,239]
trigger1 = p2bodydist Y > 200
y = 3

[State 200, 7]
type = ChangeState
trigger1 = var(30) = 0
trigger1 = command = "b" || command = "changewolf"
trigger2 = var(42) <= 0
trigger3 = win
trigger4 = Lose
value = 3645

[state 1,AIturn]
type = turn
trigger1 = roundstate = 2
trigger1 = var(30) = 30
trigger1 = P2Dist x <= 0

[State 7001, 1]
type = ChangeState
trigger1 = command = "sc"
trigger1 = var(42) >= 250
value = 3631

[State 7001, 1]
type = ChangeState
trigger1 = command = "nidangiri"
trigger1 = var(42) >= 180
value = 3625

[State hel]
type = Helper
trigger1 = command = "x" && numhelper(3640) = 0
helpertype = Normal
ID = 3640
name = "voice"
postype = p1
pos = 30,-45
stateno = 3640
size.xscale = 2
size.yscale = 2
ownpal = 1

[State 7001, 1]
type = ChangeState
trigger1 = command = "holdfwd" && command = "a"
value = 3616

[State 7001, 1]
type = ChangeState
trigger1 = command = "a"
value = 3615

[State 3610, cs]
type = ChangeState
trigger1 = command = "holddown"
value = 3611

[State 3610, cs]
type = ChangeState
trigger1 = command = "holdfwd"
value = 3620

[State 3610, cs]
type = ChangeState
trigger1 = command = "holdback"
value = 3621

[State 200, 7]
type = ChangeState
trigger1 = var(30) = 30
trigger1 = var(42) <= 175
value = 3645

[State 200, 7]
type = ChangeState
trigger1 = time = 150
value = 3614

;---------------------------------------------------------------------------
;狼(しゃがみ開始)
[Statedef 3611]
type    = C
physics = C
anim = 3611
velset = 0,0
ctrl = 0
sprpriority = 2

[State mp]
type = varadd
triggerall = alive = 1
trigger1 = (GameTime%5) = 0
ignorehitpause = 1
v = 42
value = -10

[State 3611,velmul]
type = VelMul
trigger1 = Time = 0
x = .75

[State 200, 7]
type = ChangeState
trigger1 = var(30) = 0
trigger1 = command = "b" || command = "changewolf"
trigger2 = var(42) <= 0
trigger3 = win
trigger4 = Lose
value = 3645

[State 200, 7]
type = ChangeState
trigger1 = var(30) = 30
trigger1 = var(42) <= 175
value = 3645

[State 7001, 1]
type = ChangeState
trigger1 = command = "sc"
trigger1 = var(42) >= 250
value = 3631

[State 7001, 1]
type = ChangeState
trigger1 = command = "nidangiri"
trigger1 = var(42) >= 180
value = 3625

[State hel]
type = Helper
trigger1 = command = "x" && numhelper(3640) = 0
helpertype = Normal
ID = 3640
name = "voice"
postype = p1
pos = 30,-25
stateno = 3641
size.xscale = 2
size.yscale = 2
ownpal = 1

[State 10, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 3612

[State 3610, cs]
type = ChangeState
trigger1 = command != "holddown"
value = 3610

[State 7001, 1]
type = ChangeState
trigger1 = command = "a"
value = 3615

;---------------------------------------------------------------------------
;狼(しゃがみ中)
[Statedef 3612]
type    = C
physics = C
anim = 3614
velset = 0,0
ctrl = 0
sprpriority = 2

[State mp]
type = varadd
triggerall = alive = 1
trigger1 = (GameTime%5) = 0
ignorehitpause = 1
v = 42
value = -10

[State 200, 7]
type = ChangeState
trigger1 = var(30) = 0
trigger1 = command = "b" || command = "changewolf"
trigger2 = var(42) <= 0
trigger3 = win
trigger4 = Lose
value = 3645

[State 200, 7]
type = ChangeState
trigger1 = var(30) = 30
trigger1 = var(42) <= 175
value = 3645

[State 7001, 1]
type = ChangeState
trigger1 = command = "sc"
trigger1 = var(42) >= 250
value = 3631

[State 7001, 1]
type = ChangeState
trigger1 = command = "nidangiri"
trigger1 = var(42) >= 180
value = 3625

[State hel]
type = Helper
trigger1 = command = "x" && numhelper(3640) = 0
helpertype = Normal
ID = 3640
name = "voice"
postype = p1
pos = 30,-25
stateno = 3641
size.xscale = 2
size.yscale = 2
ownpal = 1

[State 3610, cs]
type = ChangeState
trigger1 = command != "holddown"
value = 3613

[State 7001, 1]
type = ChangeState
trigger1 = command = "a"
value = 3615

;---------------------------------------------------------------------------
;狼(しゃがみから立ちへ)
[Statedef 3613]
type    = C
physics = C
anim = 3612
velset = 0,0
ctrl = 0
sprpriority = 2

[State mp]
type = varadd
triggerall = alive = 1
trigger1 = (GameTime%5) = 0
ignorehitpause = 1
v = 42
value = -10

[State 200, 7]
type = ChangeState
trigger1 = var(30) = 0
trigger1 = command = "b" || command = "changewolf"
trigger2 = var(42) <= 0
trigger3 = win
trigger4 = Lose
value = 3645

[State 200, 7]
type = ChangeState
trigger1 = var(30) = 30
trigger1 = var(42) <= 175
value = 3645

[State 7001, 1]
type = ChangeState
trigger1 = command = "sc"
trigger1 = var(42) >= 250
value = 3631

[State 7001, 1]
type = ChangeState
trigger1 = command = "nidangiri"
trigger1 = var(42) >= 180
value = 3625

[State hel]
type = Helper
trigger1 = command = "x" && numhelper(3640) = 0
helpertype = Normal
ID = 3640
name = "voice"
postype = p1
pos = 30,-25
stateno = 3641
size.xscale = 2
size.yscale = 2
ownpal = 1

[State 12, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 3610

[State 7001, 1]
type = ChangeState
trigger1 = command = "a"
value = 3615

;---------------------------------------------------------------------------
;狼(座る)
[Statedef 3614]
type = S
movetype = I
physics = S
anim = 3613
velset = 0,0
ctrl = 0
sprpriority = 2

[State mp]
type = varadd
triggerall = alive = 1
trigger1 = (GameTime%10) = 0
ignorehitpause = 1
v = 42
value = 30

[State 3613, back]
type = Velset
trigger1 = ScreenPos Y != [0,239]
trigger1 = p2bodydist Y > 200
y = 3

[State 200, 7]
type = ChangeState
trigger1 = var(30) = 0
trigger1 = command = "b" || command = "changewolf"
trigger2 = var(42) <= 0
trigger3 = win
trigger4 = Lose
value = 3645

[State 200, 7]
type = ChangeState
trigger1 = var(30) = 30
trigger1 = var(42) <= 175
value = 3645

[State 7001, 1]
type = ChangeState
trigger1 = command = "sc"
trigger1 = var(42) >= 250
value = 3631

[State 7001, 1]
type = ChangeState
trigger1 = command = "nidangiri"
trigger1 = var(42) >= 180
value = 3625

[State hel]
type = Helper
trigger1 = command = "x" && numhelper(3640) = 0
helpertype = Normal
ID = 3640
name = "voice"
postype = p1
pos = 30,-45
stateno = 3640
size.xscale = 2
size.yscale = 2
ownpal = 1

[State 3610, cs]
type = ChangeState
trigger1 = command = "holddown"
value = 3611

[State 3613, cs]
type = ChangeState
trigger1 = command = "holdfwd"
value = 3620

[State 3613, cs]
type = ChangeState
trigger1 = command = "holdback"
value = 3621

[State 7001, 1]
type = ChangeState
trigger1 = command = "a"
value = 3615

;---------------------------------------------------------------------------
;狼(垂直ジャンプ)
[Statedef 3615]
type    = A
movetype = I
physics = N
anim = 3615
velset = 0,-5.2
ctrl = 0
sprpriority = 2

[state 3615,gravity]
type = gravity
trigger1 = AnimElemtime(2) >= 0

[State 3615,velset]
type = velset
trigger1 = time = 0
y = -5.2

[State 3615,veladd]
type = veladd
trigger1 = vel x > 0
x = -0.06

[State 3615,veladd]
type = veladd
trigger1 = vel x < 0
x = 0.06

[State 3615,velset]
type = velset
trigger1 = vel x = [2,-2]
x = 0

[State mp]
type = varadd
triggerall = alive = 1
trigger1 = (GameTime%5) = 0
ignorehitpause = 1
v = 42
value = -10

[State 200, 7]
type = ChangeState
trigger1 = var(30) = 0
trigger1 = command = "b" || command = "changewolf"
trigger2 = var(42) <= 0
trigger3 = win
trigger4 = Lose
value = 3645

[State 200, 7]
type = ChangeState
trigger1 = var(30) = 30
trigger1 = var(42) <= 175
value = 3645

[State 7001, 1]
type = ChangeState
trigger1 = command = "sc"
trigger1 = var(42) >= 250
value = 3631

[State 7001, 1]
type = ChangeState
trigger1 = command = "nidangiri"
trigger1 = var(42) >= 180
value = 3625

[State hel]
type = Helper
trigger1 = command = "x" && numhelper(3640) = 0
helpertype = Normal
ID = 3640
name = "voice"
postype = p1
pos = 30,-45
stateno = 3640
size.xscale = 2
size.yscale = 2
ownpal = 1

[State turn]
type = turn
trigger1 = command = "holdback"

[State 3615, velfwd]
type = velset
trigger1 = command = "holdfwd"
x = 1.5

[State 3615, velback]
type = velset
trigger1 = command = "holdback"
x = -1.5

[State snd]
type = PlaySnd
trigger1 = pos y >= 0 && vel y > 0
value = 42,0

[State 3615, cs]
type = changestate
trigger1 = pos y >= 0 && vel y > 0
value = 3610

;---------------------------------------------------------------------------
;狼(前進ジャンプ)
[Statedef 3616]
type    = A
movetype = I
physics = N
anim = 3616
velset = 2,-5.2
ctrl = 0
sprpriority = 2

[state 3615,gravity]
type = gravity
trigger1 = AnimElemtime(2) >= 0

[State 3615,velset]
type = velset
trigger1 = time = 0
y = -5.2

[State 3615,veladd]
type = veladd
trigger1 = vel x > 0
x = -0.06

[State 3615,veladd]
type = veladd
trigger1 = vel x < 0
x = 0.06

[State 3615,velset]
type = velset
trigger1 = vel x = [2,-2]
x = 0

[State mp]
type = varadd
triggerall = alive = 1
trigger1 = (GameTime%5) = 0
ignorehitpause = 1
v = 42
value = -10

[State 200, 7]
type = ChangeState
trigger1 = var(30) = 0
trigger1 = command = "b" || command = "changewolf"
trigger2 = var(42) <= 0
trigger3 = win
trigger4 = Lose
value = 3645

[State 200, 7]
type = ChangeState
trigger1 = var(30) = 30
trigger1 = var(42) <= 175
value = 3645

[State 7001, 1]
type = ChangeState
trigger1 = command = "sc"
trigger1 = var(42) >= 250
value = 3631

[State 7001, 1]
type = ChangeState
trigger1 = command = "nidangiri"
trigger1 = var(42) >= 180
value = 3625

[State hel]
type = Helper
trigger1 = command = "x" && numhelper(3640) = 0
helpertype = Normal
ID = 3640
name = "voice"
postype = p1
pos = 30,-45
stateno = 3640
size.xscale = 2
size.yscale = 2
ownpal = 1

[State turn]
type = turn
trigger1 = command = "holdback"

[State 3615, velfwd]
type = velset
trigger1 = command = "holdfwd"
x = 2

[State 3615, velback]
type = velset
trigger1 = command = "holdback"
x = -2

[State snd]
type = PlaySnd
trigger1 = pos y >= 0 && vel y > 0
value = 42,0

[State 3615, cs]
type = changestate
trigger1 = pos y >= 0 && vel y > 0
value = 3610

;---------------------------------------------------------------------------
;狼(歩き前進)
[Statedef 3620]
type = S
movetype = I
physics = S
ctrl = 0
velset = 0,0
sprpriority = 2

[State mp]
type = varadd
triggerall = alive = 1
trigger1 = (GameTime%5) = 0
ignorehitpause = 1
v = 42
value = -10

[State turn]
type = turn
trigger1 = command = "holdback"

[State 20, 1]
type = VelSet
trigger1 = command = "holdfwd"
x = 2.0

[State 20, 2]
type = VelSet
trigger1 = command = "holdback"
x = -2.0

[State 200, 7]
type = ChangeState
trigger1 = var(30) = 0
trigger1 = command = "b" || command = "changewolf"
trigger2 = var(42) <= 0
trigger3 = win
trigger4 = Lose
value = 3645

[State 200, 7]
type = ChangeState
trigger1 = var(30) = 30
trigger1 = var(42) <= 175
value = 3645

[State 7001, 1]
type = ChangeState
trigger1 = command = "sc"
trigger1 = var(42) >= 250
value = 3631

[State 7001, 1]
type = ChangeState
trigger1 = command = "nidangiri"
trigger1 = var(42) >= 180
value = 3625

[State hel]
type = Helper
trigger1 = command = "x" && numhelper(3640) = 0
helpertype = Normal
ID = 3640
name = "voice"
postype = p1
pos = 30,-45
stateno = 3640
size.xscale = 2
size.yscale = 2
ownpal = 1

[State 3610, cs]
type = ChangeState
trigger1 = command = "holddown"
value = 3611

[State 20, 3]
type = ChangeAnim
triggerall = command = "holdfwd"
trigger1 = Anim != 3620
value = 3620

[State 7001, 1]
type = ChangeState
trigger1 = command = "a"
value = 3616

[State 3610, cs]
type = ChangeState
trigger1 = command != "holdfwd"
value = 3610

;---------------------------------------------------------------------------
;狼(歩き後退)
[Statedef 3621]
type = S
movetype = I
physics = S
ctrl = 0
velset = 0,0
sprpriority = 2

[State mp]
type = varadd
triggerall = alive = 1
trigger1 = (GameTime%5) = 0
ignorehitpause = 1
v = 42
value = -10

[State turn]
type = turn
trigger1 = command = "holdback"

[State 20, 1]
type = VelSet
trigger1 = command = "holdfwd"
x = 2.0

[State 200, 7]
type = ChangeState
trigger1 = var(30) = 0
trigger1 = command = "b" || command = "changewolf"
trigger2 = var(42) <= 0
trigger3 = win
trigger4 = Lose
value = 3645

[State 200, 7]
type = ChangeState
trigger1 = var(30) = 30
trigger1 = var(42) <= 175
value = 3645

[State 7001, 1]
type = ChangeState
trigger1 = command = "sc"
trigger1 = var(42) >= 250
value = 3631

[State 7001, 1]
type = ChangeState
trigger1 = command = "nidangiri"
trigger1 = var(42) >= 180
value = 3625

[State hel]
type = Helper
trigger1 = command = "x" && numhelper(3640) = 0
helpertype = Normal
ID = 3640
name = "voice"
postype = p1
pos = 30,-45
stateno = 3640
size.xscale = 2
size.yscale = 2
ownpal = 1

[State 3610, cs]
type = ChangeState
trigger1 = command = "holddown"
value = 3611

[State 20, 3]
type = ChangeAnim
triggerall = command = "holdfwd"
trigger1 = Anim != 3620
value = 3620

[State 7001, 1]
type = ChangeState
trigger1 = command = "a"
value = 3616

[State 3610, cs]
type = ChangeState
trigger1 = command != "holdback"
value = 3610

;---------------------------------------------------------------------------
;狼(アクセルチャージ開始)
[Statedef 3625]
type = A
movetype = A
physics = N
anim = 3625
ctrl = 0
;velset = 0,0
sprpriority = 2

[State mp]
type = varadd
triggerall = alive = 1
trigger1 = (GameTime%5) = 0
ignorehitpause = 1
v = 42
value = -10

[State mp]
type = varadd
trigger1 = time = 0
v = 42
value = -180

[state 1,AIturn]
type = turn
trigger1 = roundstate = 2
trigger1 = time = 0
trigger1 = var(30) = 30
trigger1 = P2Dist x <= 0

[State 3625, ps]
type = posset
trigger1 = pos y >= 0
y = 0

[State 3625, snd]
type = PlaySnd
trigger1 = time = 0
value = 3640,0
channel = 0

[State 3625, snd]
type = PlaySnd
trigger1 = time = 0
value = 3645,0

[State 3625, afimage]
type = AfterImage
trigger1 = time = 0
time = -1
trans = add
length   = 9
timegap  = 3
framegap = 2
PalBright = 70 , 70 , 90
PalContrast = 120 , 120 , 120
PalAdd = 0 , 0 , 0
PalMul = 1.1 , 1.1 , 1.3
IgnoreHitPause = 1
Persistent = 1

[State exp, *]
type = Explod
trigger1 = time%2 = 0
trigger1 = pos y >= 0 && vel y >= 0
anim = 1090
ID = 1090
pos = 12,0
postype = p1
vel = -0.5,-0.7
scale = 1.0,1.0
sprpriority = 3
ownpal = 1
removetime = -2
ontop = 1

[State 3625, velset]
type = velset
trigger1 = time = 0
x = 14

[State 200, 7]
type = ChangeState
trigger1 = var(30) = 0
trigger1 = command = "b" || command = "changewolf"
trigger2 = var(42) <= 0
trigger3 = win
trigger4 = Lose
value = 3645

[State 200, 7]
type = ChangeState
trigger1 = FrontEdgeBodyDist <= 6
value = 3629

[State 3625, cs]
type = ChangeState
trigger1 = Animtime = 0
value = 3626

;---------------------------------------------------------------------------
;狼(アクセルチャージ攻撃判定)
[Statedef 3626]
type = A
movetype = A
physics = N
anim = 3626
juggle  = 6
ctrl = 0
;velset = 0,0
sprpriority = 2

;[state 3626,gravity]
;type = gravity
;trigger1 = pos y <= 0

[State 3626, ppush]
type = PlayerPush
trigger1 = 1
value = 0

[State mp]
type = varadd
triggerall = alive = 1
trigger1 = (GameTime%5) = 0
ignorehitpause = 1
v = 42
value = -10

[state 3627,veladd]
type = veladd
trigger1 = pos y <= 1
y = 0.2

[state 3627,velset]
type = velset
trigger1 = pos y >= 0 && vel y >= 0
y = 0

[State 3626, ps]
type = posset
trigger1 = pos y >= 0
y = 0

[State 3626,velset]
type = velset
trigger1 = pos y >= 0 && vel y >= 0
trigger1 = command = "a"
y = -5.2

[State 3625, snd]
type = PlaySnd
trigger1 = time = 0
loop = 1
pan = 1
value = 3645,0
channel = 15

[State 3625, afimage]
type = AfterImage
trigger1 = time = 0
time = -1
trans = add
length   = 9
timegap  = 3
framegap = 2
PalBright = 70 , 70 , 90
PalContrast = 120 , 120 , 120
PalAdd = 0 , 0 , 0
PalMul = 1.1 , 1.1 , 1.3
IgnoreHitPause = 1
Persistent = 1

[State exp, *]
type = Explod
trigger1 = time%3 = 0
trigger1 = pos y >= 0 && vel y >= 0
anim = 1090
ID = 1090
pos = 12,0
postype = p1
vel = -0.5,-0.7
scale = 1.0,1.0
sprpriority = 3
ownpal = 1
removetime = -2
ontop = 1

[State 3625, velset]
type = velset
trigger1 = command != "holdfwd"
x = 14

[State 200]
type = Explod
trigger1 = time = 0
anim = 3630
id = 3630
postype = p1
scale = 2.0,2.0
removetime = -1
bindtime = -1
ownpal = 1
pos = 10, -30
sprpriority = 10
ontop = 1
ownpal = 1

[state 7800,1]
type = varrandom
trigger1 = time = 0
v = 36
range = 0,6

[State 3626, hitdef]
type = HitDef
trigger1 = time%30 = 0
trigger1 = var(36) != 3
attr = S, HA
damage = ceil(ifelse(P2MoveType = H,65,145)),6
animtype = up
air.animtype = up
guardflag = MA
hitflag = MAF
fall = 1
air.fall = 1
priority = 99, Hit
pausetime = 0,1
guard.pausetime = 0,23
sparkno = S1500
guard.sparkno = S1500
sparkxy = -15,-40
hitsound = s3625,0
guardsound = s1500,0
ground.type = high
ground.slidetime = 1
ground.hittime  = 20
ground.velocity = 5,-11
guard.velocity = -5
airguard.velocity = -5,-1.5
air.type = High
air.velocity = 5,-11
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.time = 8
palfx.sinadd = 120,120,-20,4
palfx.add = 150,-100,-100
getpower = 15,50
sprpriority = 1
fall.recover = 0
yaccel = .45
fall.yvelocity = -4
guard.kill = 1

[State 3626, hitdef]
type = HitDef
trigger1 = time%30 = 0
trigger1 = var(36) = 3
attr = S, HA
damage = ceil(ifelse(P2MoveType = H,110,232)),6
animtype = up
air.animtype = up
guardflag = MA
hitflag = MAF
fall = 1
air.fall = 1
priority = 99, Hit
pausetime = 0,6
guard.pausetime = 0,23
sparkno = S1500
guard.sparkno = S1500
sparkxy = -15,-40
hitsound = s3625,0
guardsound = s1500,0
ground.type = high
ground.slidetime = 1
ground.hittime  = 35
ground.velocity = 6.5,-13
guard.velocity = -5
airguard.velocity = -5,-1.5
air.type = High
air.velocity = 6.5,-13
air.hittime = 35
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.time = 16
palfx.sinadd = 120,120,-20,4
palfx.add = 150,-100,-100
getpower = 15,50
sprpriority = 1
fall.recover = 0
yaccel = .45
fall.yvelocity = -4
guard.kill = 1

[State 3625, snd]
type = PlaySnd
trigger1 = MoveHit = 1
value = 3625,1

[State mp]
type = varadd
trigger1 = MoveContact = 1
v = 42
value = -100

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -55
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = MoveHit = 1
trigger1 = var(36) = 3
anim = 1600
id = 1600
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200, 7]
type = ChangeState
trigger1 = var(30) = 0
trigger1 = command = "b" || command = "changewolf"
trigger2 = var(42) <= 0
trigger3 = win
trigger4 = Lose
value = 3645

[State 200, 7]
type = ChangeState
trigger1 = FrontEdgeBodyDist <= 6
value = 3629

[State 3625, cs]
type = ChangeState
trigger1 = time >= 14
trigger1 = command != "holdfwd"
value = 3627

;---------------------------------------------------------------------------
;狼(アクセルチャージ終了)
[Statedef 3627]
type = A
movetype = I
physics = N
anim = 3627
ctrl = 0
;velset = 0,0
sprpriority = 2

[State mp]
type = varadd
triggerall = alive = 1
trigger1 = (GameTime%5) = 0
ignorehitpause = 1
v = 42
value = -10

[state 3627,veladd]
type = veladd
trigger1 = pos y <= 1
y = 0.2

[state 3627,velset]
type = velset
trigger1 = pos y >= 0 && vel y >= 0
y = 0

[State 3627, ps]
type = posset
trigger1 = pos y >= 0
y = 0

[State 3627, afimage]
type = afterimagetime
trigger1 = 1
time = 0

[State 3627,veladd]
type = veladd
trigger1 = vel x > 0
x = -0.3

[State 3627,veladd]
type = veladd
trigger1 = vel x < 0
x = 0.3

[State 3627,velset]
type = velset
trigger1 = vel x = [2,-2]
x = 0

[State 200, 7]
type = ChangeState
trigger1 = var(42) <= 0
trigger2 = win
trigger3 = Lose
value = 3645

[State 3627, cs]
type = ChangeState
trigger1 = pos y >= 0
trigger1 = AnimElemtime(2) >= 2
value = 3628

;---------------------------------------------------------------------------
;狼(アクセルチャージ終了着地)
[Statedef 3628]
type = S
movetype = I
physics = N
anim = 3634
ctrl = 0
sprpriority = 2

[State 3628, ps]
type = posset
trigger1 = 1
y = 0

[State snd]
type = PlaySnd
trigger1 = time = 0
value = 42,0

[State snd]
type = PlaySnd
trigger1 = time = 0
value = 42,0

[State snd]
type = PlaySnd
trigger1 = time = 0
value = 900,0

[State mp]
type = varadd
triggerall = alive = 1
trigger1 = (GameTime%5) = 0
ignorehitpause = 1
v = 42
value = -10

[State 3628, afimage]
type = afterimagetime
trigger1 = 1
time = 0

[State 3628,veladd]
type = veladd
trigger1 = vel x > 0
x = -0.6

[State 3628,veladd]
type = veladd
trigger1 = vel x < 0
x = 0.6

[State 3628,velset]
type = velset
trigger1 = vel x = [2,-2]
x = 0

[State exp, *]
type = Explod
trigger1 = time = 0
anim = 1090
ID = 1090
pos = 9,0
postype = p1
vel = 0,-0.7
scale = 1.0,1.0
sprpriority = 3
ownpal = 1
removetime = -2
ontop = 1

[State exp, *]
type = Explod
trigger1 = time = 2
anim = 1090
ID = 1090
pos = 2,0
postype = p1
vel = 0,-0.7
scale = 1.0,1.0
sprpriority = 3
ownpal = 1
removetime = -2
ontop = 1

[State exp, *]
type = Explod
trigger1 = time = 4
anim = 1090
ID = 1090
pos = -5,0
postype = p1
vel = 0,-0.7
scale = 1.0,1.0
sprpriority = 3
ownpal = 1
removetime = -2
ontop = 1

[State exp, *]
type = Explod
trigger1 = time = 6
anim = 1090
ID = 1090
pos = -12,0
postype = p1
vel = 0,-0.7
scale = 1.0,1.0
sprpriority = 3
ownpal = 1
removetime = -2
ontop = 1

[State exp, *]
type = Explod
trigger1 = time = 8
anim = 1090
ID = 1090
pos = -16,0
postype = p1
vel = 0,-0.7
scale = 1.0,1.0
sprpriority = 3
ownpal = 1
removetime = -2
ontop = 1

[State exp, *]
type = Explod
trigger1 = time = 10
anim = 1090
ID = 1090
pos = -20,0
postype = p1
vel = 0,-0.7
scale = 1.0,1.0
sprpriority = 3
ownpal = 1
removetime = -2
ontop = 1

[State exp, *]
type = Explod
trigger1 = time = 12
anim = 1090
ID = 1090
pos = -24,0
postype = p1
vel = 0,-0.7
scale = 1.0,1.0
sprpriority = 3
ownpal = 1
removetime = -2
ontop = 1

[State 200, 7]
type = ChangeState
trigger1 = var(30) = 0
trigger1 = command = "b" || command = "changewolf"
trigger2 = var(42) <= 0
trigger3 = win
trigger4 = Lose
value = 3645

[State 200, 7]
type = ChangeState
trigger1 = var(30) = 30
trigger1 = var(42) <= 175
value = 3645

[State 3628, cs]
type = ChangeState
trigger1 = Animtime = 0
value = 3612

;---------------------------------------------------------------------------
;狼(アクセルチャージ壁激突)
[Statedef 3629]
type = A
movetype = I
physics = N
anim = 3615
velset = -1.6,-3.8
ctrl = 0
sprpriority = 2

[State life]
type = lifeadd
triggerall = alive = 1
trigger1 = time = 1
value = -60

[State mp]
type = varadd
triggerall = alive = 1
trigger1 = (GameTime%5) = 0
ignorehitpause = 1
v = 42
value = -10

[State 0, 4]
type = afterimagetime
trigger1 = time = 0
time = 0

[State snd]
type = PlaySnd
trigger1 = time = 0
value = 41,0

[State snd]
type = PlaySnd
trigger1 = time = 4
value = 28,0

[State sha]
type = envshake
trigger1 = time = 0
time = 8
freq = 47
ampl = 10
phase = 3

[state 3629,gravity]
type = gravity
trigger1 = 1

[State 3629,velset]
type = velset
trigger1 = time = 0
x = -1.6
y = -3.8

[State hel, kona]
type = Helper
trigger1 = time = 0
helpertype = Normal
ID = 3630
name = "kona"
postype = p1
stateno = 3630
scale = 1.5,1.5
pos = 36,-30
persistent = 0

[State hel, kona]
type = Helper
trigger1 = time = 2
helpertype = Normal
ID = 3630
name = "kona"
postype = p1
stateno = 3630
scale = 1.5,1.5
pos = 30,-30
persistent = 0

[State hel, kona]
type = Helper
trigger1 = time = 3
helpertype = Normal
ID = 3630
name = "kona"
postype = p1
stateno = 3630
scale = 1.5,1.5
pos = 31,-30
persistent = 0

[State hel, kona]
type = Helper
trigger1 = time = 4
helpertype = Normal
ID = 3630
name = "kona"
postype = p1
stateno = 3630
scale = 1.5,1.5
pos = 32,-30
persistent = 0

[State hel, kona]
type = Helper
trigger1 = time = 7
helpertype = Normal
ID = 3630
name = "kona"
postype = p1
stateno = 3630
scale = 1.5,1.5
pos = 37,-30
persistent = 0

[State hel, kona]
type = Helper
trigger1 = time = 9
helpertype = Normal
ID = 3630
name = "kona"
postype = p1
stateno = 3630
scale = 1.5,1.5
pos = 35,-30
persistent = 0

[State hel, kona]
type = Helper
trigger1 = time = 10
helpertype = Normal
ID = 3630
name = "kona"
postype = p1
stateno = 3630
scale = 1.5,1.5
pos = 34,-30
persistent = 0

[State snd]
type = PlaySnd
trigger1 = pos y >= 0 && vel y >= 0
value = 42,0

[State 200, 7]
type = ChangeState
trigger1 = var(42) <= 0
trigger2 = win
trigger3 = Lose
value = 3645

[State 3628, cs]
type = ChangeState
trigger1 = pos y >= 0 && vel y >= 0
value = 3610

;---------------------------------------------------------------
;壁の粉
[Statedef 3630]
type    = A
movetype= I
physics = N
anim = 1216
sprpriority = 4

[State vel]
type = Velset
trigger1 = time = 0
y = -2

[state varran]
type = varrandom
trigger1 = time = 0
v = 13
range = -3,-1

[State vel]
type = Velset
trigger1 = time = 0
x = 0.3+var(13)

[State vel]
type = Veladd
trigger1 = 1
y = .23

[State 7001, 3]
type = DestroySelf
trigger1 = Animtime = 0

;---------------------------------------------------------------------------
;狼(スクリューチャージ開始)
[Statedef 3631]
type = A
movetype = A
physics = N
anim = 3631
ctrl = 0
velset = 0,0
sprpriority = 2

[State mp]
type = varadd
triggerall = alive = 1
trigger1 = (GameTime%5) = 0
ignorehitpause = 1
v = 42
value = -10

[State mp]
type = varadd
trigger1 = time = 0
v = 42
value = -250

[state 1,AIturn]
type = turn
trigger1 = roundstate = 2
trigger1 = time = 0
trigger1 = var(30) = 30
trigger1 = P2Dist x <= 0

[State 3625, ps]
type = velset
trigger1 = 1
x = 0
y = 0

[State 200, 7]
type = ChangeState
trigger1 = var(30) = 0
trigger1 = command = "b" || command = "changewolf"
trigger2 = var(42) <= 0
trigger3 = win
trigger4 = Lose
value = 3645

[State 3625, cs]
type = ChangeState
trigger1 = Animtime = 0
value = 3632

;---------------------------------------------------------------------------
;狼(スクリューチャージ攻撃判定)
[Statedef 3632]
type = A
movetype = A
physics = N
anim = 3632
ctrl = 0
velset = 8,-8
sprpriority = 2

[State sb]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 3200, 1]
type = PlayerPush
trigger1 = 1
value = 0

[State mp]
type = varadd
triggerall = alive = 1
trigger1 = (GameTime%5) = 0
ignorehitpause = 1
v = 42
value = -10

[State 3200, hel]
type = Helper
trigger1 = time = 0
helpertype = Normal
ID = 3633
name = "sce"
postype = p1
pos = 0,0
stateno = 3633
size.xscale = 2.0
size.yscale = 2.0
ownpal = 1

[State 3625, snd]
type = PlaySnd
trigger1 = time = 0
value = 3640,0
channel = 0

[State 3625, snd]
type = PlaySnd
trigger1 = time%13 = 0
value = 3650,0
channel = 3

[State 3625, afimage]
type = AfterImage
trigger1 = time = 0
time = -1
trans = add
length   = 9
timegap  = 2
framegap = 2
PalBright = 50 , 50 , 70
PalContrast = 90 , 90 , 90
PalAdd = 0 , 0 , 0
PalMul = 1.1 , 1.1 , 1.3
IgnoreHitPause = 1
Persistent = 1

[State 7004]
type = AngleDraw
trigger1 = 1

[State 7004]
type = Angleadd
trigger1 = 1
value = -40

[State vel]
type = velset
trigger1 = FrontEdgeBodyDist <= 0
x = -8

[State turn]
type = turn
trigger1 = FrontEdgeBodyDist <= 0

[State vel]
type = velset
trigger1 = ScreenPos Y != [0,239]
y = 8

[State vel]
type = velset
trigger1 = pos y >= -20
y = -8

[State 3200, 1]
type = HitDef
trigger1 = AnimElem = 1
trigger2 = AnimElem = 6
attr = A, HA
damage = ceil(ifelse(P2MoveType = H,51,112)),7
animtype = back
air.animtype = back
guardflag = MA
hitflag = MAF
fall = 1
air.fall = 1
priority = 99, Hit
pausetime = 0,13
guard.pausetime = 0,7
sparkno = S1500
guard.sparkno = S1500
sparkxy = -15,-10
hitsound = s3625,0
guardsound = s1500,0
ground.type = trip
ground.slidetime = 1
ground.hittime  = 50
ground.velocity = -16,-7.6
airguard.velocity = -4,-1.3
guard.velocity = -5
air.type = trip
air.velocity = -16,-7.6
air.hittime = 50
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.time = 8
palfx.sinadd = 120,120,-20,4
palfx.add = 150,-100,-100
getpower = 5,50
sprpriority = 1
fall.recovertime = 80-var(12)*2
p2facing = 1
p2stateno = 6040
yaccel = .45
fall.yvelocity = -4
guard.kill = 1
ID = 3632

[state 3200, targetstate]
type = null;targetstate
trigger1 = movehit = 1
;persistent = 0
;ignorehitpause = 1
value = 6040
ID = 3632

[State 200, 7]
type = ChangeState
trigger1 = var(42) <= 0
trigger2 = win
trigger3 = Lose
value = 3645

[State 3625, cs]
type = ChangeState
trigger1 = time = 200
trigger2 = var(30) != 30
trigger2 = time >= 60
trigger2 = command = "x"
trigger3 = var(30) = 30
trigger3 = time >= 100
trigger3 = command = "x"
value = 3634

;---------------------------------------------------------------------------
;狼(スクリューチャージヘルパー)
[Statedef 3633]
type = A
movetype = I
physics = N
anim = 3633
sprpriority = 4

[State 3633, trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 230,230

[State 3633, afimage]
type = AfterImage
trigger1 = time = 0
time = -1
trans = add
length   = 9
timegap  = 2
framegap = 2
PalBright = 20 , 20 , -40
PalContrast = 40 , 40 , 10
PalAdd = 0 , 0 , 0
PalMul = 1.1 , 1.1 , 0.9
IgnoreHitPause = 1
Persistent = 1

[State 1000, 3]
type = BindToParent
trigger1 = 1
time = -1
facing = 1
pos = 0, 0

[State 7004]
type = AngleDraw
trigger1 = 1

[State 3200]
type = Angleadd
trigger1 = 1
value = -40

[State end]
type = destroyself
trigger1 = time = 200
trigger2 = parent,movetype = H
trigger3 = parent,anim != 3632

;---------------------------------------------------------------------------
;狼(スクリューチャージ終了)
[Statedef 3634]
type = A
movetype = A
physics = N
anim = 3602
ctrl = 0
sprpriority = 2

[State sb]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 3633, afi]
type = afterimagetime
trigger1 = time = 0
time = 0

[State 3633]
type = AngleDraw
trigger1 = 1

[State 3633]
type = Angleset
trigger1 = 1
value = 0

[state 3633,veladd]
type = veladd
trigger1 = pos y <= 1
y = 0.32

[state 3633,velset]
type = velset
trigger1 = pos y >= 0 && vel y >= 0
y = 0

[State 3633, ps]
type = posset
trigger1 = pos y >= 0
y = 0

[State 3633,veladd]
type = veladd
trigger1 = vel x > 0
x = -0.1

[State 3633,veladd]
type = veladd
trigger1 = vel x < 0
x = 0.1

[State 3633,velset]
type = velset
trigger1 = vel x = [2,-2]
x = 0

[State 3633, 7]
type = ChangeState
trigger1 = var(42) <= 0
trigger2 = win
trigger3 = Lose
value = 3645

[State 3633, cs]
type = ChangeState
trigger1 = pos y >= 0
value = 3635

;---------------------------------------------------------------------------
;狼(スクリューチャージ終了着地)
[Statedef 3635]
type = S
movetype = I
physics = N
anim = 3634
ctrl = 0
sprpriority = 2

[State 3628, ps]
type = posset
trigger1 = 1
y = 0

[State snd]
type = PlaySnd
trigger1 = time = 0
value = 42,0

[State snd]
type = PlaySnd
trigger1 = time = 0
value = 42,0

[State mp]
type = varadd
triggerall = alive = 1
trigger1 = (GameTime%5) = 0
ignorehitpause = 1
v = 42
value = -10

[State 3628, afimage]
type = afterimagetime
trigger1 = 1
time = 0

[State 3628,veladd]
type = veladd
trigger1 = vel x > 0
x = -0.6

[State 3628,veladd]
type = veladd
trigger1 = vel x < 0
x = 0.6

[State 3628,velset]
type = velset
trigger1 = vel x = [2,-2]
x = 0

[State exp, *]
type = Explod
trigger1 = time = 0
anim = 1090
ID = 1090
pos = 9,0
postype = p1
vel = 0,-0.7
scale = 1.0,1.0
sprpriority = 3
ownpal = 1
removetime = -2
ontop = 1

[State exp, *]
type = Explod
trigger1 = time = 2
anim = 1090
ID = 1090
pos = 2,0
postype = p1
vel = 0,-0.7
scale = 1.0,1.0
sprpriority = 3
ownpal = 1
removetime = -2
ontop = 1

[State exp, *]
type = Explod
trigger1 = time = 4
anim = 1090
ID = 1090
pos = -5,0
postype = p1
vel = 0,-0.7
scale = 1.0,1.0
sprpriority = 3
ownpal = 1
removetime = -2
ontop = 1

[State exp, *]
type = Explod
trigger1 = time = 6
anim = 1090
ID = 1090
pos = -12,0
postype = p1
vel = 0,-0.7
scale = 1.0,1.0
sprpriority = 3
ownpal = 1
removetime = -2
ontop = 1

[State exp, *]
type = Explod
trigger1 = time = 8
anim = 1090
ID = 1090
pos = -16,0
postype = p1
vel = 0,-0.7
scale = 1.0,1.0
sprpriority = 3
ownpal = 1
removetime = -2
ontop = 1

[State exp, *]
type = Explod
trigger1 = time = 10
anim = 1090
ID = 1090
pos = -20,0
postype = p1
vel = 0,-0.7
scale = 1.0,1.0
sprpriority = 3
ownpal = 1
removetime = -2
ontop = 1

[State exp, *]
type = Explod
trigger1 = time = 12
anim = 1090
ID = 1090
pos = -24,0
postype = p1
vel = 0,-0.7
scale = 1.0,1.0
sprpriority = 3
ownpal = 1
removetime = -2
ontop = 1

[State 200, 7]
type = ChangeState
trigger1 = var(30) = 0
trigger1 = command = "b" || command = "changewolf"
trigger2 = var(42) <= 0
trigger3 = win
trigger4 = Lose
value = 3645

[State 200, 7]
type = ChangeState
trigger1 = var(30) = 30
trigger1 = var(42) <= 175
value = 3645

[State 3628, cs]
type = ChangeState
trigger1 = Animtime = 0
value = 3612

;---------------------------------------------------------------------------
;狼(雄叫び)
[Statedef 3640]
type = A
movetype = A
physics = N
anim = 3640
velset = 0,0
ctrl = 0
sprpriority = 4

[State 1000, 3]
type = BindToParent
trigger1 = 1
time = -1
facing = 1
pos = 34,-42

[State 3640, snd]
type = PlaySnd
trigger1 = time = 0
value = 3640,0
channel = 0

[state 7800,1]
type = varrandom
trigger1 = time = 0
v = 36
range = 0,5

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 3
trigger1 = var(36) != 2
attr = S, NA
damage = ceil(ifelse(P2MoveType = H,10,27)),1
animtype = Light
guardflag = HA
hitflag = MAF
priority = 3, Hit
pausetime = 0, 8
sparkno = S1500
guard.sparkno = S1500
sparkxy = -10,0
hitsound = s3625,0
guardsound = s1500,0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -5.5
airguard.velocity = -1.9,-.6
air.type = High
air.velocity = -2.1,-.2
air.hittime = 12
getpower = 0,0
palfx.time = 10
palfx.sinadd = 70,40,0,7
palfx.add = 120,-80,-80
guard.kill = 0

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 3
trigger1 = var(36) = 2
attr = S, NA
damage = ceil(ifelse(P2MoveType = H,20,55)),1
animtype = Light
guardflag = HA
hitflag = MAF
priority = 3, Hit
pausetime = 0, 1
sparkno = S1500
guard.sparkno = S1500
sparkxy = -10,0
hitsound = s9,0
guardsound = s1500,0
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -7.2
airguard.velocity = -2.1,-.6
air.type = High
air.velocity = -3.0,-.2
air.hittime = 18
getpower = 0,0
palfx.time = 10
palfx.sinadd = 70,40,0,7
palfx.add = 120,-80,-80
guard.kill = 0

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = MoveHit = 1
trigger1 = var(36) = 2
anim = 1600
id = 1600
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 7001, 3]
type = DestroySelf
trigger1 = Animtime = 0
trigger2 = root,anim = 3645
trigger3 = root,stateno = [3611,3613]
trigger4 = root,stateno = [3625,3629]
trigger5 = root,movetype = H

;---------------------------------------------------------------------------
;狼(雄叫び低い位置)
[Statedef 3641]
type = A
movetype = A
physics = N
anim = 3640
velset = 0,0
ctrl = 0
sprpriority = 4

[State 1000, 3]
type = BindToParent
trigger1 = 1
time = -1
facing = 1
pos = 34,-16

[State 3640, snd]
type = PlaySnd
trigger1 = time = 0
value = 3640,0
channel = 0

[state 7800,1]
type = varrandom
trigger1 = time = 0
v = 36
range = 0,5

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 3
trigger1 = var(36) != 2
attr = S, NA
damage = ceil(ifelse(P2MoveType = H,10,27)),1
animtype = Light
guardflag = HA
hitflag = MAF
priority = 3, Hit
pausetime = 0, 8
sparkno = S1500
guard.sparkno = S1500
sparkxy = -10,0
hitsound = s3625,0
guardsound = s1500,0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -5.5
airguard.velocity = -1.9,-.6
air.type = High
air.velocity = -2.1,-.2
air.hittime = 12
getpower = 0,0
palfx.time = 10
palfx.sinadd = 70,40,0,7
palfx.add = 120,-80,-80
guard.kill = 0

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 3
trigger1 = var(36) = 2
attr = S, NA
damage = ceil(ifelse(P2MoveType = H,20,55)),1
animtype = Light
guardflag = HA
hitflag = MAF
priority = 3, Hit
pausetime = 0, 1
sparkno = S1500
guard.sparkno = S1500
sparkxy = -10,0
hitsound = s9,0
guardsound = s1500,0
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -7.2
airguard.velocity = -2.1,-.6
air.type = High
air.velocity = -3.0,-.2
air.hittime = 18
getpower = 0,0
palfx.time = 10
palfx.sinadd = 70,40,0,7
palfx.add = 120,-80,-80
guard.kill = 0

[State 200]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1510
id = 1510
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 200]
type = Explod
trigger1 = MoveHit = 1
trigger1 = var(36) = 2
anim = 1600
id = 1600
postype = p2
scale = 1.0,1.0
vel = 0,-1
facing = ifelse(facing=1,-1,1)
removetime = -2
ownpal = 1
pos = 0, -50
sprpriority = 5
pausemovetime = 9999999
supermovetime = 9999999

[State 7001, 3]
type = DestroySelf
trigger1 = Animtime = 0
trigger2 = root,anim = 3645
trigger3 = root,stateno != [3611,3613]
trigger4 = root,stateno = [3625,3629]
trigger5 = root,movetype = H

;---------------------------------------------------------------------------
;狼変身解除
[Statedef 3645]
type = A
movetype = I
physics = N
anim = 3645
ctrl = 0
sprpriority = 2

[State veladd]
type = Veladd
trigger1 = vel x > 1
x = -.7

[State velset]
type = Velset
trigger1 = vel x = [1,-999]
x = 0

[State 0, 4]
type = afterimagetime
trigger1 = time = 0
time = 0

[State var]
type = varset
trigger1 = time = 0
v = 26
value = 0

[State pal]
type = PalFX
trigger1 = time = 0
palcolor = 256
add = 30,30,30
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 1
palcolor = 256
add = 60,60,60
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 2
palcolor = 256
add = 90,90,90
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 3
palcolor = 256
add = 120,120,120
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 4
palcolor = 256
add = 150,150,150
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 5
palcolor = 256
add = 180,180,180
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 6
palcolor = 256
add = 210,210,210
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 7
palcolor = 256
add = 240,240,240
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 8
palcolor = 256
add = 255,255,255
palinvertall = 1
time = 30

[State velset]
type = Velset
trigger1 = 1
y = 0

[State velset]
type = Velset
trigger1 = ScreenPos Y != [0,239]
trigger1 = p2bodydist Y > 200
y = 1

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 3646

;---------------------------------------------------------------------------
;狼(変身解除中)
[Statedef 3646]
type = A
movetype = I
physics = N
anim = 3646
ctrl = 0
sprpriority = 2

[State 7004]
type = AngleDraw
trigger1 = 1

[State 7004]
type = Angleset
trigger1 = time = 0
value = 0

[State pal]
type = PalFX
trigger1 = time = 0
palcolor = 256
add = 255,255,255
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 1
palcolor = 256
add = 220,220,220
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 2
palcolor = 256
add = 190,190,190
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 3
palcolor = 256
add = 160,160,160
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 4
palcolor = 256
add = 130,130,130
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 5
palcolor = 256
add = 100,100,100
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 6
palcolor = 256
add = 70,70,70
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 7
palcolor = 256
add = 40,40,40
palinvertall = 1
time = 2

[State pal]
type = PalFX
trigger1 = time = 8
palcolor = 256
add = 10,10,10
palinvertall = 1
time = 2

[State 1110, back]
type = Velset
trigger1 = pos y >= 0 && vel y > 0
y = 0

[State 1110, back]
type = Velset
trigger1 = ScreenPos Y != [0,239]
trigger1 = p2bodydist Y > 200
y = 1

[State 200, 7]
type = ChangeState
trigger1 = Animtime = 0
value = 3647

;---------------------------------------------------------------------------
;狼(完全解除空中)
[Statedef 3647]
type = A
movetype = I
physics = A
anim = 3647
velset = 0,-2
ctrl = 0
sprpriority = 2

[State 7019, 00000]
type = AfterImage
trigger1 = time = 0
time = 30
trans = add
length   = 9
timegap  = 3
framegap = 2
PalBright = 40 , 40 , 60
PalContrast = 90 , 90 , 90
PalAdd = 0 , 0 , 0
PalMul = 1.1 , 1.1 , 1.3
IgnoreHitPause = 1
Persistent = 1

[State 1110, 1]
type = Velset
trigger1 = time = 0
y = -2


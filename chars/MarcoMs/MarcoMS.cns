; marco man constants and state file.
; There are comments scattered through this file, so you may like to
; take a look if would like to learn more about the cns.

[Data]
;Amount of life to start with
life = 1000
;attack power (more is stronger)
attack = 100
;defensive power (more is stronger)
defence = 100
;Percentage to increase defense everytime player is knocked down
fall.defence_up = 50
;Time which player lies down for, before getting up
liedown.time = 0;60
;Number of points for juggling
airjuggle = 15
;Default hit spark number for HitDefs
sparkno = 1998
;Default guard spark number
guard.sparkno = 1998
;1 to enable echo on KO
KO.echo = 0
;Volume offset (negative for softer)
volume = 0
;Variables with this index and above will not have their values
;reset to 0 between rounds or matches. There are 60 int variables,
;indexed from 0 to 59, and 40 float variables, indexed from 0 to 39.
;If omitted, then it defaults to 60 and 40 for integer and float
;variables repectively, meaning that none are persistent, i.e. all
;are reset. If you want your variables to persist between matches,
;you need to override state 5900 from common1.cns.
IntPersistIndex = 1;60
FloatPersistIndex = 1;40

[Size]
xscale = 1           ;Horizontal scaling factor.
yscale = 1           ;Vertical scaling factor.
ground.back = 10    ;Player width (back, ground)
ground.front = 10    ;Player width (front, ground)
air.back = 10        ;Player width (back, air)
air.front = 10       ;Player width (front, air)
height = 30         ;Height of player (for opponent to jump over)
attack.dist = 20    ;Default attack distance
proj.attack.dist = 360 ;Default attack distance for projectiles
proj.doscale = 1     ;Set to 1 to scale projectiles too
head.pos = 0, -20 ;Approximate position of head
mid.pos = 0, -10 ;Approximate position of midsection
shadowoffset = 0     ;Number of pixels to vertically offset the shadow
draw.offset = 1,1    ;Player drawing offset in pixels (x, y). Recommended 0,0

[Velocity]
walk.fwd  = 2;9.6      ;Walk forward
walk.back = -2;-8.8     ;Walk backward
run.fwd  = 4, 0   ;Run forward (x, y)
run.back = -81,-15.2 ;Hop backward (x, y)
jump.neu = 0,-33.6   ;Neutral jumping velocity (x, y)
jump.back = -10.2,-33.6 ;Jump back Speed (x, y)
jump.fwd = 10,-33.6     ;Jump forward Speed (x, y)
runjump.back = -10.2,-32.4 ;Running jump speeds (opt)
runjump.fwd = 16,-32.4    ;.
airjump.neu = 0,-32.4     ;.
airjump.back = -10.2      ;Air jump speeds (opt)
airjump.fwd = 10          ;.
air.gethit.groundrecover = -.6,-14    ;Velocity for ground recovery state (x, y) **MUGEN 1.0**
air.gethit.airrecover.mul = .5,.2     ;Multiplier for air recovery velocity (x, y) **MUGEN 1.0**
air.gethit.airrecover.add = 0,-18     ;Velocity offset for air recovery (x, y) **MUGEN 1.0**
air.gethit.airrecover.back = -4       ;Extra x-velocity for holding back during air recovery **MUGEN 1.0**
air.gethit.airrecover.fwd = 0         ;Extra x-velocity for holding forward during air recovery **MUGEN 1.0**
air.gethit.airrecover.up = -8         ;Extra y-velocity for holding up during air recovery **MUGEN 1.0**
air.gethit.airrecover.down = 6        ;Extra y-velocity for holding down during air recovery **MUGEN 1.0**

[Movement]
airjump.num = 1      ;Number of air jumps allowed (opt)
airjump.height = 140 ;Minimum distance from ground before you can air jump (opt)
yaccel = 1.76         ;Vertical acceleration
stand.friction = .85  ;Friction coefficient when standing
crouch.friction = .82 ;Friction coefficient when crouching
stand.friction.threshold = 8          ;If player's speed drops below this threshold while standing, stop his movement **MUGEN 1.0**
crouch.friction.threshold = .2        ;If player's speed drops below this threshold while crouching, stop his movement **MUGEN 1.0**
air.gethit.groundlevel = 100          ;Y-position at which a falling player is considered to hit the ground **MUGEN 1.0**
air.gethit.groundrecover.ground.threshold = -80 ;Y-position below which falling player can use the recovery command **MUGEN 1.0**
air.gethit.groundrecover.groundlevel = 40   ;Y-position at which player in the ground recovery state touches the ground **MUGEN 1.0**
air.gethit.airrecover.threshold = -4  ;Y-velocity above which player may use the air recovery command **MUGEN 1.0**
air.gethit.airrecover.yaccel = 1.4    ;Vertical acceleration for player in the air recovery state **MUGEN 1.0**
air.gethit.trip.groundlevel = 60      ;Y-position at which player in the tripped state touches the ground **MUGEN 1.0**
down.bounce.offset = 0, 80            ;Offset for player bouncing off the ground (x, y) **MUGEN 1.0**
down.bounce.yaccel = 1.6              ;Vertical acceleration for player bouncing off the ground **MUGEN 1.0**
down.bounce.groundlevel = 48          ;Y-position at which player bouncing off the ground touches the ground again **MUGEN 1.0**
down.friction.threshold = .2          ;If the player's speed drops below this threshold while lying down, stop his movement **MUGEN 1.0**

;Default language victory quotes **MUGEN 1.0**
;The default language victory quotes must be implemented in English.
[Quotes]
; Up to 100 victory quotes can be specified per language (victory0 - victory99)
victory1 = "Mission Complete!"
victory2 = "Ha, ha, haah! Do you read me, Tarma? I did some nice work today!"
victory3 = "Ouch! Guess I can't get through this without a scratch..."
victory4 = "Yahoo! Did you see that, Fio? What a wild combo that was!"
victory5 = "Oh, poopy-plops! I spent way too much time on this silly enemy!"
victory6 = "Another job well done.";death battle quotes by wpbcrazy
victory7 = "And that's how it's done."
victory8 = "Come in, HQ. The missions is successful. Proceeding back to base."
victory9 = "Fio, I told you I'm fine. Stop worrying about me."
victory10 = "As long as I stand, no terrorist will win this war...or something like that."
victory11 = "Can't believe I wasted my time with some stupid head.";by genius spirit also from (86 to 96)




victory86 = "Wait a sec, you actually fought against enemy soldiers at one point? Awesome!";(vs. Wonder Woman) 
victory87 = "I can fight in hand-to-hand combat, too, and I still win this round.";(vs. Terry) 
victory88 = "Your up and coming rampage against us humans has officially ended.";(vs. Orochi) 
victory89 = "Hey, don't try to pass off as me when clearly you're just an imposter!";(vs. mirror match Marco) 
victory90 = "Who's worse, you or General FREAKIN' MORDEN?!?";(vs. Lex Luthor) 
victory91 = "Dude, you need to calm down… unless someone did something to piss you off like that BASTARD Morden did me!";(vs. Iori) 
victory92 = "Glad to meet a fellow soldier who served in the military.";(vs. Green Lantern/Ralf)
victory93 = "Me and my comrades have faced even the fastest of foes. You're no exception.";(vs. Flash) 
victory94 = "Me and my team whooped alien ass before. You're no exception!";(vs. Brainiac/Kilowog/Superman/Tomar-Re) 
victory95 = "Not even those powers some celestial magician gave you will save you from this!";(vs. Black Adam/Shazam) 
victory96 = "What's up with the bat thing? Is that suppose to be a gimmick?";(vs. Batman) 
victory97 = "Hey, hey, hey! You'll never be a Slug with equipment like that!";CYBER-WOO
victory98 = "What's going on here? A ninja? ...A real ninja?";NINJA
victory99 = "Bullseyes! Your plans end with me!";MARSPEPLE
;Alternate language victory quotes (optional).
;0 or more alternate language sections may be added, preceded by the
;ISO 639-1 code followed by a ".", e.g. "[ja.Quotes]".
;See language setting in mugen.cfg.

;---------------------------------------------------------------------------
; Variable usage:
; This is a record of the variables that KFM uses. Keeping a record of your
; variable usage helps you avoid careless mistakes later.
; var(1)  - Used in kfm.cmd for combo condition (updated every tick)
; var(2)  - Used in Kung Fu Throw (state 800) to remember if fwd was being
;           held (remembered from state 800 through state 810).


;---------------------------------------------------------------------------
; Lose by Time Over
; CNS difficulty: basic
[Statedef 170]
type = S
ctrl = 0
anim = 5000
velset = 0,0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !animtime
;id = 
;ignorehitpause = 
;persistent = 

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !animtime
value = 5110

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim=5110&&!animtime
value = 5150
;elem = 1
;ignorehitpause = 
;persistent = 

;---------------------------------------------------------------------------
; Win state decider
; CNS difficulty: basic
[Statedef 180]
type = S

[State -3, Marco];WIN MUSIC
type = PlaySnd
trigger1 = Win&&time=0&&matchover
value = 6000, random%6
volumescale = 256
channel = -1

[State 180, 1]
type = ChangeState
trigger1 = Time = 0&&var(10)<100
value = 181

[State 180, 1]
type = ChangeState
trigger1 = Time = 0&&var(10)>=100&&!matchover
value = 182


;---------------------------------------------------------------------------
; Win pose 1 - Chin
; CNS difficulty: basic
[Statedef 181]
type = S
ctrl = 0;anim = 181+ifelse(var(10)>0,1,0)
velset = 0,0
anim = 181+ifelse(var(10)>0&&var(10)!=15&&var(10)!=9&&var(10)!=19&&var(10)!=20,1,0)+ifelse(var(10)=15,2,0)


[State 0, SALUTE]
type = PlaySnd
trigger1 =time=0&&numhelper(21100)&&((palno=6)||(palno=7))
value = 5000,23
volumescale = 128
channel = -1


[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nomusic

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1



[State -3, Marco];youre great!
type = PlaySnd
trigger1 = Win&&time=0&&!matchover&&palno!=11;&&(anim=180||anim=181);stateno=191&&anim=190&&animelem=1,1;Jump land
value = 5010, 4+random%2
volumescale = 256
channel = -1
freqmul = 1.0

[State -3, Marco];youre great! MARSPEOPLE
type = PlaySnd
trigger1 = Win&&time=0&&!matchover&&palno=11;&&(anim=180||anim=181);stateno=191&&anim=190&&animelem=1,1;Jump land
value = 5011, 4+random%2
volumescale = 256
channel = -1
freqmul = 1.0

;[State -3, Marco];Mission Complete
;type = PlaySnd
;triggerall=anim=181+ifelse(var(10)>0,1,0)
;trigger1 = Win&&time=1&&matchover;stateno=191&&anim=190&&animelem=1,1;Jump land
;value = 5010, 10
;volumescale = 256
;channel = -1
;freqmul = 1.0


[State -3, Marco];Mission Complete
type = PlaySnd
triggerall=anim=181+ifelse(var(10)>0,1,0)
trigger1 =Win&&matchover&&time=1&&palno!=11;stateno=191&&anim=190&&animelem=1,1;Jump land
value = 5010, 10+random%2
volumescale = 256
channel = -1
freqmul = 1.0

[State -3, Marco];Mission Complete
type = PlaySnd
triggerall=anim=181+ifelse(var(10)>0,1,0)
trigger1 =Win&&matchover&&time=1&&palno=11;stateno=191&&anim=190&&animelem=1,1;Jump land
value = 5011, 10+random%2
volumescale = 256
channel = -1
freqmul = 1.0

[State 0, destrucciontotal];destrucciontotal
type = RemoveExplod
trigger1 = 1

[State 190, 1]
type = AssertSpecial
trigger1 = matchover&&Time <= 350
flag = RoundNotOver

;---------------------------------------------------------------------------
; Win pose 2 - WithSlugs
; CNS difficulty: basic
[Statedef 182]
type = S
ctrl = 0;anim = 181+ifelse(var(10)>0,1,0)
velset = 0,0


[State 0, ChangeAnim]
type = ChangeAnim
triggerall=var(10)=100
trigger1=time=0
value = 16002

[State 0, ChangeAnim]
type = ChangeAnim
triggerall=var(10)=101
trigger1=time=0
value = 16103

[State 0, ChangeAnim]
type = ChangeAnim
triggerall=var(10)=102
trigger1=time=0
value = 16204


[State 0, ChangeAnim]
type = ChangeAnim
triggerall=var(10)=104
trigger1=time=0
value = 18003

[State 0, ChangeAnim]
type = ChangeAnim
triggerall=var(10)=105
trigger1=time=0
value = 18204

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nomusic

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State -3, Marco];youre great!
type = PlaySnd
trigger1 = Win&&time=0&&!matchover&&palno!=11;&&(anim=180||anim=181);stateno=191&&anim=190&&animelem=1,1;Jump land
value = 5010, 4+random%2
volumescale = 256
channel = -1
freqmul = 1.0

[State -3, Marco];youre great!
type = PlaySnd
trigger1 = Win&&time=0&&!matchover&&palno=11;&&(anim=180||anim=181);stateno=191&&anim=190&&animelem=1,1;Jump land
value = 5011, 4+random%2
volumescale = 256
channel = -1
freqmul = 1.0

[State -3, Marco];Mission Complete
type = PlaySnd
trigger1 =Win&&matchover&&time=0&&palno!=11;stateno=191&&anim=190&&animelem=1,1;Jump land
value = 5010, 10+random%2
volumescale = 256
channel = -1
freqmul = 1.0

[State -3, Marco];Mission Complete
type = PlaySnd
trigger1 =Win&&matchover&&time=0&&palno=11;stateno=191&&anim=190&&animelem=1,1;Jump land
value = 5011, 10+random%2
volumescale = 256
channel = -1
freqmul = 1.0


[State 0, destrucciontotal];destrucciontotal
type = RemoveExplod
trigger1 = 1

[State 190, 1]
type = AssertSpecial
trigger1 = matchover&&Time <= 350;= [0, 120]
flag = RoundNotOver

;--------------------------------------------------------------------------

; Introduction
; CNS difficulty: basic
[Statedef 191]
type = S
ctrl = 0
;anim = 190
velset = 0,0

[State 191, 1] ;Freeze animation until PreIntro is over
type = ChangeAnim
trigger1 = RoundState = 0
value = 190

[State -3, Marco];caching marco! intros
type = PlaySnd
triggerall=palno!=2&&palno!=11
trigger1 = time=0;stateno=191&&anim=190&&animelem=1,1;Jump land
value = 5010, 0+random%2
volumescale = 256
channel = -1
freqmul = 1.0

[State -3, Marco];caching gimlet intros
type = PlaySnd
triggerall=palno=2
trigger1 = time=0;stateno=191&&anim=190&&animelem=1,1;Jump land
value = 5010, 0+(random%2)*52
volumescale = 256
channel = -1
freqmul = 1.0

[State -3, Marco];caching marco! mars people
type = PlaySnd
triggerall=palno=11
trigger1 = time=0;stateno=191&&anim=190&&animelem=1,1;Jump land
value = 5011, 0+random%2
volumescale = 256
channel = -1
freqmul = 1.0


[State 191, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1;RoundState = 0
flag = Intro

[State 191, 3] ;Change to stand state when done
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Taunt
; CNS difficulty: easy
[Statedef 195]
type = S
ctrl = 1
poweradd=-3000
movetype = I
physics = S
sprpriority = 2

[State 0, PlaySnd];BlingSound
type = PlaySnd
trigger1 = time=0;animtime=0;time=0&&power>1000
value = S5000,0
volumescale = 256
channel = -1
freqmul = 1.0
loop = 0
pan = 0

[State 0, VarSet];Sumo A la variable Creditos
type = VarSet
trigger1 = time=0;power>1000;animtime=0;time=0&&power>1000;command="start"&&power>=1000&&var(13)<99
v = 13 
value = var(13)+1

[State 195, 2]
type = ChangeState
trigger1 = time>=1
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Shooting
; CNS difficulty: easy
[Statedef 200]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes
;Commonly-used controllers:
;velset = 0,0                     ;Set velocity (x,y) (Def: no change)
ctrl = 1                         ;Set ctrl (Def: no change)
anim = ifelse(var(10)=0||var(10)=19||var(10)=20,200,8200+ifelse((var(10)=51||var(10)=5||var(10)=3||var(10)=13||var(10)=8||var(10)=16||var(10)=17)&&var(10)!=15,1,0)+ifelse((var(10)=4||var(10)=18||var(10)=7||var(10)=6||var(10)=2||var(10)=12)&&var(10)!=15,2,0)-ifelse(var(10)=9,7989,0))+ifelse((var(10)=10)||(var(10)=11),3,0)+ifelse((var(10)=15),4,0);200                       ;Change animation (Def: no change)
poweradd = 10                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)


[State 200,1 Explod];legs
type = Explod
triggerall=numexplod(2000)=0
trigger1 = stateno=200&&time=1
;trigger2= anim=200||anim=12||anim=12200
anim = 10000
ID = 2000
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 0
scale = 1,1
sprpriority = 2
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 1




[State 0, Helper]
type = Helper
triggerall = var(10)=4
trigger1 = animelem=1
helpertype = normal ;player
name = "RLauncher"
ID = 3000;default helper projectile id
stateno = 254
pos = 8,-25
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 200, 3]
type = ChangeState
trigger1 = command = "holdfwd"
value = 20
ctrl = 1


[State 0, ChangeAnim]
type = ChangeAnim
triggerall=(var(10)=0||var(10)=19||var(10)=20)&&Anim != 5&&anim!=15000&&anim!=15001&&anim!=47&&Anim != 0
trigger1 = anim=200&&animtime=0
value = 15005



;[State 20, 3]
;type = ChangeAnim
;triggerall = command = "holdup"&&anim=!11000;vel x > 0
;trigger1 = Anim = 200&&animtime=0
;value = 11000



[State 200, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Knife1Ground
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 30
ctrl = 0
velset = 0,0
anim = 210+ifelse(var(10)>0&&var(10)!=9&&var(10)!=19&&var(10)!=20&&var(10)!=15,8010,0)+ifelse(var(10)=15,8015,0)
sprpriority = 5

[State 0, Explod];legsStand
type = Explod
triggerall = numexplod(2000)=0&&command!="holdfwd"
trigger1 = stateno=0&&time=1;stateno=0||stateno=12||stateno=11
trigger2 = (anim=0||anim=10||anim=12)&&animelem=1
trigger3=anim=5&&!animtime
trigger4=stateno=210
anim = 10000
ID = 2000
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 0
scale = 1,1
sprpriority = 2
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 1


[State 210, 2]
type = HitDef;sin sangre
triggerall=var(38)=1
trigger1 = animelem=3
attr = S, NA
animtype  = Medium
damage    = ifelse(palno=7,60,30),ifelse(palno=7,30,15)
guardflag = MA
pausetime = 0,0;12,12
sparkno = -1;s3501
sparkxy = 0,-30
hitsound   = s0,0
guardsound = s0,0
ground.type = High
ground.slidetime = 0
ground.hittime  = 0
ground.velocity = 0
air.velocity = 0,0
forcenofall = 1
palfx.time = 3
palfx.add = 248,56,0
p1sprpriority=6


[State 210, 2]
type = HitDef
triggerall=var(38)=0
trigger1 = animelem=3
attr = S, NA
animtype  = Medium
damage    = ifelse(palno=7,60,30),ifelse(palno=7,30,15)
guardflag = MA
pausetime = 0,0;12,12
sparkno = s3501
sparkxy = 0,-30
hitsound   = s0,0
guardsound = s0,0
ground.type = High
ground.slidetime = 0
ground.hittime  = 0
ground.velocity = 0
air.velocity = 0,0
forcenofall = 1
palfx.time = 3
palfx.add = 248,56,0
p1sprpriority=6


[State 0, Offset]
type = Offset
trigger1 =command = "holdfwd";anim=0||anim=200||anim=10003||anim=250
x = 6
y = -6

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;Knife2Ground
[Statedef 211]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 30
ctrl = 0
velset = 0,0
anim = 211+ifelse(var(10)>0&&var(10)!=9&&var(10)!=19&&var(10)!=20&var(10)!=15,8010,0)+ifelse(var(10)=15,8013,0)
sprpriority = 5


[State 0, Offset]
type = Offset
trigger1 =command = "holdfwd";anim=0||anim=200||anim=10003||anim=250
x = 6
y = -6

[State 0, Explod];legsStand
type = Explod
triggerall = numexplod(2000)=0&&command!="holdfwd"
trigger1 = stateno=0&&time=1;stateno=0||stateno=12||stateno=11
trigger2 = (anim=0||anim=10||anim=12)&&animelem=1
trigger3=anim=5&&!animtime
trigger4=stateno=211
anim = 10000
ID = 2000
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 0
scale = 1,1
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 1



[State 211, 2]
type = HitDef
triggerall=var(38)=0
trigger1 = animelem=4
attr = S, NA
animtype  = Medium
damage    = ifelse(palno=7,60,30),ifelse(palno=7,30,15)
guardflag = MA
pausetime = 0,0;12,12
sparkno = s3500
sparkxy = 0,-30
hitsound   = s0,1
guardsound = s0,1
ground.type = High
ground.slidetime = 0
ground.hittime  = 0
ground.velocity = 0
air.velocity = 0,0
forcenofall = 1
palfx.time = 3
palfx.add = 248,56,0
p1sprpriority=6



[State 211, 2];no Blood
type = HitDef
triggerall=var(38)=1
trigger1 = animelem=4
attr = S, NA
animtype  = Medium
damage    = ifelse(palno=7,60,30),ifelse(palno=7,30,15)
guardflag = MA
pausetime = 0,0;12,12
sparkno =-1; s3500
sparkxy = 0,-30
hitsound   = s0,1
guardsound = s0,1
ground.type = High
ground.slidetime = 0
ground.hittime  = 0
ground.velocity = 0
air.velocity = 0,0
forcenofall = 1
palfx.time = 3
palfx.add = 248,56,0
p1sprpriority=6

;[State 210, 4]
;type = SprPriority
;trigger1 = AnimElem = 4
;value = 2

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1



;---------------------------------------------------------------------------
; Knife1Crouch1
[Statedef 212]
type    = C
movetype= A
physics = C
juggle  = 4
poweradd= 30
ctrl = 0
velset = 0,0
anim = 212+ifelse(var(10)>0&&var(10)!=9&&var(10)!=19&&var(10)!=20&&var(10)!=15,8010,0)+ifelse(var(10)=15,8014,0)
sprpriority = 4


[State 210, 2]
type = HitDef
triggerall=var(38)=0
trigger1 = animelem=5
attr = S, NA
animtype  = Medium
damage    = ifelse(palno=7,60,30),ifelse(palno=7,30,15)
guardflag = MA
pausetime = 0,0;12,12
sparkno = s3501;ifelse(var(38)=-1,-1,3501)
sparkxy = 0,-30
hitsound   = s0,0
guardsound = s0,0
ground.type = High
ground.slidetime = 0
ground.hittime  = 0
ground.velocity = 0
air.velocity = 0,0
forcenofall = 1
palfx.time = 3
palfx.add = 248,56,0
p1sprpriority=5


[State 210, 2]
type = HitDef
triggerall=var(38)=1
trigger1 = animelem=5
attr = S, NA
animtype  = Medium
damage    = ifelse(palno=7,60,30),ifelse(palno=7,30,15)
guardflag = MA
pausetime = 0,0;12,12
sparkno = -1;s3501;ifelse(var(38)=-1,-1,3501)
sparkxy = 0,-30
hitsound   = s0,0
guardsound = s0,0
ground.type = High
ground.slidetime = 0
ground.hittime  = 0
ground.velocity = 0
air.velocity = 0,0
forcenofall = 1
palfx.time = 3
palfx.add = 248,56,0
p1sprpriority=5





[State 210, 4]
type = SprPriority
trigger1 = AnimElem = 5
value = 2

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1


;---------------------------------------------------------------------------
; Knife1Crouch2
[Statedef 213]
type    = C
movetype= A
physics = C
juggle  = 4
poweradd= 30
ctrl = 0
velset = 0,0
anim = 213+ifelse(var(10)>0&&var(10)!=9&&var(10)!=19&&var(10)!=20&&var(10)!=15,8010,0)+ifelse(var(10)=15,8014,0)
sprpriority = 4


[State 210, 2]
type = HitDef
triggerall=var(38)=0
trigger1 = animelem=1,1&&var(10)!=15
trigger2=var(10)=15&&animelem=4,1
attr = S, NA
animtype  = Medium
damage    = ifelse(palno=7,60,30),ifelse(palno=7,30,15)
guardflag = MA
pausetime = 0,0;12,12
sparkno = s3500
sparkxy = 0,-30
hitsound   = s0,1
guardsound = s0,1
ground.type = High
ground.slidetime = 0
ground.hittime  = 0
ground.velocity = 0
air.velocity = 0,0
forcenofall = 1
palfx.time = 3
palfx.add = 248,56,0
p1sprpriority=5




[State 210, 2]
type = HitDef
triggerall=var(38)=1
trigger1 = animelem=1,1&&var(10)!=15
trigger2=var(10)=15&&animelem=4,1
attr = S, NA
animtype  = Medium
damage    = ifelse(palno=7,60,30),ifelse(palno=7,30,15)
guardflag = MA
pausetime = 0,0;12,12
sparkno = -1;s3500
sparkxy = 0,-30
hitsound   = s0,1
guardsound = s0,1
ground.type = High
ground.slidetime = 0
ground.hittime  = 0
ground.velocity = 0
air.velocity = 0,0
forcenofall = 1
palfx.time = 3
palfx.add = 248,56,0
p1sprpriority=5





[State 210, 4]
type = SprPriority
trigger1 = AnimElem = 5
value = 2

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;---------------------------------------------------------------------------
;IRONKNUCKLE
[Statedef 214]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= -300
ctrl = 0
velset = 6,0
anim = 300
sprpriority = 5

[State 0, DUSTSLIDE]
type = Explod
trigger1 =time=0
anim = 126
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
bindtime = 1
random = 0,0
removetime = -2
scale = 1,1
ownpal = 1
ontop=1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=0
value = 7,0
channel = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem=1
value = 0,4
channel = -1

[State 210, 2]
type = HitDef
trigger1 = !movecontact
attr = S, NA
animtype  = Medium
damage    = 60,30
guardflag = MA
pausetime = 0,0;12,12
sparkno = -1
sparkxy = -140,-280
hitsound   = s0,3
guardsound = s0,3
ground.type = High
ground.slidetime = 5
ground.hittime  = 5
ground.velocity = -1
air.velocity = 0,0
forcenofall = 1
palfx.time = 3
palfx.add = 248,56,0

[State 0, Helper]
type = Helper
trigger1 = movehit=1
helpertype = normal ;player
name = "Grenade"
ID = 2250
stateno = 301
pos = 0,-25
postype = p2    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime=0
value =0
ctrl = 1


;---------------------------------------------------------------------------
; Standing kick
[Statedef 230]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 11
ctrl = 0
velset = 0,0
anim = 230+ifelse(var(10)>0&&var(10)!=9&&var(10)!=19&&var(10)!=20&&var(10)!=15,8000,0)+ifelse(var(10)=15,8001,0)
sprpriority = 2


[State 230, 2]
type = HitDef
trigger1 = animelem=6,1;Time = 0
attr = S, NA
animtype  = Medium
damage    = 26,13
guardflag = MA
pausetime = 0,0
sparkno = 0
sparkxy = 0,0
hitsound   = s0,2;5,1
guardsound = s0,2
ground.type = Low
ground.slidetime = 0
ground.hittime  = 0
ground.velocity = 0
air.velocity = 0,0
palfx.time = 3
palfx.add = 248,56,0

[State 230, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; CrouchGlove
[Statedef 240]
type    = C
movetype= A
physics = C
juggle  = 4
poweradd= 30
ctrl = 0
velset = 0,0
anim = 240+ifelse(var(10)>0&&var(10)!=9&&var(10)!=19&&var(10)!=20&&var(10)!=15,8000,0)+ifelse(var(10)=15,8001,0)
sprpriority = 4


[State 210, 2]
type = HitDef
trigger1 = animelem=5
attr = S, NA
animtype  = Medium
damage    = 28,14
guardflag = MA
pausetime = 0,0;12,12
sparkno = 1
sparkxy = -40,-280
hitsound   = s0,2
guardsound = s0,2
ground.type = High
ground.slidetime = 0
ground.hittime  = 0
ground.velocity = 0
air.velocity = 0,0
forcenofall = 1
palfx.time = 3
palfx.add = 248,56,0





[State 210, 4]
type = SprPriority
trigger1 = AnimElem = 5
value = 2

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1


;---------------------------------------------------------------------------
; GrenadeThrow
[Statedef 250]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes
;velset = 0,0                     ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = ifelse(var(10)=100,16021,ifelse(var(10)=0||var(10)=9||var(10)=19||var(10)=20,250,8250+(var(10)=15)));200                       ;Change animation (Def: no change)
poweradd = 10                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)



[State 200,1 Explod];legs
type = Explod
triggerall=numexplod(2000)=0
trigger1 = stateno=250
anim = 10000
ID = 2000
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 0
scale = 1,1
sprpriority = 2
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 1

[State 0, Helper]
type = Helper
triggerall = var(17)>0&&var(20)>numhelper(2250)&&var(11)=0&&var(10)!=100&&palno!=7&&var(10)!=15
trigger1 = animelem=1,1;3,1
helpertype = normal ;player
name = "Grenade"
ID = 2250
stateno = 251
pos = 15,-30
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 200, 3]
type = ChangeState
trigger1 = command = "holdfwd"
value = 20
ctrl = 1

[State 200, 3]
type = ChangeState
trigger1 = command = "holddown"
value = 10
ctrl = 1


[State 200, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Grenade Helper
[Statedef 251]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1250
sprpriority = 5
velset = .15+root,vel x,-.15-(root,vel y)/5;5,0

[State 0, ParentVarSet];Le resta a la variable granadas
type = ParentVarSet
triggerall=root,var(17)>0&&!parent,ishelper
trigger1 = time=0
v =  17   ;fv = 
value = root,var(17)-1

[State 0, RemapPal];Smurf Grenade
type = RemapPal
trigger1 =ROOT,PALNO!=8
source = 0,5
dest = 0,5

[State 0, VarSet];valor inicial numero de saltitos +1
type = VarSet
trigger1 = time=0
v = 3    ;fv = 10
value = 1+ifelse(root,palno=5,1,0);2

[State 0, VarSet];numero de saltitos
type = VarSet
trigger1 = time=0
v = 4    ;fv = 10
value = var(3);-1

[State 0, VarSet]
type = VarSet
trigger1 = time=0
fv = 3    ;fv = 10
value = root,vel x

[State 0, VarSet]
type = VarSet
trigger1 = time=0
fv = 4    ;fv = 10
value = root,vel y

[State 0, VarSet]
type = VarSet
trigger1 = time
fv = 5    ;fv = 10
value = fvar(5)+1


[State 0, VarSet]
type = VarSet
trigger1 = pos y>0
fv = 5    ;fv = 
value = 0

[State 1030, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 1030, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 1030, endfromproj]
type = HitOverride
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 252
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 251, HitDef]
type = HitDef
triggerall=parent,stateno!=21034
trigger1 = time = 0
attr = S, SP
animtype  = Hard
damage    = 40,20
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =s4000,4;s4000,1
guardsound = s4000,4;s4000,1;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0

[State 251, HitDef]
type = HitDef
triggerall=parent,stateno=21034&&((parent,var(56)=1)||(parent,var(56)=2))
trigger1 = time = 0
attr = S, SP
animtype  = Hard
damage    = 60,30
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =s4000,4;s4000,1
guardsound = s4000,4;s4000,1;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0

[State 251, HitDef]
type = HitDef
triggerall=parent,stateno=21034&&parent,var(56)!=1&&parent,var(56)!=2
trigger1 = time = 0
attr = S, SP
animtype  = Hard
damage    = 40,20
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =s4000,4;s4000,1
guardsound = s4000,4;s4000,1;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0

[State 0, VarAdd]
type = parentvarset
triggerall=movehit
trigger1 = 1
v =51
value = 1
;ignorehitpause = 
;persistent = 


[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = var(3)>0&&fvar(5)=0;pos y>=0
value = 1250
elem = 1
ignorehitpause = 
persistent = 



[State 2400, 2]
type = Veladd
trigger1 =time<15&&var(3)=var(4);var(3)=1;&&var(3)=1;animelem=6;trigger1 =animtime>35
x=.15;+fvar(3)/8;+fvar(3)
y = -.15;-fvar(4)/8;-.2;-fvar(4)/4;-((vel x)*(vel x)) +1.1*(vel x)+0.02

[State 2400, 2]
type = Veladd
trigger1 =time>15&&var(3)=var(4);var(3)=1;&&var(3)=1;animelem=6;trigger1 =animtime>35
y = .2


[State 0, VarSet]
type = VarSet
trigger1 =fvar(5)=1&&pos y>-1;&&pos y>0;animelem=1,1&&fvar(5)=0
;trigger2 =pos y>=0&&animelem=1,1&&var(3)=var(4)
v = 3
value = var(3)-1

[State 0, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "var3 %d"
params = var(3);,var(13);numexplod,var(22);var(10),vel x
;ignorehitpause = 
;persistent = 

[State 0, VarSet]
type = Velset
trigger1 = pos y>0&&var(3)>0&&fvar(5)=0;animelem=1,1;&&var(5)=0;,1;&&var(3)=0
x = 1;.1   ;fv = 10
y = -1;-.1
;ignorehitpause = 
;persistent = 

[State 2400, 2]
type = Veladd;time<18&&
trigger1 =var(3)>=0&&var(3)!=var(4)&&fvar(5)<15;&&var(3)=1;animelem=6;trigger1 =animtime>35
x=.03;.05;+fvar(3)
y = -.05;-fvar(4)/4;-((vel x)*(vel x)) +1.1*(vel x)+0.02

[State 2400, 2]
type = Veladd
trigger1 =var(3)>=0&&var(3)!=var(4)&&fvar(5)>15;&&pos y<0;&&animtime>3;&&var(3)=1;animelem=6;trigger1 =animtime>35
y = .4;.2
;[State 2400, 2]
;type = Veladd
;trigger1 =time<18&&var(3)>0;&&var(3)=1;animelem=6;trigger1 =animtime>35
;x=.15;+fvar(3)
;y = -.2;-fvar(4)/4;-((vel x)*(vel x)) +1.1*(vel x)+0.02
;
;[State 2400, 2]
;type = Veladd
;trigger1 =time>18&&var(3)>0;&&var(3)=1;animelem=6;trigger1 =animtime>35
;y = .2


;[State 2400, 2];SUBE
;type = Velset
;trigger1 =animtime<18&&var(3)=1;animelem=1;animtime<
;x = 2+fvar(3)
;y =-2.2-fvar(4)/4;-2.2;-2.8
;
;[State 2400, 2]
;type = Velset
;trigger1 =animtime>18&&var(3)=1;animelem=6;trigger1 =animtime>35
;x = 2+fvar(3)
;y = 0
;
;
;[State 211, 1] ; slow descent
;type = VelAdd
;trigger1 =animtime>18&&pos y<0&&var(3)=1;animelem=6
;y = 2.2+fvar(4)/4

;[State 2400, 2];SUBE
;type = Velset
;trigger1 =time<18&&var(3)=0;animelem=1;animtime<
;x = 1+fvar(3)
;y =-1.2;-2.2;-2.8
;
;[State 2400, 2]
;type = Velset
;trigger1 =time>18&&var(3)=0;animelem=6;trigger1 =animtime>35
;x = 1+fvar(3)
;y = 0
;
;
;[State 211, 1] ; slow descent
;type = VelAdd
;trigger1 =time>18&&pos y<0&&var(3)=0;animelem=6
;y = 1.2
;
;[State 0, VarSet]
;type = VarSet
;trigger1 = animelem=1,1
;v = 3
;value = var(3)-1


[State 0, DestroySelf]
type = changestate
triggerall=parent,stateno!=21034
trigger1 = movecontact
trigger2 = pos y>0&&var(3)=0
value = 252


[State 0, DestroySelf]
type = changestate
triggerall=(parent,stateno=21034&&parent,var(56)!=1)
trigger1 = movecontact
trigger2 = pos y>0&&var(3)=0
value = 252

[State 0, DestroySelf]
type = changestate
triggerall=(parent,stateno=21034&&parent,var(56)=1)
trigger1 = movecontact
trigger2 = pos y>0&&var(3)=0
value = 253

;---------------------------------------------------------------------------
;GrenadeExplosion
[Statedef 252]
type    = s                      
movetype= a                      
physics = s
anim = 1251
sprpriority = 4
velset = 0,0

;[State 0, PlaySnd]
;type = PlaySnd
;trigger1 = pos y>0&&var(3)=0
;trigger2= hitover=0
;value = s4000,1
;volume = 255
;channel = 5

[State 0, PlaySnd]
type = PlaySnd
triggerall=prevstateno!=261
trigger1 = time=0
value = s4000,4;s4000,1
volume = 255
channel = 5

[State 0, PlaySnd]
type = PlaySnd
triggerall=prevstateno=261
trigger1 = time=0
value = s4000,1;s4000,1
volume = 255
channel = 5

[State 251, HitDef]
type = HitDef
trigger1 = (animelem=1,1)||(animelem=2,1)||(animelem=3,1)||(animelem=4,1)
trigger2 =(animelem=5,1)||(animelem=6,1)||(animelem=7,1)||(animelem=8,1)
trigger3 =(animelem=9,1)||(animelem=10,1)||(animelem=11,1)||(animelem=12,1)
trigger4 =(animelem=13,1)||(animelem=14,1)||(animelem=15,1)||(animelem=16,1)
trigger5 =(animelem=17,1)||(animelem=18,1)||(animelem=19,1);||(animelem=20,1)
attr = S, SP
animtype  = Hard
damage    = 1,1;5,2
guardflag = MA
pausetime = 0,0
sparkno = -1
sparkxy=0,0
hitsound   =-1;s4000,1
guardsound =-1;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = .9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0
;envshake.time = 8
;envshake.freq = 100

[State 0, VarAdd]
type = parentvarset
triggerall=movehit
trigger1 = 1
v =51
value = 1

[State 1105]
type = destroyself
trigger1 = animtime = 0


;---------------------------------------------------------------------------
;SGrenadeExplosion
[Statedef 253]
type    = s                      
movetype= a                      
physics = s
anim = 1252
sprpriority = 4
velset = 0,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=0
value = s4000,2
volume = 255
channel = 5

[State 251, HitDef]
type = HitDef
trigger1 = (animelem=1,1)||(animelem=2,1)||(animelem=3,1)||(animelem=4,1)
trigger2 =(animelem=5,1)||(animelem=6,1)||(animelem=7,1)||(animelem=8,1)
trigger3 =(animelem=9,1)||(animelem=10,1)||(animelem=11,1)||(animelem=12,1)
trigger4 =(animelem=13,1)||(animelem=14,1)||(animelem=15,1)||(animelem=16,1)
trigger5 =(animelem=17,1)||(animelem=18,1)||(animelem=19,1)||(animelem=20,1)
trigger6 =(animelem=21,1)||(animelem=22,1)||(animelem=23,1);||(animelem=20,1)
attr = S, SP
animtype  = Hard
damage    = 1,1;5,2
guardflag = MA
pausetime = 0,0
sparkno = -1
sparkxy=0,0
hitsound   =-1;s4000,1
guardsound =-1;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = .9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
;envshake.time = 8
;envshake.freq = 100
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0

[State 0, VarAdd]
type = parentvarset
triggerall=movehit
trigger1 = 1
v =51
value = 1

[State 1105]
type = destroyself
trigger1 = animtime = 0


;---------------------------------------------------------------------------
;RLauncher
[Statedef 254]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = ifelse(root,anim=11202,1206,ifelse(root,anim=8603,1207,1204))
sprpriority = 5
velset = ifelse(root,anim=8603,0,5),ifelse(root,anim=8603,15,ifelse(root,anim=11202,-15,0))

[State 0, Helper]
type = Helper
trigger1 = animelem=1,1
helpertype = normal ;player
name = "SmokeTrail"
ID = 515151
stateno = 305
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 0, Trans]
type = Trans
trigger1 = TIME=0
trans =  addalpha
alpha = 0,256


[State 0, SmokeThrow]
type = Helper
trigger1 =time=0
trigger1=root,var(10)=109
helpertype = normal ;player
name = "SmokeThrow"
ID = 414141
stateno = 306
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 0, IronLizard];IronLizard Sounds fiushh corto
type = PlaySnd
trigger1=root,var(10)=109
trigger1=TIME=0
value = 4000,12
volumescale = 256
channel = -1


[State 0, ChangeAnim];LVRLAUNCHERUP
type = ChangeAnim
trigger1 = root,var(10)=109
trigger1 = time=0
trigger1 = numhelper(323132)>0
trigger1 = helper(323132),anim=18753
value = 1206

[State 0, ChangeAnim];LVRLAUNCHERDW
type = ChangeAnim
trigger1 = root,var(10)=109
trigger1 = time=0
trigger1 = numhelper(323132)>0
trigger1 = helper(323132),anim=18754
value = 1207

[State 0, PosSet];LVFWD
type = PosSet
TRIGGERALL=numhelper(323132)>0
trigger1 = root,var(10)=109
trigger1 = time=0
trigger1 = helper(323132),anim=18752
x = (helper(323132),pos x)+40*(root,facing)
y = (helper(323132),pos y) -29

[State 0, PosSet];LVUP
type = PosSet
TRIGGERALL=numhelper(323132)>0
trigger1 = root,var(10)=109
trigger1 = helper(323132),anim=18753
trigger1 = time=0
x = (helper(323132),pos x)+19*(root,facing)
y = (helper(323132),pos y) -62

[State 0, PosSet];LVDW
type = PosSet
TRIGGERALL=numhelper(323132)>0
trigger1 = root,var(10)=109
trigger1 = time=0
trigger1 = helper(323132),anim=18754
x = (helper(323132),pos x)+19*(root,facing)
y = (helper(323132),pos y)


[State 0, VarAdd];la variable 9 se le suma al principio para darle super armor 
type = VarAdd	;al projectil
trigger1 = time=1
v =  9   ;fv = 
value = 1

[State 0, VarAdd];point system for helpers
type = parentvarset
triggerall=movehit
trigger1 = 1
v =51
value = 1


[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=4
trigger1 = time=0
v = 3    ;fv = 10
value = ifelse(parent,anim=11202,3,ifelse(parent,anim=8603,2,1))
ignorehitpause = 
persistent = 

[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=109
triggerall=numhelper(323132)>0
trigger1 = time=0
trigger1 = helper(323132),anim=18754
v = 3    ;fv = 10
value = 2

[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=109
triggerall=numhelper(323132)>0
trigger1 = time=0
trigger1 = helper(323132),anim=18753
v = 3    ;fv = 10
value = 3

;[State 9000, AngleSet]
;type = AngleSet
;triggerall=var(3)=2
;trigger1 = 1
;Value = 270 ;Angle must be given on degrees.
; 
;[State 9000, AngleSet]
;type = AngleSet
;triggerall=var(3)=3
;trigger1 = 1
;Value = 90
;
;[State 9000, AngleDraw]
;type = AngleDraw
;triggerall=var(3)!=-1
;trigger1 = 1

[State 9000, AngleDraw]
type = AngleDraw;triggerall=vel x>vel y&&time>10
trigger1 =vel x>0
value=atan(-vel y/vel x)*180/pi


[State 9000, AngleDraw]
type = AngleDraw;triggerall=vel x>vel y&&time>10
trigger1 =vel x=0&&vel y<0
value=90

[State 9000, AngleDraw]
type = AngleDraw;triggerall=vel x>vel y&&time>10
trigger1 =vel x=0&&vel y>0
value=270

[State 9000, AngleDraw]
type = AngleDraw;triggerall=vel x>vel y&&time>10
trigger1 =vel x<0
value=atan(-vel y/vel x)*180/pi+180


[State 1030, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 1030, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 1030, endfromproj]
type = HitOverride
triggerall=var(9)<2;cuantas veces sera golpeado hasta explotar
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 302
attr = SCA, NP, SP, HP
ignorehitpause = 1


[State 1030, endfromproj]
type = HitOverride
triggerall=var(9)=2
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 302
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 251, HitDef]
type = HitDef
trigger1 = 1;time = 0
attr = S, SP
animtype  = Hard
damage    = 30+(floor((root,palno=5)*(abs(vel x)+abs(vel y))/2)),15
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =s4000,7
guardsound = s4000,7;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0


[State 2400, 2];Avanza
type = Velset
triggerall=var(3)=1
trigger1 =1;animelem=1;animtime<
x = 6
y =0

[State 2400, 2];Baja
type = Velset
triggerall=var(3)=2
trigger1 =1;animelem=1;animtime<
x = 0
y =6

[State 2400, 2];Sube
type = Velset
triggerall=var(3)=3
trigger1 =1;animelem=1;animtime<
x = 0
y =-6

[State 0, PosSet]
type = PosSet
triggerall=root,palno=5
trigger1 = pos y>=-10&&(vel x=0);&&anim=1214
x = random%150
y = -200

[State 0, PosAdd]
type = PosAdd
triggerall=root,palno=5
trigger1 = (pos y<root,pos y-240)&&vel y <0
x = (random%10)
y = (random%10)
;ignorehitpause = 
;persistent = 


[State 0, VarSet]
type = VarSet
trigger1 = (pos y<root,pos y-250)&&vel y <0
v = 3    ;fv = 10
value = -1

[State 0, VelSet]
type = VelSet
trigger1 = var(3)=-1
x = 15
y = 15



[State 0, DestroySelf]
type = changestate
triggerall=root,palno!=5
trigger1 = movecontact
trigger2 = pos y>0
trigger3 = frontedgedist <=-50
trigger4 = (pos y<root,pos y-250)
value = ifelse(var(3)=1,302,ifelse(var(3)=2,304,303))

[State 0, DestroySelf]
type = changestate
triggerall=root,palno=5
trigger1 = movecontact
trigger2 = frontedgedist <=-50
value = ifelse(var(3)=1,302,ifelse(var(3)=2,304,303))

[State 0, DestroySelf]
type = changestate
triggerall=root,palno=5
trigger1 = pos y>=0&&(vel x!=0);&&anim=1214
value = 304

;---------------------------------------------------------------------------


;---------------------------------------------------------------------------
;HMGHELPER
[Statedef 255]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = ifelse(((root,anim=11203)||(root,anim=8604)),1202,ifelse(((root,anim=11006)||(root,anim=11007)),1203,1203))
sprpriority = 5
velset = 10,0

[State 0, VarAdd];la variable 9 se le suma al principio para darle super armor 
type = VarAdd	;al projectil
trigger1 = time=1
v =  9   ;fv = 
value = 1

[State 0, VarAdd];point system for helpers
type = parentvarset
triggerall=movehit
trigger1 = 1
v =51
value = 1

[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=1
triggerall=parent,anim=11203
trigger1 = time=0
v = 3    ;fv = 10
value = 3
ignorehitpause = 
persistent = 

[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=1
triggerall=parent,anim=11006
trigger1 = time=0
v = 3    ;fv = 10
value = ifelse((parent,anim=11006&&root,animelem=1,1),4,ifelse((parent,anim=11006&&root,animelem=2,1),5,6))
ignorehitpause = 
persistent = 


[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=1
triggerall=parent,anim=11007
trigger1 = time=0
v = 3    ;fv = 10
value = ifelse((parent,anim=11007&&root,animelem=1,1),6,ifelse((parent,anim=11007&&root,animelem=2,1),5,4))
ignorehitpause = 
persistent = 

[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=1
triggerall=parent,anim=8604
trigger1 = time=0
v = 3    ;fv = 10
value = 2
ignorehitpause = 
persistent = 


[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=1
triggerall=parent,anim=8605
trigger1 = time=0
v = 3    ;fv = 10
value = ifelse((parent,anim=8605&&root,animelem=1,1),9,ifelse((parent,anim=8605&&root,animelem=2,1),8,7))
ignorehitpause = 
persistent = 


[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=1
triggerall=parent,anim=8606
trigger1 = time=0
v = 3    ;fv = 10
value = ifelse((parent,anim=8606&&root,animelem=1,1),7,ifelse((parent,anim=8606&&root,animelem=2,1),8,9))
ignorehitpause = 
persistent = 
;value = ifelse((parent,anim=8605&&root,animelem=1,1),7,ifelse((parent,anim=8605&&root,animelem=2,1),8,9))

[State 0, VarSet];LVARMORDW
type = VarSet
trigger1 =(root,var(10)=109)&&(parent,anim=18745)
v = 3    ;fv = 10
value = 2


[State 0, VarSet];LVARMORUP
type = VarSet
trigger1 =(root,var(10)=109)&&(parent,anim=18741)
v = 3    ;fv = 10
value = 3




[State 9000, AngleSet]
type = AngleSet
triggerall=var(3)=2
trigger1 = 1
Value = 270 ;Angle must be given on degrees.
 
[State 9000, AngleSet]
type = AngleSet
triggerall=var(3)=3
trigger1 = 1
Value = 90

[State 9000, AngleSet]
type = AngleSet
triggerall=var(3)=4
trigger1 = 1
Value = 25

[State 9000, AngleSet]
type = AngleSet
triggerall=var(3)=5
trigger1 = 1
Value = 45

[State 9000, AngleSet]
type = AngleSet
triggerall=var(3)=6
trigger1 = 1
Value = 75

[State 9000, AngleSet]
type = AngleSet
triggerall=var(3)=7
trigger1 = 1
Value = 295

[State 9000, AngleSet]
type = AngleSet
triggerall=var(3)=8
trigger1 = 1
Value = 315

[State 9000, AngleSet]
type = AngleSet
triggerall=var(3)=9
trigger1 = 1
Value = 345

[State 9000, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 1030, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 1030, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 1030, endfromproj]
type = HitOverride
triggerall=var(9)<2;cuantas veces sera golpeado hasta explotar
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 260
attr = SCA, NP, SP, HP
ignorehitpause = 1


[State 1030, endfromproj]
type = HitOverride
triggerall=var(9)=2
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 253
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 251, HitDef]
type = HitDef
trigger1 = time = 0
attr = S,NA
animtype  = Hard
damage    = 11,6
hitflag=MAFD
guardflag = MAFD
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =s4000,5
guardsound = s4000,6;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0



[State 0, PosSet]
type = PosSet
triggerall = root,var(10)=5&&root,palno=5
trigger1=frontedgebodydist<=0
x = -backedgedist
y = pos y
;ignorehitpause = 
;persistent = 

[State 2400, 2];Avanza
type = Velset
triggerall=var(3)=1
trigger1 =1;animelem=1;animtime<
x = 10
y =0

[State 2400, 2];Baja
type = Velset
triggerall=var(3)=2
trigger1 =1;animelem=1;animtime<
x = 0
y =10

[State 2400, 2];Sube
type = Velset
triggerall=var(3)=3
trigger1 =1;animelem=1;animtime<
x = 0
y =-10

[State 2400, 2];25 grados
type = Velset
triggerall=var(3)=4
trigger1 =1;animelem=1;animtime<
x = 10
y =-5

[State 2400, 2];45 grados
type = Velset
triggerall=var(3)=5
trigger1 =1;animelem=1;animtime<
x = 10
y =-10

[State 2400, 2];75 grados
type = Velset
triggerall=var(3)=6
trigger1 =1;animelem=1;animtime<
x = 2
y =-10

[State 2400, 2];295 grados
type = Velset
triggerall=var(3)=7
trigger1 =1;animelem=1;animtime<
x = 5
y = 10

[State 2400, 2];315 grados
type = Velset
triggerall=var(3)=8
trigger1 =1;animelem=1;animtime<
x = 10
y = 10

[State 2400, 2];345 grados
type = Velset
triggerall=var(3)=9
trigger1 =1;animelem=1;animtime<
x = 10
y = 2

[State 2400, 2];piso
type = Velset
trigger1 =pos y>0
x = 0
y = 0



[State 0, ChangeAnim]
type = CHANGESTATE
trigger1 = pos y>=0
value = 296

[State 0, DestroySelf]
type = changestate
trigger1 = movecontact
trigger2 = anim=1999&&animtime=0
trigger3 = frontedgedist <=-50
trigger4 = (pos y<root,pos y-250)
value=297
;---------------------------------------------------------------------------
;IronLizardLfallingFWD
[Statedef 256]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = ifelse((root,anim=8202)||(root,anim=12204)||(root,anim=8107),1209,ifelse(root,anim=11202,1213,1214));1209
sprpriority = 5
velset = ifelse(root,anim=8603,0,1.5)-ifelse((root,palno=5)&&(root,anim=11202),1.5,0),5-ifelse((root,palno=5)&&(root,anim=11202),5,0);-.1jkjkl

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, SmokeThrow]
type = Helper
trigger1 =time=0
trigger1=root,var(10)=109
helpertype = normal ;player
name = "SmokeThrow"
ID = 414141
stateno = 306
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0



[State 0, IronLizard];IronLizard Sounds fiushh corto
type = PlaySnd
trigger1=root,var(10)=109
trigger1=TIME=0
value = 4000,12
volumescale = 256
channel = -1


[State 0, VelSet];LVVELDW
type = VelSet
trigger1 = root,var(10)=109
trigger1 = numhelper(323132)>0
trigger1 = helper(323132),anim=18754
x = 0
Y = 10

[State 0, ChangeAnim];LVIRONLIZARDUP
type = ChangeAnim
trigger1 = root,var(10)=109
trigger1 = time=0
trigger1 = numhelper(323132)>0
trigger1 = helper(323132),anim=18753
value = 1213

[State 0, ChangeAnim];LVIRONLIZARDDW
type = ChangeAnim
trigger1 = root,var(10)=109
trigger1 = time=0
trigger1 = numhelper(323132)>0
trigger1 = helper(323132),anim=18754
value = 1214

[State 0, ChangeAnim];LVIRONLIZARDFWD
type = ChangeAnim
trigger1 = root,var(10)=109
trigger1 = time=0
trigger1 = numhelper(323132)>0
trigger1 = helper(323132),anim=18752
value = 1209



[State 0, PosSet];LVFWD
type = PosSet
TRIGGERALL=numhelper(323132)>0
trigger1 = root,var(10)=109
trigger1 = time=0
trigger1 = helper(323132),anim=18752
x = (helper(323132),pos x)+40*(root,facing)
y = (helper(323132),pos y) -29

[State 0, PosSet];LVUP
type = PosSet
TRIGGERALL=numhelper(323132)>0
trigger1 = root,var(10)=109
trigger1 = helper(323132),anim=18753
trigger1 = time=0
x = (helper(323132),pos x)+19*(root,facing)
y = (helper(323132),pos y) -62

[State 0, PosSet];LVDW
type = PosSet
TRIGGERALL=numhelper(323132)>0
trigger1 = root,var(10)=109
trigger1 = time=0
trigger1 = helper(323132),anim=18754
x = (helper(323132),pos x)+19*(root,facing)
y = (helper(323132),pos y)



[State 251, HitDef]
type = HitDef
trigger1 = time = 0
attr = S, SP
animtype  = Hard
damage    = 30,15
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =s4000,7
guardsound = s4000,7;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
;envshake.time = 8
;envshake.freq = 100
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0






[State 0, DestroySelf]
type = changestate
trigger1 = movecontact
trigger2 = frontedgedist <=-50
trigger3 = (pos y<root,pos y-250)
value=258


[State 0, ChangeState]
type = changestate;
triggerall=root,palno!=5
triggerall=anim=1214
trigger1 = pos y>=-10
value=258

[State 0, ChangeState]
type = VELSET;
triggerall=root,palno=5
triggerall=anim=1214
trigger1 = pos y>=-10
X=0
Y=0



[State 0, ChangeState]
type = changestate
triggerall=anim=1209||anim=1213
trigger1 = pos y>=-10;pos y>0;animtime=0
value=257

[State 0, ChangeState]
type = changestate
triggerall=root,palno=5
trigger1 = (vel x=0)&&(vel y=0)&&root,command="x"&&ANIM!=1214
trigger2=(root,stateno=1300)&&(abs(floor(rootdist x))<5)
value=257

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;IronLizardLground
[Statedef 257]
type    = S
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1210
sprpriority = 5
velset = 0,0;-.1jkjkl

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, ChangeState]
type = changeanim
trigger1 = anim=1210&&animtime=0
value =1211

[State 0, PlaySnd]
type = PlaySnd
trigger1 = anim=1211&&animelem=5
value =4000,11
volumescale = 256
channel = -1
freqmul = 1.0
loop = 0
pan = 0

[State 0, VelSet]
type = VelSet
triggerall=palno!=5
trigger1 = anim=1211&&(animelem=5||animelem=6)
x = 15
y = 0

[State 0, VelSet]
type = VelSet
triggerall=palno=5
trigger1 = anim=1211&&(animelem=5||animelem=6)&&frontedgedist>20
x = 15
y = 0

[State 0, VelSet]
type = VelSet
triggerall=palno=5
trigger1 = anim=1211&&(animelem=5||animelem=6)&&frontedgedist<20&&pos y>-150
x = 0
y = -15

[State 0, VelSet]
type = VelSet
triggerall=palno=5
trigger1 = anim=1211&&(animelem=5||animelem=6)&&backedgedist>20&&pos y<-150
x = -15
y = 0

[State 0, VelSet]
type = VelSet
triggerall=palno=5
trigger1 = anim=1211&&(animelem=5||animelem=6)&&backedgedist<=20&&pos y<-10
x = 0
y = 15

[State 0, VelSet]
type = VelSet
triggerall=palno=5
trigger1 = anim=1211&&(animelem=5||animelem=6)&&frontedgedist>20&&pos y>=0
x = 15
y = 0

[State 9000, AngleDraw]
type = AngleDraw;triggerall=vel x>vel y&&time>10
triggerall=palno=5&&anim=1211
trigger1 =vel x>0
value=atan(-vel y/vel x)*180/pi


[State 9000, AngleDraw]
type = AngleDraw;triggerall=vel x>vel y&&time>10
triggerall=palno=5&&anim=1211
trigger1 =vel x=0&&vel y<0
value=90

[State 9000, AngleDraw]
type = AngleDraw;triggerall=vel x>vel y&&time>10
triggerall=palno=5&&anim=1211
trigger1 =vel x=0&&vel y>0
value=270

[State 9000, AngleDraw]
type = AngleDraw;triggerall=vel x>vel y&&time>10
triggerall=palno=5&&anim=1211
trigger1 =vel x<0
value=atan(-vel y/vel x)*180/pi+180

[State 251, HitDef]
type = HitDef
trigger1 = time = 0
attr = S, SP
animtype  = Hard
damage    = 30,15
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =s4000,7
guardsound = s4000,7;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
;envshake.time = 8
;envshake.freq = 100
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0


[State 0, DestroySelf]
type = changestate
triggerall=root,palno!=5
trigger1 = movecontact
trigger2 = frontedgedist <=-50
trigger3 = (pos y<root,pos y-250)
value=258

[State 0, DestroySelf]
type = changestate
triggerall=root,palno=5
trigger1 = movecontact
trigger2=root,command="x"&&root,command="holddown"&&root,statetype=A
value=258


[State 0, VelSet]
type = VelSet
triggerall=root,palno=5
trigger1=root,command="x"&&root,command="holdup"&&((abs(vel y+vel x))!=0)
x = 0
y = 0

;[State 0, VelSet]
;type = posset
;triggerall=root,palno=5
;trigger1=root,command="x"&&root,command="holdup"&&(vel y=0)&&(vel x=0)
;x = random%150
;y = random%150


;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
;IronLizardEXPLOSION
[Statedef 258]
type    = s                      
movetype= a                      
physics = s
anim = 1212
sprpriority = 4
velset = ifelse(prevstateno=289,1,0),ifelse(prevstateno=289,-.5,0)

[State 0, RemapPal]
type = RemapPal
trigger1 =(prevstateno=289)
source = 0,19
dest = 19,0


[State 0, RemapPal]
type = RemapPal
trigger1 =var(19)=1
source = 0,19
dest = 19,0

[State 0, RemapPal]
type = RemapPal
trigger1 =(prevstateno=257)
source = 0,19
dest = 0,19


[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=0
value = s4000,10
volume = 255
channel = 5

[State 251, HitDef]
type = HitDef
trigger1 = (animelem=1,1)||(animelem=2,1)||(animelem=3,1)||(animelem=4,1)
trigger2 =(animelem=5,1)||(animelem=6,1)||(animelem=7,1)||(animelem=8,1)
trigger3 =(animelem=9,1)||(animelem=10,1)||(animelem=11,1)||(animelem=12,1)
trigger4 =(animelem=13,1)||(animelem=14,1)||(animelem=15,1)||(animelem=16,1)
trigger5 =(animelem=17,1)||(animelem=18,1)||(animelem=19,1)||(animelem=20,1)
trigger6 =(animelem=21,1)||(animelem=22,1)||(animelem=23,1);||(animelem=20,1)
attr = S, SP
animtype  = Hard
damage    = 1,1;5,2
guardflag = MA
pausetime = 0,0
sparkno = -1
sparkxy=0,0
hitsound   =-1;s4000,1
guardsound =-1;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = .9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
;envshake.time = 8
;envshake.freq = 100
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0

[State 0, VarAdd]
type = parentvarset
triggerall=movehit
trigger1 = 1
v =51
value = 1

[State 1105]
type = destroyself
trigger1 = animtime = 0


;---------------------------------------------------------------------------
;Shotgun
[Statedef 259]
type    = S
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = ifelse((root,palno=5),ifelse(root,anim=11201,1258,ifelse(root,anim=8600,1259,1257)),ifelse(root,anim=11201,1216,ifelse(root,anim=8600,1217,1215)))
sprpriority = 5
velset = 0,0

[State 0, VelSet];LVBINDSPEED
type = VelSet
trigger1 = root,var(10)=109
x = root,vel x
y = root,vel y

[State 0, ChangeAnim];LVSHOTGUNUP
type = ChangeAnim
triggerall=numhelper(323132)>0
triggerall=root,var(10)=109
triggerall=root,palno!=7
trigger1 =time=0
trigger1 =helper(323132),anim=18750
value = 1216

[State 0, ChangeAnim];LVSHOTGUNDW
type = ChangeAnim
triggerall=numhelper(323132)>0
triggerall=root,var(10)=109
triggerall=root,palno!=7
trigger1 =time=0
trigger1 =helper(323132),anim=18751
value = 1217

[State 0, ChangeAnim];LVSHOTGUNFWDNIGHTMARE
type = ChangeAnim
triggerall=numhelper(323132)>0
triggerall=root,var(10)=109
triggerall=root,palno=7
trigger1 =time=0
trigger1 =helper(323132),anim=18749
value = 1257

[State 0, ChangeAnim];LVSHOTGUNUPNIGHTMARE
type = ChangeAnim
triggerall=numhelper(323132)>0
triggerall=root,var(10)=109
triggerall=root,palno=7
trigger1 =time=0
trigger1 =helper(323132),anim=18750
value = 1258

[State 0, ChangeAnim];LVSHOTGUNDWNIGHTMARE
type = ChangeAnim
triggerall=numhelper(323132)>0
triggerall=root,var(10)=109
triggerall=root,palno=7
trigger1 =time=0
trigger1 =helper(323132),anim=18751
value = 1259

[State 0, PosSet];LVFWD
type = PosSet
TRIGGERALL=numhelper(323132)>0
trigger1 = root,var(10)=109
trigger1 = helper(323132),anim=18749
x = (helper(323132),pos x)+40*(root,facing)
y = (helper(323132),pos y) -29

[State 0, PosSet];LVUP
type = PosSet
TRIGGERALL=numhelper(323132)>0
trigger1 = root,var(10)=109
trigger1 = helper(323132),anim=18750
x = (helper(323132),pos x)+19*(root,facing)
y = (helper(323132),pos y) -62

[State 0, PosSet];LVDW
type = PosSet
TRIGGERALL=numhelper(323132)>0
trigger1 = root,var(10)=109
trigger1 = helper(323132),anim=18751
x = (helper(323132),pos x)+19*(root,facing)
y = (helper(323132),pos y)


[State 0, Shotgun];Shotgun Sounds
type = PlaySnd
trigger1 =root,var(10)=109
trigger1=time=0
value = 4000,13
volumescale = 256
channel = 0


[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time=0&&parent,ishelper&&root,anim=8600
value = 1216

;[State 0, BindToRoot]
;type = BindToRoot
;trigger1 = (!parent,ishelper)&&time=0
;time = -1
;facing = 1
;pos = ifelse(root,anim=11201||root,anim=8600,0,ifelse(root,anim=8106,30,20)),ifelse(root,anim=11201,-60,ifelse(root,anim=8600,0,ifelse(root,anim=8106,-10,-20)))



[State 0, PosSet]
type = PosSet
triggerall = parent,ishelper
trigger1=(root,anim=8201)||(root,anim=12202);||root,anim=12202
x = parent,pos x +40*facing
y = parent,pos y

[State 0, PosSet]
type = PosSet
triggerall = parent,ishelper
trigger1=root,anim=8600
x = enemy,pos x
y = 0;enemy,pos y;-150;+40*numhelper(3002);*facing

[State 0, VarAdd];la variable 9 se le suma al principio para darle super armor 
type = VarAdd	;al projectil
trigger1 = time=1
v =  9   ;fv = 
value = 1

[State 0, VarAdd];point system for helpers
type = parentvarset
triggerall=movehit
trigger1 = 1
v =51
value = 1


[State 0, VarSet]
type = VarSet
triggerall=root,palno!=5
trigger1 = time=0
v = 3    ;fv = 10
value = ifelse(root,anim=11201,3,ifelse(root,anim=8600,2,1))
ignorehitpause = 
persistent = 


[State 0, VarSet]
type = VarSet
triggerall=root,palno=5
trigger1 = time=0
v = 3    ;fv = 10
value = (!parent,ishelper)*ifelse(root,anim=11201,3,ifelse(root,anim=8600,2,1))+(parent,ishelper)*ifelse(root,anim=11201,3,ifelse(root,anim=8600,3,1))
ignorehitpause = 
persistent = 

[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=109
triggerall=numhelper(323132)>0
trigger1 = time=0
trigger1 = helper(323132),anim=18751
v = 3    ;fv = 10
value = 2

[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=109
triggerall=numhelper(323132)>0
trigger1 = time=0
trigger1 = helper(323132),anim=18750
v = 3    ;fv = 10
value = 3




[State 9000, AngleSet]
type = AngleSet
triggerall=var(3)=2
trigger1 = 1
Value = 270 ;Angle must be given on degrees.
 
[State 9000, AngleSet]
type = AngleSet
triggerall=var(3)=3
trigger1 = 1
Value = 90

[State 9000, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 1030, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
ignorehitpause = 1


[State 1030, endfromproj]
type = HitOverride
triggerall=var(9)<2;cuantas veces sera golpeado hasta explotar
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 260
attr = SCA, NP, SP, HP
ignorehitpause = 1


[State 1030, endfromproj]
type = HitOverride
triggerall=var(9)=2
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 253
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 251, HitDef]
type = HitDef
triggerall=root,var(10)=3
trigger1 = time = 0
attr = S, SP
animtype  = Hard
damage    = 90+(floor(45*((45/(abs(root,pos x-enemynear,pos x)))))),45+(floor(20*((20/(abs(root,pos x-enemynear,pos x))))))
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =-1;s4000,2
guardsound = -1;s4000,2;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 3
;guard.sparkno; = S449
ground.hittime  =0;15
ground.velocity = -10
air.juggle = 0
air.velocity = -10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0

[State 251, HitDef]
type = HitDef
triggerall=root,var(10)=109
trigger1 = time = 0
attr = S, SP
animtype  = Hard
damage    = 90+(floor(45*(45/(abs(root,pos x-enemynear,pos x))))),45+(floor(20*(20/(abs(root,pos x-enemynear,pos x)))))
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =-1;s4000,2
guardsound = -1;s4000,2;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 3
;guard.sparkno; = S449
ground.hittime  =0;15
ground.velocity = -10
air.juggle = 0
air.velocity = -10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0


[State 251, HitDef]
type = HitDef
triggerall=root,var(10)=51
trigger1 = time = 0
attr = S, na
animtype  = light
damage    = 10+(floor(5*(5/(abs(root,pos x-enemynear,pos x))))),5+(floor(2*(2/(abs(root,pos x-enemynear,pos x)))))
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =-1;s4000,2
guardsound = -1;s4000,2;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 3
;guard.sparkno; = S449
ground.hittime  =0;15
ground.velocity = -10
air.juggle = 0
air.velocity = -10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0


[State 0, EnvColor]
type = EnvColor
triggerall=root,palno!=2
trigger1 = time=0;animelem=4
value = 255,255,255
time = 1

[State 0, Shotgun];numhelper(3002)=0
type = Helper
triggerall = root,palno=5&&(ifelse(root,anim=8600,!parent,ishelper,root,anim=11201&&numhelper(3001)<3*numhelper(3000)))
trigger1=time=0
helpertype = normal ;player
name = "Shotgun"
ID = 3001+(root,anim=8600)
stateno = 259
pos = ifelse(root,anim=11201,0,ifelse(root,anim=8600,enemy,pos x,20)),ifelse(root,anim=11201,-60,ifelse(root,anim=8600,0,-20))
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 0, DestroySelf]
type = destroyself
trigger1 = animtime=0
;---------------------------------------------------------------------------


;---------------------------------------------------------------------------
;SGrenade Helper
[Statedef 260]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1205
sprpriority = 5
velset = 8,0


[State 0, PosSet];LVFWD
type = PosSet
TRIGGERALL=numhelper(323132)>0
TRIGGERALL=TIME=0
trigger1 = root,var(10)=109
trigger1 = helper(323132),anim=18749
x = (helper(323132),pos x)+40*(root,facing)
y = (helper(323132),pos y) -29

[State 0, PosSet];LVUP
type = PosSet
TRIGGERALL=numhelper(323132)>0
TRIGGERALL=TIME=0
trigger1 = root,var(10)=109
trigger1 = helper(323132),anim=18750
x = (helper(323132),pos x)+19*(root,facing)
y = (helper(323132),pos y) -62

[State 0, PosSet];LVDW
type = PosSet
TRIGGERALL=numhelper(323132)>0
TRIGGERALL=TIME=0
trigger1 = root,var(10)=109
trigger1 = helper(323132),anim=18751
x = (helper(323132),pos x)+19*(root,facing)
y = (helper(323132),pos y)


[State 0, FLAME];SGRENADE Sounds
type = PlaySnd
trigger1 =root,var(10)=109
trigger1=time=0
value = 4000,3
volumescale = 256
channel = 0


[State 0, VarAdd];la variable 9 se le suma al principio para darle super armor 
type = VarAdd	;al projectil
trigger1 = time=1
v =  9   ;fv = 
value = 1

[State 0, VarAdd];point system for helpers
type = parentvarset
triggerall=movehit
trigger1 = 1
v =51
value = 1


[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=109
triggerall=numhelper(323132)>0
trigger1 = time=0
trigger1 = helper(323132),anim=18751
v = 3    ;fv = 10
value = 2

[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=109
triggerall=numhelper(323132)>0
trigger1 = time=0
trigger1 = helper(323132),anim=18750
v = 3    ;fv = 10
value = 3

;[State 0, ParentVarSet]
;type = ParentVarSet
;triggerall=root,var(17)>0
;trigger1 = time=0
;v =  17   ;fv = 
;value = root,var(17)-1
;ignorehitpause = 
;persistent = 

[State 0, VarSet]
type = VarSet
triggerall=root,palno=5&&((root,var(10)=0)||(root,var(10)=19)||(root,var(10)=20))
trigger1 = time=0
v = 3    ;fv = 10
value = ifelse(parent,anim=11200,3,ifelse(parent,anim=600,2,1))

[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=5
trigger1 = time=0
v = 3    ;fv = 10
value = ifelse(parent,anim=11201,3,ifelse(parent,anim=8600,2,1))


[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=5&&root,palno=5
trigger1 = pos y<root,pos y - 300
v = 3    ;fv = 10
value = 2

[State 0, PosSet]
type = PosSet
triggerall=root,var(10)=5&&root,palno=5
trigger1 = pos y<root,pos y - 300
x = enemy,pos x
y = pos y
;ignorehitpause = 
;persistent = 

[State 9000, AngleSet]
type = AngleSet
triggerall=var(3)=2
trigger1 = 1
Value = 270 ;Angle must be given on degrees.
 
[State 9000, AngleSet]
type = AngleSet
triggerall=var(3)=3
trigger1 = 1
Value = 90

[State 9000, AngleDraw]
type = AngleDraw
trigger1 = 1
;FVar(0)*2pi ;Angle must be given on degrees.

;[State 0, VarSet]
;type = VarSet
;trigger1 = time=0
;fv = 3    ;fv = 10
;value = root,vel x

;[State 0, VarSet]
;type = VarSet
;trigger1 = time=0
;fv = 4    ;fv = 10
;value = root,vel y

[State 0, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "vel x = %d "
params = vel x
;ignorehitpause = 
;persistent = 



[State 1030, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 1030, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 1030, endfromproj]
type = HitOverride
triggerall=var(9)<2;cuantas veces sera golpeado hasta explotar
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 260
attr = SCA, NP, SP, HP
ignorehitpause = 1


[State 1030, endfromproj]
type = HitOverride
triggerall=var(9)=2
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 253
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 251, HitDef]
type = HitDef
trigger1 = 1
attr = S, SP
animtype  = Hard
damage    = 50+floor((abs(vel x)+abs(vel y))*(root,palno=5)),25+floor((abs(vel x)+abs(vel y))*(root,palno=5))
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =s4000,2
guardsound = s4000,2;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = .4*time*(root,palno=5);5
;guard.sparkno; = S449
ground.hittime  = .4*time*(root,palno=5);15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = (8+abs(vel x)/100)*(root,palno=5)
envshake.freq = (100+abs(vel x/2))*(root,palno=5)
envshake.ampl = ifelse(vel x>1000,100*(root,palno=5),10*(root,palno=5))
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0



;[State 0, PlaySnd]
;type = PlaySnd
;trigger1 = movehit=1
;value = s4000,1
;volume = 255
;channel = 5

;[State 0, PlaySnd]
;type = PlaySnd
;trigger1 = pos y>0&&var(3)=2
;value = s4000,2
;volume = 255
;channel = 5

[State 0, PosSet]
type = PosSet
triggerall = root,var(10)=5&&root,palno=5
trigger1=frontedgebodydist<=0
x = -backedgedist*facing
y = pos y
;ignorehitpause = 
;persistent = 

[State 2400, 2];Avanza
type = Velset
triggerall=var(3)=1
trigger1 =1;animelem=1;animtime<
x = 8+.4*time*(root,palno=5)*(root,var(10)=5)
y =0

[State 2400, 2];Baja
type = Velset
triggerall=var(3)=2
trigger1 =1;animelem=1;animtime<
x = 0
y =8+.4*time*(root,palno=5)*(root,var(10)=5)

[State 2400, 2];Sube
type = Velset
triggerall=var(3)=3
trigger1 =1;animelem=1;animtime<
x = 0
y =-8-.4*time*(root,palno=5)*(root,var(10)=5)


[State 0, Helper]
type = Helper
trigger1 = pos y >0&&root,palno=5&&root,var(10)=5&&((root,anim=8600)||(root,anim=8602))
helpertype = normal ;player
name = "EXPLOSIONS?"
ID = 151312321
stateno = 253
pos = 50,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0


[State 0, Helper]
type = Helper
trigger1 = pos y >0&&root,palno=5&&root,var(10)=5&&((root,anim=8600)||(root,anim=8602))
helpertype = normal ;player
name = "EXPLOSIONS?"
ID = 151312321
stateno = 253
pos = -50,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0


[State 0, DestroySelf]
type = changestate
trigger1 = movecontact
trigger2 = pos y>0
trigger3 = frontedgedist <=-50&&root,var(10)!=5
trigger4 = frontedgedist <=-50&&root,var(10)=5&&root,palno!=5
trigger5 = (pos y<root,pos y-250)&&root,var(10)!=5
trigger6 = (pos y<root,pos y-250)&&root,var(10)=5&&root,palno!=5
value = ifelse(vel x>1100,15006,253)
;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
;Dropshot Helper
[Statedef 261]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1218
sprpriority = 5
velset = ifelse(root,anim=8603,0,.15+root,vel x),.15+(root,vel y)/5;5,0

[State 0, SmokeThrow]
type = Helper
trigger1 =time=0
trigger1=root,var(10)=109
helpertype = normal ;player
name = "SmokeThrow"
ID = 414141
stateno = 306
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 0, IronLizard];IronLizard Sounds fiushh corto
type = PlaySnd
trigger1=root,var(10)=109
trigger1=TIME=0
value = 4000,12
volumescale = 256
channel = -1

[State 0, PosSet];LVFWD
type = PosSet
TRIGGERALL=numhelper(323132)>0
trigger1 = root,var(10)=109
trigger1 = time=0
trigger1 = helper(323132),anim=18752
x = (helper(323132),pos x)+40*(root,facing)
y = (helper(323132),pos y) -29

[State 0, PosSet];LVUP
type = PosSet
TRIGGERALL=numhelper(323132)>0
trigger1 = root,var(10)=109
trigger1 = helper(323132),anim=18753
trigger1 = time=0
x = (helper(323132),pos x)+19*(root,facing)
y = (helper(323132),pos y) -62

[State 0, PosSet];LVDW
type = PosSet
TRIGGERALL=numhelper(323132)>0
trigger1 = root,var(10)=109
trigger1 = time=0
trigger1 = helper(323132),anim=18754
x = (helper(323132),pos x)+19*(root,facing)
y = (helper(323132),pos y)



[State 0, VarSet];valor inicial numero de saltitos +1
type = VarSet
trigger1 = time=0
v = 3    ;fv = 10
value = 3;+ifelse(root,palno=5,1,0);2

[State 0, VarSet];numero de saltitos
type = VarSet
trigger1 = time=0
v = 4    ;fv = 10
value = var(3);-1

[State 0, VarSet]
type = VarSet
trigger1 = time=0
fv = 3    ;fv = 10
value = root,vel x

[State 0, VarSet]
type = VarSet
trigger1 = time=0
fv = 4    ;fv = 10
value = root,vel y

[State 0, VarSet]
type = VarSet
trigger1 = time
fv = 5    ;fv = 10
value = fvar(5)+1


[State 0, VarSet]
type = VarSet
trigger1 = pos y>0
fv = 5    ;fv = 
value = 0

[State 1030, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 1030, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 1030, endfromproj]
type = HitOverride
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 252
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 251, HitDef]
type = HitDef
trigger1 = time = 0
attr = S, SP
animtype  = Hard
damage    = 28,14
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =s4000,4;s4000,1
guardsound = s4000,4;s4000,1;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1

ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 8
envshake.freq = 100
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0


;[State 0, PlaySnd]
;type = PlaySnd
;trigger1 = movehit=1
;value = s4000,1
;volume = 255
;channel = 5

[State 0, VarAdd]
type = parentvarset
triggerall=movehit
trigger1 = 1
v =51
value = 1
;ignorehitpause = 
;persistent = 


[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = var(3)>0&&fvar(5)=0;pos y>=0
;trigger2=pos y>=0
value = 1218
;elem = 1
;ignorehitpause = 
;persistent = 



[State 2400, 2]
type = Veladd
trigger1 =time<4&&var(3)=var(4);var(3)=1;&&var(3)=1;animelem=6;trigger1 =animtime>35
x=.15;+fvar(3)/8;+fvar(3)
y = -.15;-fvar(4)/8;-.2;-fvar(4)/4;-((vel x)*(vel x)) +1.1*(vel x)+0.02

[State 2400, 2]
type = Veladd
trigger1 =time>4&&var(3)=var(4);var(3)=1;&&var(3)=1;animelem=6;trigger1 =animtime>35
y = .2


[State 0, VarSet]
type = VarSet
trigger1 =fvar(5)=1&&pos y>-1;&&pos y>0;animelem=1,1&&fvar(5)=0
;trigger2 =pos y>=0&&animelem=1,1&&var(3)=var(4)
v = 3
value = var(3)-1

[State 0, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "var3 %d"
params = var(3);,var(13);numexplod,var(22);var(10),vel x
;ignorehitpause = 
;persistent = 

[State 0, VarSet]
type = Velset
trigger1 = pos y>0&&var(3)>0&&fvar(5)=0;animelem=1,1;&&var(5)=0;,1;&&var(3)=0
x = 1;.1   ;fv = 10
y = -.4;-.1
;ignorehitpause = 
;persistent = 

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem=1,1&&var(3)=2;&&animelem=1,1
value = 4000,14
volumescale = 256
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan = 
;ignorehitpause = 
;persistent = 

[State 2400, 2]
type = Veladd
triggerall=root,palno=5
trigger1 =var(3)>=0&&var(3)!=var(4)&&fvar(5)<15
x=.05;.06;.03
y = -1;.4;-.05

[State 2400, 2]
type = Veladd
triggerall=root,palno=5
trigger1 =var(3)>=0&&var(3)!=var(4)&&fvar(5)>15
y = 1.2;.8;.4;.2

[State 2400, 2]
type = Veladd
triggerall=root,palno!=5
trigger1 =var(3)=2&&var(3)!=var(4)&&fvar(5)<15
x=.15;.06;.03
y = -.4;-.05

[State 2400, 2]
type = Veladd
triggerall=root,palno!=5
trigger1 =var(3)=2&&var(3)!=var(4)&&fvar(5)>15
y = .8;.4;.2

[State 2400, 2]
type = Veladd
triggerall=root,palno!=5
trigger1 =var(3)=1&&var(3)!=var(4)&&fvar(5)<10
x=.15;.06;.03
y = -.4;-.05

[State 2400, 2]
type = Veladd
triggerall=root,palno!=5
trigger1 =var(3)=1&&var(3)!=var(4)&&fvar(5)>10
y = .8;.4;.2

[State 2400, 2]
type = Veladd
triggerall=root,palno!=5
trigger1 =var(3)=0&&var(3)!=var(4)&&fvar(5)<7
x=.15;.06;.03
y = -.4;-.05

[State 2400, 2]
type = Veladd
triggerall=root,palno!=5
trigger1 =var(3)=0&&var(3)!=var(4)&&fvar(5)>7
y = .8;.4;.23

[State 0, DestroySelf]
type = changestate
trigger1 = movecontact
trigger2 = pos y>0&&var(3)=0
trigger3 = frontedgedist <=-50
value = 252

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;FlameShotMS1Helper
[Statedef 262]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = ifelse(root,anim=11201,1220,ifelse(root,anim=8600,1220,1219))
sprpriority = 5
velset = 5,0



[State 0, ChangeAnim];LVFLAMEMS1UP
type = ChangeAnim
triggerall=numhelper(323132)>0
triggerall=root,var(10)=109
trigger1 =time=0
trigger1 =helper(323132),anim=18750
value = 1220

[State 0, ChangeAnim];LVFLAMEMS1DW
type = ChangeAnim
triggerall=numhelper(323132)>0
triggerall=root,var(10)=109
trigger1 =time=0
trigger1 =helper(323132),anim=18751
value = 1220

[State 0, PosSet];LVFWD
type = PosSet
TRIGGERALL=numhelper(323132)>0
TRIGGERALL=TIME=0
trigger1 = root,var(10)=109
trigger1 = helper(323132),anim=18749
x = (helper(323132),pos x)+40*(root,facing)
y = (helper(323132),pos y) -29

[State 0, PosSet];LVUP
type = PosSet
TRIGGERALL=numhelper(323132)>0
TRIGGERALL=TIME=0
trigger1 = root,var(10)=109
trigger1 = helper(323132),anim=18750
x = (helper(323132),pos x)+19*(root,facing)
y = (helper(323132),pos y) -62

[State 0, PosSet];LVDW
type = PosSet
TRIGGERALL=numhelper(323132)>0
TRIGGERALL=TIME=0
trigger1 = root,var(10)=109
trigger1 = helper(323132),anim=18751
x = (helper(323132),pos x)+19*(root,facing)
y = (helper(323132),pos y)


[State 0, FLAME];FLAME Sounds
type = PlaySnd
trigger1 =root,var(10)=109
trigger1=time=0
value = 4000,15
volumescale = 256
channel = 0


[State 0, VarAdd];la variable 9 se le suma al principio para darle super armor 
type = VarAdd	;al projectil
trigger1 = time=1
v =  9   ;fv = 
value = 1

[State 0, VarAdd];point system for helpers
type = parentvarset
triggerall=movehit
trigger1 = 1
v =51
value = 1

[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=8
trigger1 = time=0
v = 3    ;fv = 10
value = ifelse(parent,anim=11201,3,ifelse(parent,anim=8600,2,1))
ignorehitpause = 
persistent = 


[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=109
triggerall=numhelper(323132)>0
trigger1 = time=0
trigger1 = helper(323132),anim=18751
v = 3    ;fv = 10
value = 2

[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=109
triggerall=numhelper(323132)>0
trigger1 = time=0
trigger1 = helper(323132),anim=18750
v = 3    ;fv = 10
value = 3


[State 9000, AngleSet]
type = AngleSet
triggerall=var(3)=2
trigger1 = 1
Value = 270 ;Angle must be given on degrees.
 
[State 9000, AngleSet]
type = AngleSet
triggerall=var(3)=3
trigger1 = 1
Value = 90

[State 9000, AngleDraw]
type = AngleDraw
trigger1 = 1


[State 1030, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT,AP
ignorehitpause = 1

[State 1030, endfromproj]
type = HitOverride
triggerall=var(9)<2;cuantas veces sera golpeado hasta explotar
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 260
attr = SCA, NP, SP, HP
ignorehitpause = 1


[State 1030, endfromproj]
type = HitOverride
triggerall=var(9)=2
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 253
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 251, HitDef]
type = HitDef
trigger1 = time
attr = S, NA
animtype  = Hard
damage    = 3,3
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =-1;s4000,2
guardsound = -1;s4000,2;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 0
envshake.freq = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0

[State 2400, 2];Avanza
type = Velset
triggerall=var(3)=1
trigger1 =1;animelem=1;animtime<
x = 6+root,vel x
y =0

[State 2400, 2];Baja
type = Velset
triggerall=var(3)=2
trigger1 =1;animelem=1;animtime<
x = 0
y =6

[State 2400, 2];Sube
type = Velset
triggerall=var(3)=3
trigger1 =1;animelem=1;animtime<
x = 0
y =-6

[State 0, ChangeState]
type = ChangeState
trigger1 = pos y>0
value = 263
ctrl = 0

[State 0, DestroySelf]
type = destroyself
triggerall=var(3)!=3&&var(3)!=2
trigger1 = animtime=0
trigger2 = frontedgedist <=-50

[State 0, DestroySelf]
type = destroyself
triggerall=var(3)=3
trigger1=(pos y<root,pos y-250)
trigger2=time>300
;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
;FlameExplosionMS1
[Statedef 263]
type    = s                      
movetype= a                      
physics = s
anim = 1222
sprpriority = 4
velset = 0,0

[State 9000, AngleSet]
type = AngleSet
trigger1 = 1
Value = 270 

[State 9000, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 251, HitDef]
type = HitDef
trigger1 = time
attr = S, SP
animtype  = Hard
damage    = 3,3;5,2
guardflag = MA
pausetime = 0,0
sparkno = -1
sparkxy=0,0
hitsound   =-1;s4000,1
guardsound =-1;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = .9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0


[State 0, VarAdd]
type = parentvarset
triggerall=movehit
trigger1 = 1
v =51
value = 1

[State 1105]
type = destroyself
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;EnemyChaserHelper
[Statedef 264]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1221;ifelse(root,anim=11202,1206,ifelse(root,anim=8603,1207,1204))
sprpriority = 5
;velset = 5,0
[State 0, RemapPal]
type = RemapPal
trigger1 =time=0
source = 0,24
dest = 0,24

[State 0, Helper]
type = Helper
trigger1 = animelem=1,1
helpertype = normal ;player
name = "SmokeTrail"
ID = 515151
stateno = 305
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 0, Helper]
type = Helper
triggerall=palno=5
trigger1 = 1;animelem=1,1
helpertype = normal ;player
name = "RANDOMCRAP"
ID = 515151
stateno =ifelse(var(45)=0,15102,ifelse(var(45)=1,300,ifelse(var(45)=2,21011,ifelse(var(45)=3,278,ifelse(var(45)=4,251,ifelse(var(45)=5,15014,ifelse(var(45)=6,15007,ifelse(var(45)=7,261,ifelse(var(45)=8,262,ifelse(var(45)=9,260,ifelse(var(45)=10,259,ifelse(var(45)=11,285,ifelse(var(45)=12,257,ifelse(var(45)=13,254,ifelse(var(45)=14,255,ifelse(var(45)=15,286,15103))))))))))))))))
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 0, Trans]
type = Trans
trigger1 = TIME=0
trans =  addalpha
alpha = 0,256



[State 0, SmokeThrow]
type = Helper
trigger1 =time=0
trigger1=root,var(10)=109
helpertype = normal ;player
name = "SmokeThrow"
ID = 414141
stateno = 306
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 0, IronLizard];IronLizard Sounds fiushh corto
type = PlaySnd
trigger1=root,var(10)=109
trigger1=TIME=0
value = 4000,12
volumescale = 256
channel = -1

[State 0, PosSet];LVFWD
type = PosSet
TRIGGERALL=numhelper(323132)>0
trigger1 = root,var(10)=109
trigger1 = time=0
trigger1 = helper(323132),anim=18752
x = (helper(323132),pos x)+40*(root,facing)
y = (helper(323132),pos y) -29

[State 0, PosSet];LVUP
type = PosSet
TRIGGERALL=numhelper(323132)>0
trigger1 = root,var(10)=109
trigger1 = helper(323132),anim=18753
trigger1 = time=0
x = (helper(323132),pos x)+19*(root,facing)
y = (helper(323132),pos y) -62

[State 0, PosSet];LVDW
type = PosSet
TRIGGERALL=numhelper(323132)>0
trigger1 = root,var(10)=109
trigger1 = time=0
trigger1 = helper(323132),anim=18754
x = (helper(323132),pos x)+19*(root,facing)
y = (helper(323132),pos y)


[State 0, Helper]
type = Helper
triggerall=palno=5
trigger1 = animelem=1,1
helpertype = normal ;player
name = "RANDOMEXPLOSION"
ID = 515151
stateno =ifelse(var(45)=0,252,ifelse(var(45)=1,258,ifelse(var(45)=2,253,ifelse(var(45)=3,263,ifelse(var(45)=4,301,ifelse(var(45)=5,302,ifelse(var(45)=6,303,ifelse(var(45)=7,304,ifelse(var(45)=8,15005,ifelse(var(45)=9,15006,ifelse(var(45)=10,15015,ifelse(var(45)=11,15017,ifelse(var(45)=12,15009,ifelse(var(45)=13,269,ifelse(var(45)=14,269,272)))))))))))))))
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 0, VarSet]
type = Varset
triggerall=root,palno=5
trigger1=time
v = 44    ;fv = 10
value = random%360

[State 0, VarSet]
type = Varset
triggerall=root,palno=5
trigger1=time
v = 45    ;fv = 10
value = random%17

;[State 0, VarSet]
;type = VarSet
;triggerall=root,palno=5
;trigger1=var(44)>360
;v = 44    ;fv = 10
;value = 0
;
;[State 0, VarSet]
;type = VarSet
;triggerall=root,palno=5
;trigger1=var(44)<0
;v = 44    ;fv = 10
;value = 359

[State 0, VarAdd];la variable 9 se le suma al principio para darle super armor 
type = VarAdd	;al projectil
trigger1 = time=1
v =  9   ;fv = 
value = 1

[State 0, VarAdd];point system for helpers
type = parentvarset
triggerall=movehit
trigger1 = 1
v =51
value = 1


[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=7
trigger1 = time=0
v = 3    ;fv = 10
value = ifelse(parent,anim=11202,3,ifelse(parent,anim=8603,2,1))
ignorehitpause = 
persistent = 


;==========================================================
;ANGULO SEGUN VELOCIDAD:
;==========================================================

[State 9000, AngleDraw]
type = AngleDraw
trigger1 =vel x>0
value=atan(-vel y/vel x)*180/pi


[State 9000, AngleDraw]
type = AngleDraw
trigger1 =vel x=0&&vel y<0
value=90

[State 9000, AngleDraw]
type = AngleDraw
trigger1 =vel x=0&&vel y>0
value=270


[State 9000, AngleDraw]
type = AngleDraw
trigger1 =vel x<0
value=atan(-vel y/vel x)*180/pi+180

;==========================================================





[State 1030, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 1030, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 1030, endfromproj]
type = HitOverride
triggerall=var(9)<2;cuantas veces sera golpeado hasta explotar
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 302
attr = SCA, NP, SP, HP
ignorehitpause = 1


[State 1030, endfromproj]
type = HitOverride
triggerall=var(9)=2
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 302
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=109
triggerall=numhelper(323132)>0
trigger1 = time=0
trigger1 = helper(323132),anim=18752
v = 3    ;fv = 10
value = 1

[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=109
triggerall=numhelper(323132)>0
trigger1 = time=0
trigger1 = helper(323132),anim=18754
v = 3    ;fv = 10
value = 2

[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=109
triggerall=numhelper(323132)>0
trigger1 = time=0
trigger1 = helper(323132),anim=18753
v = 3    ;fv = 10
value = 3

;HOMING PROJECTILE
;
;[State ****: Turn]
;type = Turn
;trigger1 = (P2Dist X < 10)

[State ****: VelSet]
type = VelSet
trigger1 = (!Time)
x = 3

[State ****: VelAdd]
type = VelAdd
trigger1 = (P2Dist X < 0) && (Vel X > -8);-6)
x = -.8;.4;0.2

[State ****: VelAdd]
type = VelAdd
trigger1 = (P2Dist X > 0) && (Vel X < 8);6)
x = .8;.4;0.2

[State ****: VelAdd]
type = VelAdd
trigger1 = (EnemyNear, Pos Y -25> Pos Y) && (Vel Y < 3);6)
y = .6;0.2

[State ****: VelAdd]
type = VelAdd
trigger1 = (EnemyNear, Pos Y -25<= Pos Y) && (Vel Y > -3);6)
y = -.6;.2;0.2

;HOMING PROJECTILE END
[State 251, HitDef]
type = HitDef
trigger1 = time = 0
attr = S, SP
animtype  = Hard
damage    = 25,12
hitflag = MAFD
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =s4000,7
guardsound = s4000,7;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0

[State 2400, 2];Avanza
type = Velset
triggerall=var(3)=1&&time<10
trigger1 =1;animelem=1;animtime<
x = 6
y =0

[State 2400, 2];Baja
type = Velset
triggerall=var(3)=2&&time<5
trigger1 =1;animelem=1;animtime<
x = 0
y =6

[State 2400, 2];Sube
type = Velset
triggerall=var(3)=3&&time<10
trigger1 =1;animelem=1;animtime<
x = 0
y =-6


[State 0, DestroySelf]
type = changestate
triggerall=root,palno!=5
trigger1 = movecontact
trigger2 = frontedgedist <=-50
trigger3 = (pos y<root,pos y-250)
trigger4=enemy,alive=0&&numenemy=1
trigger5=pos y>0
trigger6=time>200
value = ifelse(var(3)=1,302,ifelse(var(3)=2,304,303))

[State 0, DestroySelf]
type = changestate
triggerall=root,palno=5
trigger1 = movecontact
trigger2 = frontedgedist <=-50
trigger3 = (pos y<root,pos y-250)
trigger4=enemy,alive=0&&numenemy=1
trigger5=time>200
value = ifelse(var(3)=1,302,ifelse(var(3)=2,304,303))

[State 0, DestroySelf]
type = changestate
triggerall=root,palno=5
trigger1=pos y>0
value = ifelse(random%2=1,269,272)


;---------------------------------------------------------------------------
;LASERGUN01
[Statedef 265]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1227;ifelse(((root,anim=11203)||(root,anim=8604)),1202,ifelse(((root,anim=11006)||(root,anim=11007)),1203,1203))
sprpriority = 5
velset =root,vel x,0

[State 0, VarSet]
type = VarSet
trigger1 = time=0&&parent,ishelper
v = 4    ;fv = 10
value = numhelper(3001)
;ignorehitpause = 
;persistent = 

[State 0, VarAdd]
type = parentvarset
trigger1 = 1
v =51
value = 1;var(51)
;
[State 0, VelSet]
type = VelSet
triggerall=!parent,ishelper
trigger1 = root,var(10)=109
x = root,vel x
y = root,vel y

[State 0, laser];laser Sounds
type = PlaySnd
triggerall = ((root,var(10)=109))
trigger1=time=0&&!parent,ishelper
value = 4000,29
volumescale = 256
channel = 0


;[State 0, stoplaser];stop laser Sounds
;type = stopsnd
;triggerall = ((root,var(10)=109))
;trigger1=anim!=18742;&&anim!=8203;||(Anim=11203)||(Anim=12205)||(Anim=8604)
;trigger2=root,fvar(24)=0
;channel = 0

[State 0, Explod];bolita
type = Explod
trigger1 =!parent,ishelper&&anim!=1228&&root,anim!=11204
anim = 1226
ID = 3123123
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = facing
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0


[State 0, Explod]
type = Explod
triggerall = movehit
trigger1 =time*tickspersecond
anim = 1230
ID = 3123125
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = -.3,random%2
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0



[State 0, PosSet]
type = PosSet
triggerall=root,var(10)!=109
triggerall=root,palno!=5
triggerall=root,anim!=11204
triggerall=parent,ishelper
trigger1 =1;*tickspersecond
x=parent,pos x+14*facing-(root,statetype=c)*5*facing
y = root,fvar(32)+root,pos y-ifelse(root,stateno=20,2,0)

[State 0, PosSet]
type = PosSet
triggerall=root,var(10)!=109
triggerall=root,palno=5
triggerall=root,anim!=11204
triggerall=parent,ishelper;&&parent,id!=3000
trigger1 =1;*tickspersecond
x=parent,pos x+14*facing-(root,stateno=105)*5*facing
y = var(4)*root,fvar(32)*sin((time)*pi+(var(4)*pi)/4)/numhelper(3001)+root,pos y-13-ifelse(root,stateno=20,2,0)

[State 0, PosSet]
type = PosSet
triggerall=root,var(10)=109
triggerall=root,palno=5
triggerall=root,anim!=11204
triggerall=parent,ishelper;&&parent,id!=3000
trigger1 =1;*tickspersecond
x=parent,pos x+14*facing-(root,stateno=105)*5*facing
y = var(4)*root,fvar(32)*sin((time)*pi+(var(4)*pi)/4)/numhelper(3001)-13


[State 0, PosSet]
type = PosSet
triggerall=root,var(10)!=109
triggerall=root,palno!=5
triggerall=root,anim!=11204
triggerall=facing=1&&!parent,ishelper
trigger1 =1;*tickspersecond
x=parent,pos x+25+root,vel x
y = root,fvar(32)+root,pos y-ifelse(root,stateno=20,2,0)

[State 0, PosSet]
type = PosSet
triggerall=root,palno=5
triggerall=root,anim!=11204
triggerall=facing=1&&!parent,ishelper
trigger1 =1;*tickspersecond
x=parent,pos x+25+root,vel x
y = var(4)*root,fvar(32)*sin((var(4)*pi)/4)/numhelper(3001)+root,pos y-13-ifelse(root,stateno=20,2,0)


[State 0, PosSet]
type = PosSet
triggerall=root,var(10)!=109
triggerall=root,anim!=11204
triggerall=facing=-1&&!parent,ishelper
trigger1 =1;*tickspersecond
x=parent,pos x-32+root,vel x
y = root,fvar(32)+root,pos y-ifelse(root,stateno=20,2,0)

[State 0, PosSet];LVARMORFACING=1
type = PosSet
triggerall=root,var(10)=109
triggerall=root,palno!=5
triggerall=root,anim!=11204
triggerall=numhelper(323132)>0
triggerall=facing=1&&!parent,ishelper
trigger1 =1;*tickspersecond
x=(helper(323132),pos x)+40+root,vel x
y = helper(323132),pos y -27

[State 0, PosSet];LVARMORFACING=-1
type = PosSet
triggerall=root,var(10)=109
triggerall=root,anim!=11204
triggerall=numhelper(323132)>0
triggerall=facing=-1&&!parent,ishelper
trigger1 =1;*tickspersecond
x=helper(323132),pos x-50+root,vel x
y =helper(323132),pos y -27


[State 0, PosSet];LVARMOR
type = PosSet
triggerall=root,var(10)=109
triggerall=root,palno!=5
triggerall=root,anim!=11204
triggerall=parent,ishelper
trigger1 =1;*tickspersecond
x=parent,pos x+14*facing-(root,statetype=c)*5*facing
y = parent,pos y

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, VarAdd];la variable 9 se le suma al principio para darle super armor 
type = VarAdd	;al projectil
trigger1 = time=1
v =  9   ;fv = 
value = 1



[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=10
triggerall=root,anim=11204
trigger1=time=0
v = 3    ;fv = 10
value = 3
ignorehitpause = 
persistent = 

[State 0, VarSet]
type = VarSet
triggerall=parent,anim=8604
trigger1 = time=0
v = 3    ;fv = 10
value = 2
ignorehitpause = 
persistent = 

[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=10
triggerall=parent,anim=8603
trigger1 = time=0
v = 3    ;fv = 10
value = 1
ignorehitpause = 
persistent = 

[State 9000, AngleSet]
type = AngleSet
triggerall=var(3)=2
trigger1 = 1
Value = 270 ;Angle must be given on degrees.
 
[State 9000, AngleSet]
type = AngleSet
triggerall=var(3)=3
trigger1 = 1
Value = 90

[State 9000, AngleDraw]
type = AngleDraw
trigger1 = 1


[State 1030, endfromproj]
type = HitOverride
triggerall=var(9)<2;cuantas veces sera golpeado hasta explotar
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 266
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 1030, endfromproj]
type = HitOverride
triggerall=var(9)=2
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 266
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 251, HitDef]
type = HitDef
trigger1 = animtime=0;time*tickspersecond
attr = S, HA
animtype  = Hard
damage    = 1+ifelse(root,palno=4,random%2,0),1+ifelse(root,palno=4,random%2,0)
guardflag = MA
pausetime = 0,0
sparkno = s1229;S9107
sparkxy=0,0
hitsound   =-1;s4000,5
guardsound = -1;s4000,6;S5546,0
guard.sparkno =s1229;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0
getpower=5

[State 2400, 2];Avanza
type = Velset
triggerall=var(3)=1
trigger1 =1;animelem=1;animtime<
x = 15+root,vel x
y =0

[State 2400, 2];Baja
type = Velset
triggerall=var(3)=2
trigger1 =1;animelem=1;animtime<
x = 0
y =15

[State 2400, 2];Sube
type = Velset
triggerall=var(3)=3
trigger1 =1;animelem=1;animtime<
x = 0
y =-15


;[State 0, ChangeAnim]
;type = ChangeAnim;trigger1=anim!=1228
;triggerall = command="relx"&&anim!=1228
;trigger1=1
;value = 1228

[State 0, ChangeAnim]
type = ChangeAnim;trigger1=anim!=1228
triggerall =root,var(10)!=109
triggerall = root,anim!=8203&&anim!=1228&&root,anim!=12206&&root,anim!=8104;&&root,anim!=11204
trigger1=1
value = 1228


[State 0, ChangeAnim]
type = ChangeAnim;trigger1=anim!=1228
triggerall =root,var(10)=109
triggerall = numhelper(323132)>0
triggerall = helper(323132),anim!=18742&&anim!=1228;&&root,anim!=11204
trigger1=1
value = 1228


;[State 0, ChangeAnim]
;type = ChangeAnim;trigger1=anim!=1228
;triggerall = parent,movecontact
;trigger1=1
;value = 1228


[State 0, LaserGun];LaserGun
type = Helper
triggerall=numhelper(3001)<18;*(backedgedist)/frontedgedist;*frontedgedist/backedgedist);backedgedist/frontedgedist);&&parent,!movecontact
trigger1 = time=0
helpertype = normal ;player
name = "LaserGun"
ID = 3001;default helper projectile id
stateno = 265
pos =0,root,fvar(32)*ifelse(root,palno=5,0,1)
facing = 1
keyctrl = 1
ownpal = 0
supermovetime = 0
pausemovetime = 0

;[State 0, ChangeState]
;type = ChangeState
;trigger1 = movecontact
;value =266
;ctrl = 0


[State 0, PlaySnd];stop laser Sounds
type = stopsnd
trigger1=anim=1228&&animtime=0
channel = 0

;[State 0, DestroySelf]
;type = destroyself
;triggerall=root,palno!=5
;trigger1 = pos y>0
;trigger2 = frontedgedist <=-50
;trigger3 = (pos y<root,pos y-250)
;trigger4=anim=1228&&animtime=0

[State 0, DestroySelf]
type = destroyself
triggerall=root,palno!=5
trigger1 = pos y>0
trigger2 = (pos y<root,pos y-250)
trigger3=anim=1228&&animtime=0

[State 0, DestroySelf]
type = destroyself
triggerall=root,palno=5
trigger1 = frontedgedist <=-50
trigger2 = (pos y<root,pos y-250)
trigger3=anim=1228&&animtime=0
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------

;LASERBOLITA
[Statedef 266]
type    = s                      
movetype= a                      
physics = s
anim = ifelse((parent,stateno=273)||(parent,stateno=277),1241,1226)
sprpriority = 5
velset =0,0


[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, AngleDraw]
type = AngleDraw
triggerall=(parent,stateno=267)||(parent,stateno=273)
trigger1 =1 
value = 90

[State 0, AngleDraw]
type = AngleDraw
triggerall=(parent,stateno=268)||(parent,stateno=277)
trigger1 =1 
value = 270

[State 0, BindToParent]
type = BindToParent
triggerall=(parent,stateno=267)
trigger1 = 1
time = 1

[State 0, BindToParent]
type = BindToParent
trigger1 = PARENT,STATENO=273
time = 1
facing = 0
pos = 5,5


[State 0, BindToParent]
type = BindToParent
triggerall=parent,stateno=268
trigger1 =1 
pos = 0,-20
;ignorehitpause = 
;persistent = 

[State 0, BindToParent]
type = BindToParent
triggerall=parent,stateno=277
trigger1 =1 
pos = 5,-25


[State 1105]
type = destroyself
trigger1 = animtime = 0


;---------------------------------------------------------------------------
;LASERGUNUP
[Statedef 267]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1231;ifelse(((root,anim=11203)||(root,anim=8604)),1202,ifelse(((root,anim=11006)||(root,anim=11007)),1203,1203))
sprpriority = 5
velset =ifelse(root,vel x>0,root,vel x,0),0;ifelse(root,vel y>0,root,vel y,0)


[State 0, laser];laser Sounds
type = PlaySnd
triggerall = ((root,var(10)=109))
trigger1=time=0&&!parent,ishelper
value = 4000,29
volumescale = 256
channel = 0

[State 0, Helper]
type = Helper
trigger1 =!parent,ishelper&&anim!=1228;&&root,anim!=11204
helpertype = normal ;player
name = "bolita"
ID = 123123
stateno = 266
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 0, Explod]
type = Explod
triggerall = movehit
trigger1 =time*tickspersecond
anim = 1230
ID = 3123125
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,random%2
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = .2,1
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0


[State 0, RemapPal]
type = RemapPal
trigger1=time;*tickspersecond
source = 0,31
dest = 31,random%6

[State 0, VarAdd]
type = parentvarset
trigger1 = 1
v =51
value = 1


[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, AngleDraw]
type = AngleDraw
trigger1 =1 
value = 90

[State 0, VarSet]
type = Varset
trigger1 = !parent,ishelper&&root,palno=5&&anim!=1228
v = 31    ;fv = 10
value = time
;ignorehitpause = 
;persistent = 


[State 0, PosSet];NORMAL
type = PosSet
triggerall=root,var(10)!=109
triggerall = !parent,ishelper
trigger1=1
x=root,pos x-root,fvar(32)+ifelse(root,vel x>0,-5,-13)
y=-59-ifelse(root,vel x>0,5,0)+root,vel y+root,pos y


[State 0, PosSet];NORMAL
type = PosSet
triggerall=root,var(10)!=109
triggerall = parent,ishelper
trigger1=1
x=root,pos x-root,fvar(32)+ifelse(root,vel x>0,-5,-13)
y=parent,pos y-14


[State 0, PosSet];LVARMOR
type = PosSet
triggerall=root,var(10)=109
triggerall=numhelper(323132)>0
triggerall=!parent,ishelper
trigger1=1
x=helper(323132),pos x+19*(root,facing);-root,fvar(32)-7
y=-59-ifelse(root,vel x>0,5,0)+root,vel y+helper(323132),pos y


[State 0, PosSet];LVARMOR
type = PosSet
triggerall=root,var(10)=109
triggerall = parent,ishelper
trigger1=1
x=helper(323132),pos x+19*(root,facing);-root,fvar(32)-7
y=parent,pos y-14


[State 251, HitDef]
type = HitDef
trigger1 = animtime=0;time*tickspersecond
attr = S, HA
animtype  = Hard
damage    = 1+ifelse(root,palno=4,random%2,0),1+ifelse(root,palno=4,random%2,0)
guardflag = MA
pausetime = 0,0
sparkno = s1229;S9107
sparkxy=20,0
hitsound   =-1;s4000,5
guardsound = -1;s4000,6;S5546,0
guard.sparkno =s1229;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0
getpower=5,5

[State 0, LaserGun];LaserGun
type = Helper
triggerall=(numhelper(3001)<12);&&parent,!movecontact
trigger1 = time=0
helpertype = normal ;player
name = "LaserGun"
ID = 3001;default helper projectile id
stateno = 267
pos =0,root,pos y-14
facing = 1
keyctrl = 1
ownpal = 0
supermovetime = 0
pausemovetime = 0


[State 0, ChangeAnim];NORMAL
type = ChangeAnim
triggerall=root,var(10)!=109
triggerall =root,anim!=11204&&anim!=1228
trigger1=1
value = 1228

[State 0, ChangeAnim];LVARMOR
type = ChangeAnim
triggerall=root,var(10)=109
triggerall=numhelper(323132)>0
triggerall =((helper(323132),anim!=18743))&&anim!=1228
trigger1=1
value = 1228

[State 0, PlaySnd];stop laser Sounds
type = stopsnd
trigger1=anim=1228&&animtime=0
channel = 0


[State 0, DestroySelf]
type = destroyself
triggerall=root,palno!=5
trigger1 = pos y>0
trigger2 = frontedgedist <=-50
trigger3 = (pos y<root,pos y-250)
trigger4=anim=1228&&animtime=0

[State 0, DestroySelf]
type = destroyself
triggerall=root,palno=5&&parent,ishelper
trigger1 = pos y>0
trigger2 = frontedgedist <=-50
trigger3 = (pos y<root,pos y-250)
trigger4=anim=1228&&animtime=0

[State 0, ChangeState]
type = ChangeState
triggerall=root,palno=5&&!parent,ishelper
trigger1 = anim=1228&&numhelper(3001)=0
value =271
ctrl = 0


;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
;LASERGUNDOWN
[Statedef 268]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1231;ifelse(((root,anim=11203)||(root,anim=8604)),1202,ifelse(((root,anim=11006)||(root,anim=11007)),1203,1203))
sprpriority = 5
velset =ifelse(root,vel x>0,root,vel x,0),0;ifelse(root,vel y>0,root,vel y,0)


[State 0, Helper]
type = Helper
trigger1 =!parent,ishelper&&anim!=1228;&&root,anim!=11204
helpertype = normal ;player
name = "bolita"
ID = 123123
stateno = 266
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 0, VelSet]
type = VelSet
triggerall=!parent,ishelper
trigger1 = root,var(10)=109
x = root,vel x
y = root,vel y


[State 0, laser];laser Sounds
type = PlaySnd
triggerall = ((root,var(10)=109))
trigger1=time=0&&!parent,ishelper
value = 4000,29
volumescale = 256
channel = 0

[State 0, Explod]
type = Explod
triggerall = movehit
trigger1 =time*tickspersecond
anim = 1230
ID = 3123125
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,random%2
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = .2,1
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 0, RemapPal]
type = RemapPal
trigger1=time;*tickspersecond
source = 0,31
dest = 31,random%6

[State 0, VarAdd]
type = parentvarset
trigger1 = 1
v =51
value = 1


[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, AngleDraw]
type = AngleDraw
trigger1 =1 
value = 90

[State 0, PosSet];NORMAL
type = PosSet
triggerall=root,var(10)!=109
triggerall = !parent,ishelper
trigger1=1
x=root,pos x-root,fvar(32)+ifelse(root,vel x>0,-5,-13)
y=root,pos y+20


[State 0, PosSet];NORMAL
type = PosSet
triggerall=root,var(10)!=109
triggerall = parent,ishelper
trigger1=1
x=root,pos x-root,fvar(32)+ifelse(root,vel x>0,-5,-13)
y=parent,pos y+14

[State 0, PosSet];LVARMOR
type = PosSet
triggerall=root,var(10)=109
triggerall=numhelper(323132)>0
triggerall = !parent,ishelper
trigger1=1
x=helper(323132),pos x+19*(root,facing)
y=helper(323132),pos y


[State 0, PosSet];LVARMOR
type = PosSet
triggerall=root,var(10)=109
triggerall=numhelper(323132)>0
triggerall = parent,ishelper
trigger1=1
x=helper(323132),pos x+19*(root,facing)
y=parent,pos y+14

[State 251, HitDef]
type = HitDef
trigger1 = animtime=0;time*tickspersecond
attr = S, HA
animtype  = Hard
damage    = 1+ifelse(root,palno=4,random%2,0),1+ifelse(root,palno=4,random%2,0)
guardflag = MA
pausetime = 0,0
sparkno = s1229;S9107
sparkxy=20,0
hitsound   =-1;s4000,5
guardsound = -1;s4000,6;S5546,0
guard.sparkno =s1229;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0
getpower=5,5

[State 0, LaserGun];LaserGun
type = Helper
triggerall=(numhelper(3001)<12);&&parent,!movecontact
trigger1 = time=0
helpertype = normal ;player
name = "LaserGun"
ID = 3001;default helper projectile id
stateno = 268
pos =0,root,pos y+14
facing = 1
keyctrl = 1
ownpal = 0
supermovetime = 0
pausemovetime = 0


[State 0, ChangeAnim];NORMAL
type = ChangeAnim
triggerall=root,var(10)!=109
triggerall =root,anim!=8607&&anim!=1228
trigger1=1
value = 1228

[State 0, ChangeAnim];LVARMOR
type = ChangeAnim
triggerall=root,var(10)=109
triggerall =(helper(323132),anim!=18746)&&anim!=1228
trigger1=1
value = 1228


[State 0, PlaySnd];stop laser Sounds
type = stopsnd
trigger1=anim=1228&&animtime=0
channel = 0


[State 0, ChangeState]
type = ChangeState
trigger1 = POS Y >0
value =269
ctrl = 0
;anim =
;ignorehitpause = 
;persistent = 



;[State 0, DestroySelf]
;type = destroyself
;trigger1 = frontedgedist <=-50
;trigger2 = (pos y<root,pos y-250)
;trigger3=anim=1228&&animtime=0

[State 0, DestroySelf]
type = destroyself
trigger1=anim=1228&&animtime=0

;---------------------------------------------------------------------------


;---------------------------------------------------------------------------
;LASERExplosionDW
[Statedef 269]
type    = s                      
movetype= a                      
physics = s
anim = 1229
sprpriority = 4
velset = 0,0

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = 270

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = -15
;ignorehitpause = 
;persistent = 


[State 251, HitDef]
type = HitDef
trigger1 = (animelem=1,1)||(animelem=2,1)||(animelem=3,1)||(animelem=4,1)
trigger2 =(animelem=5,1)||(animelem=6,1)||(animelem=7,1)||(animelem=8,1)
trigger3 =(animelem=9,1)||(animelem=10,1)||(animelem=11,1)||(animelem=12,1)
trigger4 =(animelem=13,1)||(animelem=14,1)||(animelem=15,1)||(animelem=16,1)
trigger5 =(animelem=17,1)||(animelem=18,1)||(animelem=19,1);||(animelem=20,1)
attr = S, SP
animtype  = Hard
damage    = 1,1;5,2
guardflag = MA
pausetime = 0,0
sparkno = -1
sparkxy=0,0
hitsound   =-1;s4000,1
guardsound =-1;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = .9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 8
envshake.freq = 100
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0

[State 2000, 1];Crazy SparksR
type = Projectile
triggerall=root,palno=5
trigger1 = 1;animelem=1,1||animelem=2,1||animelem=3,1||animelem=4,1
postype = p1
projanim = 1242
projhitanim = -1
projpriority = 1
projheightbound = -240, 100
projedgebound = 100
projscale=1,1
ProjHits = 1;1+ifelse( p2name="abyss",10,0)
velocity = 1+random%5,-random%5
offset = 0,0
attr = S, SP
damage   = 3+random%5+abs(p2dist x)/20,3+random%5+abs(p2dist x)/20
animtype = heavy
guardflag = MA
hitflag = MAFDP
pausetime = 0,0;10,10
hitsound   = -1;s4000,5
sparkno=1242
sparkxy = 0,0;500,500
guardsound = -1;s4000,6
ground.type = low
ground.slidetime = 0;25
ground.hittime  = 0;25
ground.velocity = 0;-6
air.animtype = Back
air.velocity = 0,0;-4,-6
air.fall = 0
down.velocity = 0,0;-4,-6
down.hittime = 0
down.bounce = 0
palfx.time = 3
palfx.add = 248,56,0;255,255,255


[State 2000, 1];Crazy SparksL
type = Projectile
triggerall=root,palno=5
trigger1 = 1;animelem=1,1||animelem=2,1||animelem=3,1||animelem=4,1
postype = p1
projanim = 1242
projhitanim = 1242
projpriority = 1
projheightbound = -240, 100
projedgebound = 100
projscale=1,1
ProjHits = 1;1+ifelse( p2name="abyss",10,0)
velocity = -1-random%5,-random%5
offset = 0,0
attr = S, SP
damage   = 3+random%5+abs(p2dist x)/20,3+random%5+abs(p2dist x)/20
animtype = heavy
guardflag = MA
hitflag = MAFDP
pausetime = 0,0;10,10
hitsound   = -1;s4000,5
sparkno=1242
sparkxy = 0,0;500,500
guardsound = -1;s4000,6
ground.type = low
ground.slidetime = 0;25
ground.hittime  = 0;25
ground.velocity = 0;-6
air.animtype = Back
air.velocity = 0,0;-4,-6
air.fall = 0
down.velocity = 0,0;-4,-6
down.hittime = 0
down.bounce = 0
palfx.time = 3
palfx.add = 248,56,0;255,255,255

[State 0, VarAdd]
type = parentvarset
triggerall=movehit
trigger1 = 1
v =51
value = 1

[State 1105]
type = destroyself
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;SLASERGUN
[Statedef 270]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1238;ifelse(((root,anim=11203)||(root,anim=8604)),1202,ifelse(((root,anim=11006)||(root,anim=11007)),1203,1203))
sprpriority = 5
velset =root,vel x,0

[State 0, VarSet]
type = VarSet
trigger1 = time=0&&parent,ishelper
v = 4    ;fv = 10
value = numhelper(3001)


[State 0, laser];laser Sounds
type = PlaySnd
triggerall = ((root,var(10)=109))
trigger1=time=0&&!parent,ishelper
value = 4000,29
volumescale = 256
channel = 0

[State 0, VarAdd]
type = parentvarset
trigger1 = 1
v =51
value = 1;var(51)


[State 0, VelSet]
type = VelSet
triggerall=!parent,ishelper
trigger1 = root,var(10)=109
x = root,vel x
y = root,vel y

[State 0, Explod];bolita
type = Explod
trigger1 =!parent,ishelper&&anim!=1228&&root,anim!=11204
anim = 1237
ID = 3123123
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = facing
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0


[State 0, Explod]
type = Explod
triggerall = movehit
trigger1 =time*tickspersecond
anim = 1230
ID = 3123125
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = -.3,random%2
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0



[State 0, PosSet];NORMAL
type = PosSet
triggerall=root,var(10)!=109
triggerall=root,palno!=5
triggerall=root,anim!=11204
triggerall=parent,ishelper
trigger1 =1;*tickspersecond
x=parent,pos x+14*facing-(root,statetype=c)*5*facing
y = root,pos y-ifelse(root,stateno=20,5,0)+root,fvar(32);+root,pos y

[State 0, PosSet];NORMAL
type = PosSet
triggerall=root,var(10)!=109
triggerall=root,palno=5
triggerall=root,anim!=11204
triggerall=parent,ishelper;&&parent,id!=3000
trigger1 =1;*tickspersecond
x=parent,pos x+14*facing-(root,statetype=c)*5*facing
y = 2*var(4)*root,fvar(32)*sin((time)*pi+(var(4)*pi)/4)/numhelper(3001)+root,pos y-13-ifelse(root,stateno=20,5,0)

;y = var(4)*root,fvar(32)*sin((time)*pi+(var(4)*pi)/4)/numhelper(3001)+root,pos y-13-ifelse(root,stateno=20,5,0)


[State 0, PosSet];NORMAL
type = PosSet
triggerall=root,var(10)!=109
triggerall=root,palno!=5
triggerall=root,anim!=11204
triggerall=facing=1&&!parent,ishelper
trigger1 =1;*tickspersecond
x=parent,pos x+20+root,vel x
y = root,pos y-ifelse(root,stateno=20,5,0)+root,fvar(32);root,pos y

[State 0, PosSet];NORMAL
type = PosSet
triggerall=root,var(10)!=109
triggerall=root,palno=5
triggerall=root,anim!=11204
triggerall=facing=1&&!parent,ishelper
trigger1 =1;*tickspersecond
x=parent,pos x+25+root,vel x
y = var(4)*root,fvar(32)*sin((var(4)*pi)/4)/numhelper(3001)+root,pos y-13-ifelse(root,stateno=20,5,0)


[State 0, PosSet];NORMAL
type = PosSet
triggerall=root,var(10)!=109
triggerall=root,anim!=11204
triggerall=facing=-1&&!parent,ishelper
trigger1 =1;*tickspersecond
x=parent,pos x-35+root,vel x
y = root,pos y-ifelse(root,stateno=20,5,0)+root,fvar(32);root,pos y

[State 0, PosSet];LVARMORFWDSTART
type = PosSet
triggerall=root,var(10)=109
triggerall=numhelper(323132)>0
triggerall=!parent,ishelper
trigger1 =1;*tickspersecond
x=helper(323132),pos x+40*(root,facing)
y = helper(323132),pos y-27



[State 0, PosSet];LVARMORFWDSPAWNED
type = PosSet
triggerall=root,var(10)=109
triggerall=numhelper(323132)>0
triggerall=parent,ishelper
trigger1 =1;*tickspersecond
x=parent,pos x+14*facing-(root,statetype=c)*5*facing
y = parent,pos y


[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, VarAdd];la variable 9 se le suma al principio para darle super armor 
type = VarAdd	;al projectil
trigger1 = time=1
v =  9   ;fv = 
value = 1



[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=10
triggerall=root,anim=11204
trigger1=time=0
v = 3    ;fv = 10
value = 3
ignorehitpause = 
persistent = 

[State 0, VarSet]
type = VarSet
triggerall=parent,anim=8604
trigger1 = time=0
v = 3    ;fv = 10
value = 2
ignorehitpause = 
persistent = 

[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=10
triggerall=parent,anim=8603
trigger1 = time=0
v = 3    ;fv = 10
value = 1
ignorehitpause = 
persistent = 

[State 9000, AngleSet]
type = AngleSet
triggerall=var(3)=2
trigger1 = 1
Value = 270 ;Angle must be given on degrees.
 
[State 9000, AngleSet]
type = AngleSet
triggerall=var(3)=3
trigger1 = 1
Value = 90

[State 9000, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 1030, endfromproj]
type = HitOverride
triggerall=var(9)<2;cuantas veces sera golpeado hasta explotar
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 266
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 1030, endfromproj]
type = HitOverride
triggerall=var(9)=2
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 266
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 251, HitDef]
type = HitDef
trigger1 = animtime=0;time*tickspersecond
attr = S, HA
animtype  = Hard
damage    = 2+ifelse(root,palno=4,random%2,0),2+ifelse(root,palno=4,random%2,0)
guardflag = MA
pausetime = 0,0
sparkno = s1239;S9107
sparkxy=0,0
hitsound   =-1;s4000,5
guardsound = -1;s4000,6;S5546,0
guard.sparkno =s1229;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0
getpower=5

[State 2400, 2];Avanza
type = Velset
triggerall=var(3)=1
trigger1 =1;animelem=1;animtime<
x = 15+root,vel x
y =0

[State 2400, 2];Baja
type = Velset
triggerall=var(3)=2
trigger1 =1;animelem=1;animtime<
x = 0
y =15

[State 2400, 2];Sube
type = Velset
triggerall=var(3)=3
trigger1 =1;animelem=1;animtime<
x = 0
y =-15


;[State 0, ChangeAnim]
;type = ChangeAnim;trigger1=anim!=1228
;triggerall = command="relx"&&anim!=1228
;trigger1=1
;value = 1228

[State 0, ChangeAnim];NORMAL
type = ChangeAnim;trigger1=anim!=1228
triggerall=root,var(10)!=109
triggerall = root,anim!=8203&&anim!=1228&&root,anim!=12206&&root,anim!=8104;&&root,anim!=11204
trigger1=1
value = 1228

[State 0, ChangeAnim];LVARMOR
type = ChangeAnim;trigger1=anim!=1228
triggerall=root,var(10)=109
triggerall=numhelper(323132)>0
triggerall = (helper(323132),anim!=18742)&&anim!=1228;&&root,anim!=11204
trigger1=1
value = 1228


;[State 0, ChangeAnim]
;type = ChangeAnim;trigger1=anim!=1228
;triggerall = parent,movecontact
;trigger1=1
;value = 1228


[State 0, LaserGun];LaserGun
type = Helper
triggerall=(numhelper(3001)<18);*backedgedist/frontedgedist);&&parent,!movecontact
trigger1 = time=0
helpertype = normal ;player
name = "SLaserGun"
ID = 3001;default helper projectile id
stateno = 270
pos =0,root,fvar(32)*ifelse(root,palno=5,0,1)
facing = 1
keyctrl = 1
ownpal = 0
supermovetime = 0
pausemovetime = 0

;[State 0, ChangeState]
;type = ChangeState
;trigger1 = movecontact
;value =266
;ctrl = 0


[State 0, PlaySnd];stop laser Sounds
type = stopsnd
trigger1=anim=1228&&animtime=0
channel = 0
;
;[State 0, DestroySelf]
;type = destroyself
;triggerall=root,palno!=5
;trigger1 = pos y>0
;trigger2 = frontedgedist <=-50
;trigger3 = (pos y<root,pos y-250)
;trigger4=anim=1228&&animtime=0
;
;
;[State 0, DestroySelf]
;type = destroyself
;triggerall=root,palno=5
;trigger1 = frontedgedist <=-50
;trigger2 = (pos y<root,pos y-250)
;trigger3=anim=1228&&animtime=0


[State 0, DestroySelf]
type = destroyself
triggerall=root,palno!=5
trigger1 = pos y>0
trigger2 = (pos y<root,pos y-250)
trigger3=anim=1228&&animtime=0


[State 0, DestroySelf]
type = destroyself
triggerall=root,palno=5
trigger1 = (pos y<root,pos y-250)
trigger2=anim=1228&&animtime=0

;---------------------------------------------------------------------------


;---------------------------------------------------------------------------
;LASERGUNRAIN
[Statedef 271]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1231;ifelse(((root,anim=11203)||(root,anim=8604)),1202,ifelse(((root,anim=11006)||(root,anim=11007)),1203,1203))
sprpriority = 5
velset =ifelse(root,vel x>0,root,vel x,0),0;ifelse(root,vel y>0,root,vel y,0)

[State 0, Explod]
type = Explod
triggerall = movehit
trigger1 =time*tickspersecond
anim = 1230
ID = 3123125
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,random%2
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = .2,1
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0


[State 0, RemapPal]
type = RemapPal
trigger1=time;*tickspersecond
source = 0,31
dest = 31,random%6

[State 0, VarAdd]
type = parentvarset
trigger1 = 1
v =51
value = 1


[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, AngleDraw]
type = AngleDraw
trigger1 =1 
value = 270


[State 0, PlaySnd];laser Sounds
type = PlaySnd
trigger1=numhelper(3002)=0&&!parent,ishelper
value = 4000,29
volumescale = 256
channel = 0

[State 0, VarSet]
type = VarSet
trigger1 = parent,ishelper
v = 31    ;fv = 10
value = parent,var(31)

[State 0, VarSet]
type = VarSet
triggerall=root,palno=5&&root,var(10)=7
trigger1 = !parent,ishelper
v = 31    ;fv = 10
value = 250



[State 0, PosSet]
type = PosSet
triggerall = !parent,ishelper
trigger1=1
x=enemy,pos x+2*time*facing -60*facing
y=-250

;
;[State 0, Posadd]
;type = Posadd
;triggerall = !parent,ishelper
;trigger1=time
;x=1


[State 0, PosSet]
type = PosSet
triggerall = parent,ishelper
trigger1=1
x=parent,pos x
y=parent,pos y+14

[State 251, HitDef]
type = HitDef
trigger1 = animtime=0;time*tickspersecond
attr = S, HA
animtype  = Hard
damage    = 1+ifelse(root,palno=4,random%2,0),1+ifelse(root,palno=4,random%2,0)
guardflag = MA
pausetime = 0,0
sparkno = s1229;S9107
sparkxy=-2*time+40,0;-10*facing,0
hitsound   =-1;s4000,5
guardsound = -1;s4000,6;S5546,0
guard.sparkno =s1229;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0
getpower=5,5


[State 0, LaserGun];LaserGun
type = Helper
triggerall=(numhelper(3002)<18);&&parent,!movecontact
trigger1 = time=0
helpertype = normal ;player
name = "LaserGun"
ID = 3002;default helper projectile id
stateno = 271
pos =0,enemy,pos y-250
facing = 1
keyctrl = 1
ownpal = 0
supermovetime = 0
pausemovetime = 0


[State 0, ChangeAnim]
type = ChangeAnim
triggerall =anim!=1228&&time>=var(31);root,anim!=11204&&anim!=1228
trigger1=1
value = 1228


[State 0, PlaySnd];stop laser Sounds
type = stopsnd
trigger1=anim=1228&&animtime=0
trigger2 = frontedgedist <=-50
channel = 0


[State 0, DestroySelf]
type = destroyself
trigger1=anim=1228&&animtime=0

[State 0, ChangeState]
type = ChangeState
trigger1 = POS Y >0
value =272
ctrl = 0

;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
;LASERExplosionDWR
[Statedef 272]
type    = s                      
movetype= a                      
physics = s
anim = 1229
sprpriority = 4
velset = 0,0





[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = 270
;
[State 0, PosSet]
type = PosSet
trigger1 = 1
y = -10
x=parent,pos x



[State 251, HitDef]
type = HitDef
trigger1 = (animelem=1,1)||(animelem=2,1)||(animelem=3,1)||(animelem=4,1)
trigger2 =(animelem=5,1)||(animelem=6,1)||(animelem=7,1)||(animelem=8,1)
trigger3 =(animelem=9,1)||(animelem=10,1)||(animelem=11,1)||(animelem=12,1)
trigger4 =(animelem=13,1)||(animelem=14,1)||(animelem=15,1)||(animelem=16,1)
trigger5 =(animelem=17,1)||(animelem=18,1)||(animelem=19,1);||(animelem=20,1)
attr = S, HA
animtype  = Hard
damage    = 1,1;5,2
guardflag = MA
pausetime = 0,0
sparkno = -1
sparkxy=0,0
hitsound   =-1;s4000,1
guardsound =-1;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = .9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 8
envshake.freq = 100
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0


[State 0, VarAdd]
type = parentvarset
triggerall=movehit
trigger1 = 1
v =51
value = 1


[State 0, DestroySelf]
type = destroyself
trigger1 = TIME>120
trigger2=helper(3000),anim=1228&&animtime=0
trigger3=numhelper(3002)=0
trigger4 = frontedgedist <=-50

;---------------------------------------------------------------------------
;SLASERGUNUP
[Statedef 273]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1240;ifelse(((root,anim=11203)||(root,anim=8604)),1202,ifelse(((root,anim=11006)||(root,anim=11007)),1203,1203))
sprpriority = 5
velset =ifelse(root,vel x>0,root,vel x,0),0;ifelse(root,vel y>0,root,vel y,0)



[State 0, laser];laser Sounds
type = PlaySnd
triggerall = ((root,var(10)=109))
trigger1=time=0&&!parent,ishelper
value = 4000,29
volumescale = 256
channel = 0

[State 0, Helper]
type = Helper
trigger1 =!parent,ishelper&&anim!=1228;&&numhelper(123123)=0;&&root,anim!=11204
helpertype = normal ;player
name = "bolita"
ID = 123123
stateno = 266
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 0, Explod]
type = Explod
triggerall = movehit
trigger1 =time*tickspersecond
anim = 1230
ID = 3123125
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,random%2
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = .2,1
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0


[State 0, RemapPal]
type = RemapPal
trigger1=time;*tickspersecond
source = 0,31
dest = 31,random%6

[State 0, VarAdd]
type = parentvarset
trigger1 = 1
v =51
value = 1


[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, AngleDraw]
type = AngleDraw
trigger1 =1 
value = 90

[State 0, VarSet]
type = Varset
trigger1 = !parent,ishelper&&root,palno=5&&anim!=1228
v = 31    ;fv = 10
value = time
;ignorehitpause = 
;persistent = 


[State 0, PosSet];NORMAL
type = PosSet
triggerall=root,var(10)!=109
triggerall = !parent,ishelper
trigger1=1
x=root,pos x-root,fvar(32)+ifelse(root,vel x>0,-5,-13)
y=-59-ifelse(root,vel x>0,5,0)+root,vel y+root,pos y


[State 0, PosSet];NORMAL
type = PosSet
triggerall=root,var(10)!=109
triggerall = parent,ishelper
trigger1=1
x=root,pos x-root,fvar(32)+ifelse(root,vel x>0,-5,-13)
y=parent,pos y-14

[State 0, PosSet];LVARMOR
type = PosSet
triggerall=root,var(10)=109
triggerall=numhelper(323132)>0
triggerall = !parent,ishelper
trigger1=1
x=helper(323132),pos x+19
y=helper(323132),pos y-64+root,vel y


[State 0, PosSet];LVARMOR
type = PosSet
triggerall=root,var(10)=109
triggerall=numhelper(323132)>0
triggerall = parent,ishelper
trigger1=1
x=helper(323132),pos x+19
y=parent,pos y-14


[State 251, HitDef]
type = HitDef
trigger1 = animtime=0;time*tickspersecond
attr = S, HA
animtype  = Hard
damage    = 1+ifelse(root,palno=4,random%2,0),1+ifelse(root,palno=4,random%2,0)
guardflag = MA
pausetime = 0,0
sparkno = s1229;S9107
sparkxy=20,0
hitsound   =-1;s4000,5
guardsound = -1;s4000,6;S5546,0
guard.sparkno =s1229;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0
getpower=5,5

[State 0, LaserGun];LaserGun
type = Helper
triggerall=(numhelper(3001)<12);&&parent,!movecontact
trigger1 = time=0
helpertype = normal ;player
name = "LaserGun"
ID = 3001;default helper projectile id
stateno = 273
pos =0,root,pos y-14
facing = 1
keyctrl = 1
ownpal = 0
supermovetime = 0
pausemovetime = 0


[State 0, ChangeAnim];NORMAL
type = ChangeAnim
triggerall=root,var(10)!=109
triggerall =root,anim!=11204&&anim!=1228
trigger1=1
value = 1228

[State 0, ChangeAnim];LVARMOR
type = ChangeAnim
triggerall=root,var(10)=109
triggerall=numhelper(323132)>0
triggerall =helper(323132),anim!=18743&&anim!=1228
trigger1=1
value = 1228

[State 0, PlaySnd];stop laser Sounds
type = stopsnd
trigger1=anim=1228&&animtime=0
channel = 0


[State 0, DestroySelf]
type = destroyself
triggerall=root,palno!=5
trigger1 = pos y>0
trigger2 = frontedgedist <=-50
trigger3 = (pos y<root,pos y-250)
trigger4=anim=1228&&animtime=0

[State 0, DestroySelf]
type = destroyself
triggerall=root,palno=5&&parent,ishelper
trigger1 = pos y>0
trigger2 = frontedgedist <=-50
trigger3 = (pos y<root,pos y-250)
trigger4=anim=1228&&animtime=0

[State 0, ChangeState]
type = ChangeState
triggerall=root,palno=5&&!parent,ishelper
trigger1 = anim=1228&&numhelper(3001)=0
value =274
ctrl = 0

;---------------------------------------------------------------------------
;SLASERGUNRAIN
[Statedef 274]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1240;ifelse(((root,anim=11203)||(root,anim=8604)),1202,ifelse(((root,anim=11006)||(root,anim=11007)),1203,1203))
sprpriority = 5
velset =ifelse(root,vel x>0,root,vel x,0),0;ifelse(root,vel y>0,root,vel y,0)

[State 0, Explod]
type = Explod
triggerall = movehit
trigger1 =time*tickspersecond
anim = 1230
ID = 3123125
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,random%2
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = .2,1
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0


[State 0, RemapPal]
type = RemapPal
trigger1=time;*tickspersecond
source = 0,31
dest = 31,random%6

[State 0, VarAdd]
type = parentvarset
trigger1 = 1
v =51
value = 1


[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, AngleDraw]
type = AngleDraw
trigger1 =1 
value = 270


[State 0, PlaySnd];laser Sounds
type = PlaySnd
trigger1=numhelper(3002)=0&&!parent,ishelper
value = 4000,29
volumescale = 256
channel = 0

[State 0, VarSet]
type = VarSet
trigger1 = parent,ishelper
v = 31    ;fv = 10
value = parent,var(31)
;ignorehitpause = 
;persistent = 

[State 0, VarSet]
type = VarSet
triggerall=root,palno=5&&root,var(10)=7
trigger1 = !parent,ishelper
v = 31    ;fv = 10
value = 250


[State 0, PosSet]
type = PosSet
triggerall = !parent,ishelper
trigger1=1
x=enemy,pos x+2*time*facing -60*facing
y=-250

;
;[State 0, Posadd]
;type = Posadd
;triggerall = !parent,ishelper
;trigger1=time
;x=1


[State 0, PosSet]
type = PosSet
triggerall = parent,ishelper
trigger1=1
x=parent,pos x
y=parent,pos y+14

[State 251, HitDef]
type = HitDef
trigger1 = animtime=0;time*tickspersecond
attr = S, HA
animtype  = Hard
damage    = 2+ifelse(root,palno=4,random%2,0),2+ifelse(root,palno=4,random%2,0)
guardflag = MA
pausetime = 0,0
sparkno = s1239;S9107
sparkxy=-2*time+40,0;-10*facing,0
hitsound   =-1;s4000,5
guardsound = -1;s4000,6;S5546,0
guard.sparkno =s1229;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0
getpower=5,5


[State 0, LaserGun];LaserGun
type = Helper
triggerall=(numhelper(3002)<18);&&parent,!movecontact
trigger1 = time=0
helpertype = normal ;player
name = "LaserGun"
ID = 3002;default helper projectile id
stateno = 274
pos =0,enemy,pos y-250
facing = 1
keyctrl = 1
ownpal = 0
supermovetime = 0
pausemovetime = 0


[State 0, ChangeAnim]
type = ChangeAnim
triggerall =anim!=1228&&time>=var(31);root,anim!=11204&&anim!=1228
trigger1=1
value = 1228


[State 0, PlaySnd];stop laser Sounds
type = stopsnd
trigger1=anim=1228&&animtime=0
trigger2 = frontedgedist <=-50
channel = 0


[State 0, DestroySelf]
type = destroyself
trigger1=anim=1228&&animtime=0

[State 0, ChangeState]
type = ChangeState
trigger1 = POS Y >0
value =276
ctrl = 0

;---------------------------------------------------------------------------


;---------------------------------------------------------------------------
;SLASERExplosionDWSP
[Statedef 275]
type    = s                      
movetype= a                      
physics = s
anim = 1239
sprpriority = 4
velset = 0,0

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = 270

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = -15
;ignorehitpause = 
;persistent = 


[State 251, HitDef]
type = HitDef
trigger1 = (animelem=1,1)||(animelem=2,1)||(animelem=3,1)||(animelem=4,1)
trigger2 =(animelem=5,1)||(animelem=6,1)||(animelem=7,1)||(animelem=8,1)
trigger3 =(animelem=9,1)||(animelem=10,1)||(animelem=11,1)||(animelem=12,1)
trigger4 =(animelem=13,1)||(animelem=14,1)||(animelem=15,1)||(animelem=16,1)
trigger5 =(animelem=17,1)||(animelem=18,1)||(animelem=19,1);||(animelem=20,1)
attr = S, HA
animtype  = Hard
damage    = 2,2;5,2
guardflag = MA
pausetime = 0,0
sparkno = -1
sparkxy=0,0
hitsound   =-1;s4000,1
guardsound =-1;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = .9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 8
envshake.freq = 100
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0

[State 2000, 1];Crazy SparksR
type = Projectile
triggerall=root,palno=5
trigger1 = 1;animelem=1,1||animelem=2,1||animelem=3,1||animelem=4,1
postype = p1
projanim = 1243
projhitanim = 1243
projpriority = 1
projheightbound = -240, 100
projedgebound = 100
projscale=1,1
ProjHits = 1;1+ifelse( p2name="abyss",10,0)
velocity = 1+random%5,-random%5
offset = 0,0
attr = S, SP
damage   = 4+random%6+abs(p2dist x)/20,4+random%6+abs(p2dist x)/20
animtype = heavy
guardflag = MA
hitflag = MAFDP
pausetime = 0,0;10,10
hitsound   = -1;s4000,5
sparkno=1243
sparkxy = 0,0;500,500
guardsound = -1;s4000,6
ground.type = low
ground.slidetime = 0;25
ground.hittime  = 0;25
ground.velocity = 0;-6
air.animtype = Back
air.velocity = 0,0;-4,-6
air.fall = 0
down.velocity = 0,0;-4,-6
down.hittime = 0
down.bounce = 0
palfx.time = 3
palfx.add = 248,56,0;255,255,255


[State 2000, 1];Crazy SparksL
type = Projectile
triggerall=root,palno=5
trigger1 = 1;animelem=1,1||animelem=2,1||animelem=3,1||animelem=4,1
postype = p1
projanim = 1243
projhitanim = 1243
projpriority = 1
projheightbound = -240, 100
projedgebound = 100
projscale=1,1
ProjHits = 1;1+ifelse( p2name="abyss",10,0)
velocity = -1-random%5,-random%5
offset = 0,0
attr = S, SP
damage   = 4+random%6+abs(p2dist x)/20,4+random%6+abs(p2dist x)/20
animtype = heavy
guardflag = MA
hitflag = MAFDP
pausetime = 0,0;10,10
hitsound   = -1;s4000,5
sparkno=1243
sparkxy = 0,0;500,500
guardsound = -1;s4000,6
ground.type = low
ground.slidetime = 0;25
ground.hittime  = 0;25
ground.velocity = 0;-6
air.animtype = Back
air.velocity = 0,0;-4,-6
air.fall = 0
down.velocity = 0,0;-4,-6
down.hittime = 0
down.bounce = 0
palfx.time = 3
palfx.add = 248,56,0;255,255,255

[State 0, VarAdd]
type = parentvarset
triggerall=movehit
trigger1 = 1
v =51
value = 1

[State 1105]
type = destroyself
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;LASERExplosionDWR
[Statedef 276]
type    = s                      
movetype= a                      
physics = s
anim = 1239
sprpriority = 4
velset = 0,0





[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = 270
;
[State 0, PosSet]
type = PosSet
trigger1 = 1
y = -10
x=parent,pos x



[State 251, HitDef]
type = HitDef
trigger1 = (animelem=1,1)||(animelem=2,1)||(animelem=3,1)||(animelem=4,1)
trigger2 =(animelem=5,1)||(animelem=6,1)||(animelem=7,1)||(animelem=8,1)
trigger3 =(animelem=9,1)||(animelem=10,1)||(animelem=11,1)||(animelem=12,1)
trigger4 =(animelem=13,1)||(animelem=14,1)||(animelem=15,1)||(animelem=16,1)
trigger5 =(animelem=17,1)||(animelem=18,1)||(animelem=19,1);||(animelem=20,1)
attr = S, HA
animtype  = Hard
damage    = 2,2;5,2
guardflag = MA
pausetime = 0,0
sparkno = -1
sparkxy=0,0
hitsound   =-1;s4000,1
guardsound =-1;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = .9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 8
envshake.freq = 100
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0


[State 0, VarAdd]
type = parentvarset
triggerall=movehit
trigger1 = 1
v =51
value = 1


[State 0, DestroySelf]
type = destroyself
trigger1 = TIME>120
trigger2=helper(3000),anim=1228&&animtime=0
trigger3=numhelper(3002)=0
trigger4 = frontedgedist <=-50

;---------------------------------------------------------------------------
;SLASERGUNDOWN
[Statedef 277]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1240;ifelse(((root,anim=11203)||(root,anim=8604)),1202,ifelse(((root,anim=11006)||(root,anim=11007)),1203,1203))
sprpriority = 5
velset =ifelse(root,vel x>0,root,vel x,0),0;ifelse(root,vel y>0,root,vel y,0)


[State 0, laser];laser Sounds
type = PlaySnd
triggerall = ((root,var(10)=109))&&root,anim=18744
trigger1=time=0&&!parent,ishelper
value = 4000,29
volumescale = 256
channel = 0



[State 0, VelSet]
type = VelSet
triggerall=!parent,ishelper
trigger1 = root,var(10)=109
x = root,vel x
y = root,vel y

[State 0, Helper]
type = Helper
trigger1 =!parent,ishelper&&anim!=1228;&&root,anim!=11204
helpertype = normal ;player
name = "bolita"
ID = 123123
stateno = 266
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0


[State 0, Explod]
type = Explod
triggerall = movehit
trigger1 =time*tickspersecond
anim = 1230
ID = 3123125
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,random%2
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = .2,1
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 0, RemapPal]
type = RemapPal
trigger1=time;*tickspersecond
source = 0,31
dest = 31,random%6

[State 0, VarAdd]
type = parentvarset
trigger1 = 1
v =51
value = 1


[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, AngleDraw]
type = AngleDraw
trigger1 =1 
value = 90

[State 0, PosSet];NORMAL
type = PosSet
triggerall=root,var(10)!=109
triggerall = !parent,ishelper
trigger1=1
x=root,pos x-root,fvar(32)+ifelse(root,vel x>0,-5,-13)
y=root,pos y+20


[State 0, PosSet];NORMAL
type = PosSet
triggerall=root,var(10)!=109
triggerall = parent,ishelper
trigger1=1
x=root,pos x-root,fvar(32)+ifelse(root,vel x>0,-5,-13)
y=parent,pos y+14


[State 0, PosSet];LVARMOR
type = PosSet
triggerall=root,var(10)=109
triggerall=numhelper(323132)>0
triggerall = !parent,ishelper
trigger1=1
x=helper(323132),pos x+20*(root,facing)
y=helper(323132),pos y+5


[State 0, PosSet];LVARMOR
type = PosSet
triggerall=root,var(10)=109
triggerall=numhelper(323132)>0
triggerall = parent,ishelper
trigger1=1
x=parent,pos x
y=parent,pos y+14

[State 251, HitDef]
type = HitDef
trigger1 = animtime=0;time*tickspersecond
attr = S, HA
animtype  = Hard
damage    = 1+ifelse(root,palno=4,random%2,0),1+ifelse(root,palno=4,random%2,0)
guardflag = MA
pausetime = 0,0
sparkno = s1229;S9107
sparkxy=20,0
hitsound   =-1;s4000,5
guardsound = -1;s4000,6;S5546,0
guard.sparkno =s1229;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0
getpower=5,5

[State 0, LaserGun];LaserGun
type = Helper
triggerall=(numhelper(3001)<12);&&parent,!movecontact
trigger1 = time=0
helpertype = normal ;player
name = "LaserGun"
ID = 3001;default helper projectile id
stateno = 277
pos =0,root,pos y+14
facing = 1
keyctrl = 1
ownpal = 0
supermovetime = 0
pausemovetime = 0


[State 0, ChangeAnim];NORMAL
type = ChangeAnim
triggerall=root,var(10)!=109
triggerall =root,anim!=8607&&anim!=1228
trigger1=1
value = 1228

[State 0, ChangeAnim];LVARMOR
type = ChangeAnim
triggerall=root,var(10)=109
triggerall=numhelper(323132)>0
triggerall =(helper(323132),anim!=18746)&&anim!=1228
trigger1=1
value = 1228

[State 0, PlaySnd];stop laser Sounds
type = stopsnd
trigger1=anim=1228
trigger2=(helper(323132),anim!=18746)
trigger3=root,anim!=18744
channel = 0


[State 0, ChangeState]
type = ChangeState
triggerall=parent,ishelper
trigger1 = POS Y >0
value =275
ctrl = 0

[State 0, DestroySelf]
type = destroyself
trigger1=anim=1228&&animtime=0
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;THUNDERSHOT 
[Statedef 278];atan (y / x)=angulo
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1245;1246;ifelse(root,anim=11202,1206,ifelse(root,anim=8603,1207,1204))
sprpriority = 5
velset = root,vel x,root, vel y

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=0
value = S4000,30
volumescale =256
channel = -1
freqmul = 1.0
loop = 0
pan = 0


;[State 0, BindToRoot]
;type = BindToparent
;trigger1 = time=0
;time = 1;facing = 0
;pos = parent,pos x,parent,pos y
;pos = ifelse((root,anim=8202),32,ifelse(root,anim=12204,28,ifelse(root,anim=8107,42,0))),ifelse((root,anim=8202),-14,ifelse(root,anim=11202,-60,ifelse(root,anim=12204,-20,ifelse(root,anim=8107,-10,0))))

;[State 0, PosAdd]
;type = PosAdd
;trigger1 = 1
;x = root,vel x
;y = root,vel y


[State 0, Trans]
type = Trans
trigger1 = TIME=0
trans =  addalpha
alpha = 0,256

[State 0, RemapPal]
type = RemapPal
trigger1=1;*tickspersecond
source = 0,31
dest = 31,6

[State 0, Helper]
type = Helper;triggerall=numhelper(3001)<18
trigger1 =1;animelem=1,1||animelem=3,1||animelem=5,1||animelem=2,1||animelem=4,1||animelem=6,1
helpertype = normal ;player
name = "THUNDERSHOTRAY"
ID = 3001
stateno = 279
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 0, Helper]
type = Helper;triggerall=numhelper(3001)<18
trigger1 =random%2=1;animelem=1,1||animelem=3,1||animelem=5,1||animelem=2,1||animelem=4,1||animelem=6,1
helpertype = normal ;player
name = "THUNDERSHOTRAY"
ID = 3001
stateno = 279
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 0, VarAdd];la variable 9 se le suma al principio para darle super armor 
type = VarAdd	;al projectil
trigger1 = time=1
v =  9   ;fv = 
value = 1

[State 0, VarAdd];point system for helpers
type = parentvarset
triggerall=movehit
trigger1 = 1
v =51
value = 1


[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=12
triggerall=parent,stateno=280
trigger1 = time=0
v = 3    ;fv = 10
value = ifelse(root,anim=11202,3,ifelse(root,anim=8603,2,1))
ignorehitpause = 
persistent = 



[State 0, VarSet];LVUP
type = VarSet
trigger1 = time=0
trigger1 = root,var(10)=109
trigger1 = numhelper(323132)>0
trigger1 = helper(323132),anim=18750
v = 3    ;fv = 10
value = 3
ignorehitpause = 
persistent = 

[State 0, VarSet];LVUP
type = VarSet
trigger1 = time=0
trigger1 = root,var(10)=109
trigger1 = numhelper(323132)>0
trigger1 = helper(323132),anim=18751
v = 3    ;fv = 10
value = 2
ignorehitpause = 
persistent = 

[State 9000, AngleDraw]
type = AngleDraw;triggerall=vel x>vel y&&time>10
trigger1 =vel x>0
value=atan(-vel y/vel x)*180/pi


[State 9000, AngleDraw]
type = AngleDraw;triggerall=vel x>vel y&&time>10
trigger1 =vel x=0
value=90

[State 9000, AngleDraw]
type = AngleDraw;triggerall=vel x>vel y&&time>10
trigger1 =vel x<0
value=atan(-vel y/vel x)*180/pi+180


[State 1030, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 1030, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 1030, endfromproj]
type = HitOverride
triggerall=var(9)<2;cuantas veces sera golpeado hasta explotar
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 302
attr = SCA, NP, SP, HP
ignorehitpause = 1


[State 1030, endfromproj]
type = HitOverride
triggerall=var(9)=2
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 302
attr = SCA, NP, SP, HP
ignorehitpause = 1


[State 1030, VelSet]
type = VelSet
trigger1 = (!Time)
x = ifelse(root,anim=11202,0,ifelse(root,anim=8603,root,vel x,14+root,vel x));3
y=ifelse(root,anim=11202,-18+vel y,ifelse(root,anim=8603,9+vel y,root,vel y))

[State 1030,VelAdd]
type = VelAdd
trigger1 = (P2Dist X < 0) && (Vel X > -7);-6)
x = -2;.8;.4;0.2

[State 1030, VelAdd]
type = VelAdd
trigger1 = (P2Dist X > 0) && (Vel X < 7);6)
x = 2;.8;.4;0.2

[State 1030, VelAdd]
type = VelAdd
trigger1 = (EnemyNear, Pos Y -25> Pos Y) && (Vel Y < 6);2.8);6)
y = 2;.6;0.2

[State 1030, VelAdd]
type = VelAdd
trigger1 = (EnemyNear, Pos Y -25<= Pos Y) && (Vel Y > -6);2.8);6)
y = -2;.6;.2;0.2

;HOMING PROJECTILE END
[State 251, HitDef]
type = HitDef
trigger1 = time = 0
attr = S, HA
animtype  = Hard
damage    = 25,12
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =-1;s4000,7
guardsound = -1;s4000,7;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0

[State 2400, 2];Avanza
type = Velset
triggerall=var(3)=1&&time<10
trigger1 =1;animelem=1;animtime<
x = 6
y =0

[State 2400, 2];Baja
type = Velset
triggerall=var(3)=2&&time<5
trigger1 =1;animelem=1;animtime<
x = 0
y =6

[State 2400, 2];Sube
type = Velset
triggerall=var(3)=3&&time<5
trigger1 =1;animelem=1;animtime<
x = 0
y =-6


[State 0, DestroySelf]
type = changestate
trigger1 = movecontact
trigger2=win
trigger3=root,movetype=h
trigger4=time>120
value=281
;---------------------------------------------------------------------------
;THUNDERSHOTRAY1
[Statedef 279]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim =1245
sprpriority = 7
velset=(parent,vel x),(parent, vel y)


[State 0, VarSet]
type = VarSet
trigger1 = time=0
v =52   ;fv = 10
value = parent,stateno
;ignorehitpause = 
;persistent = 


[State 0, PosFreeze]
type = PosFreeze
trigger1 = 1
value = 1

[State 0, PosAdd]
type = PosAdd
triggerall = parent,stateno=278
trigger1 = ((root,anim=8107)||(root,anim=8202)||(root,anim=11202)||(root,anim=12204)||(root,anim=8603))
trigger2 = numhelper(323132)>0
trigger2 = ((helper(323132),anim=18749)||(helper(323132),anim=18750)||(helper(323132),anim=18751))
x = root,vel x
y = root,vel y



;ignorehitpause = 
;persistent = 
;
;[State 0, VarSet]
;type = VarSet
;trigger1 = time=0
;v = 16    ;fv = 10
;value = parent,vel y
;
;[State 0, VarSet]
;type = VarSet
;trigger1 = time=0
;v = 17    ;fv = 10
;value = parent,vel x
;
;
;[State 9000, AngleDraw]
;type = AngleDraw;triggerall=vel x>vel y&&time>10
;trigger1 =var(17)>0
;value=atan(-var(16)/var(17))*180/pi
;
;
;[State 9000, AngleDraw]
;type = AngleDraw;triggerall=vel x>vel y&&time>10
;trigger1 =var(17)=0
;value=90
;
;[State 9000, AngleDraw]
;type = AngleDraw;triggerall=vel x>vel y&&time>10
;trigger1 =var(17)<0
;value=atan(-var(16)/var(17))*180/pi+180
;

[State 9000, AngleDraw]
type = AngleDraw;triggerall=vel x>vel y&&time>10
trigger1 =vel x>0
value=atan(-vel y/vel x)*180/pi


[State 9000, AngleDraw]
type = AngleDraw;triggerall=vel x>vel y&&time>10
trigger1 =vel x=0&&vel y<0
value=90


[State 9000, AngleDraw]
type = AngleDraw;triggerall=vel x>vel y&&time>10
trigger1 =vel x=0&&vel y>0
value=270

[State 9000, AngleDraw]
type = AngleDraw;triggerall=vel x>vel y&&time>10
trigger1 =vel x<0
value=atan(-vel y/vel x)*180/pi+180




[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 251, HitDef]
type = HitDef
trigger1 = (animelem=1,1)||(animelem=2,1)||(animelem=3,1)||(animelem=4,1);time*tickspersecond
attr = S, HA
animtype  = Hard
damage    = 1,1
guardflag = MA
pausetime = 0,0
sparkno = s1239;S9107
sparkxy=0,0
hitsound   =-1;s4000,5
guardsound = -1;s4000,6;S5546,0
guard.sparkno =s1229;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0
getpower=5

;[State 0, ChangeAnim]
;type = ChangeAnim
;triggerall=anim=1245;trigger1 = parent,movecontact;trigger2=parent,movehit
;trigger1=win
;trigger2=(parent,stateno!=var(52))&&time>10;trigger5=movehit
;trigger3=(parent,movehit||parent,movecontact)&&parent,stateno=284
;trigger4=numhelper(3000)=0
;trigger5=animtime=0
;trigger6=parent,stateno=284
;value = 1248

[State 0, ChangeAnim]
type = ChangeAnim
triggerall=anim=1245&&anim!=1248;&&animtime=0;trigger1 = parent,movecontact;trigger2=parent,movehit
trigger1=win
trigger2=time>15;((root,anim!=8107)&&(root,anim!=8202)&&(root,anim!=11202)&&(root,anim!=12204)&&(root,anim!=8603))
value = 1248


[State 1105]
type = destroyself
trigger1 = anim=1248&&animtime=0
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;BOLITATHUNDERHSHOT
[Statedef 280]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = ifelse(root,vel x!=0||root,vel y!=0,1249,1244)
sprpriority = 6
velset=root,vel x,root,vel y

[State 0, RemapPal]
type = RemapPal
trigger1=1;*tickspersecond
source = 0,31
dest = 31,6


[State 0, BindToRoot]
type = BindToRoot
trigger1 = time=0
time = -1
pos = ifelse(root,anim=8202||root,anim=8107,15,ifelse(root,anim=12204,9,0))+(root,stateno=20)*5,ifelse(root,anim=8202,-16,ifelse(root,anim=11202,-42,ifelse(root,anim=12204,-18,ifelse(root,anim=8107,-13,0))))-(root,stateno=20)*5


[State 0, BindToRoot];LVFWD
type = BindToparent
trigger1 = time=0
trigger1 = root,var(10)=109
trigger1 = numhelper(323132)>0
trigger1 = helper(323132),anim=18749
time = -1
pos = 36,-26


[State 0, BindToRoot];LVFUP
type = BindToparent
trigger1 = time=0
trigger1 = root,var(10)=109
trigger1 = numhelper(323132)>0
trigger1 = helper(323132),anim=18750
time = -1
pos =19,-57



[State 0, BindToRoot];LVFDW
type = BindToparent
trigger1 = time=0
trigger1 = root,var(10)=109
trigger1 = numhelper(323132)>0
trigger1 = helper(323132),anim=18751
time = -1
pos =19,-19


[State 0, THUNDERSHOT];THUNDERSHOT
type = Helper
trigger1 = time=0
trigger1 = root,stateno!=1300
trigger1 = root,var(10)!=109
helpertype = normal ;player
name = "THUNDERSHOT";ifelse((anim=8202),25,ifelse(anim=12204,28,0)),ifelse((anim=8202),-20,ifelse(anim=11202,-60,ifelse(anim=12204,-20,0)))
ID = 3000;default helper projectile id
stateno = 278
pos = 0+5*(root,facing)*(root,stateno=20),-2+4*root,statetype=c-5*(root,facing)*(root,stateno=20);ifelse((root,anim=8202),32,ifelse(root,anim=12204,28,ifelse(root,anim=8107,42,0))),ifelse((root,anim=8202),-14,ifelse(root,anim=11202,-60,ifelse(root,anim=12204,-20,ifelse(root,anim=8107,-10,0))))
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0


[State 0, THUNDERSHOT];THUNDERSHOT
type = Helper
trigger1 = time=0
trigger1 = root,stateno=1300
trigger1 = root,var(10)!=109
helpertype = normal ;player
name = "THUNDERSHOT";ifelse((anim=8202),25,ifelse(anim=12204,28,0)),ifelse((anim=8202),-20,ifelse(anim=11202,-60,ifelse(anim=12204,-20,0)))
ID = 3000;default helper projectile id
stateno = 278
pos = 0,-2;ifelse((root,anim=8202),32,ifelse(root,anim=12204,28,ifelse(root,anim=8107,42,0))),ifelse((root,anim=8202),-14,ifelse(root,anim=11202,-60,ifelse(root,anim=12204,-20,ifelse(root,anim=8107,-10,0))))
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 0, THUNDERSHOT];LVTHUNDERSHOTFWD
type = Helper
trigger1 = time=0
trigger1 = root,var(10)=109
trigger1 = numhelper(323132)>0
trigger1 = helper(323132),anim=18749
helpertype = normal ;player
name = "THUNDERSHOT";ifelse((anim=8202),25,ifelse(anim=12204,28,0)),ifelse((anim=8202),-20,ifelse(anim=11202,-60,ifelse(anim=12204,-20,0)))
ID = 3000;default helper projectile id
stateno = 278
pos =51,-26
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 0, THUNDERSHOT];LVTHUNDERSHOTFUP
type = Helper
trigger1 = time=0
trigger1 = root,var(10)=109
trigger1 = numhelper(323132)>0
trigger1 = helper(323132),anim=18750
helpertype = normal ;player
name = "THUNDERSHOT";ifelse((anim=8202),25,ifelse(anim=12204,28,0)),ifelse((anim=8202),-20,ifelse(anim=11202,-60,ifelse(anim=12204,-20,0)))
ID = 3000;default helper projectile id
stateno = 278
pos =19,-67
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 0, THUNDERSHOT];LVTHUNDERSHOTFDW
type = Helper
trigger1 = time=0
trigger1 = root,var(10)=109
trigger1 = numhelper(323132)>0
trigger1 = helper(323132),anim=18751
helpertype = normal ;player
name = "THUNDERSHOT";ifelse((anim=8202),25,ifelse(anim=12204,28,0)),ifelse((anim=8202),-20,ifelse(anim=11202,-60,ifelse(anim=12204,-20,0)))
ID = 3000;default helper projectile id
stateno = 278
pos =19,-14
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0


[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1


[State 0, VarSet]
type = VarSet
trigger1 = time=0
v = 3    ;fv = 10
value = ifelse(root,anim=11202,3,ifelse(root,anim=8603,2,1))
ignorehitpause = 
persistent = 

[State 0, VarSet];LVUP
type = VarSet
trigger1 = time=0
trigger1 = root,var(10)=109
trigger1 = numhelper(323132)>0
trigger1 = helper(323132),anim=18750
v = 3    ;fv = 10
value = 3
ignorehitpause = 
persistent = 

[State 0, VarSet];LVUP
type = VarSet
trigger1 = time=0
trigger1 = root,var(10)=109
trigger1 = numhelper(323132)>0
trigger1 = helper(323132),anim=18751
v = 3    ;fv = 10
value = 2
ignorehitpause = 
persistent = 

[State 9000, AngleSet]
type = AngleSet
triggerall=var(3)=2
trigger1 = 1
Value = 270 ;Angle must be given on degrees.
 
[State 9000, AngleSet]
type = AngleSet
triggerall=var(3)=3
trigger1 = 1
Value = 90

[State 9000, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 1105]
type = destroyself
trigger1 = animtime = 0
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;THUNDERSHOT 2
[Statedef 281];atan (y / x)=angulo
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1245;ifelse(root,anim=11202,1206,ifelse(root,anim=8603,1207,1204))
sprpriority = 5
;velset = 5,0


[State 0, RemapPal]
type = RemapPal
trigger1=1;*tickspersecond
source = 0,31
dest = 31,6

[State 0, Helper]
type = Helper;triggerall=numhelper(3001)<18
trigger1 =1;animelem=1,1||animelem=3,1||animelem=5,1||animelem=2,1||animelem=4,1||animelem=6,1
helpertype = normal ;player
name = "THUNDERSHOTRAY"
ID = 3001
stateno = 279
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0
;
;[State 0, Helper]
;type = Helper;triggerall=numhelper(3001)<18
;trigger1 =animelem=2,1||animelem=4,1||animelem=6,1
;helpertype = normal ;player
;name = "THUNDERSHOTRAY"
;ID = 3001
;stateno = 280
;pos = 0,0
;postype = p1    ;p2,front,back,left,right
;facing = 1
;keyctrl = 0
;ownpal = 0
;supermovetime = 0
;pausemovetime = 0


[State 0, VarAdd];la variable 9 se le suma al principio para darle super armor 
type = VarAdd	;al projectil
trigger1 = time=1
v =  9   ;fv = 
value = 1

[State 0, VarAdd];point system for helpers
type = parentvarset
triggerall=movehit
trigger1 = 1
v =51
value = 1

[State 0, VarSet];pos x random
type = VarSet
trigger1 = time=0
v = 14    ;fv = 10
value = random%100-random%100


[State 0, VarSet];pos y random
type = VarSet
trigger1 = time=0
v = 13    ;fv = 10
value = -random%150

[State 0, VarSet];distancia a random pos
type = VarSet
trigger1 = 1
v = 15    ;fv = 10
value = var(14)-pos x

[State 0, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "var(15) = %d "
params = var(15)
;ignorehitpause = 
;persistent = 



[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=7
trigger1 = time=0
v = 3    ;fv = 10
value = ifelse(parent,anim=11202,3,ifelse(parent,anim=8603,2,1))
ignorehitpause = 
persistent = 


[State 9000, AngleDraw]
type = AngleDraw;triggerall=vel x>vel y&&time>10
trigger1 =vel x>0
value=atan(-vel y/vel x)*180/pi


[State 9000, AngleDraw]
type = AngleDraw;triggerall=vel x>vel y&&time>10
trigger1 =vel x=0
value=90

[State 9000, AngleDraw]
type = AngleDraw;triggerall=vel x>vel y&&time>10
trigger1 =vel x<0
value=atan(-vel y/vel x)*180/pi+180


[State 1030, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 1030, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 1030, endfromproj]
type = HitOverride
triggerall=var(9)<2;cuantas veces sera golpeado hasta explotar
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 302
attr = SCA, NP, SP, HP
ignorehitpause = 1


[State 1030, endfromproj]
type = HitOverride
triggerall=var(9)=2
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 302
attr = SCA, NP, SP, HP
ignorehitpause = 1


[State 1030, VelSet]
type = VelSet
trigger1 = (!Time)
x = random%15
y=-random%15
[State 1030,VelAdd]
type = VelAdd
trigger1 = (var(15) < 0) && (Vel X > -7);-6)
x = -2;.8;.4;0.2

[State 1030, VelAdd]
type = VelAdd
trigger1 = (var(15) > 0) && (Vel X < 7);6)
x = 2;.8;.4;0.2

[State 1030, VelAdd]
type = VelAdd
trigger1 = (var(13)> Pos Y) && (Vel Y < 2.8);6)
y = 2;.6;0.2

[State 1030, VelAdd]
type = VelAdd
trigger1 = (var(13)<= Pos Y) && (Vel Y > -2.8);6)
y = -2;.6;.2;0.2


;HOMING PROJECTILE END
[State 251, HitDef]
type = HitDef
trigger1 = time = 0
attr = S, HA
animtype  = Hard
damage    = 25,12
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =-1;s4000,7
guardsound = -1;s4000,7;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0

[State 2400, 2];Avanza
type = Velset
triggerall=var(3)=1&&time<10
trigger1 =1;animelem=1;animtime<
x = 6
y =0

[State 2400, 2];Baja
type = Velset
triggerall=var(3)=2
trigger1 =1;animelem=1;animtime<
x = 0
y =6

[State 2400, 2];Sube
type = Velset
triggerall=var(3)=3&&time<10
trigger1 =1;animelem=1;animtime<
x = 0
y =-6


[State 0, DestroySelf]
type = changestate
trigger1 = abs(var(15))<20&&abs(var(13)-pos y)<20&&time>10
trigger2=win
trigger3=frontedgedist<0
trigger4=backedgedist<0
trigger5=time>120
value=282
;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
;THUNDERSHOT 3
[Statedef 282];atan (y / x)=angulo
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1245;ifelse(root,anim=11202,1206,ifelse(root,anim=8603,1207,1204))
sprpriority = 5
;velset = 5,0


[State 0, RemapPal]
type = RemapPal
trigger1=1;*tickspersecond
source = 0,31
dest = 31,6

[State 0, Helper]
type = Helper;triggerall=numhelper(3001)<18
trigger1 =1;animelem=1,1||animelem=3,1||animelem=5,1||animelem=2,1||animelem=4,1||animelem=6,1
helpertype = normal ;player
name = "THUNDERSHOTRAY"
ID = 3001
stateno = 279
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0
;
;[State 0, Helper]
;type = Helper;triggerall=numhelper(3001)<18
;trigger1 =animelem=2,1||animelem=4,1||animelem=6,1
;helpertype = normal ;player
;name = "THUNDERSHOTRAY"
;ID = 3001
;stateno = 280
;pos = 0,0
;postype = p1    ;p2,front,back,left,right
;facing = 1
;keyctrl = 0
;ownpal = 0
;supermovetime = 0
;pausemovetime = 0


[State 0, VarAdd];la variable 9 se le suma al principio para darle super armor 
type = VarAdd	;al projectil
trigger1 = time=1
v =  9   ;fv = 
value = 1

[State 0, VarAdd];point system for helpers
type = parentvarset
triggerall=movehit
trigger1 = 1
v =51
value = 1


[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=7
trigger1 = time=0
v = 3    ;fv = 10
value = ifelse(parent,anim=11202,3,ifelse(parent,anim=8603,2,1))
ignorehitpause = 
persistent = 


[State 9000, AngleDraw]
type = AngleDraw;triggerall=vel x>vel y&&time>10
trigger1 =vel x>0
value=atan(-vel y/vel x)*180/pi


[State 9000, AngleDraw]
type = AngleDraw;triggerall=vel x>vel y&&time>10
trigger1 =vel x=0
value=90

[State 9000, AngleDraw]
type = AngleDraw;triggerall=vel x>vel y&&time>10
trigger1 =vel x<0
value=atan(-vel y/vel x)*180/pi+180


[State 1030, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 1030, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 1030, endfromproj]
type = HitOverride
triggerall=var(9)<2;cuantas veces sera golpeado hasta explotar
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 302
attr = SCA, NP, SP, HP
ignorehitpause = 1


[State 1030, endfromproj]
type = HitOverride
triggerall=var(9)=2
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 302
attr = SCA, NP, SP, HP
ignorehitpause = 1


[State 1030, VelSet]
type = VelSet
trigger1 = (!Time)
x = random%20
y=-random%20

[State 1030,VelAdd]
type = VelAdd
trigger1 = (P2Dist X < 0) && (Vel X > -7);-6)
x = -2;.8;.4;0.2

[State 1030, VelAdd]
type = VelAdd
trigger1 = (P2Dist X > 0) && (Vel X < 7);6)
x = 2;.8;.4;0.2

[State 1030, VelAdd]
type = VelAdd
trigger1 = (EnemyNear, Pos Y -25> Pos Y) && (Vel Y < 6);2.8);6)
y = 2;.6;0.2

[State 1030, VelAdd]
type = VelAdd
trigger1 = (EnemyNear, Pos Y -25<= Pos Y) && (Vel Y > -6);2.8);6)
y = -2;.6;.2;0.2

;HOMING PROJECTILE END
[State 251, HitDef]
type = HitDef
trigger1 = time = 0
attr = S, HA
animtype  = Hard
damage    = 25,12
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =-1;s4000,7
guardsound = -1;s4000,7;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0

[State 2400, 2];Avanza
type = Velset
triggerall=var(3)=1&&time<10
trigger1 =1;animelem=1;animtime<
x = 6
y =0

[State 2400, 2];Baja
type = Velset
triggerall=var(3)=2
trigger1 =1;animelem=1;animtime<
x = 0
y =6

[State 2400, 2];Sube
type = Velset
triggerall=var(3)=3&&time<10
trigger1 =1;animelem=1;animtime<
x = 0
y =-6

[State 0, VarSet]
type = VarSet
trigger1 = random%150
v = 9    ;fv = 10
value = 0
;ignorehitpause = 
;persistent = 

[State 0, VelSet]
type = VelSet
trigger1 = movecontact
x = ifelse(vel x>vel y,(vel x)*4,vel x)
y = ifelse(vel y>vel x,(vel y)*4,vel y)


;[State 0, DestroySelf]
;type = destroyself
;trigger1 = pos y>0
;trigger2 = frontedgedist <=-50
;trigger3 = frontedgedist <=-50
;trigger4 = (pos y<root,pos y-250)

[State 0, DestroySelf]
type = changestate
trigger1 =movecontact
trigger2=win
trigger3=root,movetype=h
trigger4=time>120
value=279
;[State 0, DestroySelf]
;type = destroyself
;trigger1 = movecontact&&random%2=1
;trigger2=win;trigger3=abs(p2dist x<20)&&abs(p2dist y<20)
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------

;SHMGHELPER
[Statedef 283]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = ifelse(((root,anim=11203)||(root,anim=8604)),1262,ifelse(((root,anim=11006)||(root,anim=11007)),1263,1263))
sprpriority = 5
velset = 12,0



[State 0, VarAdd];la variable 9 se le suma al principio para darle super armor 
type = VarAdd	;al projectil
trigger1 = time=1
v =  9   ;fv = 
value = 1




[State 0, VarAdd];point system for helpers
type = parentvarset
triggerall=movehit
trigger1 = 1
v =51
value = 1


;[State 0, ParentVarSet]
;type = ParentVarSet
;triggerall=root,var(17)>0
;trigger1 = time=0
;v =  17   ;fv = 
;value = root,var(17)-1
;ignorehitpause = 
;persistent = 


;[State 0, VarSet]
;type = VarSet
;triggerall=root,var(10)=1
;trigger1 = time=0
;v = 3    ;fv = 10
;value = ifelse(parent,anim=11203,3,ifelse((parent,anim=11006&&root,animelem=1,1),4,ifelse((parent,anim=11006&&root,animelem=2,1),5,6)))
;ignorehitpause = 
;persistent = 

[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=14
triggerall=root,anim=11203
trigger1 = time=0
v = 3    ;fv = 10
value = 3
ignorehitpause = 
persistent = 

[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=14
triggerall=root,anim=11006
trigger1 = time=0
v = 3    ;fv = 10
value = ifelse((root,animelem=1,1),4,ifelse((root,animelem=2,1),5,6))
ignorehitpause = 
persistent = 


[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=14
triggerall=root,anim=11007
trigger1 = time=0
v = 3    ;fv = 10
value = ifelse((root,animelem=1,1),6,ifelse((root,animelem=2,1),5,4))
ignorehitpause = 
persistent = 

[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=14
triggerall=root,anim=8604
trigger1 = time=0
v = 3    ;fv = 10
value = 2
ignorehitpause = 
persistent = 


[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=14
triggerall=parent,anim=8605
trigger1 = time=0
v = 3    ;fv = 10
value = ifelse((parent,anim=8605&&root,animelem=1,1),9,ifelse((parent,anim=8605&&root,animelem=2,1),8,7))
ignorehitpause = 
persistent = 


[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=14
triggerall=parent,anim=8606
trigger1 = time=0
v = 3    ;fv = 10
value = ifelse((parent,anim=8606&&root,animelem=1,1),7,ifelse((parent,anim=8606&&root,animelem=2,1),8,9))
ignorehitpause = 
persistent = 


[State 0, VarSet];LVARMORDW
type = VarSet
trigger1 =(root,var(10)=109)&&(parent,anim=18745)
v = 3    ;fv = 10
value = 2


[State 0, VarSet];LVARMORUP
type = VarSet
trigger1 =(root,var(10)=109)&&(parent,anim=18741)
v = 3    ;fv = 10
value = 3


[State 9000, AngleSet]
type = AngleSet
triggerall=var(3)=2
trigger1 = 1
Value = 270 ;Angle must be given on degrees.
 
[State 9000, AngleSet]
type = AngleSet
triggerall=var(3)=3
trigger1 = 1
Value = 90

[State 9000, AngleSet]
type = AngleSet
triggerall=var(3)=4
trigger1 = 1
Value = 25

[State 9000, AngleSet]
type = AngleSet
triggerall=var(3)=5
trigger1 = 1
Value = 45

[State 9000, AngleSet]
type = AngleSet
triggerall=var(3)=6
trigger1 = 1
Value = 75

[State 9000, AngleSet]
type = AngleSet
triggerall=var(3)=7
trigger1 = 1
Value = 295

[State 9000, AngleSet]
type = AngleSet
triggerall=var(3)=8
trigger1 = 1
Value = 315

[State 9000, AngleSet]
type = AngleSet
triggerall=var(3)=9
trigger1 = 1
Value = 345

[State 9000, AngleDraw]
type = AngleDraw
trigger1 = 1
;FVar(0)*2pi ;Angle must be given on degrees.

;[State 0, VarSet]
;type = VarSet
;trigger1 = time=0
;fv = 3    ;fv = 10
;value = root,vel x

;[State 0, VarSet]
;type = VarSet
;trigger1 = time=0
;fv = 4    ;fv = 10
;value = root,vel y


[State 1030, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 1030, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 1030, endfromproj]
type = HitOverride
triggerall=var(9)<2;cuantas veces sera golpeado hasta explotar
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 260
attr = SCA, NP, SP, HP
ignorehitpause = 1


[State 1030, endfromproj]
type = HitOverride
triggerall=var(9)=2
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 253
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 251, HitDef]
type = HitDef
trigger1 = time = 0
attr = S,NA
animtype  = Hard
damage    = 13,7
hitflag=MAFD
guardflag = MAFD
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =s4000,5
guardsound = s4000,6;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0



;[State 0, PlaySnd]
;type = PlaySnd
;trigger1 = movehit=1
;value = s4000,1
;volume = 255
;channel = 5

;[State 0, PlaySnd]
;type = PlaySnd
;trigger1 = pos y>0&&var(3)=2
;value = s4000,2
;volume = 255
;channel = 5

[State 0, PosSet]
type = PosSet
triggerall = root,var(10)=5&&root,palno=5
trigger1=frontedgebodydist<=0
x = -backedgedist
y = pos y
;ignorehitpause = 
;persistent = 

[State 2400, 2];Avanza
type = Velset
triggerall=var(3)=1
trigger1 =1;animelem=1;animtime<
x = 12
y =0

[State 2400, 2];Baja
type = Velset
triggerall=var(3)=2
trigger1 =1;animelem=1;animtime<
x = 0
y =12

[State 2400, 2];Sube
type = Velset
triggerall=var(3)=3
trigger1 =1;animelem=1;animtime<
x = 0
y =-15

[State 2400, 2];25 grados
type = Velset
triggerall=var(3)=4
trigger1 =1;animelem=1;animtime<
x = 12
y =-6

[State 2400, 2];45 grados
type = Velset
triggerall=var(3)=5
trigger1 =1;animelem=1;animtime<
x = 12
y =-12

[State 2400, 2];75 grados
type = Velset
triggerall=var(3)=6
trigger1 =1;animelem=1;animtime<
x = 3
y =-12

[State 2400, 2];295 grados
type = Velset
triggerall=var(3)=7
trigger1 =1;animelem=1;animtime<
x = 6
y = 12

[State 2400, 2];315 grados
type = Velset
triggerall=var(3)=8
trigger1 =1;animelem=1;animtime<
x = 12
y = 12

[State 2400, 2];345 grados
type = Velset
triggerall=var(3)=9
trigger1 =1;animelem=1;animtime<
x = 12
y = 3


[State 0, ChangeAnim]
type = CHANGESTATE
trigger1 = pos y>=0
value = 296

[State 0, DestroySelf]
type = changestate
trigger1 = movecontact
trigger2 = anim=1999&&animtime=0;pos y>0
trigger3 = frontedgedist <=-50
trigger4 = (pos y<root,pos y-250)
value=297
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;BIGShotgun
[Statedef 285]
type    = S
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = ifelse((root,palno=5),ifelse(root,anim=11201,1278,ifelse(root,anim=8600,1279,1277)) ,ifelse(root,anim=11201,1275,ifelse(root,anim=8600,1276,1274)))
sprpriority = 5
velset = 0,0;root,vel x,root,vel y

[State 0, VelSet];LVBINDSPEED
type = VelSet
trigger1 = root,var(10)=109
x = root,vel x
y = root,vel y

[State 0, ChangeAnim];LVSHOTGUNUP
type = ChangeAnim
triggerall=numhelper(323132)>0
triggerall=root,var(10)=109
triggerall=root,palno!=7
trigger1 =time=0
trigger1 =helper(323132),anim=18750
value = 1275

[State 0, ChangeAnim];LVSHOTGUNDW
type = ChangeAnim
triggerall=numhelper(323132)>0
triggerall=root,var(10)=109
triggerall=root,palno!=7
trigger1 =time=0
trigger1 =helper(323132),anim=18751
value = 1276

[State 0, ChangeAnim];LVSHOTGUNFWDNIGHTMARE
type = ChangeAnim
triggerall=numhelper(323132)>0
triggerall=root,var(10)=109
triggerall=root,palno=7
trigger1 =time=0
trigger1 =helper(323132),anim=18749
value = 1277

[State 0, ChangeAnim];LVSHOTGUNUPNIGHTMARE
type = ChangeAnim
triggerall=numhelper(323132)>0
triggerall=root,var(10)=109
triggerall=root,palno=7
trigger1 =time=0
trigger1 =helper(323132),anim=18750
value = 1278

[State 0, ChangeAnim];LVSHOTGUNDWNIGHTMARE
type = ChangeAnim
triggerall=numhelper(323132)>0
triggerall=root,var(10)=109
triggerall=root,palno=7
trigger1 =time=0
trigger1 =helper(323132),anim=18751
value = 1279

[State 0, PosSet];LVFWD
type = PosSet
TRIGGERALL=numhelper(323132)>0
trigger1 = root,var(10)=109
trigger1 = helper(323132),anim=18749
x = (helper(323132),pos x)+40*(root,facing)
y = (helper(323132),pos y) -29

[State 0, PosSet];LVUP
type = PosSet
TRIGGERALL=numhelper(323132)>0
trigger1 = root,var(10)=109
trigger1 = helper(323132),anim=18750
x = (helper(323132),pos x)+19*(root,facing)
y = (helper(323132),pos y) -62

[State 0, PosSet];LVDW
type = PosSet
TRIGGERALL=numhelper(323132)>0
trigger1 = root,var(10)=109
trigger1 = helper(323132),anim=18751
x = (helper(323132),pos x)+21*(root,facing)
y = (helper(323132),pos y)-16


[State 0, Shotgun];Shotgun Sounds
type = PlaySnd
trigger1 =root,var(10)=109
trigger1=time=0
value = 4000,13
volumescale = 256
channel = 0


[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time=0&&parent,ishelper&&root,anim=8600
value = 1278;1275
;elem = 1
;ignorehitpause = 
;persistent = 


[State 0, PosSet]
type = PosSet
triggerall = parent,ishelper
trigger1=(root,anim=8201)||(root,anim=12202);||root,anim=12202
x = parent,pos x +40*facing
y = parent,pos y

[State 0, PosSet]
type = PosSet
triggerall = parent,ishelper
trigger1=root,anim=8600
x = enemy,pos x
y = 0;enemy,pos y;-150;+40*numhelper(3002);*facing

[State 0, VarAdd];la variable 9 se le suma al principio para darle super armor 
type = VarAdd	;al projectil
trigger1 = time=1
v =  9   ;fv = 
value = 1

[State 0, VarAdd];point system for helpers
type = parentvarset
triggerall=movehit
trigger1 = 1
v =51
value = 1


[State 0, VarSet]
type = VarSet
triggerall=root,palno!=5
triggerall=root,var(10)=13
trigger1 = time=0
v = 3    ;fv = 10
value = ifelse(root,anim=11201,3,ifelse(root,anim=8600,2,1))
ignorehitpause = 
persistent = 


[State 0, VarSet]
type = VarSet
triggerall=root,palno=5
triggerall=root,var(10)=13
trigger1 = time=0
v = 3    ;fv = 10
value = (!parent,ishelper)*ifelse(root,anim=11201,3,ifelse(root,anim=8600,2,1))+(parent,ishelper)*ifelse(root,anim=11201,3,ifelse(root,anim=8600,3,1))
ignorehitpause = 
persistent = 



[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=109
triggerall=numhelper(323132)>0
trigger1 = time=0
trigger1 = helper(323132),anim=18751
v = 3    ;fv = 10
value = 2

[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=109
triggerall=numhelper(323132)>0
trigger1 = time=0
trigger1 = helper(323132),anim=18750
v = 3    ;fv = 10
value = 3


[State 9000, AngleSet]
type = AngleSet
triggerall=var(3)=2
trigger1 = 1
Value = 270 ;Angle must be given on degrees.
 
[State 9000, AngleSet]
type = AngleSet
triggerall=var(3)=3
trigger1 = 1
Value = 90

[State 9000, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 1030, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
ignorehitpause = 1


[State 1030, endfromproj]
type = HitOverride
triggerall=var(9)<2;cuantas veces sera golpeado hasta explotar
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 260
attr = SCA, NP, SP, HP
ignorehitpause = 1


[State 1030, endfromproj]
type = HitOverride
triggerall=var(9)=2
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 253
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 251, HitDef]
type = HitDef
triggerall=(root,palno!=5)&&(root,palno!=7)
trigger1 = time = 0
attr = S, SP
animtype  = Hard
damage    = 140+(floor(70*(70/(abs(root,pos x-enemynear,pos x))))),70+(floor(35*(35/(abs(root,pos x-enemynear,pos x)))))
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =-1;s4000,2
guardsound = -1;s4000,2;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 3
;guard.sparkno; = S449
ground.hittime  =0;15
ground.velocity = floor(-20*133/abs(root,pos x-enemynear,pos x))
air.juggle = 0
air.velocity = -10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 8
envshake.freq = 100
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0

[State 251, HitDef]
type = HitDef
triggerall=(root,palno=5)||(root,palno=7)
trigger1 = time = 0
attr = S, SP
animtype  = Hard
damage    = 160+floor(80*(80/(abs(root,pos x-enemynear,pos x)))),80+floor(40*(40/(abs(root,pos x-enemynear,pos x))))
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =-1;s4000,2
guardsound = -1;s4000,2;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 3
;guard.sparkno; = S449
ground.hittime  =0;15
ground.velocity = floor(-20*(133/abs(root,pos x-enemynear,pos x)))
air.juggle = 0
air.velocity = -10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 8
envshake.freq = 100
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0



[State 0, EnvColor]
type = EnvColor
trigger1 = time=0;animelem=4
value = 255,255,255
time = 1

[State 0, NShotgun];numhelper(3002)=0
type = Helper
triggerall = root,palno=5&&(ifelse(root,anim=8600,!parent,ishelper,root,anim=11201&&numhelper(3001)<3*numhelper(3000)))
trigger1=time=0
helpertype = normal ;player
name = "NShotgun"
ID = 3001+(root,anim=8600)
stateno = 285
pos = ifelse(root,anim=11201,0,ifelse(root,anim=8600,enemy,pos x,20)),ifelse(root,anim=11201,-60,ifelse(root,anim=8600,0,-20))
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 0, DestroySelf]
type = destroyself
trigger1 = animtime=0
;---------------------------------------------------------------------------


;---------------------------------------------------------------------------
;FlameShotMSX
[Statedef 286]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = ifelse(root,anim=11201,1268,ifelse(ROOT,anim=8600,1269,1267))
sprpriority = 5
velset = 1.2,-.6


[State 0, ChangeAnim];LVFLAMEMS1UP
type = ChangeAnim
triggerall=numhelper(323132)>0
triggerall=root,var(10)=109
trigger1 =time=0
trigger1 =helper(323132),anim=18750
value = 1268

[State 0, ChangeAnim];LVFLAMEMS1DW
type = ChangeAnim
triggerall=numhelper(323132)>0
triggerall=root,var(10)=109
trigger1 =time=0
trigger1 =helper(323132),anim=18751
value = 1269

[State 0, PosSet];LVFWD
type = PosSet
TRIGGERALL=numhelper(323132)>0
TRIGGERALL=TIME=0
trigger1 = root,var(10)=109
trigger1 = helper(323132),anim=18749
x = (helper(323132),pos x)+40*(root,facing)
y = (helper(323132),pos y) -29

[State 0, PosSet];LVUP
type = PosSet
TRIGGERALL=numhelper(323132)>0
TRIGGERALL=TIME=0
trigger1 = root,var(10)=109
trigger1 = helper(323132),anim=18750
x = (helper(323132),pos x)+19*(root,facing)
y = (helper(323132),pos y) -62

[State 0, PosSet];LVDW
type = PosSet
TRIGGERALL=numhelper(323132)>0
TRIGGERALL=TIME=0
trigger1 = root,var(10)=109
trigger1 = helper(323132),anim=18751
x = (helper(323132),pos x)+19*(root,facing)
y = (helper(323132),pos y)


[State 0, FLAME];FLAME Sounds
type = PlaySnd
trigger1 =root,var(10)=109
trigger1=time=0
value = 4000,15
volumescale = 256
channel = 0

[State 0, VarAdd];la variable 9 se le suma al principio para darle super armor 
type = VarAdd	;al projectil
trigger1 = time=1
v =  9   ;fv = 
value = 1

[State 0, VarAdd];point system for helpers
type = parentvarset
triggerall=movehit
trigger1 = 1
v =51
value = 1

[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=16
trigger1 = time=0
v = 3    ;fv = 10
value = ifelse(parent,anim=11201,3,ifelse(parent,anim=8600,2,1))
ignorehitpause = 
persistent = 

[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=109
triggerall=numhelper(323132)>0
trigger1 = time=0
trigger1 = helper(323132),anim=18751
v = 3    ;fv = 10
value = 2

[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=109
triggerall=numhelper(323132)>0
trigger1 = time=0
trigger1 = helper(323132),anim=18750
v = 3    ;fv = 10
value = 3


[State 9000, AngleSet]
type = AngleSet
triggerall=var(3)=2
trigger1 = 1
Value = 270 ;Angle must be given on degrees.
 
[State 9000, AngleSet]
type = AngleSet
triggerall=var(3)=3
trigger1 = 1
Value = 90

[State 9000, AngleDraw]
type = AngleDraw
trigger1 = 1


[State 1030, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT,AP
ignorehitpause = 1

[State 1030, endfromproj]
type = HitOverride
triggerall=var(9)<2;cuantas veces sera golpeado hasta explotar
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 260
attr = SCA, NP, SP, HP
ignorehitpause = 1


[State 1030, endfromproj]
type = HitOverride
triggerall=var(9)=2
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 253
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 251, HitDef]
type = HitDef
trigger1 = time
attr = S, SA
animtype  = Hard
damage    = 2,2
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =-1;s4000,2
guardsound = -1;s4000,2;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 0
envshake.freq = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0

[State 2400, 2];Avanza
type = Velset
triggerall=var(3)=1&&movecontact
trigger1 =1;animelem=1;animtime<
x = .6
y =-1.2

[State 2400, 2];Avanza
type = Velset
triggerall=var(3)=1&&!movecontact
trigger1 =1;animelem=1;animtime<
x = 1.2
y =-.6


[State 2400, 2];Baja
type = Velset
triggerall=var(3)=2
trigger1 =1;animelem=1;animtime<
x = 0
y =2.4

[State 2400, 2];Sube
type = Velset
triggerall=var(3)=3
trigger1 =1;animelem=1;animtime<
x = 0
y =-2.4

[State 0, ChangeState]
type = ChangeState
trigger1 = pos y>0
value = 287
ctrl = 0

[State 0, DestroySelf]
type = destroyself
triggerall=var(3)!=3
trigger1 = animtime=0
trigger2 = frontedgedist <=-50

[State 0, DestroySelf]
type = destroyself
triggerall=var(3)=3
trigger1=(pos y<root,pos y-250)
trigger2 = animtime=0
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;FlameExplosionMSX
[Statedef 287]
type    = s                      
movetype= a                      
physics = s
anim = 1270
sprpriority = 4
velset = 0,0

[State 0, PosAdd]
type = PosAdd
trigger1 = TIME=0
x = -35
y = 0




[State 251, HitDef]
type = HitDef
trigger1 = time
attr = S, SP
animtype  = Hard
damage    = 2,2;5,2
guardflag = MA
pausetime = 0,0
sparkno = -1
sparkxy=0,0
hitsound   =-1;s4000,1
guardsound =-1;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = .9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0


[State 0, VarAdd]
type = parentvarset
triggerall=movehit
trigger1 = 1
v =51
value = 1

[State 1105]
type = destroyself
trigger1 = animtime = 0

;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
;BFlameShotMSX
[Statedef 288]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = ifelse(root,anim=11201,1272,ifelse(ROOT,anim=8600,1273,1271))
sprpriority = 5
velset = 1.2,-.6


[State 0, ChangeAnim];LVFLAMEMS1UP
type = ChangeAnim
triggerall=numhelper(323132)>0
triggerall=root,var(10)=109
trigger1 =time=0
trigger1 =helper(323132),anim=18750
value = 1272

[State 0, ChangeAnim];LVFLAMEMS1DW
type = ChangeAnim
triggerall=numhelper(323132)>0
triggerall=root,var(10)=109
trigger1 =time=0
trigger1 =helper(323132),anim=18751
value = 1273

[State 0, PosSet];LVFWD
type = PosSet
TRIGGERALL=numhelper(323132)>0
TRIGGERALL=TIME=0
trigger1 = root,var(10)=109
trigger1 = helper(323132),anim=18749
x = (helper(323132),pos x)+40*(root,facing)
y = (helper(323132),pos y) -29

[State 0, PosSet];LVUP
type = PosSet
TRIGGERALL=numhelper(323132)>0
TRIGGERALL=TIME=0
trigger1 = root,var(10)=109
trigger1 = helper(323132),anim=18750
x = (helper(323132),pos x)+19*(root,facing)
y = (helper(323132),pos y) -62

[State 0, PosSet];LVDW
type = PosSet
TRIGGERALL=numhelper(323132)>0
TRIGGERALL=TIME=0
trigger1 = root,var(10)=109
trigger1 = helper(323132),anim=18751
x = (helper(323132),pos x)+19*(root,facing)
y = (helper(323132),pos y)


[State 0, FLAME];FLAME Sounds
type = PlaySnd
trigger1 =root,var(10)=109
trigger1=time=0
value = 4000,15
volumescale = 256
channel = 0


[State 0, VarAdd];la variable 9 se le suma al principio para darle super armor 
type = VarAdd	;al projectil
trigger1 = time=1
v =  9   ;fv = 
value = 1

[State 0, VarAdd];point system for helpers
type = parentvarset
triggerall=movehit
trigger1 = 1
v =51
value = 1

[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=17
trigger1 = time=0
v = 3    ;fv = 10
value = ifelse(parent,anim=11201,3,ifelse(parent,anim=8600,2,1))
ignorehitpause = 
persistent = 

[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=109
triggerall=numhelper(323132)>0
trigger1 = time=0
trigger1 = helper(323132),anim=18751
v = 3    ;fv = 10
value = 2

[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=109
triggerall=numhelper(323132)>0
trigger1 = time=0
trigger1 = helper(323132),anim=18750
v = 3    ;fv = 10
value = 3


[State 9000, AngleSet]
type = AngleSet
triggerall=var(3)=2
trigger1 = 1
Value = 270 ;Angle must be given on degrees.
 
[State 9000, AngleSet]
type = AngleSet
triggerall=var(3)=3
trigger1 = 1
Value = 90

[State 9000, AngleDraw]
type = AngleDraw
trigger1 = 1


[State 1030, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT,AP
ignorehitpause = 1

[State 1030, endfromproj]
type = HitOverride
triggerall=var(9)<2;cuantas veces sera golpeado hasta explotar
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 260
attr = SCA, NP, SP, HP
ignorehitpause = 1


[State 1030, endfromproj]
type = HitOverride
triggerall=var(9)=2
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 253
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 251, HitDef]
type = HitDef
trigger1 = time
attr = S, HA
animtype  = Hard
damage    = 3,3
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =-1;s4000,2
guardsound = -1;s4000,2;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 0
envshake.freq = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0

[State 2400, 2];Avanza
type = Velset
triggerall=var(3)=1&&movecontact
trigger1 =1;animelem=1;animtime<
x = .9
y =-1.2

[State 2400, 2];Avanza
type = Velset
triggerall=var(3)=1&&!movecontact
trigger1 =1;animelem=1;animtime<
x = 1.8
y =-.6


[State 2400, 2];Baja
type = Velset
triggerall=var(3)=2
trigger1 =1;animelem=1;animtime<
x = 0
y =4.8

[State 2400, 2];Sube
type = Velset
triggerall=var(3)=3
trigger1 =1;animelem=1;animtime<
x = 0
y =-4.8

[State 0, ChangeState]
type = ChangeState
trigger1 = pos y>0
value = 287
ctrl = 0

[State 0, DestroySelf]
type = destroyself
triggerall=var(3)!=3
trigger1 = animtime=0
trigger2 = frontedgedist <=-50

[State 0, DestroySelf]
type = destroyself
triggerall=var(3)=3
trigger1=(pos y<root,pos y-250)
trigger2 = animtime=0
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;SROCKETLAUNCHER
[Statedef 289]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = ifelse(root,anim=11202,1281,ifelse(root,anim=8603,1282,1280))
sprpriority = 5
velset = ifelse(root,anim=8603,0,0),ifelse(root,anim=8603,6,ifelse(root,anim=11202,-6,0))

[State 0, Helper]
type = Helper
trigger1 = animelem=1,1
helpertype = normal ;player
name = "SmokeTrail"
ID = 515151
stateno = 305
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0


[State 0, Trans]
type = Trans
trigger1 = TIME=0
trans =  addalpha
alpha = 0,256


[State 0, SmokeThrow]
type = Helper
trigger1 =time=0
trigger1=root,var(10)=109
helpertype = normal ;player
name = "SmokeThrow"
ID = 414141
stateno = 306
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 0, IronLizard];IronLizard Sounds fiushh corto
type = PlaySnd
trigger1=root,var(10)=109
trigger1=TIME=0
value = 4000,12
volumescale = 256
channel = -1


[State 0, ChangeAnim];LVRLAUNCHERUP
type = ChangeAnim
trigger1 = root,var(10)=109
trigger1 = time=0
trigger1 = numhelper(323132)>0
trigger1 = helper(323132),anim=18753
value = 1281

[State 0, ChangeAnim];LVRLAUNCHERDW
type = ChangeAnim
trigger1 = root,var(10)=109
trigger1 = time=0
trigger1 = numhelper(323132)>0
trigger1 = helper(323132),anim=18754
value = 1282

[State 0, PosSet];LVFWD
type = PosSet
TRIGGERALL=numhelper(323132)>0
trigger1 = root,var(10)=109
trigger1 = time=0
trigger1 = helper(323132),anim=18752
x = (helper(323132),pos x)+40*(root,facing)
y = (helper(323132),pos y) -29

[State 0, PosSet];LVUP
type = PosSet
TRIGGERALL=numhelper(323132)>0
trigger1 = root,var(10)=109
trigger1 = helper(323132),anim=18753
trigger1 = time=0
x = (helper(323132),pos x)+19*(root,facing)
y = (helper(323132),pos y) -62

[State 0, PosSet];LVDW
type = PosSet
TRIGGERALL=numhelper(323132)>0
trigger1 = root,var(10)=109
trigger1 = time=0
trigger1 = helper(323132),anim=18754
x = (helper(323132),pos x)+19*(root,facing)
y = (helper(323132),pos y)



[State 0, VarSet]
type = VarSet
trigger1 = time=0
v = 19    ;fv = 10
value = 1
;ignorehitpause = 
;persistent = 



[State 0, VarAdd];la variable 9 se le suma al principio para darle super armor 
type = VarAdd	;al projectil
trigger1 = time=1
v =  9   ;fv = 
value = 1

[State 0, VarAdd];point system for helpers
type = parentvarset
triggerall=movehit
trigger1 = 1
v =51
value = 1


[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=18
trigger1 = time=0
v = 3    ;fv = 10
value = ifelse(parent,anim=11202,3,ifelse(parent,anim=8603,2,1))
ignorehitpause = 
persistent = 


[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=109
triggerall=numhelper(323132)>0
trigger1 = time=0
trigger1 = helper(323132),anim=18754
v = 3    ;fv = 10
value = 2

[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=109
triggerall=numhelper(323132)>0
trigger1 = time=0
trigger1 = helper(323132),anim=18753
v = 3    ;fv = 10
value = 3

[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=109
triggerall=numhelper(323132)>0
trigger1 = time=0
trigger1 = helper(323132),anim=18752
v = 3    ;fv = 10
value = 1

;[State 9000, AngleSet]
;type = AngleSet
;triggerall=var(3)=2
;trigger1 = 1
;Value = 270 ;Angle must be given on degrees.
; 
;[State 9000, AngleSet]
;type = AngleSet
;triggerall=var(3)=3
;trigger1 = 1
;Value = 90
;
;[State 9000, AngleDraw]
;type = AngleDraw
;triggerall=var(3)!=-1
;trigger1 = 1

[State 9000, AngleDraw]
type = AngleDraw;triggerall=vel x>vel y&&time>10
trigger1 =vel x>0
value=atan(-vel y/vel x)*180/pi


[State 9000, AngleDraw]
type = AngleDraw;triggerall=vel x>vel y&&time>10
trigger1 =vel x=0&&vel y<0
value=90

[State 9000, AngleDraw]
type = AngleDraw;triggerall=vel x>vel y&&time>10
trigger1 =vel x=0&&vel y>0
value=270

[State 9000, AngleDraw]
type = AngleDraw;triggerall=vel x>vel y&&time>10
trigger1 =vel x<0
value=atan(-vel y/vel x)*180/pi+180


[State 1030, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 1030, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 1030, endfromproj]
type = HitOverride
triggerall=var(9)<2;cuantas veces sera golpeado hasta explotar
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 302
attr = SCA, NP, SP, HP
ignorehitpause = 1


[State 1030, endfromproj]
type = HitOverride
triggerall=var(9)=2
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 302
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 251, HitDef]
type = HitDef
trigger1 = 1;time = 0
attr = S, SP
animtype  = Hard
damage    = 45+(floor((root,palno=5)*(abs(vel x)+abs(vel y))/2)),30
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =s4000,7
guardsound = s4000,7;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0


[State 2400, 2];Avanza
type = Velset
triggerall=var(3)=1&&(animelem=6||animelem=7)
trigger1 =1;animelem=1;animtime<
x = 6
y =0

[State 2400, 2];Baja
type = Velset
triggerall=var(3)=2
trigger1 =1;animelem=1;animtime<
x = 0
y =6

[State 2400, 2];Sube
type = Velset
triggerall=var(3)=3
trigger1 =1;animelem=1;animtime<
x = 0
y =-6

[State 0, PosSet]
type = PosSet
triggerall=root,palno=5
trigger1 = pos y>=-10&&(vel x=0);&&anim=1214
x = random%150
y = -200

[State 0, PosAdd]
type = PosAdd
triggerall=root,palno=5
trigger1 = (pos y<root,pos y-240)&&vel y <0
x = (random%10)
y = (random%10)
;ignorehitpause = 
;persistent = 


[State 0, VarSet]
type = VarSet
trigger1 = (pos y<root,pos y-250)&&vel y <0
v = 3    ;fv = 10
value = -1

[State 0, VelSet]
type = VelSet
trigger1 = var(3)=-1
x = 15
y = 15



[State 0, DestroySelf]
type = changestate
triggerall=root,palno!=5
trigger1 = movecontact
trigger2 = pos y>0
trigger3 = frontedgedist <=-50
trigger4 = (pos y<root,pos y-250)
value = ifelse(var(3)=1,258,ifelse(var(3)=2,304,258))

[State 0, DestroySelf]
type = changestate
triggerall=root,palno=5
trigger1 = movecontact
trigger2 = frontedgedist <=-50
value = ifelse(var(3)=1,258,ifelse(var(3)=2,304,258))

[State 0, DestroySelf]
type = changestate
triggerall=root,palno=5
trigger1 = pos y>=0&&(vel x!=0);&&anim=1214
value = 304

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;SMOKEFLOOR
[Statedef 290]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 16127
sprpriority = 3
velset=0,0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, PosSet]
type = PosSet
trigger1 = 1
x = root,pos x
y = 0

[State 1105]
type = destroyself
trigger1=animtime=0
trigger1 = root,pos y=0
trigger2 = root,pos y<-60
trigger2=animtime=0
trigger3=(root,var(10)!=101)

;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
;Propulsor1
[Statedef 291]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 16126
sprpriority = 6
velset=0,0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1



[State 0, VarSet]
type = VarSet
trigger1 = var(44)<180
v = 44    ;fv = 10
value = 180

[State 0, VarSet]
type = VarSet
trigger1 = var(44)>360
v = 44    ;fv = 10
value = 360

[State 0, VarAdd]
type = VarAdd
trigger1 = (root,command="holdback")&&time
v = 44
value = 5

[State 0, VarAdd]
type = VarAdd
trigger1 = (root,command="holdfwd")&&time
v = 44
value = -5


[State 0, VarAdd]
type = VarAdd
triggerall=var(44)<=360&&var(44)>270
trigger1 = (root,command!="holdfwd")&&(root,command!="holdback")&&time
trigger2 = ((root,command="holdup")||(root,command="holddown"))&&time
v = 44
value = -5


[State 0, VarAdd]
type = VarAdd
triggerall=var(44)>=180&&var(44)<270
trigger1 = (root,command!="holdfwd")&&(root,command!="holdback")&&time
trigger2 = ((root,command="holdup")||(root,command="holddown"))&&time
v = 44
value = 5



[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = var(44)

[State 0, BindToRoot]
type = BindToRoot
trigger1 = 1
time = -1
facing = 1
pos = 0,-15

[State 1105]
type = destroyself
trigger1 = root,pos y=0
trigger2=root,var(10)!=101

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;Propulsor2
[Statedef 292]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 16126
sprpriority = 3
velset=0,0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1



[State 0, VarSet]
type = VarSet
trigger1 = var(44)<180
v = 44    ;fv = 10
value = 180

[State 0, VarSet]
type = VarSet
trigger1 = var(44)>360
v = 44    ;fv = 10
value = 360

[State 0, VarAdd]
type = VarAdd
trigger1 = (root,command="holdback")&&time
v = 44
value = 5

[State 0, VarAdd]
type = VarAdd
trigger1 = (root,command="holdfwd")&&time
v = 44
value = -5


[State 0, VarAdd]
type = VarAdd
triggerall=var(44)<=360&&var(44)>270
trigger1 = (root,command!="holdfwd")&&(root,command!="holdback")&&time
trigger2 = ((root,command="holdup")||(root,command="holddown"))&&time
v = 44
value = -5


[State 0, VarAdd]
type = VarAdd
triggerall=var(44)>=180&&var(44)<270
trigger1 = (root,command!="holdfwd")&&(root,command!="holdback")&&time
trigger2 = ((root,command="holdup")||(root,command="holddown"))&&time
v = 44
value = 5



[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = var(44)

[State 0, BindToRoot]
type = BindToRoot
trigger1 = 1
time = -1
facing = 1
pos = 5,-15

[State 1105]
type = destroyself
trigger1 = root,pos y=0
trigger2=root,var(10)!=101

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;Propulsor3
[Statedef 293]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 16126
sprpriority = 6
velset=0,0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1



[State 0, VarSet]
type = VarSet
trigger1 = var(44)<180
v = 44    ;fv = 10
value = 180

[State 0, VarSet]
type = VarSet
trigger1 = var(44)>360
v = 44    ;fv = 10
value = 360

[State 0, VarAdd]
type = VarAdd
trigger1 = (root,command="holdback")&&time
v = 44
value = 5

[State 0, VarAdd]
type = VarAdd
trigger1 = (root,command="holdfwd")&&time
v = 44
value = -5


[State 0, VarAdd]
type = VarAdd
triggerall=var(44)<=360&&var(44)>270
trigger1 = (root,command!="holdfwd")&&(root,command!="holdback")&&time
trigger2 = ((root,command="holdup")||(root,command="holddown"))&&time
v = 44
value = -5


[State 0, VarAdd]
type = VarAdd
triggerall=var(44)>=180&&var(44)<270
trigger1 = (root,command!="holdfwd")&&(root,command!="holdback")&&time
trigger2 = ((root,command="holdup")||(root,command="holddown"))&&time
v = 44
value = 5



[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = var(44)

[State 0, BindToRoot]
type = BindToRoot
trigger1 = 1
time = -1
facing = 1
pos = -15,-15

[State 1105]
type = destroyself
trigger1 = root,pos y=0
trigger2=root,var(10)!=101
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;BIGIronLizardLfalling
[Statedef 294]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1288
sprpriority = 5
velset = 0,5

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = -1

[State 0, PlaySnd]
type = PlaySnd
triggerall=root,var(10)=104
trigger1 = TIME=0
value = 4000,3
volumescale = 256
channel = -1

[State 0, ParentVarSet];Le resta a la variable canion
type = ParentVarSet
triggerall=root,var(24)>0&&root,var(10)=104
trigger1 = time=0
v =  24   ;fv = 
value = root,var(24)-1

[State 0, Explod]
type = Explod
triggerall=root,var(10)=104
trigger1 = TIME=0
anim = 1287
ID = 313131
pos = -5,-5
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0



[State 251, HitDef]
type = HitDef
trigger1 = time = 0
attr = S, SP
animtype  = Hard
damage    = 45,30
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =s4000,7
guardsound = s4000,7;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0


[State 0, DestroySelf];EXPLODES
type = changestate
trigger1 = movecontact
trigger2 = frontedgedist <=-50
trigger3 = (pos y<root,pos y-250)
value=258

[State 0, ChangeState]
type = changestate
trigger1 = pos y>=0
value=295
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;BIGIronLizardLground
[Statedef 295]
type    = S
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1289
sprpriority = 5
velset = 0,0;-.1jkjkl

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = -1

[State 0, Turn]
type = Turn
triggerall=time=0
trigger1 = enemy,facing=1&&facing=1



[State 0, PosSet]
type = PosSet
trigger1 = pos y >=0
y = 0


[State 0, ChangeState]
type = changeanim
trigger1 = anim=1289&&animtime=0
value =1290

[State 0, VelSet]
type = VelSet
trigger1 = anim=1289
x = 5
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = anim=1290&&animelem=3,1
x = 0
y = 0

[State 251, HitDef]
type = HitDef
trigger1 = time = 0
attr = S, SP
animtype  = Hard
damage    = 45,30
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =s4000,7
guardsound = s4000,7;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0


[State 0, DestroySelf]
type = changestate
trigger1 = movecontact
trigger2 = frontedgedist <=-50
trigger3 = anim=1290&&animtime=0
value=258


;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;HMGBULLETEND
[Statedef 296]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1999
sprpriority = 3
velset=0,0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = -1

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 1105]
type = destroyself
trigger1=animtime=0

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;BULLETEND
[Statedef 297]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1998
sprpriority = 3
velset=0,0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = -1

[State 1105]
type = destroyself
trigger1=animtime=0
;---------------------------------------------------------------------------
;GrenadeLauncher
[Statedef 298]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 9300
sprpriority = 5
velset = ifelse((parent,anim=11201)||(parent,anim=8600),(root,vel x),1-2*(parent,anim=11201)),ifelse((parent,anim=11201)||(parent,anim=8600),-1,-.1)

[State 0, VelSet]
type = VelSet
trigger1 = time=0
trigger1 = (parent,anim=11201)
y = -4

[State 0, VelSet]
type = VelSet
trigger1 = time=0
trigger1 = (parent,anim=8600)
y = 3


[State 0, PlaySnd];RocketLauncher Sounds fiushh
type = PlaySnd
trigger1=time=0
value = 4000,49
channel = -1

[State 0, PalFXWiz]
type = PalFX
trigger1=time=0
time = -1
add = 0,0,256
mul = 256,256,256
sinadd = 256,0,0,15
invertall = 0
color = 256

[State 0, VarAdd];point system for helpers
type = parentvarset
triggerall=movehit
trigger1 = 1
v =51
value = 1

[State 0, VarSet]
type = VarSet
trigger1 = time=0
v = 3    ;fv = 10
value = ifelse(parent,anim=11201,3,ifelse(parent,anim=8600,2,1))
ignorehitpause = 
persistent = 

[State 0, VarSet]
type = VarSet
trigger1 = pos y<root,pos y - 300
v = 3    ;fv = 10
value = 2
ignorehitpause = 
persistent = 

[State 0, VarSet]
type = VarSet
trigger1 = time=0
fv = 3    ;fv = 10
value = root,vel x


[State 1030, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 1030, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 1030, endfromproj]
type = HitOverride
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 252
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 251, HitDef]
type = HitDef
trigger1 = time = 0
attr = S, SP
animtype  = Hard
damage    = 45,25
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =s4000,7
guardsound = s4000,7;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = -5
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0


[State 2400, 2]
type = Veladd
triggerall=var(3)=1
trigger1 =time<15;&&var(3)=1;animelem=6;trigger1 =animtime>35
x=.3
y = -.2;-((vel x)*(vel x)) +1.1*(vel x)+0.02

[State 2400, 2]
type = Veladd
trigger1 =time>15;&&var(3)=1;animelem=6;trigger1 =animtime>35
y = .2

[State 0, removepal]
type = PalFX
trigger1 = movecontact
trigger2 = pos y>0 ;or stateno!=  the state number where it started.
time = 1


[State 0, DestroySelf]
type = changestate
trigger1 = movecontact
trigger2 = pos y>0
trigger3=(pos y<root,pos y-250)
trigger4 = frontedgedist <=-50
trigger5 = backedgedist <=-50
value = 301
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;ALLENGRENADE
[Statedef 299]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1250
sprpriority = 5
velset = .15+root,vel x,-.15-(root,vel y)/5;5,0


[State X, Store Angle]
Type = VarSet
Trigger1 = 1
FV = 0
Value = Cond(EnemyNear,Pos X != Pos X, ATan(((EnemyNear,Pos Y + EnemyNear,Const(Size.Mid.Pos.Y)) - Pos Y) / ((EnemyNear,Pos X - Pos X) * Facing)), Cond(EnemyNear,Pos Y + EnemyNear,Const(Size.Mid.Pos.Y) < Pos Y, PI / 2.0, -PI / 2.0))


[State 0, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "fvar(0) = %d vel x = %f vel y = %f"
params = atan(fvar(0)),vel x,vel y



[State 0, ParentVarSet];Le resta a la variable granadas
type = ParentVarSet
triggerall=root,var(17)>0
trigger1 = time=0
v =  17   ;fv = 
value = root,var(17)-1

[State 0, PalFXWiz]
type = PalFX
trigger1=time=0
time = -1
add = 0,0,256
mul = 256,256,256
sinadd = 256,0,0,15
invertall = 0
color = 256

[State 0, VarAdd];la variable 9 se le suma al principio para darle super armor 
type = VarAdd	;al projectil
trigger1 = time=1
v =  9   ;fv = 
value = 1

[State 0, VarAdd];point system for helpers
type = parentvarset
triggerall=movehit
trigger1 = 1
v =51
value = 1


;HOMING PROJECTILE

;[State ****: Turn]
;type = Turn
;trigger1 = (P2Dist X < 10)

[State ****: VelSet]
type = VelSet
trigger1 = (!Time)
x = 3
;
;[State ****: VelAdd]
;type = VelAdd
;trigger1 = (P2Dist X < 0) && (Vel X > -8);-6)
;x = -.8;.4;0.2

[State ****: VelAdd]
type = Velset
trigger1 = time=1
x = 10*cos(fvar(0));.4;0.2
y = 10*sin(fvar(0));0.2

;[State ****: VelAdd]
;type = VelAdd
;trigger1 = (P2Dist X > 0) && (Vel X < 8);6)
;x = .8*cos(fvar(0));.4;0.2

;[State ****: VelAdd]
;type = VelAdd
;trigger1 = (EnemyNear, Pos Y -25> Pos Y) && (Vel Y < 3);6)
;y = .6;0.2
;
;[State ****: VelAdd]
;type = VelAdd
;trigger1 = (EnemyNear, Pos Y -25<= Pos Y) && (Vel Y > -3);6)
;y = -.6;.2;0.2

;HOMING PROJECTILE END

[State 1030, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 1030, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 1030, endfromproj]
type = HitOverride
triggerall=var(9)<2;cuantas veces sera golpeado hasta explotar
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 302
attr = SCA, NP, SP, HP
ignorehitpause = 1


[State 1030, endfromproj]
type = HitOverride
triggerall=var(9)=2
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 252
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 251, HitDef]
type = HitDef
trigger1 = time = 0
attr = S, SP
animtype  = Hard
damage    = 60,30
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =s4000,7
guardsound = s4000,7;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0

[State 0, removepal]
type = PalFX
trigger1 = movecontact
trigger2 = pos y>0
trigger3 = frontedgedist <=-50
trigger4 = (pos y<root,pos y-250) ;or stateno!=  the state number where it started.
time = 1

[State 0, DestroySelf]
type = changestate
trigger1 = movecontact
trigger2 = pos y>0
trigger3 = frontedgedist <=-50
trigger4 = (pos y<root,pos y-250)
value = 253
;---------------------------------------------------------------------------


;---------------------------------------------------------------------------
;RebelGrenade Helper
[Statedef 300]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 9300
sprpriority = 5
velset = .1+root,vel x,-1-(root,vel y)/5;-.1

;[State 0, PalFXWiz]
;type = PalFX
;triggerall=root,palno=6;&&stateno=300
;trigger1=time=0
;time = -1
;add = 0,0,256
;mul = 256,256,256
;sinadd = 256,0,0,15
;invertall = 0
;color = 256

[State 0, RemapPal]
type = RemapPal
triggerall=((root,palno=6)||(root,palno=7))
trigger1 =time%2=0
source = 0,8
dest = 8,random%3

[State 0, RemapPal]
type = RemapPal
triggerall=((root,palno=3))
trigger1 =time%2=0
source = 0,8
dest = 0,8

[State 0, VarAdd];point system for helpers
type = parentvarset
triggerall=movehit
trigger1 = 1
v =51
value = 1



[State 0, ParentVarSet];Le resta a la variable granadas
type = ParentVarSet
triggerall=root,var(17)>0
trigger1 = time=0
v =  17   ;fv = 
value = root,var(17)-1


[State 0, VarSet];numero de saltitos
type = VarSet
trigger1 = time=0
v = 3    ;fv = 10
value = 0

[State 0, VarSet]
type = VarSet
trigger1 = time=0
fv = 3    ;fv = 10
value = root,vel x

[State 0, VarSet]
type = VarSet
trigger1 = time=0
fv = 4    ;fv = 10
value = root,vel y


[State 1030, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 1030, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 1030, endfromproj]
type = HitOverride
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 252
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 251, HitDef]
type = HitDef
triggerall=((parent,stateno!=21034)||((parent,stateno=21034)&&(parent,var(56)!=1)&&(parent,var(56)!=2)))
trigger1 = time = 0
attr = S, SP
animtype  = Hard
damage    = 50,25
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =s4000,7
guardsound = s4000,7;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0


[State 251, HitDef]
type = HitDef
triggerall=((parent,stateno=21034)&&((parent,var(56)=1)||(parent,var(56)=2)))
trigger1 = time = 0
attr = S, SP
animtype  = Hard
damage    = 75,40
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =s4000,7
guardsound = s4000,7;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0

[State 2400, 2]
type = Veladd
trigger1 =time<15;&&var(3)=1;animelem=6;trigger1 =animtime>35
x=.15
y = -.2;-((vel x)*(vel x)) +1.1*(vel x)+0.02

[State 2400, 2]
type = Veladd
trigger1 =time>15;&&var(3)=1;animelem=6;trigger1 =animtime>35
y = .2

;[State 0, removepal]
;type = PalFX
;trigger1 = movecontact
;trigger2 = pos y>0&&var(3)=0 ;or stateno!=  the state number where it started.
;time = 1


[State 0, DestroySelf]
type = changestate
triggerall=((parent,stateno!=21034)||((parent,stateno=21034)&&(parent,var(56)!=1)))
trigger1 = movecontact
trigger2 = pos y>0&&var(3)=0
value = 301

[State 0, DestroySelf]
type = changestate
triggerall=((parent,stateno=21034)&&(parent,var(56)=1))
trigger1 = movecontact
trigger2 = pos y>0&&var(3)=0
value = 15080

;---------------------------------------------------------------------------
;RGrenadeExplosion
[Statedef 301]
type    = s                      
movetype= a                      
physics = s
anim = 9301
sprpriority = 4
velset = ifelse(parent,stateno=263,parent,vel x,0), ifelse(parent,stateno=263,parent,vel y,0)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=0
value = s4000,7
volume = 255
channel = 5

[State 0, BindToRoot]
type = BindToRoot
trigger1 = root,stateno=15120
time = 1
pos = 25,-45



[State 251, HitDef]
type = HitDef
trigger1 = (animelem=1,1)||(animelem=2,1)||(animelem=3,1)||(animelem=4,1)
trigger2 =(animelem=5,1)||(animelem=6,1)||(animelem=7,1)||(animelem=8,1)
attr = S, SP
animtype  = Hard
damage    = 1,1;5,2
guardflag = MA
pausetime = 0,0
sparkno = -1
sparkxy=0,0
hitsound   =-1;s4000,1
guardsound =-1;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = .9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0


[State 1105]
type = destroyself
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;RLauncherExplosionL
[Statedef 302]
type    = s                      
movetype= a                      
physics = s
anim = 1253
sprpriority = 4
velset = 0,0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 9000, AngleSet]
type = AngleSet
triggerall=prevstateno=254
trigger1 = 1
Value = 270

[State 9000, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 0, PlaySnd]
type = PlaySnd;
triggerall=parent,stateno!=15005&&parent,stateno!=15006&&parent,stateno!=15015
trigger1 = time=0
value = s4000,7
volume = 255
channel = 5

;[State 0, PlaySnd]
;type = PlaySnd;
;triggerall=parent,stateno=15005||parent,stateno=15006
;trigger1 = time=0
;value = s4000,4
;volume = 256
;channel = 5

;[State 0, PlaySnd]
;type = PlaySnd
;triggerall=parent,stateno=15005||parent,stateno=15006
;trigger1 = time=0
;value = s4000,21
;volume = 128
;channel = 5


[State 251, HitDef]
type = HitDef
trigger1 = (animelem=1,1)||(animelem=2,1)||(animelem=3,1)||(animelem=4,1)
trigger2 =(animelem=5,1)||(animelem=6,1)||(animelem=7,1)||(animelem=8,1)
trigger3 =(animelem=9,1)||(animelem=10,1)||(animelem=11,1)||(animelem=12,1)
trigger4 =(animelem=13,1)||(animelem=14,1)||(animelem=15,1)||(animelem=16,1)
trigger5 =(animelem=17,1)||(animelem=18,1)||(animelem=19,1)
attr = S, SP
animtype  = Hard
damage    = 1,1
guardflag = MA
pausetime = 0,0
sparkno = -1
sparkxy=0,0
hitsound   =-1;s4000,1
guardsound =-1;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = .9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
;envshake.time = 8
;envshake.freq = 100
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0


[State 1105]
type = destroyself
trigger1 = animtime = 0


;---------------------------------------------------------------------------
;RLauncherExplosionUP
[Statedef 303]
type    = s                      
movetype= a                      
physics = s
anim = 1254
sprpriority = 4
velset = 0,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=0
value = s4000,7
volume = 255
channel = 5

[State 251, HitDef]
type = HitDef
trigger1 = (animelem=1,1)||(animelem=2,1)||(animelem=3,1)||(animelem=4,1)
trigger2 =(animelem=5,1)||(animelem=6,1)||(animelem=7,1)||(animelem=8,1)
trigger3 =(animelem=9,1)||(animelem=10,1)||(animelem=11,1)||(animelem=12,1)
trigger4 =(animelem=13,1)||(animelem=14,1)||(animelem=15,1)||(animelem=16,1)
trigger5 =(animelem=17,1)||(animelem=18,1)||(animelem=19,1)
attr = S, SP
animtype  = Hard
damage    = 1,1;5,2
guardflag = MA
pausetime = 0,0
sparkno = -1
sparkxy=0,0
hitsound   =-1;s4000,1
guardsound =-1;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = .9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
;envshake.time = 8
;envshake.freq = 100
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0


[State 1105]
type = destroyself
trigger1 = animtime = 0


;---------------------------------------------------------------------------
;RLauncherExplosionL
[Statedef 304]
type    = s                      
movetype= a                      
physics = s
anim = 1255
sprpriority = 4
velset = 0,0

 
[State 9000, AngleSet]
type = AngleSet
triggerall=prevstateno=254
trigger1 = 1
Value = 180

[State 9000, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=0
value = s4000,7
volume = 255
channel = 5

[State 251, HitDef]
type = HitDef
trigger1 = (animelem=1,1)||(animelem=2,1)||(animelem=3,1)||(animelem=4,1)
trigger2 =(animelem=5,1)||(animelem=6,1)||(animelem=7,1)||(animelem=8,1)
trigger3 =(animelem=9,1)||(animelem=10,1)||(animelem=11,1)||(animelem=12,1)
trigger4 =(animelem=13,1)||(animelem=14,1)||(animelem=15,1)||(animelem=16,1)
trigger5 =(animelem=17,1)||(animelem=18,1)||(animelem=19,1)
attr = S, SP
animtype  = Hard
damage    = 1,1;5,2
guardflag = MA
pausetime = 0,0
sparkno = -1
sparkxy=0,0
hitsound   =-1;s4000,1
guardsound =-1;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = .9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
;envshake.time = 8
;envshake.freq = 100
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0


[State 1105]
type = destroyself
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;SMOKETRAIL
[Statedef 305]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1208
sprpriority = 3
velset=ifelse((parent,stateno=15013||parent,stateno=15014),-10,0),0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1


[State 1105]
type = destroyself
trigger1 = animtime = 0

;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
;SMOKETHROW
[Statedef 306]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1223
sprpriority = 6
velset=root,vel x,root,vel y

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1


[State 0, VarSet]
type = VarSet
trigger1 = time=0
v = 3    ;fv = 10
value = ifelse((root,anim=11202)||(root,anim=11201),3,ifelse((root,anim=8603)||(root,anim=8600),2,1))
ignorehitpause = 
persistent = 

[State 0, VarSet];LVUP
type = VarSet
trigger1 = time=0
trigger1 = root,var(10)=109
trigger1 = numhelper(323132)>0
trigger1 = helper(323132),anim=18753
v = 3    ;fv = 10
value = 3
ignorehitpause = 
persistent = 

[State 0, VarSet];LVDW
type = VarSet
trigger1 = time=0
trigger1 = root,var(10)=109
trigger1 = numhelper(323132)>0
trigger1 = helper(323132),anim=18754
v = 3    ;fv = 10
value = 2
ignorehitpause = 
persistent = 

[State 0, BindToRoot];LVDW
type = BindToRoot
trigger1 = root,var(10)=109
trigger1 = numhelper(323132)>0
trigger1 = helper(323132),anim=18754
time = -1
pos = 20,-2

[State 0, BindToRoot];LVUP
type = BindToRoot
trigger1 = root,var(10)=109
trigger1 = numhelper(323132)>0
trigger1 = helper(323132),anim=18753
time = -1
pos = 17,-75

[State 0, BindToRoot];LVUP
type = BindToRoot
trigger1 = root,var(10)=109
trigger1 = numhelper(323132)>0
trigger1 = helper(323132),anim=18752
time = -1
pos = 48,-26

[State 9000, AngleSet]
type = AngleSet
triggerall=var(3)=2
trigger1 = 1
Value = 270 ;Angle must be given on degrees.
 
[State 9000, AngleSet]
type = AngleSet
triggerall=var(3)=3
trigger1 = 1
Value = 90

[State 9000, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 1105]
type = destroyself
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;MissileFire
[Statedef 307]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1236
sprpriority = 3

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
time = 1
facing = 0
pos = 0,0
;ignorehitpause = 
;persistent = 


[State 1105]
type = destroyself
trigger1 = animtime = 0


;---------------------------------------------------------------------------
;STONE
[Statedef 308]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1292
sprpriority = 5
velset = .15+root,vel x,-.1-(root,vel y)/5;5,0

[State 0, ParentVarSet];Le resta a la variable granadas
type = ParentVarSet
triggerall=root,var(17)>0&&!parent,ishelper
trigger1 = time=0
v =  17   ;fv = 
value = root,var(17)-1


[State 0, VarSet];valor inicial numero de saltitos +1
type = VarSet
trigger1 = time=0
v = 3
value =2


[State 0, VarSet];numero de saltitos
type = VarSet
trigger1 = time=0
v = 4    ;fv = 10
value = var(3);-1

[State 0, VarSet]
type = VarSet
trigger1 = time=0
fv = 3    ;fv = 10
value = root,vel x

[State 0, VarSet]
type = VarSet
trigger1 = time=0
fv = 4    ;fv = 10
value = root,vel y

[State 0, VarSet]
type = VarSet
trigger1 = time
trigger2 =fvar(5)=0
fv = 5    ;fv = 10
value = fvar(5)+1


[State 0, VarSet]
type = VarSet
trigger1 = pos y>=0
fv = 5    ;fv = 
value = 0



[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1


[State 1030, endfromproj]
type = HitOverride
trigger1 = 1
slot = 1
time = -1
stateno = 309
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1

[State 251, HitDef]
type = HitDef
trigger1 = time = 0
attr = S, na
animtype  = Hard
damage    = 80,40
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =s0,2;s4000,1
guardsound = s0,2;s4000,1;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0

[State 0, VarAdd]
type = parentvarset
triggerall=movehit
trigger1 = 1
v =51
value = 1


[State 2400, 2]
type = Veladd
trigger1 =time<15&&var(3)=var(4);var(3)=1;&&var(3)=1;animelem=6;trigger1 =animtime>35
x=.15;+fvar(3)/8;+fvar(3)
y = -.15;-fvar(4)/8;-.2;-fvar(4)/4;-((vel x)*(vel x)) +1.1*(vel x)+0.02

[State 2400, 2]
type = Veladd
trigger1 =time>15&&var(3)=var(4);var(3)=1;&&var(3)=1;animelem=6;trigger1 =animtime>35
y = .2


[State 0, VarSet]
type = VarSet
trigger1 =fvar(5)=1&&time>10
v = 3
value = var(3)-1

[State 0, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "var3 %d,fvar 5%f"
params = var(3),fvar(5);,var(13);numexplod,var(22);var(10),vel x
;ignorehitpause = 
;persistent = 

[State 0, VarSet]
type = Velset
trigger1 = pos y>0&&var(3)>0&&fvar(5)=0;animelem=1,1;&&var(5)=0;,1;&&var(3)=0
x = .5*var(3)+vel x/4;.1   ;fv = 10
y = -.5*var(3);-.1
;ignorehitpause = 
;persistent = 

[State 2400, 2]
type = Veladd;time<18&&
trigger1 =var(3)>=0&&var(3)!=var(4)&&fvar(5)<15;&&var(3)=1;animelem=6;trigger1 =animtime>35
x=.05;.05;+fvar(3)
y = -.03;-fvar(4)/4;-((vel x)*(vel x)) +1.1*(vel x)+0.02

[State 2400, 2]
type = Veladd
trigger1 =var(3)>=0&&var(3)!=var(4)&&fvar(5)>15;&&pos y<0;&&animtime>3;&&var(3)=1;animelem=6;trigger1 =animtime>35
y = .4



[State 0, DestroySelf]
type = changestate
trigger1 = movecontact
trigger2 = pos y>0&&var(3)=0
value = 309

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;STONE END
[Statedef 309]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1293
sprpriority = 7
velset=-vel x/2,-vel y/2

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = -1

[State 0, VelAdd]
type = VelAdd
trigger1 = POS Y<0
y = .1

[State 0, PosSet]
type = PosSet
trigger1 = POS Y>=0
y = 0

[State 1105]
type = destroyself
trigger1=animtime=0

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;MONOLITH
[Statedef 310]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1294
sprpriority = 5
velset = .15+root,vel x,-.1-(root,vel y)/5;5,0

[State 0, ParentVarSet];Le resta a la variable granadas
type = ParentVarSet
triggerall=root,var(17)>0&&!parent,ishelper
trigger1 = time=0
v =  17   ;fv = 
value = root,var(17)-1


[State 0, VarSet];valor inicial numero de saltitos +1
type = VarSet
trigger1 = time=0
v = 3
value =1


[State 0, VarSet];numero de saltitos
type = VarSet
trigger1 = time=0
v = 4    ;fv = 10
value = var(3);-1

[State 0, VarSet]
type = VarSet
trigger1 = time=0
fv = 3    ;fv = 10
value = root,vel x

[State 0, VarSet]
type = VarSet
trigger1 = time=0
fv = 4    ;fv = 10
value = root,vel y

[State 0, VarSet]
type = VarSet
trigger1 = time
trigger2 =fvar(5)=0
fv = 5    ;fv = 10
value = fvar(5)+1


[State 0, VarSet]
type = VarSet
trigger1 = pos y>=0
fv = 5    ;fv = 
value = 0


[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NT,ST,HT
time = -1

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
slot = 0
stateno = 311
time = -1




[State 251, HitDef]
type = HitDef
trigger1 = time = 0
attr = S, na
animtype  = Hard
damage    = 20,10
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =s0,2;s4000,1
guardsound = s0,2;s4000,1;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0

[State 0, VarAdd]
type = parentvarset
triggerall=movehit
trigger1 = 1
v =51
value = 1


[State 2400, 2]
type = Veladd
trigger1 =time<15&&var(3)=var(4);var(3)=1;&&var(3)=1;animelem=6;trigger1 =animtime>35
x=.15;+fvar(3)/8;+fvar(3)
y = -.15;-fvar(4)/8;-.2;-fvar(4)/4;-((vel x)*(vel x)) +1.1*(vel x)+0.02

[State 2400, 2]
type = Veladd
trigger1 =time>15&&var(3)=var(4);var(3)=1;&&var(3)=1;animelem=6;trigger1 =animtime>35
y = .2


[State 0, VarSet]
type = VarSet
trigger1 =fvar(5)=1&&time>10
v = 3
value = var(3)-1

[State 0, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "var3 %d,fvar 5%f"
params = var(3),fvar(5);,var(13);numexplod,var(22);var(10),vel x
;ignorehitpause = 
;persistent = 

[State 0, VarSet]
type = Velset
trigger1 = pos y>0&&var(3)>0&&fvar(5)=0;animelem=1,1;&&var(5)=0;,1;&&var(3)=0
x = .5*var(3)+vel x/4;.1   ;fv = 10
y = -.5*var(3);-.1
;ignorehitpause = 
;persistent = 

[State 2400, 2]
type = Veladd;time<18&&
trigger1 =var(3)>=0&&var(3)!=var(4)&&fvar(5)<15;&&var(3)=1;animelem=6;trigger1 =animtime>35
x=.05;.05;+fvar(3)
y = -.03;-fvar(4)/4;-((vel x)*(vel x)) +1.1*(vel x)+0.02

[State 2400, 2]
type = Veladd
trigger1 =var(3)>=0&&var(3)!=var(4)&&fvar(5)>15;&&pos y<0;&&animtime>3;&&var(3)=1;animelem=6;trigger1 =animtime>35
y = .4



[State 0, DestroySelf]
type = changestate
trigger1 = movecontact
trigger2 = pos y>0&&var(3)=0
value = 311

;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
;MONOLITHRAY
[Statedef 311]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1295;ifelse(((root,anim=11203)||(root,anim=8604)),1202,ifelse(((root,anim=11006)||(root,anim=11007)),1203,1203))
sprpriority = 5
velset =0,0

[State 0, VarAdd]
type = parentvarset
trigger1 = 1
v =51
value = 1

[State 0, VarSet]
type = VarSet
trigger1 = TIME=0&&!parent,ishelper
v = 4    ;fv = 10
value = RANDOM%3000

[State 0, VarSet]
type = VarSet
trigger1 = TIME=0&&parent,ishelper
v = 4    ;fv = 10
value = parent,var(4)


[State 0, Explod]
type = Explod
trigger1 =TIME=0&&!(parent,ishelper)
anim = 1301
ID = 3123125
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 0
scale = 1,1
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0



[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, PlaySnd];laser Sounds
type = PlaySnd
trigger1=numhelper(3002)=0&&!parent,ishelper
value = 4000,51
volumescale = 256
channel = 0

[State 0, PosSet]
type = PosSet
triggerall = !parent,ishelper
trigger1=1
x=pos x
y=0


[State 0, PosSet]
type = PosSet
triggerall = parent,ishelper
trigger1=1
x=parent,pos x
y=parent,pos y-14

[State 251, HitDef]
type = HitDef
trigger1 = animtime=0;time*tickspersecond
attr = S, HA
animtype  = Hard
damage    = 2+ifelse(root,palno=4,random%2,0),2+ifelse(root,palno=4,random%2,0)
guardflag = MA
pausetime = 0,0
sparkno = s1239;S9107
sparkxy=-2*time+40,0;-10*facing,0
hitsound   =-1;s4000,5
guardsound = -1;s4000,6;S5546,0
guard.sparkno =s1229;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0
getpower=5,5


[State 0, LaserGun];LaserGun
type = Helper
triggerall=(numhelper(var(4))<18);&&parent,!movecontact
trigger1 = time=0
helpertype = normal ;player
name = "LaserGun"
ID = var(4);default helper projectile id
stateno = 311
pos =0,0
facing = 1
keyctrl = 1
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim=1295&&animtime=0
value = 1296+random%5

[State 0, RemoveExplod]
type = RemoveExplod
triggerall=!parent,ishelper
trigger1=anim=1296&&animtime=0
trigger2=anim=1297&&animtime=0
trigger3=anim=1298&&animtime=0
trigger4=anim=1299&&animtime=0
trigger5=anim=1300&&animtime=0


[State 0, DestroySelf]
type = destroyself
triggerall=parent,ishelper
trigger1=anim=1296&&animtime=0
trigger2=anim=1297&&animtime=0
trigger3=anim=1298&&animtime=0
trigger4=anim=1299&&animtime=0
trigger5=anim=1300&&animtime=0

[State 0, DestroySelf]
type = CHANGESTATE
triggerall=!parent,ishelper
trigger1=anim=1296&&animtime=0
trigger2=anim=1297&&animtime=0
trigger3=anim=1298&&animtime=0
trigger4=anim=1299&&animtime=0
trigger5=anim=1300&&animtime=0
value=312

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;MONOLITHFALLING
[Statedef 312]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1302
sprpriority = 5
velset = 0,5

[State 0, DisplayToClipboard]
type = DisplayToClipboard
trigger1 =1
text = "pos x %f, enemigo %f,var 49 %d,dist y %f"
params = pos x,(enemynear,pos x),var(49),p2dist y


[State 0, VarSet]
type = VarSet
trigger1 =1
v = 49   ;fv = 10
value =p2dist x

[State 0, PosSet]
type = PosSet
trigger1 = time=0&&prevstateno!=312
y = -250

[State 0, PlaySnd]
type = PlaySnd
trigger1 = TIME=0
value = 4000,52
volumescale = 256
channel = -1


[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
slot = 0
stateno = 313
time = 1
forceair = 0
;ignorehitpause = 
;persistent = 



[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1



;[State 251, HitDef]
;type = HitDef
;trigger1 = time = 0
;attr = S, SA
;animtype  = Hard
;damage    = 140,70
;guardflag = MA
;pausetime = 0,0
;sparkno = -1;S9107
;sparkxy=0,0
;hitsound   =s4000,4;s4000,1
;guardsound = s4000,4;s4000,1;S5546,0
;guard.sparkno = -1;s9101;;;s7004
;ground.type = low
;ground.slidetime = 0;5
;;guard.sparkno; = S449
;ground.hittime  = 0;15
;ground.velocity = 0;-10
;air.juggle = 0
;air.velocity = 0,0;-10,-8
;fall.xvelocity =0
;fall.yvelocity =0
;yaccel = 1
;ground.cornerpush.veloff = 0
;air.cornerpush.veloff = 0
;airguard.cornerpush.veloff = 0
;envshake.time = 8
;envshake.freq = 100
;palfx.time = 3
;palfx.add = 240,50,0
;palfx.mul = 250,224,120
;palfx.sinadd = 110,55,85,10
;palfx.invertall = 0
;palfx.color = 0
;fall=1

[State 251, HitDef]
type = HitDef
trigger1 = time!=0
attr = S, SA
animtype  = Hard
damage    = 12,6
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
affectteam=B
hitsound   =s4000,4;s4000,1
guardsound = s4000,4;s4000,1;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 8
envshake.freq = 100
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0


[State 0, VarAdd]
type = parentvarset
triggerall=movehit
trigger1 = 1
v =51
value = 1

[State 0, VelSet]
type = VelSet
trigger1 = pos y>=0
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = vel y=0
trigger1 = p2dist x<30&&p2dist x>0
x = (enemynear,vel x)*1.16

[State 0, VelSet]
type = VelSet
trigger1 = vel y=0
trigger1 = p2dist x>-30&&p2dist x<0
x = (enemynear,vel x)*1.16


[State 0, VelSet]
type = VelSet
triggerall = vel y=0
trigger1 = p2dist x<-30
trigger2 = p2dist x>30
trigger3 = p2dist y<-120
x = 0




[State 0, DestroySelf]
type = changestate
trigger1 = pos y>=0
value = 314

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;MONOLITHFALLINGGETHIT
[Statedef 313]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1302
sprpriority = 5
velset = 0,5

[State 0, DisplayToClipboard]
type = DisplayToClipboard
trigger1 =1
text = "pos x %f, enemigo %f,var 49 %d,dist y %f"
params = pos x,(enemynear,pos x),var(49),p2dist y


[State 0, VarSet]
type = VarSet
trigger1 =1
v = 49   ;fv = 10
value =p2dist x


[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
slot = 0
stateno = 313
time = 1
forceair = 0
;ignorehitpause = 
;persistent = 



[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1



;[State 251, HitDef]
;type = HitDef
;trigger1 = time = 0
;attr = S, SA
;animtype  = Hard
;damage    = 140,70
;guardflag = MA
;pausetime = 0,0
;sparkno = -1;S9107
;sparkxy=0,0
;hitsound   =s4000,4;s4000,1
;guardsound = s4000,4;s4000,1;S5546,0
;guard.sparkno = -1;s9101;;;s7004
;ground.type = low
;ground.slidetime = 0;5
;;guard.sparkno; = S449
;ground.hittime  = 0;15
;ground.velocity = 0;-10
;air.juggle = 0
;air.velocity = 0,0;-10,-8
;fall.xvelocity =0
;fall.yvelocity =0
;yaccel = 1
;ground.cornerpush.veloff = 0
;air.cornerpush.veloff = 0
;airguard.cornerpush.veloff = 0
;envshake.time = 8
;envshake.freq = 100
;palfx.time = 3
;palfx.add = 240,50,0
;palfx.mul = 250,224,120
;palfx.sinadd = 110,55,85,10
;palfx.invertall = 0
;palfx.color = 0
;fall=1

[State 251, HitDef]
type = HitDef
trigger1 = time!=0
attr = S, SA
animtype  = Hard
damage    = 12,6
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
affectteam=B
hitsound   =s4000,4;s4000,1
guardsound = s4000,4;s4000,1;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 8
envshake.freq = 100
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0

[State 0, VarAdd]
type = parentvarset
triggerall=movehit
trigger1 = 1
v =51
value = 1

[State 0, VelSet]
type = VelSet
trigger1 = pos y>=0
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = vel y=0
trigger1 = p2dist x<30&&p2dist x>0
x = (enemynear,vel x)*1.16

[State 0, VelSet]
type = VelSet
trigger1 = vel y=0
trigger1 = p2dist x>-30&&p2dist x<0
x = (enemynear,vel x)*1.16


[State 0, VelSet]
type = VelSet
triggerall = vel y=0
trigger1 = p2dist x<-30
trigger2 = p2dist x>30
trigger3 = p2dist y<-120
x = 0

[State 0, DestroySelf]
type = changestate
trigger1 = pos y>=0
value = 314

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;MONOLITHBURY
[Statedef 314]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = ifelse(anim=1302,1303,ifelse((anim!=[1334,1335]),anim+2,anim))
sprpriority = 5
velset = 0,0

[State 0, DisplayToClipboard]
type = DisplayToClipboard
trigger1 =1
text = "pos x %f, enemigo %f,var 14 %d,dist y %f"
params = pos x,(enemynear,pos x),fvar(14),p2dist y

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim!=1335&&animtime=0
value = anim+1

[State 0, Helper];fakearmgrenades
type = Helper
trigger1 = time=0&&anim=1303&&numhelper(32554)=0
helpertype = normal ;player
name = "Monolithfx1"
ID = 32554
stateno = 315
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 0, Helper];fakearmgrenades
type = Helper
trigger1 = time=0&&anim=1303&&numhelper(3255411)<4
helpertype = normal ;player
name = "Monolithfx2"
ID = 3255411
stateno = 316
pos = 0,-1
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 0, Helper];fakearmgrenades
type = Helper
trigger1 = time=0&&anim=1303&&numhelper(3255411)<4
helpertype = normal ;player
name = "Monolithfx2"
ID = 3255411
stateno = 316
pos = 0,-1
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 0, Helper];fakearmgrenades
type = Helper
trigger1 = time=0&&anim=1303&&numhelper(3255411)<4
helpertype = normal ;player
name = "Monolithfx3"
ID = 3255411
stateno = 317
pos = 0,-1
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 0, Helper];fakearmgrenades
type = Helper
trigger1 = time=0&&anim=1303&&numhelper(3255411)<4
helpertype = normal ;player
name = "Monolithfx3"
ID = 3255411
stateno = 317
pos = 0,-1
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

;[State 0, VarSet]
;type = VarSet
;trigger1 =1
;v = 49   ;fv = 10
;value =p2dist x

[State 0, VarSet]
type = VarSet
trigger1 =time=0
fv = 14   ;fv = 10
value =pos x

[State 0, PlaySnd]
type = PlaySnd
trigger1 = TIME=0&&anim=1303
value = 4000,53
volumescale = 256
channel = -1

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
slot = 0
stateno = 314
time = 1
forceair = 0
;ignorehitpause = 
;persistent = 



[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1



[State 251, HitDef]
type = HitDef
trigger1 = time = 0
attr = S, SA
animtype  = Hard
damage    = 140,70
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =s4000,4;s4000,1
guardsound = s4000,4;s4000,1;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 8
envshake.freq = 100
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0
fall=1


[State 0, VarAdd]
type = parentvarset
triggerall=movehit
trigger1 = 1
v =51
value = 1

[State 0, VelSet]
type = VelSet
trigger1 = pos y>=0
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = vel y=0
trigger1 = p2dist x<30&&p2dist x>0
x = (enemynear,vel x)*1.16

[State 0, VelSet]
type = VelSet
trigger1 = vel y=0
trigger1 = p2dist x>-30&&p2dist x<0
x = (enemynear,vel x)*1.16


[State 0, VelSet]
type = VelSet
triggerall = vel y=0
trigger1 = p2dist x<-30
trigger2 = p2dist x>30
trigger3 = p2dist y<(-120+(anim-1302)*4)
x = 0

;[State 0, PosSet]
;type = PosSet
;trigger1 = 1
;x = fvar(14)


[State 0, DestroySelf]
type = DESTROYSELF
trigger1 = anim=1335&&animtime=0

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;MONOLITHFX1
[Statedef 315]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1338
sprpriority = 6

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = -1

[State 0, BindToParent]
type = BindToParent
trigger1 =1
time = -1
pos = 0,0
;ignorehitpause = 
;persistent = 

[State 1105]
type = destroyself
trigger1=parent,anim=1335
trigger2=numhelper(2250)=0


;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;MONOLITHFX2
[Statedef 316]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1336
sprpriority = 6
velset=1+random%5+abs(p2dist x)/20,-3-random%5-abs(p2dist x)/20

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = -1

[State 0, VelSet]
type = Veladd
trigger1 = 1
y = .5
 
[State 1105]
type = destroyself
trigger1=pos y >=0&&time>10


;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;MONOLITHFX3
[Statedef 317]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1337
sprpriority = 6
velset=-1-random%5-abs(p2dist x)/20,-3-random%5-abs(p2dist x)/20

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = -1

[State 0, VelSet]
type = Veladd
trigger1 = 1
y = .5
 
[State 1105]
type = destroyself
trigger1=pos y >=0&&time>10


;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;FIRE BOMB
[Statedef 318]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1339
sprpriority = 5
velset = .15+root,vel x,-.15-(root,vel y)/5;5,0

[State 0, ParentVarSet];Le resta a la variable granadas
type = ParentVarSet
triggerall=root,var(17)>0&&!parent,ishelper
trigger1 = time=0
v =  17   ;fv = 
value = root,var(17)-1

[State 0, VarSet]
type = VarSet
trigger1 = time=0
v = 19    ;fv = 10
value = 1
;ignorehitpause = 
;persistent = 


[State 0, VarSet];valor inicial numero de saltitos +1
type = VarSet
trigger1 = time=0
v = 3    ;fv = 10
value = 0

[State 0, VarSet];numero de saltitos
type = VarSet
trigger1 = time=0
v = 4    ;fv = 10
value = var(3);-1

[State 0, VarSet]
type = VarSet
trigger1 = time=0
fv = 3    ;fv = 10
value = root,vel x

[State 0, VarSet]
type = VarSet
trigger1 = time=0
fv = 4    ;fv = 10
value = root,vel y

[State 0, VarSet]
type = VarSet
trigger1 = time
fv = 5    ;fv = 10
value = fvar(5)+1


[State 0, VarSet]
type = VarSet
trigger1 = pos y>0
fv = 5    ;fv = 
value = 0

[State 1030, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NT, ST, HT
ignorehitpause = 1

[State 1030, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NA, SA, HA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 1030, endfromproj]
type = HitOverride
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 258
attr = SCA, NA, SA, HA, NP, SP, HP
ignorehitpause = 1

[State 0, VarAdd]
type = parentvarset
triggerall=movehit
trigger1 = 1
v =51
value = 1

[State 2400, 2]
type = Veladd
trigger1 =time<15&&var(3)=var(4);var(3)=1;&&var(3)=1;animelem=6;trigger1 =animtime>35
x=.15;+fvar(3)/8;+fvar(3)
y = -.15;-fvar(4)/8;-.2;-fvar(4)/4;-((vel x)*(vel x)) +1.1*(vel x)+0.02

[State 2400, 2]
type = Veladd
trigger1 =time>15&&var(3)=var(4);var(3)=1;&&var(3)=1;animelem=6;trigger1 =animtime>35
y = .2


[State 0, VarSet]
type = VarSet
trigger1 =fvar(5)=1&&pos y>-1;&&pos y>0;animelem=1,1&&fvar(5)=0
v = 3
value = var(3)-1

[State 0, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "var3 %d"
params = var(3);,var(13);numexplod,var(22);var(10),vel x


[State 0, VarSet]
type = Velset
trigger1 = pos y>0&&var(3)>0&&fvar(5)=0;animelem=1,1;&&var(5)=0;,1;&&var(3)=0
x = 1;.1   ;fv = 10
y = -1;-.1

[State 2400, 2]
type = Veladd;time<18&&
trigger1 =var(3)>=0&&var(3)!=var(4)&&fvar(5)<15;&&var(3)=1;animelem=6;trigger1 =animtime>35
x=.03;.05;+fvar(3)
y = -.05;-fvar(4)/4;-((vel x)*(vel x)) +1.1*(vel x)+0.02

[State 2400, 2]
type = Veladd
trigger1 =var(3)>=0&&var(3)!=var(4)&&fvar(5)>15;&&pos y<0;&&animtime>3;&&var(3)=1;animelem=6;trigger1 =animtime>35
y = .4;.2

[State 0, DestroySelf]
type = changestate
trigger1 = pos y>0
value = 319

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;FIREBSPAMMER
[Statedef 319]
type    = S
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1286
sprpriority = 0
velset = 0,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = TIME=0
value = 4000,15
volumescale = 256
channel = -1


[State 1030, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA
ignorehitpause = 1

[State 0, VarAdd]
type = parentvarset
triggerall=movehit
trigger1 = 1
v =51
value = 1


[State 0, CANNON]
type = Helper
trigger1 = (animelem=1)||(animelem=2)||(animelem=3)||(animelem=4)||(animelem=5)
helpertype = normal
name = "FIREBOMBR"
ID = 13251
stateno = 320
pos = time*10,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 0, CANNON]
type = Helper
trigger1 = (animelem=1)||(animelem=2)||(animelem=3)||(animelem=4)||(animelem=5)
helpertype = normal
name = "FIREBOMBL"
ID = 13251
stateno = 320
pos = -time*10,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0


[State 0, DestroySelf]
type = destroySelf
trigger1 =animtime=0

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;FIREBOMBFLAME
[Statedef 320]
type    = S
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1340
sprpriority = 0
velset = 0,0

[State 1030, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA
ignorehitpause = 1

[State 0, VarAdd]
type = parentvarset
triggerall=movehit
trigger1 = 1
v =51
value = 1

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0


[State 251, HitDef]
type = HitDef
trigger1 = time
attr = S, NA
animtype  = Hard
damage    = 1,1
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =-1;s4000,2
guardsound = -1;s4000,2;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 0
envshake.freq = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0

[State 0, DestroySelf]
type = destroySelf
trigger1 = anim=1340&&animtime=0

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;REBELBALLFALLING
[Statedef 321]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1341
sprpriority = 5
velset = 1+ROOT,VEL X,-1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, ParentVarSet];Le resta a la variable granadas
type = ParentVarSet
triggerall=root,var(17)>0&&!parent,ishelper
trigger1 = time=0
v =  17   ;fv = 
value = root,var(17)-1

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
y = .5

[State 251, HitDef]
type = HitDef
triggerall=((parent,stateno!=21034)||((parent,stateno=21034)&&(parent,var(56)!=1)&&(parent,var(56)!=2)))
trigger1 = time = 0
attr = S, SP
animtype  = Hard
damage    = 55+(15)*(root,palno=7),27+(7)*(root,palno=7)
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =s4000,4
guardsound = s4000,4;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
;envshake.time = 8
;envshake.freq = 100
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0

[State 251, HitDef]
type = HitDef
triggerall=((parent,stateno=21034)&&((parent,var(56)=1)||(parent,var(56)=2)))
trigger1 = time = 0
attr = S, SP
animtype  = Hard
damage    = 75+(15)*(root,palno=7),43+(7)*(root,palno=7)
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =s4000,4
guardsound = s4000,4;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
;envshake.time = 8
;envshake.freq = 100
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0

[State 0, DestroySelf]
type = changestate
trigger1 = movecontact
trigger2 = frontedgedist <=-50
trigger3 = (pos y<root,pos y-250)
value=15080;323

[State 0, ChangeState]
type = changestate
trigger1 = pos y>=0;pos y>0;animtime=0
value=322

;---------------------------------------------------------------------------
;REBELBALLGROUND
[Statedef 322]
type    = S
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1341
sprpriority = 5
velset = 0,0
[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, VelSet]
type = VelSet
triggerall=root,palno!=7
trigger1 = anim=1341
x = 1.5
y = 0


[State 0, VelSet]
type = VelSet
triggerall=root,palno=7
trigger1 = anim=1341
x = 3
y = 0

;[State 0, VelSet]
;type = VelSet
;triggerall=palno=7
;trigger1 = frontedgedist>20
;x = 1.5
;y = 0

;[State 0, VelSet]
;type = VelSet
;triggerall=palno=7
;trigger1 =frontedgedist<20&&pos y>-150
;x = 0
;y = -1.5
;
;[State 0, VelSet]
;type = VelSet
;triggerall=palno=7
;trigger1 = backedgedist>20&&pos y<-150
;x = -1.5
;y = 0
;
;[State 0, VelSet]
;type = VelSet
;triggerall=palno=7
;trigger1 =backedgedist<=20&&pos y<-10
;x = 0
;y = 1.5
;
;[State 0, VelSet]
;type = VelSet
;triggerall=palno=7
;trigger1 = frontedgedist>20&&pos y>=0
;x = 1.5
;y = 0

[State 251, HitDef]
type = HitDef
triggerall=((parent,stateno!=21034)||((parent,stateno=21034)&&(parent,var(56)!=1)&&(parent,var(56)!=2)))
trigger1 = time = 0
attr = S, SP
animtype  = Hard
damage    = 55+(15)*(root,palno=7),27+(7)*(root,palno=7)
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =s4000,4
guardsound = s4000,4;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
;envshake.time = 8
;envshake.freq = 100
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0


[State 251, HitDef]
type = HitDef
triggerall=((parent,stateno=21034)&&((parent,var(56)=1)||(parent,var(56)=2)))
trigger1 = time = 0
attr = S, SP
animtype  = Hard
damage    = 75+(15)*(root,palno=7),43+(7)*(root,palno=7)
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =s4000,4
guardsound = s4000,4;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
;envshake.time = 8
;envshake.freq = 100
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0


[State 0, DestroySelf]
type = changestate;triggerall=root,palno!=7
triggerall=((parent,stateno!=21034)||((parent,stateno=21034)&&(parent,var(56)!=1)))
trigger1 = movecontact
trigger2 = frontedgedist <=-50
trigger3 = (pos y<root,pos y-250)
value=15080;323

[State 0, DestroySelf]
type = changestate;triggerall=root,palno!=7
triggerall=((parent,stateno=21034)&&(parent,var(56)=1))
trigger1 = movecontact
trigger2 = frontedgedist <=-50
trigger3 = (pos y<root,pos y-250)
value=15165;323

;[State 0, DestroySelf]
;type = changestate
;triggerall=root,palno=7
;trigger1 = movecontact
;value=323

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;REBELBALLEXPLOSION
[Statedef 323]
type    = s                      
movetype= a                      
physics = s
anim = 1254
sprpriority = 4
velset = 0,0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, PlaySnd]
type = PlaySnd;
trigger1 = time=0
value = s4000,4
volume = 255
channel = 5

[State 251, HitDef]
type = HitDef
trigger1 = (animelem=1,1)||(animelem=2,1)||(animelem=3,1)||(animelem=4,1)
trigger2 =(animelem=5,1)||(animelem=6,1)||(animelem=7,1)||(animelem=8,1)
trigger3 =(animelem=9,1)||(animelem=10,1)||(animelem=11,1)||(animelem=12,1)
trigger4 =(animelem=13,1)||(animelem=14,1)||(animelem=15,1)||(animelem=16,1)
trigger5 =(animelem=17,1)||(animelem=18,1)||(animelem=19,1)
attr = S, SP
animtype  = Hard
damage    = 1,1
guardflag = MA
pausetime = 0,0
sparkno = -1
sparkxy=0,0
hitsound   =-1;s4000,1
guardsound =-1;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = .9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
;envshake.time = 8
;envshake.freq = 100
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0

[State 1105]
type = destroyself
trigger1 = animtime = 0


;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;FIREWORKS
[Statedef 324]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1250
sprpriority = 5
velset = .05+root,vel x,-.15-(root,vel y)/5;5,0

[State 0, ParentVarSet];Le resta a la variable granadas
type = ParentVarSet
triggerall=root,var(17)>0&&!parent,ishelper
trigger1 = time=0
v =  17   ;fv = 
value = root,var(17)-1


[State 0, VarSet];valor inicial numero de saltitos +1
type = VarSet
trigger1 = time=0
v = 3    ;fv = 10
value = 0

[State 1030, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA,NT, ST, HT
ignorehitpause = 1

[State 1030, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NA, SA, HA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 1030, endfromproj]
type = HitOverride
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 325
attr = SCA, NA, SA, HA, NP, SP, HP
ignorehitpause = 1

[State 251, HitDef]
type = HitDef
triggerall=((parent,stateno!=21034)||((parent,stateno=21034)&&(parent,var(56)!=1)&&(parent,var(56)!=2)))
trigger1 = time = 0
attr = S, SP
animtype  = Hard
damage    = 40+20*(root,palno=7),20+10*(root,palno=7)
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =s4000,4;s4000,1
guardsound = s4000,4;s4000,1;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0

[State 251, HitDef]
type = HitDef
triggerall=(parent,stateno=21034)&&((parent,var(56)=1)||(parent,var(56)=2))
trigger1 = time = 0
attr = S, SP
animtype  = Hard
damage    = 60+20*(root,palno=7),30+10*(root,palno=7)
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =s4000,4;s4000,1
guardsound = s4000,4;s4000,1;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0

[State 0, VarAdd]
type = parentvarset
triggerall=movehit
trigger1 = 1
v =51
value = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = vel y>vel x
trigger1 = anim!=1344
value = 1344


[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = vel y<vel x
trigger1 = anim!=1342
trigger1 = time<10
value = 1342

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = vel y<vel x
trigger1 = anim!=1343
trigger1 = time>=10
value = 1343

[State 2400, 2]
type = Veladd
trigger1 =time<10
x=.1+.1*(root,palno=7)
y = -.1

[State 2400, 2]
type = Veladd
trigger1 =time>10
x=.1+.1*(root,palno=7)

[State 2400, 2]
type = Veladd
trigger1 =time>10&&vel y<1.5
y = .1

[State 0, DestroySelf]
type = changestate
triggerall=((parent,stateno!=21034)||((parent,stateno=21034)&&(parent,var(56)!=1)))
trigger1 = movecontact
trigger2 = frontedgedist <=-50
value = 15080;323

[State 0, DestroySelf]
type = changestate
triggerall=(parent,stateno=21034)&&((parent,var(56)=1))
trigger1 = movecontact
trigger2 = frontedgedist <=-50
value = 15165;323


[State 0, DestroySelf]
type = changestate
trigger1 =  pos y>0
value = 325
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;FIREWORKS2
[Statedef 325]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1250
sprpriority = 5
velset = .05+root,vel x,-.15-(root,vel y)/5;5,0

[State 0, VarSet];valor inicial numero de saltitos +1
type = VarSet
trigger1 = time=0
v = 3    ;fv = 10
value = 0

[State 1030, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA,NT, ST, HT
ignorehitpause = 1

[State 1030, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NA, SA, HA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 1030, endfromproj]
type = HitOverride
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 325
attr = SCA, NA, SA, HA, NP, SP, HP
ignorehitpause = 1

[State 251, HitDef]
type = HitDef
triggerall=((parent,stateno!=21034)||((parent,stateno=21034)&&(parent,var(56)!=1)&&(parent,var(56)!=2)))
trigger1 = time = 0
attr = S, SP
animtype  = Hard
damage    = 40+20*(root,palno=7),20+10*(root,palno=7)
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =s4000,4;s4000,1
guardsound = s4000,4;s4000,1;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0

[State 251, HitDef]
type = HitDef
triggerall=(parent,stateno=21034)&&((parent,var(56)=1)||(parent,var(56)=2))
trigger1 = time = 0
attr = S, SP
animtype  = Hard
damage    = 60+20*(root,palno=7),30+10*(root,palno=7)
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =s4000,4;s4000,1
guardsound = s4000,4;s4000,1;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0

[State 0, VarAdd]
type = parentvarset
triggerall=movehit
trigger1 = 1
v =51
value = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = vel y>vel x&&vel y>0
trigger1 = anim!=1344
value = 1344


[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = vel y<vel x&&vel y<0
trigger1 = anim!=1342
value = 1342

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = vel y<vel x&&vel y>0
trigger1 = anim!=1343
value = 1343

[State 2400, 2]
type = Veladd
trigger1 =time<10
trigger2 =pos y>0
x=.2+.2*(root,palno=7)
y = -.1

[State 2400, 2]
type = Veladd
trigger1 =time>10
x=.1+.1*(root,palno=7)

[State 2400, 2]
type = Veladd
trigger1 =time>10&&vel y<1.5
y = .1

[State 0, DestroySelf]
type = changestate
triggerall=((parent,stateno!=21034)||((parent,stateno=21034)&&(parent,var(56)!=1)))
trigger1 = movecontact
trigger2 = frontedgedist <=-50
value = 15080;323

[State 0, DestroySelf]
type = changestate
triggerall=(parent,stateno=21034)&&((parent,var(56)=1))
trigger1 = movecontact
trigger2 = frontedgedist <=-50
value = 15165;323

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;CLONEPISTOL
[Statedef 326]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1346
sprpriority = 5


[State 0, Pistol];Pistol Sounds
type = PlaySnd
trigger1=time=0
value = 4000,0
volumescale = 256
channel = -1

[State 0, VarSet]
type = VarSet
trigger1 =(root,animelem=1)
v = 44    ;fv = 10
value = 345

[State 0, VarSet]
type = VarSet
trigger1 =(root,animelem=2)
v = 44    ;fv = 10
value = 315

[State 0, VarSet]
type = VarSet
trigger1 =(root,animelem=3)
v = 44    ;fv = 10
value = 270

[State 0, VarSet]
type = VarSet
trigger1 =(root,animelem=4)
v = 44    ;fv = 10
value = 245

[State 0, VarSet]
type = VarSet
trigger1 =(root,animelem=5)
v = 44    ;fv = 10
value = 225

[State 0, VarSet]
type = VarSet
trigger1 =(root,animelem=6)
v = 44    ;fv = 10
value = 180

[State 0, VarSet]
type = VarSet
trigger1 =(root,animelem=7)
v = 44    ;fv = 10
value = 158

[State 0, VarSet]
type = VarSet
trigger1 =(root,animelem=8)
v = 44    ;fv = 10
value = 135

[State 0, VarSet]
type = VarSet
trigger1 =(root,animelem=9)
v = 44    ;fv = 10
value = 90

[State 0, VarSet]
type = VarSet
trigger1 =(root,animelem=10)
v = 44    ;fv = 10
value = 68

[State 0, VarSet]
type = VarSet
trigger1 =(root,animelem=11)
v = 44    ;fv = 10
value = 45


[State 0, VarSet]
type = VarSet
trigger1 =(root,animelem=12)
v = 44    ;fv = 10
value = 360

;VELOCIDAD SEGUN ANGULO
[State 0, VelSet]
type = VelSet
trigger1 = time=1
x = (cos((var(44)*pi)/180)*10)
y = (-sin((var(44)*pi)/180)*10)

[State 0, VarAdd];la variable 9 se le suma al principio para darle super armor 
type = VarAdd	;al projectil
trigger1 = time=1
v =  9   ;fv = 
value = 1

[State 0, VarAdd];point system for helpers
type = parentvarset
triggerall=movehit
trigger1 = 1
v =51
value = 1


;==========================================================
;ANGULO SEGUN VELOCIDAD:
;==========================================================

[State 9000, AngleDraw]
type = AngleDraw
trigger1 =vel x>0
value=atan(-vel y/vel x)*180/pi


[State 9000, AngleDraw]
type = AngleDraw
trigger1 =vel x=0&&vel y<0
value=90

[State 9000, AngleDraw]
type = AngleDraw
trigger1 =vel x=0&&vel y>0
value=270


[State 9000, AngleDraw]
type = AngleDraw
trigger1 =vel x<0
value=atan(-vel y/vel x)*180/pi+180

;==========================================================

[State 1030, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 1030, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 1030, endfromproj]
type = HitOverride
triggerall=var(9)<2;cuantas veces sera golpeado hasta explotar
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 302
attr = SCA, NP, SP, HP
ignorehitpause = 1


[State 1030, endfromproj]
type = HitOverride
triggerall=var(9)=2
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 302
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 251, HitDef]
type = HitDef
trigger1 = time = 0
attr = S,NA
animtype  = Hard
damage    = 10,5
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =s4000,5
guardsound = s4000,6;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0


[State 0, ChangeAnim]
type = CHANGESTATE
trigger1 = pos y>=0
value = 296

[State 0, DestroySelf]
type = changestate
trigger1 = movecontact
trigger2 = anim=1999&&animtime=0;pos y>0
trigger3 = frontedgedist <=-50
trigger4 = (pos y<root,pos y-250)
trigger5 = backedgedist <=-50
value=297

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;CLONEHMG
[Statedef 327]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1203
sprpriority = 5

[State 0, VarAdd]
type = parentVarAdd
trigger1 = time=0
v = 16
value = -1

[State 0, Trans]
type = Trans
trigger1 = time=0
trans = ADDalpha ;none, add, addalpha, add1, sub
alpha = 0,256

[State 0, VarSet]
type = VarSet
trigger1 =(root,animelem=1)
v = 44    ;fv = 10
value = 345

[State 0, VarSet]
type = VarSet
trigger1 =(root,animelem=2)
v = 44    ;fv = 10
value = 315

[State 0, VarSet]
type = VarSet
trigger1 =(root,animelem=3)
v = 44    ;fv = 10
value = 270

[State 0, VarSet]
type = VarSet
trigger1 =(root,animelem=4)
v = 44    ;fv = 10
value = 245

[State 0, VarSet]
type = VarSet
trigger1 =(root,animelem=5)
v = 44    ;fv = 10
value = 225

[State 0, VarSet]
type = VarSet
trigger1 =(root,animelem=6)
v = 44    ;fv = 10
value = 180

[State 0, VarSet]
type = VarSet
trigger1 =(root,animelem=7)
v = 44    ;fv = 10
value = 158

[State 0, VarSet]
type = VarSet
trigger1 =(root,animelem=8)
v = 44    ;fv = 10
value = 135

[State 0, VarSet]
type = VarSet
trigger1 =(root,animelem=9)
v = 44    ;fv = 10
value = 90

[State 0, VarSet]
type = VarSet
trigger1 =(root,animelem=10)
v = 44    ;fv = 10
value = 68

[State 0, VarSet]
type = VarSet
trigger1 =(root,animelem=11)
v = 44    ;fv = 10
value = 45


[State 0, VarSet]
type = VarSet
trigger1 =(root,animelem=12)
v = 44    ;fv = 10
value = 360

;VELOCIDAD SEGUN ANGULO
[State 0, VelSet]
type = VelSet
trigger1 = time=1
x = (cos((var(44)*pi)/180)*10)
y = (-sin((var(44)*pi)/180)*10)

[State 0, VarAdd];la variable 9 se le suma al principio para darle super armor 
type = VarAdd	;al projectil
trigger1 = time=1
v =  9   ;fv = 
value = 1

[State 0, VarAdd];point system for helpers
type = parentvarset
triggerall=movehit
trigger1 = 1
v =51
value = 1


;==========================================================
;ANGULO SEGUN VELOCIDAD:
;==========================================================

[State 9000, AngleDraw]
type = AngleDraw
trigger1 =vel x>0
value=atan(-vel y/vel x)*180/pi


[State 9000, AngleDraw]
type = AngleDraw
trigger1 =vel x=0&&vel y<0
value=90

[State 9000, AngleDraw]
type = AngleDraw
trigger1 =vel x=0&&vel y>0
value=270


[State 9000, AngleDraw]
type = AngleDraw
trigger1 =vel x<0
value=atan(-vel y/vel x)*180/pi+180

;==========================================================

[State 1030, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 1030, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 1030, endfromproj]
type = HitOverride
triggerall=var(9)<2;cuantas veces sera golpeado hasta explotar
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 302
attr = SCA, NP, SP, HP
ignorehitpause = 1


[State 1030, endfromproj]
type = HitOverride
triggerall=var(9)=2
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 302
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 251, HitDef]
type = HitDef
trigger1 = time = 0
attr = S,NA
animtype  = Hard
damage    = 11,6
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =s4000,5
guardsound = s4000,6;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0


[State 0, ChangeAnim]
type = CHANGESTATE
trigger1 = pos y>=0
value = 296

[State 0, DestroySelf]
type = changestate
trigger1 = movecontact
trigger2 = anim=1999&&animtime=0;pos y>0
trigger3 = frontedgedist <=-50
trigger4 = (pos y<root,pos y-250)
trigger5 = backedgedist <=-50
value=297

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;CLONESHMG
[Statedef 328]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1263
sprpriority = 5

[State 0, VarAdd]
type = parentVarAdd
trigger1 = time=0
v = 16
value = -1

[State 0, Trans]
type = Trans
trigger1 = time=0
trans = ADDalpha ;none, add, addalpha, add1, sub
alpha = 0,256
;ignorehitpause = 
;persistent = 

[State 0, VarSet]
type = VarSet
trigger1 =(root,animelem=1)
v = 44    ;fv = 10
value = 345

[State 0, VarSet]
type = VarSet
trigger1 =(root,animelem=2)
v = 44    ;fv = 10
value = 315

[State 0, VarSet]
type = VarSet
trigger1 =(root,animelem=3)
v = 44    ;fv = 10
value = 270

[State 0, VarSet]
type = VarSet
trigger1 =(root,animelem=4)
v = 44    ;fv = 10
value = 245

[State 0, VarSet]
type = VarSet
trigger1 =(root,animelem=5)
v = 44    ;fv = 10
value = 225

[State 0, VarSet]
type = VarSet
trigger1 =(root,animelem=6)
v = 44    ;fv = 10
value = 180

[State 0, VarSet]
type = VarSet
trigger1 =(root,animelem=7)
v = 44    ;fv = 10
value = 158

[State 0, VarSet]
type = VarSet
trigger1 =(root,animelem=8)
v = 44    ;fv = 10
value = 135

[State 0, VarSet]
type = VarSet
trigger1 =(root,animelem=9)
v = 44    ;fv = 10
value = 90

[State 0, VarSet]
type = VarSet
trigger1 =(root,animelem=10)
v = 44    ;fv = 10
value = 68

[State 0, VarSet]
type = VarSet
trigger1 =(root,animelem=11)
v = 44    ;fv = 10
value = 45


[State 0, VarSet]
type = VarSet
trigger1 =(root,animelem=12)
v = 44    ;fv = 10
value = 360

;VELOCIDAD SEGUN ANGULO
[State 0, VelSet]
type = VelSet
trigger1 = time=1
x = (cos((var(44)*pi)/180)*10)
y = (-sin((var(44)*pi)/180)*10)

[State 0, VarAdd];la variable 9 se le suma al principio para darle super armor 
type = VarAdd	;al projectil
trigger1 = time=1
v =  9   ;fv = 
value = 1

[State 0, VarAdd];point system for helpers
type = parentvarset
triggerall=movehit
trigger1 = 1
v =51
value = 1


;==========================================================
;ANGULO SEGUN VELOCIDAD:
;==========================================================

[State 9000, AngleDraw]
type = AngleDraw
trigger1 =vel x>0
value=atan(-vel y/vel x)*180/pi


[State 9000, AngleDraw]
type = AngleDraw
trigger1 =vel x=0&&vel y<0
value=90

[State 9000, AngleDraw]
type = AngleDraw
trigger1 =vel x=0&&vel y>0
value=270


[State 9000, AngleDraw]
type = AngleDraw
trigger1 =vel x<0
value=atan(-vel y/vel x)*180/pi+180

;==========================================================

[State 1030, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 1030, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 1030, endfromproj]
type = HitOverride
triggerall=var(9)<2;cuantas veces sera golpeado hasta explotar
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 302
attr = SCA, NP, SP, HP
ignorehitpause = 1


[State 1030, endfromproj]
type = HitOverride
triggerall=var(9)=2
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 302
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 251, HitDef]
type = HitDef
trigger1 = time = 0
attr = S,NA
animtype  = Hard
damage    = 13,7
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =s4000,5
guardsound = s4000,6;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0


[State 0, ChangeAnim]
type = CHANGESTATE
trigger1 = pos y>=0
value = 296

[State 0, DestroySelf]
type = changestate
trigger1 = movecontact
trigger2 = anim=1999&&animtime=0;pos y>0
trigger3 = frontedgedist <=-50
trigger4 = (pos y<root,pos y-250)
trigger5 = backedgedist <=-50
value=297

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;BigEnemyChaserHelper
[Statedef 329]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1347;ifelse(root,anim=11202,1206,ifelse(root,anim=8603,1207,1204))
sprpriority = 5
;velset = 5,0

[State -3, SMOBILEMOVE]
type = PlaySnd
trigger1 = time=0
value = 4000,8

[State 0, Helper]
type = Helper
trigger1 = animelem=1,1
helpertype = normal ;player
name = "SmokeTrail"
ID = 515151
stateno = 305
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0


[State 0, Trans]
type = Trans
trigger1 = TIME=0
trans =  addalpha
alpha = 0,256

[State 0, VarAdd]
type = parentvaradd
trigger1 = time=0
v =24
value = -1

[State 0, IronLizard];IronLizard Sounds fiushh corto
type = PlaySnd
trigger1=root,var(10)=109
trigger1=TIME=0
value = 4000,12
volumescale = 256
channel = -1

[State 0, BindToRoot]
type = BindToRoot
trigger1 =time=0 
time = 1;facing = 0
pos = 20,-20
;ignorehitpause = 
;persistent = 




[State 0, VarSet]
type = Varset
triggerall=root,palno=5
trigger1=time
v = 44    ;fv = 10
value = random%360

;[State 0, VarSet]
;type = VarSet
;triggerall=root,palno=5
;trigger1=var(44)>360
;v = 44    ;fv = 10
;value = 0
;
;[State 0, VarSet]
;type = VarSet
;triggerall=root,palno=5
;trigger1=var(44)<0
;v = 44    ;fv = 10
;value = 359

[State 0, VarAdd];la variable 9 se le suma al principio para darle super armor 
type = VarAdd	;al projectil
trigger1 = time=1
v =  9   ;fv = 
value = 1

[State 0, VarAdd];point system for helpers
type = parentvarset
triggerall=movehit
trigger1 = 1
v =51
value = 1


[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=7
trigger1 = time=0
v = 3    ;fv = 10
value = ifelse(parent,anim=11202,3,ifelse(parent,anim=8603,2,1))
ignorehitpause = 
persistent = 


;==========================================================
;ANGULO SEGUN VELOCIDAD:
;==========================================================

[State 9000, AngleDraw]
type = AngleDraw
trigger1 =vel x>0
value=atan(-vel y/vel x)*180/pi


[State 9000, AngleDraw]
type = AngleDraw
trigger1 =vel x=0&&vel y<0
value=90

[State 9000, AngleDraw]
type = AngleDraw
trigger1 =vel x=0&&vel y>0
value=270


[State 9000, AngleDraw]
type = AngleDraw
trigger1 =vel x<0
value=atan(-vel y/vel x)*180/pi+180

;==========================================================





[State 1030, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 1030, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 1030, endfromproj]
type = HitOverride
triggerall=var(9)<2;cuantas veces sera golpeado hasta explotar
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 302
attr = SCA, NP, SP, HP
ignorehitpause = 1


[State 1030, endfromproj]
type = HitOverride
triggerall=var(9)=2
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 302
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=109
triggerall=numhelper(323132)>0
trigger1 = time=0
trigger1 = helper(323132),anim=18752
v = 3    ;fv = 10
value = 1

[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=109
triggerall=numhelper(323132)>0
trigger1 = time=0
trigger1 = helper(323132),anim=18754
v = 3    ;fv = 10
value = 2

[State 0, VarSet]
type = VarSet
triggerall=root,var(10)=109
triggerall=numhelper(323132)>0
trigger1 = time=0
trigger1 = helper(323132),anim=18753
v = 3    ;fv = 10
value = 3

;HOMING PROJECTILE
;
;[State ****: Turn]
;type = Turn
;trigger1 = (P2Dist X < 10)

[State ****: VelSet]
type = VelSet
trigger1 = (!Time)
x = 3

[State ****: VelAdd]
type = VelAdd
trigger1 = (P2Dist X < 0) && (Vel X > -3);-6)
x = -.5;.4;0.2

[State ****: VelAdd]
type = VelAdd
trigger1 = (P2Dist X > 0) && (Vel X < 3);6)
x = .5;.4;0.2

[State ****: VelAdd]
type = VelAdd
trigger1 = (EnemyNear, Pos Y -25> Pos Y) && (Vel Y < 1.5);6)
y = .3;0.2

[State ****: VelAdd]
type = VelAdd
trigger1 = (EnemyNear, Pos Y -25<= Pos Y) && (Vel Y > -1.5);6)
y = -.3;.2;0.2

;HOMING PROJECTILE END
[State 251, HitDef]
type = HitDef
trigger1 = time = 0
attr = S, SP
animtype  = Hard
damage    = 75,24
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =s4000,7
guardsound = s4000,7;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0

[State 2400, 2];Avanza
type = Velset
triggerall=var(3)=1&&time<10
trigger1 =1;animelem=1;animtime<
x = 3
y =0

[State 2400, 2];Baja
type = Velset
triggerall=var(3)=2&&time<5
trigger1 =1;animelem=1;animtime<
x = 0
y =3

[State 2400, 2];Sube
type = Velset
triggerall=var(3)=3&&time<10
trigger1 =1;animelem=1;animtime<
x = 0
y =-3


[State 0, DestroySelf]
type = changestate
triggerall=root,palno!=5
trigger1 = movecontact
trigger2 = frontedgedist <=-50
trigger3 = (pos y<root,pos y-250)
trigger4=enemy,alive=0&&numenemy=1
trigger5=pos y>0
trigger6=time>200
value = ifelse(var(3)=1,302,ifelse(var(3)=2,304,303))

[State 0, DestroySelf]
type = changestate
triggerall=root,palno=5
trigger1 = movecontact
trigger2 = frontedgedist <=-50
trigger3 = (pos y<root,pos y-250)
trigger4=enemy,alive=0&&numenemy=1
trigger5=time>200
value = ifelse(var(3)=1,302,ifelse(var(3)=2,304,303))

[State 0, DestroySelf]
type = changestate
triggerall=root,palno=5
trigger1=pos y>0
value = ifelse(random%2=1,269,272)


;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;THUNDERCLOUD
[Statedef 330]
type    = S
movetype= I
physics = N
juggle  = 3
ctrl = 1
anim = 1348;ifelse(root,anim=11202,1206,ifelse(root,anim=8603,1207,1204))
sprpriority = 4


[State 0, Turn]
type = Turn
trigger1 = facing!=1
;ignorehitpause = 
;persistent = 

[State 0, RemapPal]
type = RemapPal
trigger1 =1
source = 0,80
dest = 80,1

[State 0, laser];SWISH
type = PlaySnd
trigger1=(anim=[1392,1395])&&animelem=1,1
value = 4000,79+random%3
volumescale = 256
channel = -1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

;VARSETS

[State 0, ParentVarAdd]
type = ParentVarAdd
triggerall=root,var(10)=19
trigger1 =(anim=[1351,1358])&&animelem=1,1
v = 16    ;fv = 
value = -1

[State 0, ParentVarAdd]
type = ParentVarAdd
triggerall=root,var(10)=109
trigger1 =(anim=[1351,1358])&&animelem=1,1
fv = 24    ;fv = 
value = -1

[State 0, VarSet];controlador de Ia
type = VarSet
trigger1 = time=0
v = 21    ;fv = 10
value = 1

;[State 0, VarSet];DETECTOR DE ENEMIGO
;type = VarSet
;trigger1 = root,movehit
;trigger2 = root,movecontact
;trigger3 = root,projhit=1<2
;trigger4 = root,projcontact=1<2
;trigger5 = time=0
;trigger6 = enemynear,movetype=h
;v = 14    ;fv = 10
;value = floor(enemy,pos x)

;[State 0, VIBRATION]
;type = Offset
;trigger1 =ifelse(random%5=3,1,0)
;y = ifelse(random%2,random%3,-random%3)
;x = ifelse(random%2,random%3,-random%3)

[State 0, Offset]
type = Offset
trigger1 = time
y = sin(time/10)*2
;ignorehitpause = 
;persistent = 



[State 0, VarSet];DETECTOR DE ENEMIGO
type = VarSet
trigger1 = var(21)=1
v = 14    ;fv = 10
value = floor(enemy,pos x)

[State 0, VarSet];PASIVO
type = VarSet
trigger1 = var(21)=0
v = 14    ;fv = 10
value = floor((root,pos x)+50*(root,facing))



[State 0, VarSet];TIMER OFF
type = Varset
triggerall=var(21)=0
trigger1 = 1
v = 20    ;fv = 10
value = 0

[State 0, VarSet];TIMER RESET
type = Varadd
triggerall=var(21)=1
trigger1 = time
v = 20    ;fv = 10
value = 1

[State 0, VarSet]
type = VarSet
trigger1 = (var(20)>300)&&anim=1349
v = 21    ;fv = 10
value = 0


[State 0, VarSet];controlador de Ia Enemigo
type = VarSet
trigger1 = root,movehit
trigger2 = root,movecontact
trigger3 = root,projhit=1<2
trigger4 = root,projcontact=1<2
trigger5 = enemynear,movetype=h
v = 21    ;fv = 10
value = 1


;BINDS
;[State 0, BindToRoot];STARTING
;type = BindToRoot
;trigger1 = anim=1348&&pos y<110
;pos = fvar(14),-time*5
;
;[State 0, BindToRoot];IDLE
;type = BindToRoot
;trigger1 = anim!=1348
;pos = fvar(14),-110

[State 0, PosSet];STARTING
type = PosSet
trigger1 = anim=1348
x = var(14)

;[State 0, PosSet];STARTING
;type = PosSet
;trigger1 =pos y>-150
;y = pos y-5

[State 0, PosSet];STARTING
type = PosSet
trigger1 =pos y>enemy,pos y-150
y = pos y-5

[State 0, PosSet];STARTING
type = PosSet
trigger1 =pos y<enemy,pos y-150
y = pos y+5

[State 0, PosSet];IDLE -
type = Posadd
trigger1 = anim!=1348&&floor(pos x)>floor(var(14))
x = -5*FACING

[State 0, PosSet];IDLE +
type = Posadd
trigger1 = anim!=1348&&floor(pos x)<=floor(var(14))
x = 5*FACING

;ANIMATIONS
[State 0, ChangeAnim];IDLE
type = ChangeAnim
trigger1 = anim=1348&&animtime=0
trigger2 = (anim=[1351,1358])&&animtime=0
value = 1349

[State 0, ChangeAnim];IDLE
type = ChangeAnim
trigger1 = anim=1392&&animtime=0;(anim=[1392,1395])&&animtime=0
value = 1349
elem=2

[State 0, ChangeAnim];IDLE 2
type = ChangeAnim
trigger1 = anim=1393&&animtime=0;(anim=[1392,1395])&&animtime=0
value = 1349
elem=4

[State 0, ChangeAnim];IDLE 3
type = ChangeAnim
trigger1 = anim=1394&&animtime=0;(anim=[1392,1395])&&animtime=0
value = 1349
elem=6

[State 0, ChangeAnim];IDLE 4
type = ChangeAnim
trigger1 = anim=1395&&animtime=0;(anim=[1392,1395])&&animtime=0
value = 1349
elem=8

[State 0, ChangeAnim];RANDOM IDLE
type = ChangeAnim
trigger1 = anim=1349&&(random%20=4)
value = 1392+random%4

[State 0, ChangeAnim];SHOOT
type = ChangeAnim
triggerall=roundstate=2&&(anim!=[1351,1358])
trigger1 = (root,command="x");&&(anim!=[1351,1358])
trigger2 = (root,var(59));&&(anim!=[1351,1358])
trigger2 = (root,movehit)||(root,movecontact)||(root,projhit=1<2)||(root,projcontact=1<2)||(enemy,movetype=h)
value = 1351+random%8


[State 0, THUNDERCLOUDRAY]
type = Helper
trigger1 =(anim=[1351,1358])&&animelem=1,1
helpertype = normal
name = "THUNDERCLOUDRAY"
ID = 13251
stateno = 332
pos = pos x,pos y
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 0, ChangeAnim];END
type = CHANGESTATE
trigger1 = (root,var(10)!=19)&&anim!=1350&&(root,var(10)!=109||((root,var(10)=109)&&(root,fvar(10)=19)&&(root,fvar(24)=0))||((root,var(10)=109)&&(root,fvar(10)!=19)))
trigger2 = root,movetype=h&&anim!=1350
value = 331

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;THUNDERCLOUDEND
[Statedef 331]; Hover code by NOCTIS
type    = A
movetype= I
physics = N
juggle  = 3
ctrl = 1
anim = 1350;ifelse(root,anim=11202,1206,ifelse(root,anim=8603,1207,1204))
sprpriority = 4


[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, DestroySelf];DESTROY
type = DestroySelf
trigger1 = animtime=0


;---------------------------------------------------------------------------
;THUNDERCLOUDRAY
[Statedef 332]
type    = S
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1359
sprpriority = 0
velset = 0,0

[State 0, laser];THUNDER SOUND
type = PlaySnd
trigger1=time=0
value = 4000,78
volumescale = 256
channel = 0

[State 0, BindToParent]
type = BindToParent
trigger1 = time=0
time = -1;facing = 0
pos = 0,0

[State 1030, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA
ignorehitpause = 1

[State 0, VarAdd]
type = parentvarset
triggerall=movehit
trigger1 = 1
v =51
value = 1

[State 0, ChangeAnim];ANIMS
type = ChangeAnim
trigger1 = (anim=[1359,1373])&&animtime=0
value = anim+1

[State 0, ChangeAnim];FINALANIM
type = ChangeAnim
trigger1 = (anim=1374)&&animtime=0
value = 1390

[State 0, ChangeAnim];HITANIMS
type = ChangeAnim
trigger1 = (anim=[1359,1374])&&movecontact
trigger2 =(anim=[1365,1374])&& parent,anim=1350
trigger3 = (anim=[1359,1374])&&numhelper(13252)
value = (anim-1359)+1375


[State 251, HitDef]
type = HitDef
trigger1 = 1;time=0
attr = S, NA
animtype  = Hard
damage    = 70,35
guardflag = MA
pausetime = 0,0
sparkno = s1391;S9107
sparkxy=-20*parent,facing,(10+10*time)
hitsound   =s4000,79+random%3;66;s4000,2
guardsound = s4000,79+random%3;66;s4000,2;S5546,0
guard.sparkno = s1391;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 0
envshake.freq = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0

[State 0, THUNDERCLOUDSPARK]
type = Helper
trigger1 =anim=[1365,1374]
trigger1 = animelem=1,1
helpertype = normal
name = "THUNDERCLOUDSPARK"
ID = 13252
stateno = 333
pos = 0,150
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0


[State 0, DestroySelf]
type = destroySelf
trigger1 = (anim=[1375,1390])&&animtime=0



;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;THUNDERCLOUDSPARK
[Statedef 333];
type    = A
movetype= I
physics = N
juggle  = 3
ctrl = 1
anim = 1391;ifelse(root,anim=11202,1206,ifelse(root,anim=8603,1207,1204))
sprpriority = 4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = TIME=0
value = S4000,66
volumescale = 256
channel = 0

[State 251, HitDef]
type = HitDef
trigger1 = 1;time=0
attr = S, NA
animtype  = Hard
damage    = 1,1
guardflag = MA
pausetime = 0,0
sparkno = -1;s1391;S9107
sparkxy=0,0
hitsound   =-1;s4000,66;s4000,2
guardsound = -1;s4000,66;s4000,2;S5546,0
guard.sparkno = -1;s1391;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 0
envshake.freq = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0

[State 0, DestroySelf];DESTROY
type = DestroySelf
trigger1 = animtime=0

;---------------------------------------------------------------------------
;MOBSSTART
[Statedef 334]
type    = S
movetype= I
physics = N
juggle  = 3
anim = 1396;ifelse(root,anim=11202,1206,ifelse(root,anim=8603,1207,1204))
sprpriority = 4

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, PosFreeze]
type = PosFreeze
trigger1 = 1
value = 1

[State 0, laser];FIUSSHHH
type = PlaySnd
trigger1=time=0
value = 4000,74
volumescale = 256
channel = -1

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime=0
value =335
;---------------------------------------------------------------------------
;MOBSFLY
[Statedef 335]
type    = S
movetype= A
physics = N
juggle  = 3
anim = 1397;ifelse(root,anim=11202,1206,ifelse(root,anim=8603,1207,1204))
sprpriority = 4
velset=0,-3

[State 0, ChangeState]
type = ChangeState
trigger1 =animtime=0 
value =336

[State 0,SUICIDE]
type = ChangeState
trigger1 = root,var(10)!=20&&(root,var(10)!=109||((root,var(10)=109)&&(root,fvar(10)=20)&&(root,fvar(24)=0))||((root,var(10)=109)&&(root,fvar(10)!=20)))
trigger2 = root,movetype=H
value =337

;---------------------------------------------------------------------------
;MOBS
[Statedef 336]
type    = A
movetype= I
physics = N
juggle  = 3
anim = 1398;ifelse(root,anim=11202,1206,ifelse(root,anim=8603,1207,1204))
sprpriority = 4
velset=0,0

[State 0, laser];PIRURIN
type = PlaySnd
trigger1=time=0
value = 4000,76
volumescale = 256
channel = -1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim=1398&&animtime=0
value = 1399

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[state 55]
type = velset
trigger1 = (vel y >= -2.5&&vel y <= 2.5)
y = 0
ignorehitpause = 1
 
[state 55]
type = velset
trigger1 = (vel x >= -.5&&vel x <= .5)
x = 0
ignorehitpause = 1

[state 55]
type = veladd
trigger1 = vel y > .5||vel y < -.5;vel y > 2.5||vel y < -2.5
y = ifelse(vel y < 0,.1,-.1);ifelse(vel y < 0,.4,-.4)
ignorehitpause = 1

[state 55]
type = velset
trigger1 = !Vel y
y = -.1*Sin((Time*0.1));-2*Sin((Time*0.2))
ignorehitpause = 1


[state 55]
type = velset
trigger1 =root,vel x>0
x = 2*(root,facing)

[state 55]
type = velset
trigger1 =root,vel x<0
x = -2*(root,facing)

[state 55]
type = velset
trigger1 =root,vel x=0
x =0

[State 0,SHOOTCHECKER]
type = VarSet
triggerall=roundstate=2
trigger1 = root,command="x"&&anim=1399
trigger2 = (root,var(59))=1&&anim=1399
v = 21    ;fv = 10
value = 1

[State 0,SHOOTCHECKER]
type = VarSet
trigger1 = root,command!="x"&&root,var(59)=0
v = 21    ;fv = 10
value = 0


[State 0, THUNDERCLOUD]
type = Helper
trigger1 = var(21)&&numhelper(15141)=0
helpertype = normal ;player
name = "MOBSFX"
ID = 15141
stateno = 338
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
ignorehitpause=1

[State 0,SUICIDE]
type = ChangeState
trigger1 = root,var(10)!=20&&(root,var(10)!=109||((root,var(10)=109)&&(root,fvar(10)=20)&&(root,fvar(24)=0))||((root,var(10)=109)&&(root,fvar(10)!=20)))
trigger2 = root,movetype=H
value =337
;---------------------------------------------------------------------------
;MOBSDIE
[Statedef 337]
type    = A
movetype= A
physics = N
juggle  = 3
anim = 1402;ifelse(root,anim=11202,1206,ifelse(root,anim=8603,1207,1204))
sprpriority = 4
;velset=0,3


[State 251, HitDef]
type = HitDef
trigger1 = time = 0
attr = S, SP
animtype  = Hard
damage    = 10*var(21)+5*var(24)+(root,palno=4)*20,10*var(21)+3*var(24)+(root,palno=4)*20
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =s4000,4
guardsound = s4000,4;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 8
envshake.freq = 100
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0

[State 0, Gravity]
type = Gravity
trigger1 = 1


[State 0, ChangeState]
type = ChangeState
trigger1 = pos y>=0
trigger2 = movehit=1
trigger3 = movecontact
value =252

;---------------------------------------------------------------------------
;MOBSSHOOTFX
[Statedef 338]
type    = S
movetype= I
physics = N
juggle  = 3
anim = 1403;ifelse(root,anim=11202,1206,ifelse(root,anim=8603,1207,1204))
sprpriority = 5

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
time = -1
pos = 0,0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = root,command="x"
value = 1403

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, THUNDERCLOUD]
type = Helper
trigger1 =animelem=1,1
trigger2 =animelem=3,1
trigger3 =animelem=5,1
helpertype = normal ;player
name = "MOBSPROJ"
ID = 15151
stateno = 339
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
ignorehitpause=1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = animtime=0
trigger2 = numhelper(15121)=0
trigger3 = parent,stateno=337
;---------------------------------------------------------------------------
;MOBSPROJECTILE
[Statedef 339]
type    = A
movetype= A
physics = N
juggle  = 3
anim = 1401;ifelse(root,anim=11202,1206,ifelse(root,anim=8603,1207,1204))
sprpriority = 4

[State 0, Trans]
type = Trans
trigger1 = time=0
trans = ADDalpha ;none, add, addalpha, add1, sub
alpha = 0,256

[State 0, laser];laser Sounds
type = PlaySnd
trigger1=time=0
value = 4000,73
volumescale = 256
channel = 0

[State 0, Turn]
type = Turn
trigger1 = TIME=0&&enemy,pos x<pos x

[State X, Store Angle]
Type = VarSet
Trigger1 = 1
FV = 0
Value = Cond(EnemyNear,Pos X != Pos X, ATan(((EnemyNear,Pos Y + EnemyNear,Const(Size.Mid.Pos.Y)) - Pos Y) / ((EnemyNear,Pos X - Pos X) * Facing)), Cond(EnemyNear,Pos Y + EnemyNear,Const(Size.Mid.Pos.Y) < Pos Y, PI / 2.0, -PI / 2.0))

[State ****: VelSet]
type = VelSet
trigger1 = (!Time)
x = 3

[State ****: VelAdd]
type = Velset
triggerall=floor(abs(enemy,pos x-pos x))>10
trigger1 = time=1
x = 8*cos(fvar(0));.4;0.2
y = 8*sin(fvar(0));0.2

[State 0, VelSet]
type = VelSet
triggerall=(enemy,pos y>pos y)&&(floor(abs(enemy,pos x-pos x))<=10)
trigger1 = time=1
x = 0
y = 8

[State 0, VelSet]
type = VelSet
triggerall=(enemy,pos y<=pos y)&&(floor(abs(enemy,pos x-pos x))<=10)
trigger1 = time=1
x = 0
y = -8



[State 9000, AngleDraw]
type = AngleDraw
trigger1 =vel x>0
value=atan(-vel y/vel x)*180/pi


[State 9000, AngleDraw]
type = AngleDraw
trigger1 =vel x=0&&vel y<0
value=90

[State 9000, AngleDraw]
type = AngleDraw
trigger1 =vel x=0&&vel y>0
value=270


[State 9000, AngleDraw]
type = AngleDraw
trigger1 =vel x<0
value=atan(-vel y/vel x)*180/pi+180

[State 1030, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA
ignorehitpause = 1

[State 251, HitDef]
type = HitDef
trigger1 = time = 0
attr = S, SP
animtype  = Hard
damage    = 11,5
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =s4000,79+random%3;77;s4000,7
guardsound = s4000,79+random%3;77;s4000,7;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0

[State 0, ChangeAnim]
type = CHANGESTATE
trigger1 = pos y>=0
value = 340

[State 0, DestroySelf]
type = changestate
trigger1 = movecontact
trigger2 = anim=1999&&animtime=0;pos y>0
trigger3 = frontedgedist <=-50
trigger4 = (pos y<root,pos y-250)
trigger5 = backedgedist <=-50
value=340

;---------------------------------------------------------------------------
;MOBSSPARK
[Statedef 340];
type    = A
movetype= I
physics = N
juggle  = 3
ctrl = 1
anim = 1391;ifelse(root,anim=11202,1206,ifelse(root,anim=8603,1207,1204))
sprpriority = 4
velset=0,0

;[State 0, PlaySnd]
;type = PlaySnd
;trigger1 = TIME=0
;value = S4000,66
;volumescale = 256
;channel = 0

[State 0, PalFXWiz]
type = PalFX
trigger1 = 1
time = -1
add = 0,0,0
mul = 128,256,256
sinadd = 0,0,0,10
invertall = 0
color = 256

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1


[State 251, HitDef]
type = HitDef
trigger1 = 1;time=0
attr = S, NA
animtype  = Hard
damage    = 1,1
guardflag = MA
pausetime = 0,0
sparkno = -1;s1391;S9107
sparkxy=0,0
hitsound   =-1;s4000,66;s4000,2
guardsound = -1;s4000,66;s4000,2;S5546,0
guard.sparkno = -1;s1391;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 0
envshake.freq = 0
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0

[State 0, DestroySelf];DESTROY
type = DestroySelf
trigger1 = animtime=0

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;SDEVIL CANNON
[Statedef 341]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 16020
sprpriority = 5
velset = root,vel x,(-(root,vel y)/5)-(root,anim=11200)*(1.5)+(root,anim=600)*(1.5);-.15-(root,vel y)/5;5,0;.15+root,vel x,-.15-(root,vel y)/5;5,0

[State 0, PlaySnd];Super Grenade Sound pouwmn
type = PlaySnd
trigger1 =time=0
value = 4000,3
volumescale = 256
channel = -1

[State 0, Explod]
type = Explod
trigger1 = TIME=0
anim = ifelse(root,anim=16021,16023,16022)
ID = 313131
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 0, Explod]
type = Explod
trigger1 = root,anim=16021&&root,animelem=3,1
anim = 16024
ID = 313131
pos = -20,20
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 0, EnvColor]
type = EnvColor
trigger1 = movecontact
value = 255,255,255
time = 1

[State 0, VarSet]
type = VarSet
triggerall=var(21)=0
trigger1=var(44)>360
trigger2=time=0
v = 44    ;fv = 10
value = 360

[State 0, varadd]
type = varadd
triggerall=var(21)=0
triggerall =var(44)>270&&time>8
trigger1=time
v=44
value=-2

[State 0, VarSet]
type = VarSet
triggerall=var(21)=0
trigger1=var(44)<0
v = 44    ;fv = 10
value = 359

[State 9000, AngleDraw]
type = AngleDraw
triggerall=var(21)
trigger1 =vel x>0
value=atan(-vel y/vel x)*180/pi


[State 9000, AngleDraw]
type = AngleDraw
triggerall=var(21)
trigger1 =vel x=0&&vel y<0
value=90

[State 9000, AngleDraw]
type = AngleDraw
triggerall=var(21)
trigger1 =vel x=0&&vel y>0
value=270

[State 0, AngleDraw]
type = AngleDraw
trigger1 = var(21)=0
value = var(44)

[State 1030, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 1030, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 1030, endfromproj]
type = HitOverride
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 253
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 251, HitDef]
type = HitDef
trigger1 = time = 0
attr = S, SP
animtype  = Hard
damage    = 100,50
guardflag = MA
pausetime = 0,0
sparkno = -1;S9107
sparkxy=0,0
hitsound   =s4000,4;s4000,1
guardsound = s4000,4;s4000,1;S5546,0
guard.sparkno = -1;s9101;;;s7004
ground.type = low
ground.slidetime = 0;5
;guard.sparkno; = S449
ground.hittime  = 0;15
ground.velocity = 0;-10
air.juggle = 0
air.velocity = 0,0;-10,-8
fall.xvelocity =0
fall.yvelocity =0
yaccel = 1

ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 8
envshake.freq = 100
palfx.time = 3
palfx.add = 240,50,0
palfx.mul = 250,224,120
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0

[State 0, VarAdd]
type = parentvarset
triggerall=movehit
trigger1 = 1
v =51
value = 1


[State 0, VarSet];FWD
type = VarSet
trigger1 = (time=0)&&((root,anim=200)||(root,anim=12200)||(root,anim=202))
v = 21    ;fv = 10
value = 0

[State 0, VarSet];UP
type = VarSet
trigger1 = (time=0)&&((root,anim=11200))
v = 21    ;fv = 10
value = 1

[State 0, VarSet];DW
type = VarSet
trigger1 = (time=0)&&((root,anim=600))
v = 21    ;fv = 10
value = 2

[State 2400, 2]
type = Veladd
triggerall=var(21)=0
trigger1 =time<10
x=.15
y = -.15

[State 2400, 2]
type = Veladd
triggerall=var(21)=1
trigger1 =time<10
y = -.15

[State 2400, 2]
type = Veladd
triggerall=var(21)=2
trigger1 =time<10
y = .15

[State 2400, 2]
type = Veladd
trigger1 =time>10
y = .2


[State 0, DestroySelf]
type = changestate
trigger1 = movecontact
trigger2 = pos y>0
value = 253
;---------------------------------------------------------------------------
;DRILLSLUGUP
[Statedef 400]
type    = S
movetype= I
physics = S
juggle  = 6
ctrl = 0
anim = 17040
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = animtime=0
v = 27
value = 1


[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;DRILLSLUGDOWN
[Statedef 401]
type    = S
movetype= I
physics = S
juggle  = 6
ctrl = 0
anim = 17042
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = animtime=0
v = 27
value = 0


[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------;Jump Light Punch
; CNS difficulty: easy
[Statedef 600]
type    = A
movetype= A
physics = A
juggle  = 2
poweradd= 5

ctrl = 0
anim = 600
sprpriority = 2

[State 600, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 600, 2]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 20
guardflag = HA
priority = 3
pausetime = 7,8
sparkno = 0
sparkxy = -40,-232
hitsound   = 5,0
guardsound = 6,0
ground.type = High
ground.slidetime = 7
ground.hittime  = 8
ground.velocity = -16
air.velocity = -5.2,-12
air.hittime = 14

[State 600, 3]
type = CtrlSet
trigger1 = Time = 17
value = 1

;---------------------------------------------------------------------------
;Jump Strong Punch
; CNS difficulty: easy
[Statedef 610]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 30
ctrl = 0
anim = 610
sprpriority = 2

[State 610, 2]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[State 610, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 72
guardflag = HA
priority = 4
pausetime = 12,12
sparkno = 1
sparkxy = -40,-220
hitsound   = 5,3
guardsound = 6,0
animtype = Med
ground.type = High
ground.slidetime = 14
ground.hittime  = 14
ground.velocity = -24
air.velocity = -12,-16



[Statedef 666]
type    = U
movetype= I
physics = N
juggle  = 3
ctrl = 1
anim = anim;+random%11
sprpriority = 5
velset = 0,0

[State 0, VarSet]
type = Varadd
trigger1 =time=0
v = 23    ;fv = 10
value = -1

[State 0, VarSet]
type = Varset
trigger1 =time=0
v = 18    ;fv = 10
value = 1

[State 0, Explod];legsStand
type = Explod
triggerall = numexplod(2000)=0
trigger1 = stateno=0&&time=1;stateno=0||stateno=12||stateno=11
trigger2 = (anim=0||anim=10||anim=12||anim=15000||anim=15001);)&&animelem=1
trigger3=anim=5&&!animtime
trigger4=anim=47&&!animtime
trigger5 = (anim=8000||anim=8012||anim=15000||anim=15001);&&animelem=1
anim = 10000
ID = 2000
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 0
scale = 1,1
sprpriority = 2
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime=0
value =0
ctrl = 1
;anim =
;ignorehitpause = 
;persistent = 


;---------------------------------------------------------------------------
; CrouchWalk
[Statedef 1100]
type    = C
physics = C
sprpriority = 2

[State 20, 3]
type = ChangeAnim
trigger1 = Anim= 12200
value = 12020

[State 20, 3]
type = ChangeAnim
trigger1 = Anim= 12202
value = 12021

[State 20, 3];SLUGGUNNERSTARTWALKFWD
type = ChangeAnim
trigger1 = time=0&&anim!=18210&&anim!=18211&&var(10)=105&&command="holdfwd"
value = 18210

[State 20, 3];SLUGGUNNERSTARTWALKBACK
type = ChangeAnim
trigger1 = time=0&&anim!=18212&&anim!=18213&&var(10)=105&&command="holdback"
value = 18213

[State 20, 3];SLUGGUNNERWALKFWD
type = ChangeAnim
trigger1 = Anim= 18210&&animtime=0
trigger2 = Anim= 18212&&command="holdfwd"
value = 18211


[State 20, 3];SLUGGUNNERWALKBACK
type = ChangeAnim
trigger1 = Anim= 18211&&command="holdback"
trigger2 = Anim= 18213&&animtime=0
value = 18212

[State 20, 3];BLACKHOUNDWALKFWD
type = ChangeAnim
trigger1 = var(10)=106&&command="holdfwd"&&anim!=18513
value = 18513

[State 20, 3];BLACKHOUNDWALKBACK
type = ChangeAnim
trigger1 = var(10)=106&&command="holdback"&&anim!=18514
value = 18514

[State 20, 3];BRADLEYWALKFWD
type = ChangeAnim
trigger1 = var(10)=107&&command="holdfwd"&&anim!=18610
value = 18610

[State 20, 3];BRADLEYWALKBACK
type = ChangeAnim
trigger1 = var(10)=107&&command="holdback"&&anim!=18611
value = 18611

[State 20, 3];SLUGARMORWALKFWD
type = ChangeAnim
trigger1 = var(10)=108&&command="holdfwd"&&anim!=18658&&anim!=18660&&anim!=18662&&anim!=18663&&anim!=18661
value = 18658

[State 20, 3];SLUGARMORWALKBACK
type = ChangeAnim
trigger1 = var(10)=108&&command="holdback"&&anim!=18662&&anim!=18658&&anim!=18660&&anim!=18663&&anim!=18661
value = 18661

[State 20, 3];SLUGARMORWALKFWDFROMBACK
type = ChangeAnim
trigger1 = var(10)=108&&command="holdfwd"&&((anim=[18661,18663]))
value = 18660

[State 20, 3];SLUGARMORWALKBACKFROMFWD
type = ChangeAnim
trigger1 = var(10)=108&&command="holdback"&&((anim=[18658,18660]))
value = 18663

[State 20, 3];SMOBILEWALKFWD
type = ChangeAnim
trigger1 = var(10)=110&&command="holdfwd"&&anim!=18805
value = 18805

[State 20, 3];SMOBILEWALKBACK
type = ChangeAnim
trigger1 = var(10)=110&&command="holdback"&&anim!=18806
value = 18806

[State 20, 3];BALLSLUGCROUCHWALKFWD
type = ChangeAnim
trigger1 = var(10)=112&&command="holdfwd"&&anim!=18867&&command != "holdback"
value = 18867

[State 20, 3];BALLSLUGCROUCHWALKBACK
type = ChangeAnim
trigger1 = var(10)=112&&command="holdback"&&anim!=18868&&command != "holdfwd"
value = 18868

[State 20, 3];BALLSLUGCROUCH
type = ChangeAnim
trigger1 = var(10)=112&&command="holdback"&&command="holdfwd"&&anim!=18874
value = 18874

[State 0, ChangeAnim];DIKOKKAFWDSTART
type = ChangeAnim
triggerall=command="holdfwd"&&var(10)=130
trigger1 = anim!=18933&&anim!=18934
value = 18933

[State 0, ChangeAnim];DIKOKKAFWD
type = ChangeAnim
triggerall=command="holdfwd"&&var(10)=130
trigger1 = anim=18933&&animtime=0
value = 18934

[State 0, ChangeAnim];DIKOKKABACKSTART
type = ChangeAnim
triggerall=command="holdback"&&var(10)=130
trigger1 = anim!=18936&&anim!=18935
value = 18936

[State 0, ChangeAnim];DIKOKKABACK
type = ChangeAnim
triggerall=command="holdback"&&var(10)=130
trigger1 = anim=18936&&animtime=0
value = 18935



[State 0, ChangeAnim];RDIKOKKAFWDSTART
type = ChangeAnim
triggerall=command="holdfwd"&&var(10)=114
trigger1 = anim!=18953&&anim!=18954
value = 18953

[State 0, ChangeAnim];RDIKOKKAFWD
type = ChangeAnim
triggerall=command="holdfwd"&&var(10)=114
trigger1 = anim=18953&&animtime=0
value = 18954

[State 0, ChangeAnim];RDIKOKKABACKSTART
type = ChangeAnim
triggerall=command="holdback"&&var(10)=114
trigger1 = anim!=18956&&anim!=18955
value = 18955

[State 0, ChangeAnim];RDIKOKKABACK
type = ChangeAnim
triggerall=command="holdback"&&var(10)=114
trigger1 = anim=18955&&animtime=0
value = 18956

[State 20, 1]
type = VelSet;trigger1 = command = "holdfwd"&&P2BodyDist  x>0&&command != "x"&&var(10)!=105&&var(10)!=100&&var(10)!=106&&var(10)!=107&&var(10)!=108
trigger1 = command = "holdfwd"&&command != "x"&&var(10)!=105&&var(10)!=100&&var(10)!=106&&var(10)!=107&&var(10)!=108&&var(10)!=112
x = const(velocity.walk.fwd.x)/2


[State 20, 2]
type = VelSet
triggerall=var(10)>99
trigger1 = command = "holdback"&&command != "x"&&var(10)!=105&&var(10)!=100&&var(10)!=106&&var(10)!=107&&var(10)!=108&&var(10)!=112;&&P2BodyDist  x>0&&P2BodyDist  x>0
x = const(velocity.walk.back.x)/2


[State 20,BALLSLUGFWD]
type = VelSet
trigger1 = command = "holdfwd"&&var(10)=112&&command != "holdback"
x = const(velocity.walk.fwd.x)


[State 20,BALLSLUGBACK]
type = VelSet
trigger1 = command = "holdback"&&command != "x"&&var(10)=112&&command != "holdfwd"
x = const(velocity.walk.back.x)


[State 20, 1];SLUGSWALKFWD
type = VelSet
trigger1 = command = "holdfwd"&&((var(10)=100)||(var(10)=105)||(var(10)=106)||(var(10)=107))
x = const(velocity.walk.fwd.x)

[State 20, 1];SLUGSWALKBACK
type = VelSet
trigger1 = command = "holdback"&&((var(10)=100)||(var(10)=105)||(var(10)=106)||(var(10)=107))
x = const(velocity.walk.back.x)


[State 0, Velset]
type = Velset
trigger1 = (command="holdfwd")&&(var(10)=108)
trigger1 = (vel x) <((const(velocity.walk.fwd.x))*2)
x = vel x+const(velocity.walk.fwd.x)*(.5)


[State 0, Velset]
type = Velset
trigger1 = (command="holdback")&&(var(10)=108)
trigger1 = (vel x)>((const(velocity.walk.back.x))*2)
x = vel x+const(velocity.walk.back.x)*(.5)

;[State 3000, StayOnTarget]
;type = ScreenBound
;trigger1 =!numhelper(2250)&&var(11)!=3
;value = 1
;movecamera = 1,0

[State 20, 3];CROUCHWALKING PISTOL
type = ChangeAnim
triggerall = command = "holdfwd"&&(var(10)=0||var(10)=9||var(10)=19);vel x > 0
trigger1 = Anim != 12020 && Anim != 5 && Anim != 12200
trigger2 = Anim = 5 && AnimTime = 0
trigger3 = command!="x"&& Anim = 200&&AnimTime = 0
value = 12020

[State 20, 3];CROUCHWALKING 2 WEAPON
type = ChangeAnim
triggerall = command = "holdfwd"&&var(10)>0&&var(10)!=9&&var(10)!=19&&var(10)<100;&&var(10)!=100&&var(10)!=105&&var(10)!=15&&var(10)!=106;vel x > 0
trigger1 = Anim != 12021 && Anim != 8005 && Anim != 12202
trigger2 = Anim = 8005 && AnimTime = 0
trigger3 = command!="x"&& Anim = 8200&&AnimTime = 0
value = 12021


[State 20, 3];CROUCHWALKING 2HMG
type = ChangeAnim
triggerall = command = "holdfwd"&&var(10)=15;vel x > 0
trigger1 = Anim != 12022 && Anim != 8005 && Anim != 12202
trigger2 = Anim = 8005 && AnimTime = 0
trigger3 = command!="x"&& Anim = 8200&&AnimTime = 0
value = 12022

[State 20, 3];CROUCHWALKING SV001 FWD
type = ChangeAnim
triggerall = command = "holdfwd"&&var(10)=100;vel x > 0
trigger1 = Anim != 16010
value = 16010

[State 20, 3];CROUCHWALKING SV001 BACK
type = ChangeAnim
triggerall = command = "holdback"&&var(10)=100;vel x > 0
trigger1 = Anim != 16011
value = 16011


[State 200, 3]
type = ChangeState
triggerall=var(10)>99
trigger1 = command = "holddown"&&command != "holdfwd"&&command != "holdback"
value = 11
ctrl = 1

[State 200, 3]
type = ChangeState
triggerall=var(10)<100
trigger1 = command = "holddown"&&command != "holdfwd"
value = 11
ctrl = 1

;[State 400, 4]
;type = ChangeState
;trigger1 = command = "x"
;value = 1200

[State 400, 4]
type = ChangeState
trigger1 = command != "holddown"
value = 12

;[State 400, 4]
;type = ChangeState
;trigger1 = command = "holdfwd"&&command = "holdback"
;value = 11


;CrouchShooting
[Statedef 1200]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 8
ctrl = 1
anim = 12200-ifelse(var(10)=9,11987,0)+ifelse(var(10)=51||var(10)=5||var(10)=3||var(10)=13||var(10)=8||var(10)=16||var(10)=17,2,0)+ifelse((var(10)=18)||(var(10)=4)||(var(10)=2)||(var(10)=12)||(var(10)=7)||(var(10)=6),4,0)+ifelse(((var(10)=1)||(var(10)=14)),5,0)+ifelse((var(10)=10)||(var(10)=11),6,0)+ifelse((var(10)=15),7,0)
sprpriority = 2



[State 400, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11

[State 400, 4]
type = ChangeState
trigger1 = command != "holddown"
value = 12


;---------------------------------------------------------------------------
; SLIDE
[Statedef 1300]
type    = C
physics = C
sprpriority = 2
ctrl=0
anim=100+(var(10)=15)*(8008)+(var(10)>0&&var(10)!=9&&var(10)!=19&&var(10)!=20&&var(10)!=15)*(8000)

[State 0, ChangeAnim]
type = ChangeAnim
triggerall=(var(10)=0)||(var(10)=9)||(var(10)=19)||(var(10)=20)
trigger1 = anim=100&&animtime=0
value = 101

[State 0, ChangeAnim]
type = ChangeAnim
triggerall=var(10)>0
trigger1 = anim=8100&&animtime=0
value = 8101


[State 0, ChangeAnim]
type = ChangeAnim
triggerall=var(10)=15
trigger1 = anim=8108&&animtime=0
value = 8109

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=0
value = s800,1
volumescale = 256
channel = -1

[State 201];Dust
type=Explod
triggerall = vel x > 0
trigger1=Timemod=3,0
anim=2121
ownpal=1
accel=.01,-.01
scale=1,1
sprpriority=2
pos=0,0
removetime=-2
postype = p1

[State 0, ChangeAnim];SLIDE NORMAL PISTOL
type = ChangeAnim
triggerall = ((var(10)=0)||(var(10)=19)||(var(10)=20))&&palno!=5&&palno!=12
trigger1=anim=101
trigger1=command="x"
trigger2=anim=102
trigger2=command="x"
value = 102

[State 0, ChangeAnim];SLIDE NORMAL PISTOL AI
type = ChangeAnim
triggerall = ((var(10)=0)||(var(10)=19)||(var(10)=20))&&palno!=5&&palno!=12
trigger1=anim=101
trigger1=VAR(59)
trigger2=anim=102&&ANIMELEM=3,1
trigger2=VAR(59)
value = 102

[State 0, ChangeAnim];SLIDE DEVIL MARCO PISTOL
type = ChangeAnim
triggerall = ((var(10)=0)||(var(10)=19)||(var(10)=20))&&((palno=5)||(palno=12))&&var(19)>numhelper(3000)+numproj
trigger1=anim=101
trigger1=command="x"
trigger2=anim=102
trigger2=command="x"
value = 102

[State 0, ChangeAnim];SLIDE DEVIL MARCO PISTOL AI
type = ChangeAnim
triggerall = ((var(10)=0)||(var(10)=19)||(var(10)=20))&&((palno=5)||(palno=12))&&var(19)>numhelper(3000)+numproj
trigger1=anim=101
trigger1=VAR(59)
trigger2=anim=102&&ANIMELEM=3,1
trigger2=VAR(59)
value = 102

[State 0, ChangeAnim];SLIDE HMG
type = ChangeAnim
triggerall = ((var(10)=1)||(var(10)=14))
trigger1=anim=8101
trigger1=command="x"
trigger2=anim=8103
trigger2=command="x"
value = 8103

[State 0, ChangeAnim];SLIDE HMG AI
type = ChangeAnim
triggerall = ((var(10)=1)||(var(10)=14))
trigger1=anim=8101
trigger1=VAR(59)
trigger2=anim=8103&&ANIMELEM=3,1
trigger2=VAR(59)
value = 8103

[State 0, ChangeAnim];SLIDE LASER GUN
type = ChangeAnim
triggerall = (var(10)=10)||(var(10)=11)
trigger1=anim=8101
trigger1=command="x"
trigger2=anim=8104
trigger2=command="x"
value = 8104

[State 0, ChangeAnim];SLIDE LASER GUN AI
type = ChangeAnim
triggerall = (var(10)=10)||(var(10)=11)
trigger1=anim=8101
trigger1=VAR(59)
trigger2=anim=8104
trigger2=VAR(59)
value = 8104


[State 0, ChangeAnim];SLIDE PUSH WEAPONS
type = ChangeAnim
triggerall = var(19)>numhelper(3000)+numproj
triggerall = (var(10)=51||var(10)=5||var(10)=3||var(10)=13||var(10)=8||var(10)=16||var(10)=17)
trigger1=anim=8101
trigger1=command="x"
trigger2=anim=8106
trigger2=command="x"
value = 8106

[State 0, ChangeAnim];SLIDE PUSH WEAPONS AI
type = ChangeAnim
triggerall = var(19)>numhelper(3000)+numproj
triggerall = (var(10)=51||var(10)=5||var(10)=3||var(10)=13||var(10)=8||var(10)=16||var(10)=17)
trigger1=anim=8101
trigger1=VAR(59)
trigger2=anim=8106
trigger2=VAR(59)
value = 8106

[State 0, ChangeAnim];SLIDE NO PUSH WEAPON
type = ChangeAnim
triggerall = var(19)>numhelper(3000)+numproj
triggerall = (var(10)=4||var(10)=7||var(10)=6||var(10)=2||var(10)=12||var(10)=18)
trigger1=anim=8101
trigger1=command="x"
trigger2=anim=8107
trigger2=command="x"
value = 8107


[State 0, ChangeAnim];SLIDE NO PUSH WEAPON AI
type = ChangeAnim
triggerall = var(19)>numhelper(3000)+numproj
triggerall = (var(10)=4||var(10)=7||var(10)=6||var(10)=2||var(10)=12||var(10)=18)
trigger1=anim=8101
trigger1=VAR(59)
trigger2=anim=8107
trigger2=VAR(59)
value = 8107

[State 0, ChangeAnim];SLIDE 2HMG
type = ChangeAnim
triggerall = (var(10)=15)
trigger1=anim=8109
trigger1=command="x"
trigger2=anim=8111
trigger2=command="x"
value = 8111

[State 0, ChangeAnim];SLIDE 2HMG AI
type = ChangeAnim
triggerall = (var(10)=15)
trigger1=anim=8109
trigger1=VAR(59)
trigger2=anim=8111&&ANIMELEM=3,1
trigger2=VAR(59)
value = 8111


[State 0, VelAdd]
type = VelAdd
trigger1 = anim!=100&&((var(10)=0)||(var(10)=19)||(var(10)=20))
trigger2=anim!=8100&&var(10)>0&&var(10)!=19&&var(10)!=20
x = 1

[State 400, 4]
type = ChangeState
trigger1 = time>=ifelse(palno=5,ifelse((enemynear,const(size.ground.front)>20),(enemynear,const(size.ground.front)),20),20)
value = 11
ctrl=1
;---------------------------------------------------------------------------
;BUYLIFEAI
[Statedef 3000]
type    = u
movetype= I
physics = u
juggle  = 4
ctrl = 1
sprpriority = 2
poweradd=ifelse(fvar(19)=0,-1000,fvar(19))


;abspan = 
;ignorehitpause = 
;persistent = 


[State 0, VarSet]
type = VarSet
trigger1 = time=0
v = 13    ;fv = 10
value = var(13)+1
;ignorehitpause = 
;persistent = 



[State 3000, 7]
type = ChangeState
trigger1 = time=1
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;PARACHUTE
[Statedef 3500]
type    = A
movetype= I
physics = N
juggle  = 3
ctrl = 0
anim = 3514
sprpriority = 0
velset=0,0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = -1

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr =SCA
slot = 0
stateno = 3500
time = -1
forceair = 0

[State 0, BindToRoot]
type = BindToRoot
trigger1 = 1
time = -1;facing = 0
pos = 0,0

[State 0, ChangeAnim];L02
type = ChangeAnim
trigger1 = root,command="holdback"
trigger1 = anim=3511&&animtime=0
value=3510

[State 0, ChangeAnim];L02
type = ChangeAnim
trigger1 = root,command="holdfwd"
trigger1 = anim=3510&&animtime=0
trigger2 = root,command="holdback"
trigger2 = anim=3512&&animtime=0
value=3511

[State 0, ChangeAnim];L03
type = ChangeAnim
trigger1 = root,command="holdfwd"
trigger1 = anim=3511&&animtime=0
trigger2 = root,command="holdback"
trigger2 = anim=3513&&animtime=0
value=3512

[State 0, ChangeAnim];L04
type = ChangeAnim
trigger1 = root,command="holdfwd"
trigger1 = anim=3512&&animtime=0
trigger2 = root,command="holdback"
trigger2 = anim=3514&&animtime=0
value=3513

[State 0, ChangeAnim];REPOSO
type = ChangeAnim
trigger1 = root,command="holdfwd"
trigger1 = anim=3513&&animtime=0
trigger2 = root,command="holdback"
trigger2 = anim=3515&&animtime=0
value=3514

[State 0, ChangeAnim];R01
type = ChangeAnim
trigger1 = root,command="holdfwd"
trigger1 = anim=3514&&animtime=0
trigger2 = root,command="holdback"
trigger2 = anim=3516&&animtime=0
value=3515

[State 0, ChangeAnim];R02
type = ChangeAnim
trigger1 = root,command="holdfwd"
trigger1 = anim=3515&&animtime=0
trigger2 = root,command="holdback"
trigger2 = anim=3517&&animtime=0
value=3516

[State 0, ChangeAnim];R03
type = ChangeAnim
trigger1 = root,command="holdfwd"
trigger1 = anim=3516&&animtime=0
trigger2 = root,command="holdback"
trigger2 = anim=3518&&animtime=0
value=3517

[State 0, ChangeAnim];R04
type = ChangeAnim
trigger1 = root,command="holdfwd"
trigger1 = anim=3517&&animtime=0
value=3518

[State 0, ChangeAnim];PARACHUTEEND
type = ChangeAnim
triggerall=anim!=3519
trigger1 = root,pos y>=0
trigger2 = root,statetype!=A
trigger3 = root,movetype=h
trigger4 = root,command="y"&&time>10
value = 3519

[State 1105]
type = destroyself
trigger1=anim=3519&&animtime=0
trigger2=root,var(10)>99

;---------------------------------------------------------------------------
;==================================================================================================================================================
; Scoring System by RajaaBoy
;==================================================================================================================================================
[Statedef 10000]
type = A
movetype = I
physics = N
ctrl = 0
velset = 0, 0
sprpriority = -65536
 
;========================< Essential State Controllers >========================
 
[State 0, VarSet]
type = VarSet
trigger1 = time
v = 33    ;fv = 10
value = parent,var(51)
;ignorehitpause = 
;persistent = 

[State 0, VarSet]
type = parentVarSet
triggerall=var(0)!=0
trigger1 = 1
v = 49    ;fv = 10
value = var(0)

[State 0, VarSet]
type = VarSet
triggerall=parent,var(49)!=0
trigger1 = 1;roundsexisted=0
v = 0    ;fv = 10
value = parent,var(49)



; Blank Animations
[state 10000, Change Animation]
type = changeanim
trigger1 = anim != 9999
value = 5080
 
; Bind to Parent (Optional)
[state 10000, Parent Bind]
type = bindtoparent
trigger1 = 1
pos = 0, -16
 
; Prevent Getting Hit
[state 10000, Vulnerability]
type = nothitby
trigger1 = 1
value = SCA
time = -1
 
; Return to This State if Miraculously Hit
[state 10000, Hit Override]
type = hitoverride
trigger1 = 1
attr = SCA,AA,AP,AT
stateno = stateno
slot = 0
time = -1
forceair = 0
 
;========================< Calculate Score >========================
; If you want the score to transfer between rounds, just change the varsets and varadds of var(0) and var(1) to parentvarsets and parentvaradds respectively -- 
; the variable triggers would need to be adjusted to be redirection triggers. "Var(0)" would become "parent,var(0)" and "var(1)" would become "parent,var(1)."
; The only variables that would need to changed to be root variables would be var(0) and var(1), everything else can remain the same.
 
; Alternatively, you can even leave var(0) and var(1) the same, and, instead, have var(0) constantly set to a value of its root variable.
; That way you wouldn't need to change the state controllers much, besides adding a "trigger1 = 1" to a varset that sets var(0) to your root's variable.
; Then you could just increase your root's variable from your root's states and the score would follow seamlessly.
 
 ;Reset Score at Beginning of Match
;[state 10000, Reset Score]
;type = varset
;trigger1 = !time && !roundsexisted
;var(0) = 0 + 0 * (var(59) := 0)
 
; Increase Score on Movehit (Change Triggers and Parameters Accordingly)
[state 10000, Increase Score]
type = varadd
trigger1 = root,movehit && var(59) = 0
trigger2 = root,movecontact && var(59) = 0
trigger3=root,projcontact=1<2;&& var(59) = 0
trigger4=var(33)=1;&& var(59) = 0
var(0) =10
 
; Decrease Score on Gethit (Change Triggers and Parameters Accordingly)
[state 10000, Decrease Score]
type = varadd
trigger1 = root,movetype = H && !root,hitover && root,stateno = [5000, 5199]
trigger1 = root,gethitvar(hitshaketime) && root,time <= 1 && var(59) = 0
var(0) = 0
 
; Allow the above state controllers to be activated again
[state 10000, Reset Controller Limiter]
type = varset
trigger1 = 1
var(59) = 0
 
; This limits the state controllers above to activating only during the tick that the score is changed. 
; This state controller should contain the same triggers used to increase AND decrease var(0).
[state 10000, Controller Limiter]
type = varset
trigger1 = root,movehit && var(59) = 0
trigger2 = root,movetype = H && !root,hitover && root,stateno = [5000, 5199]
trigger2 = root,gethitvar(hitshaketime) && root,time <= 1 && var(59) = 0
trigger3 = root,movecontact && var(59) = 0
trigger4=root,projcontact=1<2;&& var(59) = 0
trigger5=var(33)=1
var(59) = 1
 
;========================< Incrementally Calculate Score >========================
 
; Speed of Incrementation
[state 10000, Speed to Reach Actual Score]
type = varset
trigger1 = 1
fvar(0) = (var(0) - var(1)) / 96.0 ; change the divisor accordingly
 
; Optional: 
; Use this variable in the Place Value section below.
; Replace var(0) with var(1) in the Place Value section below to have score increase incrementally instead of instantly.
[state 10000, Incrementally Increase Score]
type = varadd
trigger1 = var(0) != var(1)
var(1) = cond(var(0) > var(1), ceil(fvar(0)), floor(fvar(0)))
 
;========================< Prevent Score from Going out of Bounds >========================
 
; Keep Score bewteen 0 and 999,999,999
[state 10000, Limit Score]
type = varset
trigger1 = var(0) != [0, 999999999]
var(0) = cond(var(0) > 999999999, 999999999, 0)
 
[state 10000, Limit Score]
type = varset
trigger1 = var(1) != [0, 999999999]
var(1) = cond(var(1) > 999999999, 999999999, 0)
 
;========================< Detect Place Values >========================
 
[state 10000, Score For Ones Place]
type = varset
trigger1 = 1
var(2) = floor(var(0) / 1) % 10 ; * 1 ; uncomment to get exact amount of ones
; var(2) = floor(var(1) / 1) % 10 ; incrementally increase score
 
[state 10000, Score For Tens Place]
type = varset
trigger1 = 1
var(3) = floor(var(0) / 10) % 10 ; * 10 ; uncomment to get exact amount of tens
; var(3) = floor(var(1) / 10) % 10 ; incrementally increase score
 
[state 10000, Score For Hundreds Place]
type = varset
trigger1 = 1
var(4) = floor(var(0) / 100) % 10 ; * 100 ; uncomment to get exact amount of hundreds
; var(4) = floor(var(1) / 100) % 10 ; incrementally increase score
 
[state 10000, Score For Thousands Place]
type = varset
trigger1 = 1
var(5) = floor(var(0) / 1000) % 10 ; * 1000 ; uncomment to get exact amount of thousands
; var(5) = floor(var(1) / 1000) % 10 ; incrementally increase score
 
[state 10000, Score For Ten Thousands Place]
type = varset
trigger1 = 1
var(6) = floor(var(0) / 10000) % 10 ; * 10000 ; uncomment to get exact amount of ten thousands
; var(6) = floor(var(1) / 10000) % 10 ; incrementally increase score
 
[state 10000, Score For Hundred Thousands Place]
type = varset
trigger1 = 1
var(7) = floor(var(0) / 100000) % 10 ; * 100000 ; uncomment to get exact amount of hundred thousands
; var(7) = floor(var(1) / 100000) % 10 ; incrementally increase score
 
[state 10000, Score For Millions Place]
type = varset
trigger1 = 1
var(8) = floor(var(0) / 1000000) % 10 ; * 1000000 ; uncomment to get exact amount of millions
; var(8) = floor(var(1) / 1000000) % 10 ; incrementally increase score
 
[state 10000, Score For Ten Millions Place]
type = varset
trigger1 = 1
var(9) = floor(var(0) / 10000000) % 10 ; * 10000000 ; uncomment to get exact amount of ten millions
; var(9) = floor(var(1) / 10000000) % 10 ; incrementally increase score
 
[state 10000, Score For Hundred Millions Place]
type = varset
trigger1 = 1
var(10) = floor(var(0) / 100000000) % 10 ; * 100000000 ; uncomment to get exact amount of hundred millions
; var(10) = floor(var(1) / 100000000) % 10 ; incrementally increase score
 
[state 10000, Score For Billions Place]
type = varset
trigger1 = 1
var(11) = floor(var(0) / 1000000000) % 10 ; * 1000000000 ; uncomment to get exact amount of billions
; var(11) = floor(var(1) / 1000000000) % 10 ; incrementally increase score
 
;========================< Display Score on Screen >========================
; The following code assumes your number fonts have dimensions of 8x8 and are aligned at 0,0 on the axis
; Your air file should have 10 animations that represent numbers 0 - 9 respectively.
; The animations in the air files should be numbered logically. Meaning, they must all have the same basic multiple, like this:
; Sequence A: 10000, 10001, 10002, 10003, 10004, etc
; Sequence B: 10000, 10005, 10010, 10015, 10020, etc
 
; If you chose Sequence A, then you would simply add the variable that corresponds to the place value for your explod to 10000, like so:
; anim = 10000 + var(2) ; ones place
; If var(2) is 1, then it will add 1 to 10000 and the animation that represents the number 1 will be played.
 
; If you chose Sequence B, then you would simply multiply the variable that corresponds to the place value for your explod by 5, and then you would add it to 10000, like so:
; anim = 10000 + 5 * var(2) ; ones place
; If var(2) is 1, then it will add 5 to 10000 and the animation that represents the number 1 will be played.
 
; For this code snippet, we will use Sequence A from above.
 
; Constantly destroys explods so that their animations can change.
; For Some Reason, modifyexplod doesn't allow the changing of explods' animations
[state 10000, Reset]
type = removeexplod
trigger1 = 1
 
[state 10000, Ones];p1 y p2
type = explod
trigger1 = !numexplod(0)
anim = 20010 + var(2)
ID = 0
postype = left
pos = cond(teamside = 1, 72, 312), 58;ceil((1.33 * gameheight / gamewidth) * 0) ; top left of screen for player 1, top right for player 2
bindtime = 1
facing = 1
ownpal = 0
sprpriority = -65536
pausemovetime = -1
supermovetime = -1
ontop=1

 

[state 10000, Tens];p1 y p2
type = explod
trigger1 = !numexplod(1)&&var(0)>9
anim = 20010 + var(3)
ID = 1
postype = left
pos = cond(teamside = 1, 64, 304),58; ceil((1.33 * gameheight / gamewidth) * 0) ; top left of screen for player 1, top right for player 2
bindtime = -1
facing = 1
ownpal = 0
sprpriority = -65536
pausemovetime = -1
supermovetime = -1
ontop=1



[state 10000, Hundreds];p1 y p2
type = explod
trigger1 = !numexplod(2)&&var(0)>99
anim = 20010 + var(4)
ID = 2
postype = left
pos = cond(teamside = 1, 56, 296), 58;ceil((1.33 * gameheight / gamewidth) * 0) ; top left of screen for player 1, top right for player 2
bindtime = -1
facing = 1
ownpal = 0
sprpriority = -65536
pausemovetime = -1
supermovetime = -1
ontop=1



[state 10000, Thousands];p1 y p2
type = explod
trigger1 = !numexplod(3)&&var(0)>999
anim = 20010 + var(5)
ID = 3
postype = left
pos = cond(teamside = 1, 48, 288), 58;ceil((1.33 * gameheight / gamewidth) * 0) ; top left of screen for player 1, top right for player 2
bindtime = -1
facing = 1
ownpal = 0
sprpriority = -65536
pausemovetime = -1
supermovetime = -1
ontop=1


[state 10000, Ten Thousands];p1 y p2
type = explod
trigger1 = !numexplod(4)&&var(0)>9999
anim = 20010 + var(6)
ID = 4
postype = left
pos = cond(teamside = 1, 40, 280),58; ceil((1.33 * gameheight / gamewidth) * 0) ; top left of screen for player 1, top right for player 2
bindtime = -1
facing = 1
ownpal = 0
sprpriority = -65536
pausemovetime = -1
supermovetime = -1
ontop=1



[state 10000, Hundred Thousands];p1 y p2
type = explod
trigger1 = !numexplod(5)&&var(0)>99999
anim = 20010 + var(7)
ID = 5
postype = left
pos = cond(teamside = 1, 32, 272), 58;ceil((1.33 * gameheight / gamewidth) * 0) ; top left of screen for player 1, top right for player 2
bindtime = -1
facing = 1
ownpal = 0
sprpriority = -65536
pausemovetime = -1
supermovetime = -1
ontop=1



[state 10000, Millions];p1 y p2
type = explod
trigger1 = !numexplod(6)&&var(0)>999999
anim = 20010 + var(8)
ID = 6
postype = left
pos = cond(teamside = 1, 24, 264), 58;ceil((1.33 * gameheight / gamewidth) * 0) ; top left of screen for player 1, top right for player 2
bindtime = -1
facing = 1
ownpal = 0
sprpriority = -65536
pausemovetime = -1
supermovetime = -1
ontop=1



[state 10000, Ten Millions];p1 y p2
type = explod
trigger1 = !numexplod(7)&&var(0)>9999999
anim = 20010 + var(9)
ID = 7
postype = left
pos = cond(teamside = 1, 16, 256), 58;ceil((1.33 * gameheight / gamewidth) * 0) ; top left of screen for player 1, top right for player 2
bindtime = -1
facing = 1
ownpal = 0
sprpriority = -65536
pausemovetime = -1
supermovetime = -1
ontop=1



[state 10000, Hundred Millions];p1 y p2
type = explod
trigger1 = !numexplod(8)&&var(0)>99999999
anim = 20010 + var(10)
ID = 8
postype = left
pos = cond(teamside = 1, 8, 248), 58;ceil((1.33 * gameheight / gamewidth) * 0) ; top left of screen for player 1, top right for player 2
bindtime = -1
facing = 1
ownpal = 0
sprpriority = -65536
pausemovetime = -1
supermovetime = -1
ontop=1



[state 10000, Billions];p1 y p2
type = explod
trigger1 = !numexplod(9)&&var(0)>999999999
anim = 20010 + var(11)
ID = 9
postype = left
pos = cond(teamside = 1, 0, 240), 58;ceil((1.33 * gameheight / gamewidth) * 0) ; top left of screen for player 1, top right for player 2
bindtime = -1
facing = 1
ownpal = 0
sprpriority = -65536
pausemovetime = -1
supermovetime = -1
ontop=1


;========================< Reset Score System >========================
 



[state 10000, Destroy Explod]
type = removeexplod
trigger1 = time >= 65535
trigger2=win;lose||win
;trigger3=stateno=181||root,stateno=182
[state 10000, Destroy Helper]
type = destroyself
trigger1 = time >= 65535
trigger2=win;lose||win;root,stateno=181||root,stateno=182
;trigger3=stateno=181||root,stateno=182

;========================< Debug Information >========================
; 
;[state 10000, Display System]
;type = displaytoclipboard
;trigger1 = 1
;text = "Score = %d / %d / %f || RajaaBoy la 33%d\n"
;params = var(0), var(1), fvar(0),var(33)
; 
;[state 10000, Display System]
;type = appendtoclipboard
;trigger1 = 1
;text = "Place Values = %d,%d,%d,%d,%d,%d,"
;params = var(11), var(10), var(9), var(8), var(7), var(6)
; 
;[state 10000, Display System]
;type = appendtoclipboard
;trigger1 = 1
;text = "%d,%d,%d,%d"
;params = var(5), var(4), var(3), var(2)


;==================================================================================================================================================
; Scoring System by RajaaBoy p3 y p4
;==================================================================================================================================================
[Statedef 10001]
type = A
movetype = I
physics = N
ctrl = 0
velset = 0, 0
sprpriority = -65536
 
;========================< Essential State Controllers >========================
 
[State 0, VarSet]
type = VarSet
trigger1 = time
v = 33    ;fv = 10
value = parent,var(51)
;ignorehitpause = 
;persistent = 

[State 0, VarSet]
type = parentVarSet
triggerall=var(0)!=0
trigger1 = 1
v = 49    ;fv = 10
value = var(0)

[State 0, VarSet]
type = VarSet
trigger1 = 1;roundsexisted=0
v = 0    ;fv = 10
value = parent,var(49)



; Blank Animations
[state 10000, Change Animation]
type = changeanim
trigger1 = anim != 9999
value = 5080
 
; Bind to Parent (Optional)
[state 10000, Parent Bind]
type = bindtoparent
trigger1 = 1
pos = 0, -16
 
; Prevent Getting Hit
[state 10000, Vulnerability]
type = nothitby
trigger1 = 1
value = SCA
time = -1
 
; Return to This State if Miraculously Hit
[state 10000, Hit Override]
type = hitoverride
trigger1 = 1
attr = SCA,AA,AP,AT
stateno = stateno
slot = 0
time = -1
forceair = 0
 
;========================< Calculate Score >========================
; If you want the score to transfer between rounds, just change the varsets and varadds of var(0) and var(1) to parentvarsets and parentvaradds respectively -- 
; the variable triggers would need to be adjusted to be redirection triggers. "Var(0)" would become "parent,var(0)" and "var(1)" would become "parent,var(1)."
; The only variables that would need to changed to be root variables would be var(0) and var(1), everything else can remain the same.
 
; Alternatively, you can even leave var(0) and var(1) the same, and, instead, have var(0) constantly set to a value of its root variable.
; That way you wouldn't need to change the state controllers much, besides adding a "trigger1 = 1" to a varset that sets var(0) to your root's variable.
; Then you could just increase your root's variable from your root's states and the score would follow seamlessly.
 
 ;Reset Score at Beginning of Match
;[state 10000, Reset Score]
;type = varset
;trigger1 = !time && !roundsexisted
;var(0) = 0 + 0 * (var(59) := 0)
 
; Increase Score on Movehit (Change Triggers and Parameters Accordingly)
[state 10000, Increase Score]
type = varadd
trigger1 = root,movehit && var(59) = 0
trigger2 = root,movecontact && var(59) = 0
trigger3=root,projcontact=1<2;&& var(59) = 0
trigger4=var(33)=1;&& var(59) = 0
var(0) =10
 
; Decrease Score on Gethit (Change Triggers and Parameters Accordingly)
[state 10000, Decrease Score]
type = varadd
trigger1 = root,movetype = H && !root,hitover && root,stateno = [5000, 5199]
trigger1 = root,gethitvar(hitshaketime) && root,time <= 1 && var(59) = 0
var(0) = 0
 
; Allow the above state controllers to be activated again
[state 10000, Reset Controller Limiter]
type = varset
trigger1 = 1
var(59) = 0
 
; This limits the state controllers above to activating only during the tick that the score is changed. 
; This state controller should contain the same triggers used to increase AND decrease var(0).
[state 10000, Controller Limiter]
type = varset
trigger1 = root,movehit && var(59) = 0
trigger2 = root,movetype = H && !root,hitover && root,stateno = [5000, 5199]
trigger2 = root,gethitvar(hitshaketime) && root,time <= 1 && var(59) = 0
trigger3 = root,movecontact && var(59) = 0
trigger4=root,projcontact=1<2;&& var(59) = 0
trigger5=var(33)=1
var(59) = 1
 
;========================< Incrementally Calculate Score >========================
 
; Speed of Incrementation
[state 10000, Speed to Reach Actual Score]
type = varset
trigger1 = 1
fvar(0) = (var(0) - var(1)) / 96.0 ; change the divisor accordingly
 
; Optional: 
; Use this variable in the Place Value section below.
; Replace var(0) with var(1) in the Place Value section below to have score increase incrementally instead of instantly.
[state 10000, Incrementally Increase Score]
type = varadd
trigger1 = var(0) != var(1)
var(1) = cond(var(0) > var(1), ceil(fvar(0)), floor(fvar(0)))
 
;========================< Prevent Score from Going out of Bounds >========================
 
; Keep Score bewteen 0 and 999,999,999
[state 10000, Limit Score]
type = varset
trigger1 = var(0) != [0, 999999999]
var(0) = cond(var(0) > 999999999, 999999999, 0)
 
[state 10000, Limit Score]
type = varset
trigger1 = var(1) != [0, 999999999]
var(1) = cond(var(1) > 999999999, 999999999, 0)
 
;========================< Detect Place Values >========================
 
[state 10000, Score For Ones Place]
type = varset
trigger1 = 1
var(2) = floor(var(0) / 1) % 10 ; * 1 ; uncomment to get exact amount of ones
; var(2) = floor(var(1) / 1) % 10 ; incrementally increase score
 
[state 10000, Score For Tens Place]
type = varset
trigger1 = 1
var(3) = floor(var(0) / 10) % 10 ; * 10 ; uncomment to get exact amount of tens
; var(3) = floor(var(1) / 10) % 10 ; incrementally increase score
 
[state 10000, Score For Hundreds Place]
type = varset
trigger1 = 1
var(4) = floor(var(0) / 100) % 10 ; * 100 ; uncomment to get exact amount of hundreds
; var(4) = floor(var(1) / 100) % 10 ; incrementally increase score
 
[state 10000, Score For Thousands Place]
type = varset
trigger1 = 1
var(5) = floor(var(0) / 1000) % 10 ; * 1000 ; uncomment to get exact amount of thousands
; var(5) = floor(var(1) / 1000) % 10 ; incrementally increase score
 
[state 10000, Score For Ten Thousands Place]
type = varset
trigger1 = 1
var(6) = floor(var(0) / 10000) % 10 ; * 10000 ; uncomment to get exact amount of ten thousands
; var(6) = floor(var(1) / 10000) % 10 ; incrementally increase score
 
[state 10000, Score For Hundred Thousands Place]
type = varset
trigger1 = 1
var(7) = floor(var(0) / 100000) % 10 ; * 100000 ; uncomment to get exact amount of hundred thousands
; var(7) = floor(var(1) / 100000) % 10 ; incrementally increase score
 
[state 10000, Score For Millions Place]
type = varset
trigger1 = 1
var(8) = floor(var(0) / 1000000) % 10 ; * 1000000 ; uncomment to get exact amount of millions
; var(8) = floor(var(1) / 1000000) % 10 ; incrementally increase score
 
[state 10000, Score For Ten Millions Place]
type = varset
trigger1 = 1
var(9) = floor(var(0) / 10000000) % 10 ; * 10000000 ; uncomment to get exact amount of ten millions
; var(9) = floor(var(1) / 10000000) % 10 ; incrementally increase score
 
[state 10000, Score For Hundred Millions Place]
type = varset
trigger1 = 1
var(10) = floor(var(0) / 100000000) % 10 ; * 100000000 ; uncomment to get exact amount of hundred millions
; var(10) = floor(var(1) / 100000000) % 10 ; incrementally increase score
 
[state 10000, Score For Billions Place]
type = varset
trigger1 = 1
var(11) = floor(var(0) / 1000000000) % 10 ; * 1000000000 ; uncomment to get exact amount of billions
; var(11) = floor(var(1) / 1000000000) % 10 ; incrementally increase score
 
;========================< Display Score on Screen >========================
; The following code assumes your number fonts have dimensions of 8x8 and are aligned at 0,0 on the axis
; Your air file should have 10 animations that represent numbers 0 - 9 respectively.
; The animations in the air files should be numbered logically. Meaning, they must all have the same basic multiple, like this:
; Sequence A: 10000, 10001, 10002, 10003, 10004, etc
; Sequence B: 10000, 10005, 10010, 10015, 10020, etc
 
; If you chose Sequence A, then you would simply add the variable that corresponds to the place value for your explod to 10000, like so:
; anim = 10000 + var(2) ; ones place
; If var(2) is 1, then it will add 1 to 10000 and the animation that represents the number 1 will be played.
 
; If you chose Sequence B, then you would simply multiply the variable that corresponds to the place value for your explod by 5, and then you would add it to 10000, like so:
; anim = 10000 + 5 * var(2) ; ones place
; If var(2) is 1, then it will add 5 to 10000 and the animation that represents the number 1 will be played.
 
; For this code snippet, we will use Sequence A from above.
 
; Constantly destroys explods so that their animations can change.
; For Some Reason, modifyexplod doesn't allow the changing of explods' animations
[state 10000, Reset]
type = removeexplod
trigger1 = 1
 

[state 10000, Ones];p3 y p4
type = explod
trigger1 = !numexplod(0)
anim = 20010 + var(2)
ID = 0
postype = left
pos = cond(teamside = 1, 72, 312), 83;ceil((1.33 * gameheight / gamewidth) * 0) ; top left of screen for player 1, top right for player 2
bindtime = 1
facing = 1
ownpal = 0
sprpriority = -65536
pausemovetime = -1
supermovetime = -1
ontop=1



[state 10000, Tens];p3 y p4
type = explod
trigger1 = !numexplod(1)&&var(0)>9
anim = 20010 + var(3)
ID = 1
postype = left
pos = cond(teamside = 1, 64, 304),83; ceil((1.33 * gameheight / gamewidth) * 0) ; top left of screen for player 1, top right for player 2
bindtime = -1
facing = 1
ownpal = 0
sprpriority = -65536
pausemovetime = -1
supermovetime = -1
ontop=1



[state 10000, Hundreds];p3 y p4
type = explod
trigger1 = !numexplod(2)&&var(0)>99
anim = 20010 + var(4)
ID = 2
postype = left
pos = cond(teamside = 1, 56, 296), 83;ceil((1.33 * gameheight / gamewidth) * 0) ; top left of screen for player 1, top right for player 2
bindtime = -1
facing = 1
ownpal = 0
sprpriority = -65536
pausemovetime = -1
supermovetime = -1
ontop=1


[state 10000, Thousands];p3 y p4
type = explod
trigger1 = !numexplod(3)&&var(0)>999
anim = 20010 + var(5)
ID = 3
postype = left
pos = cond(teamside = 1, 48, 288), 83;ceil((1.33 * gameheight / gamewidth) * 0) ; top left of screen for player 1, top right for player 2
bindtime = -1
facing = 1
ownpal = 0
sprpriority = -65536
pausemovetime = -1
supermovetime = -1
ontop=1



[state 10000, Ten Thousands];p3 y p4
type = explod
trigger1 = !numexplod(4)&&var(0)>9999
anim = 20010 + var(6)
ID = 4
postype = left
pos = cond(teamside = 1, 40, 280),83; ceil((1.33 * gameheight / gamewidth) * 0) ; top left of screen for player 1, top right for player 2
bindtime = -1
facing = 1
ownpal = 0
sprpriority = -65536
pausemovetime = -1
supermovetime = -1
ontop=1



[state 10000, Hundred Thousands];p3 y p4
type = explod
trigger1 = !numexplod(5)&&var(0)>99999
anim = 20010 + var(7)
ID = 5
postype = left
pos = cond(teamside = 1, 32, 272), 83;ceil((1.33 * gameheight / gamewidth) * 0) ; top left of screen for player 1, top right for player 2
bindtime = -1
facing = 1
ownpal = 0
sprpriority = -65536
pausemovetime = -1
supermovetime = -1
ontop=1


 
[state 10000, Millions];p3 y p4
type = explod
trigger1 = !numexplod(6)&&var(0)>999999
anim = 20010 + var(8)
ID = 6
postype = left
pos = cond(teamside = 1, 24, 264), 83;ceil((1.33 * gameheight / gamewidth) * 0) ; top left of screen for player 1, top right for player 2
bindtime = -1
facing = 1
ownpal = 0
sprpriority = -65536
pausemovetime = -1
supermovetime = -1
ontop=1



[state 10000, Ten Millions];p3 y p4
type = explod
trigger1 = !numexplod(7)&&var(0)>9999999
anim = 20010 + var(9)
ID = 7
postype = left
pos = cond(teamside = 1, 16, 256), 83;ceil((1.33 * gameheight / gamewidth) * 0) ; top left of screen for player 1, top right for player 2
bindtime = -1
facing = 1
ownpal = 0
sprpriority = -65536
pausemovetime = -1
supermovetime = -1
ontop=1



[state 10000, Hundred Millions];p3 y p4
type = explod
trigger1 = !numexplod(8)&&var(0)>99999999
anim = 20010 + var(10)
ID = 8
postype = left
pos = cond(teamside = 1, 8, 248), 83;ceil((1.33 * gameheight / gamewidth) * 0) ; top left of screen for player 1, top right for player 2
bindtime = -1
facing = 1
ownpal = 0
sprpriority = -65536
pausemovetime = -1
supermovetime = -1
ontop=1



[state 10000, Billions];p3 y p4
type = explod
trigger1 = !numexplod(9)&&var(0)>999999999
anim = 20010 + var(11)
ID = 9
postype = left
pos = cond(teamside = 1, 0, 240), 83;ceil((1.33 * gameheight / gamewidth) * 0) ; top left of screen for player 1, top right for player 2
bindtime = -1
facing = 1
ownpal = 0
sprpriority = -65536
pausemovetime = -1
supermovetime = -1
ontop=1

;========================< Reset Score System >========================
 



[state 10000, Destroy Explod]
type = removeexplod
trigger1 = time >= 65535
trigger2=win;lose||win
[state 10000, Destroy Helper]
type = destroyself
trigger1 = time >= 65535
trigger2=win;lose||win
;========================< Debug Information >========================
 
;[state 10000, Display System]
;type = displaytoclipboard
;trigger1 = 1
;text = "Score = %d / %d / %f || RajaaBoy la 33%d\n"
;params = var(0), var(1), fvar(0),var(33)
; 
;[state 10000, Display System]
;type = appendtoclipboard
;trigger1 = 1
;text = "Place Values = %d,%d,%d,%d,%d,%d,"
;params = var(11), var(10), var(9), var(8), var(7), var(6)
; 
;[state 10000, Display System]
;type = appendtoclipboard
;trigger1 = 1
;text = "%d,%d,%d,%d"
;params = var(5), var(4), var(3), var(2)
